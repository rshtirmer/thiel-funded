const oo="strudel.log";let m9=1e3,tc,nc;function wa(e,t="cyclist"){yt(`[${t}] error: ${e.message}`)}function yt(e,t,n={}){let s=performance.now();tc===e&&s-nc<m9||(tc=e,nc=s,console.log(`%c${e}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(oo,{detail:{message:e,type:t,data:n}})))}yt.key=oo;typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const le=BigInt(0),ve=BigInt(1),ma=BigInt(2),wi=BigInt(5),Et=BigInt(10),f9=2e3,q={s:ve,n:le,d:ve};function Sn(e,t){try{e=BigInt(e)}catch{throw Hn()}return e*t}function $t(e){return typeof e=="bigint"?e:Math.floor(e)}function tt(e,t){if(t===le)throw uo();const n=Object.create(Ue.prototype);n.s=e<le?-ve:ve,e=e<le?-e:e;const s=ss(e,t);return n.n=e/s,n.d=t/s,n}function Xs(e){const t={};let n=e,s=ma,a=wi-ve;for(;a<=n;){for(;n%s===le;)n/=s,t[s]=(t[s]||le)+ve;a+=ve+ma*s++}return n!==e?n>1&&(t[n]=(t[n]||le)+ve):t[e]=(t[e]||le)+ve,t}const mt=function(e,t){let n=le,s=ve,a=ve;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Hn();if(e%1!==0)throw sc();n=BigInt(e)}if(typeof t=="bigint")s=t;else{if(isNaN(t))throw Hn();if(t%1!==0)throw sc();s=BigInt(t)}a=n*s}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),s=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(s=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw Hn();a=n*s}else if(typeof e=="number"){if(isNaN(e))throw Hn();if(e<0&&(a=-ve,e=-e),e%1===0)n=BigInt(e);else if(e>0){let r=1,i=0,o=1,u=1,c=1,h=1e7;for(e>=1&&(r=10**Math.floor(1+Math.log10(e)),e/=r);o<=h&&c<=h;){let d=(i+u)/(o+c);if(e===d){o+c<=h?(n=i+u,s=o+c):c>o?(n=u,s=c):(n=i,s=o);break}else e>d?(i+=u,o+=c):(u+=i,c+=o),o>h?(n=u,s=c):(n=i,s=o)}n=BigInt(n)*BigInt(r),s=BigInt(s)}}else if(typeof e=="string"){let r=0,i=le,o=le,u=le,c=ve,h=ve,d=e.replace(/_/g,"").match(/\d+|./g);if(d===null)throw Hn();if(d[r]==="-"?(a=-ve,r++):d[r]==="+"&&r++,d.length===r+1?o=Sn(d[r++],a):d[r+1]==="."||d[r]==="."?(d[r]!=="."&&(i=Sn(d[r++],a)),r++,(r+1===d.length||d[r+1]==="("&&d[r+3]===")"||d[r+1]==="'"&&d[r+3]==="'")&&(o=Sn(d[r],a),c=Et**BigInt(d[r].length),r++),(d[r]==="("&&d[r+2]===")"||d[r]==="'"&&d[r+2]==="'")&&(u=Sn(d[r+1],a),h=Et**BigInt(d[r+1].length)-ve,r+=3)):d[r+1]==="/"||d[r+1]===":"?(o=Sn(d[r],a),c=Sn(d[r+2],ve),r+=3):d[r+3]==="/"&&d[r+1]===" "&&(i=Sn(d[r],a),o=Sn(d[r+2],a),c=Sn(d[r+4],ve),r+=5),d.length<=r)s=c*h,a=n=u+s*i+h*o;else throw Hn()}else if(typeof e=="bigint")n=e,a=e,s=ve;else throw Hn();if(s===le)throw uo();q.s=a<le?-ve:ve,q.n=n<le?-n:n,q.d=s<le?-s:s};function y9(e,t,n){let s=ve;for(;t>le;e=e*e%n,t>>=ve)t&ve&&(s=s*e%n);return s}function g9(e,t){for(;t%ma===le;t/=ma);for(;t%wi===le;t/=wi);if(t===ve)return le;let n=Et%t,s=1;for(;n!==ve;s++)if(n=n*Et%t,s>f9)return le;return BigInt(s)}function b9(e,t,n){let s=ve,a=y9(Et,n,t);for(let r=0;r<300;r++){if(s===a)return BigInt(r);s=s*Et%t,a=a*Et%t}return 0}function ss(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function Ue(e,t){if(mt(e,t),this instanceof Ue)e=ss(q.d,q.n),this.s=q.s,this.n=q.n/e,this.d=q.d/e;else return tt(q.s*q.n,q.d)}var uo=function(){return new Error("Division by Zero")},Hn=function(){return new Error("Invalid argument")},sc=function(){return new Error("Parameters must be integer")};Ue.prototype={s:ve,n:le,d:ve,abs:function(){return tt(this.n,this.d)},neg:function(){return tt(-this.s*this.n,this.d)},add:function(e,t){return mt(e,t),tt(this.s*this.n*q.d+q.s*this.d*q.n,this.d*q.d)},sub:function(e,t){return mt(e,t),tt(this.s*this.n*q.d-q.s*this.d*q.n,this.d*q.d)},mul:function(e,t){return mt(e,t),tt(this.s*q.s*this.n*q.n,this.d*q.d)},div:function(e,t){return mt(e,t),tt(this.s*q.s*this.n*q.d,this.d*q.n)},clone:function(){return tt(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return tt(this.s*this.n%this.d,ve);if(mt(e,t),le===q.n*this.d)throw uo();return tt(this.s*(q.d*this.n)%(q.n*this.d),q.d*this.d)},gcd:function(e,t){return mt(e,t),tt(ss(q.n,this.n)*ss(q.d,this.d),q.d*this.d)},lcm:function(e,t){return mt(e,t),q.n===le&&this.n===le?tt(le,ve):tt(q.n*this.n,ss(q.n,this.n)*ss(q.d,this.d))},inverse:function(){return tt(this.s*this.d,this.n)},pow:function(e,t){if(mt(e,t),q.d===ve)return q.s<le?tt((this.s*this.d)**q.n,this.n**q.n):tt((this.s*this.n)**q.n,this.d**q.n);if(this.s<le)return null;let n=Xs(this.n),s=Xs(this.d),a=ve,r=ve;for(let i in n)if(i!=="1"){if(i==="0"){a=le;break}if(n[i]*=q.n,n[i]%q.d===le)n[i]/=q.d;else return null;a*=BigInt(i)**n[i]}for(let i in s)if(i!=="1"){if(s[i]*=q.n,s[i]%q.d===le)s[i]/=q.d;else return null;r*=BigInt(i)**s[i]}return q.s<le?tt(r,a):tt(a,r)},log:function(e,t){if(mt(e,t),this.s<=le||q.s<=le)return null;const n={},s=Xs(q.n),a=Xs(q.d),r=Xs(this.n),i=Xs(this.d);for(const c in a)s[c]=(s[c]||le)-a[c];for(const c in i)r[c]=(r[c]||le)-i[c];for(const c in s)c!=="1"&&(n[c]=!0);for(const c in r)c!=="1"&&(n[c]=!0);let o=null,u=null;for(const c in n){const h=s[c]||le,d=r[c]||le;if(h===le){if(d!==le)return null;continue}let m=d,g=h;const y=ss(m,g);if(m/=y,g/=y,o===null&&u===null)o=m,u=g;else if(m*u!==o*g)return null}return o!==null&&u!==null?tt(o,u):null},equals:function(e,t){return mt(e,t),this.s*this.n*q.d===q.s*q.n*this.d},lt:function(e,t){return mt(e,t),this.s*this.n*q.d<q.s*q.n*this.d},lte:function(e,t){return mt(e,t),this.s*this.n*q.d<=q.s*q.n*this.d},gt:function(e,t){return mt(e,t),this.s*this.n*q.d>q.s*q.n*this.d},gte:function(e,t){return mt(e,t),this.s*this.n*q.d>=q.s*q.n*this.d},compare:function(e,t){mt(e,t);let n=this.s*this.n*q.d-q.s*q.n*this.d;return(le<n)-(n<le)},ceil:function(e){return e=Et**BigInt(e||0),tt($t(this.s*e*this.n/this.d)+(e*this.n%this.d>le&&this.s>=le?ve:le),e)},floor:function(e){return e=Et**BigInt(e||0),tt($t(this.s*e*this.n/this.d)-(e*this.n%this.d>le&&this.s<le?ve:le),e)},round:function(e){return e=Et**BigInt(e||0),tt($t(this.s*e*this.n/this.d)+this.s*((this.s>=le?ve:le)+ma*(e*this.n%this.d)>this.d?ve:le),e)},roundTo:function(e,t){mt(e,t);const n=this.n*q.d,s=this.d*q.n,a=n%s;let r=$t(n/s);return a+a>=s&&r++,tt(this.s*r*q.n,q.d)},divisible:function(e,t){return mt(e,t),!(!(q.n*this.d)||this.n*q.d%(q.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let s=g9(t,n),a=b9(t,n,s),r=this.s<le?"-":"";if(r+=$t(t/n),t%=n,t*=Et,t&&(r+="."),s){for(let i=a;i--;)r+=$t(t/n),t%=n,t*=Et;r+="(";for(let i=s;i--;)r+=$t(t/n),t%=n,t*=Et;r+=")"}else for(let i=e;t&&i--;)r+=$t(t/n),t%=n,t*=Et;return r},toFraction:function(e){let t=this.n,n=this.d,s=this.s<le?"-":"";if(n===ve)s+=t;else{let a=$t(t/n);e&&a>le&&(s+=a,s+=" ",t%=n),s+=t,s+="/",s+=n}return s},toLatex:function(e){let t=this.n,n=this.d,s=this.s<le?"-":"";if(n===ve)s+=t;else{let a=$t(t/n);e&&a>le&&(s+=a,t%=n),s+="\\frac{",s+=t,s+="}{",s+=n,s+="}"}return s},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push($t(e/t));let s=e%t;e=t,t=s}while(e!==ve);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),s=n.toContinued();for(let a=1;a<s.length;a++){let r=tt(s[a-1],ve);for(let o=a-2;o>=0;o--)r=r.inverse().add(s[o]);let i=r.sub(n);if(i.n*t<i.d)return r.mul(this.s)}return this}};const M9=e=>/^[a-gA-G][#bsf]*[0-9]*$/.test(e),ms=e=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(e),Bl=e=>{if(typeof e!="string")return[];const[t,n="",s]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return t?[t,n,s?Number(s):void 0]:[]},x9={c:0,d:2,e:4,f:5,g:7,a:9,b:11},C9={"#":1,b:-1,s:1,f:-1},co=e=>e?.split("").reduce((t,n)=>t+C9[n],0)||0,yn=(e,t=3)=>{const[n,s,a=t]=Bl(e);if(!n)throw new Error('not a note: "'+e+'"');const r=x9[n.toLowerCase()],i=co(s);return(Number(a)+1)*12+r+i},Ds=e=>Math.pow(2,(e-69)/12)*440,lo=e=>12*Math.log(e/440)/Math.LN2+69,G9=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=e;if(typeof n=="number")return lo(n);if(typeof s=="string")return yn(s);if(typeof s=="number")return s;if(!t)throw new Error("valueToMidi: expected freq or note to be set");return t},P9=(e,t)=>(e-t)*1e3,zl=e=>Ds(typeof e=="number"?e:yn(e)),v9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],X9=e=>{const t=Math.floor(e/12)-1;return v9[e%12]+t},jt=(e,t)=>(e%t+t)%t,Wl=e=>e.reduce((t,n)=>t+n)/e.length;function Nl(e,t=0){return isNaN(Number(e))?(yt(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const w9=(e,t)=>jt(Math.round(Nl(e??0,0)),t),Z9=e=>{let{value:t,context:n}=e,s=t;if(typeof s=="object"&&!Array.isArray(s)&&(s=s.note||s.n||s.value,s===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(t)}`);if(typeof s=="number"&&n.type!=="frequency")s=Ds(e.value);else if(typeof s=="number"&&n.type==="frequency")s=e.value;else if(typeof s!="string"||!ms(s))throw new Error("not a note: "+JSON.stringify(s));return s},Tl=e=>{let{value:t,context:n}=e;if(typeof t=="object")return t.freq?t.freq:zl(t.note||t.n||t.value);if(typeof t=="number"&&n.type!=="frequency")t=Ds(e.value);else if(typeof t=="string"&&ms(t))t=Ds(yn(e.value));else if(typeof t!="number")throw new Error("not a note or frequency: "+t);return t},Il=(e,t)=>e.slice(t).concat(e.slice(0,t)),Yl=(...e)=>e.reduce((t,n)=>(...s)=>t(n(...s)),t=>t),F9=(...e)=>Yl(...e.reverse()),fs=e=>e.filter(t=>t!=null),Ln=e=>[].concat(...e),Zs=e=>e,A9=(e,t)=>e,Za=(e,t)=>Array.from({length:t-e+1},(n,s)=>s+e);function Xe(e,t,n=e.length){const s=function a(...r){if(r.length>=n)return e.apply(this,r);{const i=function(...o){return a.apply(this,r.concat(o))};return t&&t(i,r),i}};return t&&t(s,[]),s}function po(e){const t=Number(e);if(!isNaN(t))return t;if(ms(e))return yn(e);throw new Error(`cannot parse as numeral: "${e}"`)}function ho(e,t){return(...n)=>e(...n.map(t))}function Bt(e){return ho(e,po)}function Hl(e){const t=Number(e);if(!isNaN(t))return t;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[e];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${e}"`)}const S9=e=>ho(e,Hl),mo=function(e,t){return[t.slice(0,e),t.slice(e)]},gr=(e,t,n)=>t.map((s,a)=>e(s,n[a])),Kl=function(e){const t=[];for(let n=0;n<e.length-1;++n)t.push([e[n],e[n+1]]);return t},br=(e,t,n)=>Math.min(Math.max(e,t),n),D9=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],L9=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],E9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],k9=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],R9=["I","Ro","Ha","Ni","Ho","He","To"],V9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],B9=(e,t="letters")=>{const n=(t==="solfeggio"?D9:t==="indian"?L9:t==="german"?E9:t==="byzantine"?k9:t==="japanese"?R9:V9)[e%12],s=Math.floor(e/12)-1;return n+s};function z9(e){var t={};return e.filter(function(n){return t.hasOwn(n)?!1:t[n]=!0})}function W9(e){return e.sort().filter(function(t,n,s){return!n||t!=s[n-1]})}function _l(e){return e.sort((t,n)=>t.compare(n)).filter(function(t,n,s){return!n||t.ne(s[n-1])})}function jl(e){const t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...t))}function Ul(e){const t=new Uint8Array(atob(e).split("").map(n=>n.charCodeAt(0)));return new TextDecoder().decode(t)}function N9(e){return encodeURIComponent(jl(e))}function T9(e){return Ul(decodeURIComponent(e))}function Jl(e,t){return Array.isArray(e)?e.map(t):Object.fromEntries(Object.entries(e).map(([n,s],a)=>[n,t(s,n,a)]))}function Zi(e,t){return e/t}class Ol{constructor({getTargetClockTime:t=Y9,weight:n=16,offsetDelta:s=.005,checkAfterTime:a=2,resetAfterTime:r=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=t,this.weight=n,this.offsetDelta=s,this.checkAfterTime=a,this.resetAfterTime=r,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(t){const n=this.getTargetClockTime(),s=n-this.timeAtPrevOffsetSample,a=n-t;if(s>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=a),this.prevOffsetTimes.push(a),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||s>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const r=Wl(this.prevOffsetTimes);Math.abs(r-this.offsetTime)>this.offsetDelta&&(this.offsetTime=r)}return this.offsetTime}calculateTimestamp(t,n){return this.calculateOffset(t)+n}}function I9(){return performance.now()*.001}function Y9(){return Date.now()*.001}const Ql=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let ea;function ql(){if(ea==null){if(typeof window>"u")return;ea={},window.addEventListener("keydown",e=>{ea[e.key]=!0}),window.addEventListener("keyup",e=>{ea[e.key]=!1})}return{...ea}}function fo(e,t=!1){return typeof e=="object"?t?JSON.stringify(e).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(e):e}Ue.prototype.sam=function(){return this.floor()};Ue.prototype.nextSam=function(){return this.sam().add(1)};Ue.prototype.wholeCycle=function(){return new ot(this.sam(),this.nextSam())};Ue.prototype.cyclePos=function(){return this.sub(this.sam())};Ue.prototype.lt=function(e){return this.compare(e)<0};Ue.prototype.gt=function(e){return this.compare(e)>0};Ue.prototype.lte=function(e){return this.compare(e)<=0};Ue.prototype.gte=function(e){return this.compare(e)>=0};Ue.prototype.eq=function(e){return this.compare(e)==0};Ue.prototype.ne=function(e){return this.compare(e)!=0};Ue.prototype.max=function(e){return this.gt(e)?this:e};Ue.prototype.maximum=function(...e){return e=e.map(t=>new Ue(t)),e.reduce((t,n)=>n.max(t),this)};Ue.prototype.min=function(e){return this.lt(e)?this:e};Ue.prototype.mulmaybe=function(e){return e!==void 0?this.mul(e):void 0};Ue.prototype.divmaybe=function(e){return e!==void 0?this.div(e):void 0};Ue.prototype.addmaybe=function(e){return e!==void 0?this.add(e):void 0};Ue.prototype.submaybe=function(e){return e!==void 0?this.sub(e):void 0};Ue.prototype.show=function(){return this.s*this.n+"/"+this.d};Ue.prototype.or=function(e){return this.eq(0)?e:this};const U=e=>Ue(e),H9=(...e)=>{if(e=fs(e),e.length!==0)return e.reduce((t,n)=>t.gcd(n),U(1))},sn=(...e)=>{if(e=fs(e),e.length===0)return;const t=e.pop();return e.reduce((n,s)=>n===void 0||s===void 0?void 0:n.lcm(s),t)},K9=e=>e instanceof Ue;U._original=Ue;class ot{constructor(t,n){this.begin=U(t),this.end=U(n)}get spanCycles(){const t=[];var n=this.begin;const s=this.end,a=s.sam();if(n.equals(s))return[new ot(n,s)];for(;s.gt(n);){if(n.sam().equals(a)){t.push(new ot(n,this.end));break}const r=n.nextSam();t.push(new ot(n,r)),n=r}return t}get duration(){return this.end.sub(this.begin)}cycleArc(){const t=this.begin.cyclePos(),n=t.add(this.duration);return new ot(t,n)}withTime(t){return new ot(t(this.begin),t(this.end))}withEnd(t){return new ot(this.begin,t(this.end))}withCycle(t){const n=this.begin.sam(),s=n.add(t(this.begin.sub(n))),a=n.add(t(this.end.sub(n)));return new ot(s,a)}intersection(t){const n=this.begin.max(t.begin),s=this.end.min(t.end);if(!n.gt(s)&&!(n.equals(s)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(t.end)&&t.begin.lt(t.end))))return new ot(n,s)}intersection_e(t){const n=this.intersection(t);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(U(2)))}equals(t){return this.begin.equals(t.begin)&&this.end.equals(t.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Qe{constructor(t,n,s,a={},r=!1){this.whole=t,this.part=n,this.value=s,this.context=a,this.stateful=r,r&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let t;return typeof this.value?.duration=="number"?t=U(this.value.duration):t=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?t.mul(this.value.clip):t}get endClipped(){return this.whole.begin.add(this.duration)}isActive(t){return this.whole.begin<=t&&this.endClipped>=t}isInPast(t){return t>this.endClipped}isInNearPast(t,n){return n-t<=this.endClipped}isInFuture(t){return t<this.whole.begin}isInNearFuture(t,n){return n<this.whole.begin&&n>this.whole.begin-t}isWithinTime(t,n){return this.whole.begin<=n&&this.endClipped>=t}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(t){const n=this.whole?t(this.whole):void 0;return new Qe(n,t(this.part),this.value,this.context)}withValue(t){return new Qe(this.whole,this.part,t(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(t){return this.context.tags?.includes(t)}resolveState(t){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[s,a]=n(t);return[s,new Qe(this.whole,this.part,a,this.context,!1)]}return[t,this]}spanEquals(t){return this.whole==null&&t.whole==null||this.whole.equals(t.whole)}equals(t){return this.spanEquals(t)&&this.part.equals(t.part)&&this.value===t.value}show(t=!1){const n=typeof this.value=="object"?t?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var s="";if(this.whole==null)s="~"+this.part.show;else{var a=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(s=this.whole.begin.show()+" ⇜ "),a||(s+="("),s+=this.part.show(),a||(s+=")"),this.whole.end.equals(this.part.end)||(s+=" ⇝ "+this.whole.end.show())}return"[ "+s+" | "+n+" ]"}showWhole(t=!1){return`${this.whole==null?"~":this.whole.show()}: ${fo(this.value,t)}`}combineContext(t){const n=this;return{...n.context,...t.context,locations:(n.context.locations||[]).concat(t.context.locations||[])}}setContext(t){return new Qe(this.whole,this.part,this.value,t)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class Ls{constructor(t,n={}){this.span=t,this.controls=n}setSpan(t){return new Ls(t,this.controls)}withSpan(t){return this.setSpan(t(this.span))}setControls(t){return new Ls(this.span,{...this.controls,...t})}}function _9(e,t,n){if(t?.value!==void 0&&Object.keys(t).length===1)return yt("[warn]: Can't do arithmetic on control pattern."),e;const s=Object.keys(e).filter(a=>Object.keys(t).includes(a));return Object.assign({},e,t,Object.fromEntries(s.map(a=>[a,n(e[a],t[a])])))}Xe((e,t)=>e*t);Xe((e,t)=>t.map(e));function $l(e,t=60){let n=0,s=U(0),a=[""],r="";for(;a[0].length<t;){const i=e.queryArc(n,n+1),o=i.filter(h=>h.hasOnset()).map(h=>h.duration),u=H9(...o),c=u.inverse();a=a.map(h=>h+"|"),r+="|";for(let h=0;h<c;h++){const[d,m]=[s,s.add(u)],g=i.filter(C=>C.whole.begin.lte(d)&&C.whole.end.gte(m)),y=g.length-a.length;y>0&&(a=a.concat(Array(y).fill(r))),a=a.map((C,X)=>{const S=g[X];if(S){const L=S.whole.begin.eq(d)?""+S.value:"-";return C+L}return C+"."}),r+=".",s=s.add(u)}n++}return a.join(`
`)}const yo={},rr=async(...e)=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="fulfilled").map(s=>s.value);return t.forEach((s,a)=>{s.status==="rejected"&&console.warn(`evalScope: module with index ${a} could not be loaded:`,s.reason)}),n.forEach(s=>{Object.entries(s).forEach(([a,r])=>{globalThis[a]=r,yo[a]=r})}),n};function j9(e,t={}){const{wrapExpression:n=!0,wrapAsync:s=!0}=t;n&&(e=`{${e}}`),s&&(e=`(async ()=>${e})()`);const a=`"use strict";return (${e})`;return Function(a)()}const ep=async(e,t,n)=>{let s={};if(t){const a=t(e,n);e=a.output,s=a}return{mode:"javascript",pattern:await j9(e,{wrapExpression:!!t}),meta:s}};let Fi,Nt=!0;const U9=function(e){Nt=!!e},tp=e=>Fi=e;let H=class ft{constructor(t,n=void 0){this.query=t,this._Pattern=!0,this._steps=n}get _steps(){return this.__steps}set _steps(t){this.__steps=t===void 0?void 0:U(t)}setSteps(t){return this._steps=t,this}withSteps(t){return Nt?new ft(this.query,this._steps===void 0?void 0:t(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(t){const n=new ft(s=>this.query(s).map(a=>a.withValue(t)));return n._steps=this._steps,n}withState(t){return new ft(n=>this.query(t(n)))}fmap(t){return this.withValue(t)}appWhole(t,n){const s=this,a=function(r){const i=s.query(r),o=n.query(r),u=function(c,h){const d=c.part.intersection(h.part);if(d!=null)return new Qe(t(c.whole,h.whole),d,c.value(h.value),h.combineContext(c))};return Ln(i.map(c=>fs(o.map(h=>u(c,h)))))};return new ft(a)}appBoth(t){const n=this,s=function(r,i){if(!(r==null||i==null))return r.intersection_e(i)},a=n.appWhole(s,t);return Nt&&(a._steps=sn(t._steps,n._steps)),a}appLeft(t){const n=this,s=function(r){const i=[];for(const o of n.query(r)){const u=t.query(r.setSpan(o.wholeOrPart()));for(const c of u){const h=o.whole,d=o.part.intersection(c.part);if(d){const m=o.value(c.value),g=c.combineContext(o),y=new Qe(h,d,m,g);i.push(y)}}}return i},a=new ft(s);return a._steps=this._steps,a}appRight(t){const n=this,s=function(r){const i=[];for(const o of t.query(r)){const u=n.query(r.setSpan(o.wholeOrPart()));for(const c of u){const h=o.whole,d=c.part.intersection(o.part);if(d){const m=c.value(o.value),g=o.combineContext(c),y=new Qe(h,d,m,g);i.push(y)}}}return i},a=new ft(s);return a._steps=t._steps,a}bindWhole(t,n){const s=this,a=function(r){const i=function(u,c){return new Qe(t(u.whole,c.whole),c.part,c.value,Object.assign({},u.context,c.context,{locations:(u.context.locations||[]).concat(c.context.locations||[])}))},o=function(u){return n(u.value).query(r.setSpan(u.part)).map(c=>i(u,c))};return Ln(s.query(r).map(u=>o(u)))};return new ft(a)}bind(t){const n=function(s,a){if(!(s==null||a==null))return s.intersection_e(a)};return this.bindWhole(n,t)}join(){return this.bind(Zs)}outerBind(t){return this.bindWhole(n=>n,t).setSteps(this._steps)}outerJoin(){return this.outerBind(Zs)}innerBind(t){return this.bindWhole((n,s)=>s,t)}innerJoin(){return this.innerBind(Zs)}resetJoin(t=!1){const n=this;return new ft(s=>n.discreteOnly().query(s).map(a=>a.value.late(t?a.whole.begin:a.whole.begin.cyclePos()).query(s).map(r=>new Qe(r.whole?r.whole.intersection(a.whole):void 0,r.part.intersection(a.part),r.value).setContext(a.combineContext(r))).filter(r=>r.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const t=this;function n(s){const a=t.discreteOnly().query(s);function r(i){const o=i.value._focusSpan(i.wholeOrPart()).query(s.setSpan(i.part));function u(c,h){let d;if(h.whole&&c.whole&&(d=h.whole.intersection(c.whole),!d))return;const m=h.part.intersection(c.part);if(!m)return;const g=h.combineContext(c);return new Qe(d,m,h.value,g)}return o.map(c=>u(i,c))}return Ln(a.map(r)).filter(i=>i)}return new ft(n)}squeezeBind(t){return this.fmap(t).squeezeJoin()}polyJoin=function(){const t=this;return t.fmap(n=>n.extend(t._steps.div(n._steps))).outerJoin()};polyBind(t){return this.fmap(t).polyJoin()}queryArc(t,n,s={}){try{return this.query(new Ls(new ot(t,n),s))}catch(a){return wa(a,"query"),[]}}splitQueries(){const t=this,n=s=>Ln(s.span.spanCycles.map(a=>t.query(s.setSpan(a))));return new ft(n)}withQuerySpan(t){return new ft(n=>this.query(n.withSpan(t)))}withQuerySpanMaybe(t){const n=this;return new ft(s=>{const a=s.withSpan(t);return a.span?n.query(a):[]})}withQueryTime(t){return new ft(n=>this.query(n.withSpan(s=>s.withTime(t))))}withHapSpan(t){return new ft(n=>this.query(n).map(s=>s.withSpan(t)))}withHapTime(t){return this.withHapSpan(n=>n.withTime(t))}withHaps(t){const n=new ft(s=>t(this.query(s),s));return n._steps=this._steps,n}withHap(t){return this.withHaps(n=>n.map(t))}setContext(t){return this.withHap(n=>n.setContext(t))}withContext(t){const n=this.withHap(s=>s.setContext(t(s.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(t=>t.setContext({}))}withLoc(t,n){const s={start:t,end:n},a=this.withContext(r=>{const i=(r.locations||[]).concat([s]);return{...r,locations:i}});return this.__pure&&(a.__pure=this.__pure,a.__pure_loc=s),a}filterHaps(t){return new ft(n=>this.query(n).filter(t))}filterValues(t){return new ft(n=>this.query(n).filter(s=>t(s.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(t=>t!=null)}onsetsOnly(){return this.filterHaps(t=>t.hasOnset())}discreteOnly(){return this.filterHaps(t=>t.whole)}defragmentHaps(){return this.discreteOnly().withHaps(t=>{const n=[];for(var s=0;s<t.length;++s){for(var a=!0,r=t[s];a;){const u=JSON.stringify(t[s].value);for(var i=!1,o=s+1;o<t.length;o++){const c=t[o];if(r.whole.equals(c.whole)){if(r.part.begin.eq(c.part.end)){if(u===JSON.stringify(c.value)){r=new Qe(r.whole,new ot(c.part.begin,r.part.end),r.value),t.splice(o,1),i=!0;break}}else if(c.part.begin.eq(r.part.end)&&u==JSON.stringify(c.value)){r=new Qe(r.whole,new ot(r.part.begin,c.part.end),r.value),t.splice(o,1),i=!0;break}}}a=i}n.push(r)}return n})}firstCycle(t=!1){var n=this;return t||(n=n.stripContext()),n.query(new Ls(new ot(U(0),U(1))))}get firstCycleValues(){return this.firstCycle().map(t=>t.value)}get showFirstCycle(){return this.firstCycle().map(t=>`${t.value}: ${t.whole.begin.toFraction()} - ${t.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(t=>t.sort((n,s)=>n.part.begin.sub(s.part.begin).or(n.part.end.sub(s.part.end)).or(n.whole.begin.sub(s.whole.begin).or(n.whole.end.sub(s.whole.end)))))}asNumber(){return this.fmap(po)}_opIn(t,n){return this.fmap(n).appLeft(j(t))}_opOut(t,n){return this.fmap(n).appRight(j(t))}_opMix(t,n){return this.fmap(n).appBoth(j(t))}_opSqueeze(t,n){const s=j(t);return this.fmap(a=>s.fmap(r=>n(a)(r))).squeezeJoin()}_opSqueezeOut(t,n){const s=this;return j(t).fmap(a=>s.fmap(r=>n(r)(a))).squeezeJoin()}_opReset(t,n){return j(t).fmap(s=>this.fmap(a=>n(a)(s))).resetJoin()}_opRestart(t,n){return j(t).fmap(s=>this.fmap(a=>n(a)(s))).restartJoin()}_opPoly(t,n){const s=j(t);return this.fmap(a=>s.fmap(r=>n(r)(a))).polyJoin()}layer(...t){return qe(...t.map(n=>n(this)))}superimpose(...t){return this.stack(...t.map(n=>n(this)))}stack(...t){return qe(this,...t)}sequence(...t){return un(this,...t)}seq(...t){return un(this,...t)}cat(...t){return fa(this,...t)}fastcat(...t){return Xt(this,...t)}slowcat(...t){return Qn(this,...t)}onTrigger(t,n=!0){return this.withHap(s=>s.setContext({...s.context,onTrigger:(...a)=>{s.context.onTrigger?.(...a),t(...a)},dominantTrigger:s.context.dominantTrigger||n}))}log(t=s=>`[hap] ${s.showWhole(!0)}`,n=s=>({hap:s})){return this.onTrigger((...s)=>{yt(t(...s),void 0,n(...s))},!1)}logValues(t=n=>`[hap] ${fo(n,!0)}`){return this.log(n=>t(n.value))}drawLine(){return console.log($l(this)),this}unjoin(t,n=Zs){return t.withHap(s=>s.withValue(a=>a?n(this.ribbon(s.whole.begin,s.whole.duration)):this))}into(t,n){return this.unjoin(t,n).innerJoin()}};function J9(e,t){let n=[];return t.forEach(s=>{const a=n.findIndex(([r])=>e(s,r));a===-1?n.push([s]):n[a].push(s)}),n}const O9=(e,t)=>e.spanEquals(t);H.prototype.collect=function(){return this.withHaps(e=>J9(O9,e).map(t=>new Qe(t[0].whole,t[0].part,t,{})))};const Q9=k("arpWith",(e,t)=>t.collect().fmap(n=>j(e(n))).innerJoin().withHap(n=>new Qe(n.whole,n.part,n.value.value,n.combineContext(n.value)))),q9=k("arp",(e,t)=>t.arpWith(n=>j(e).fmap(s=>n[s%n.length])),!1);function Ha(e){return!Array.isArray(e)&&typeof e=="object"&&!K9(e)}function $9(e,t,n){return Ha(e)||Ha(t)?(Ha(e)||(e={value:e}),Ha(t)||(t={value:t}),_9(e,t,n)):n(e,t)}(function(){const e={set:[(n,s)=>s],keep:[n=>n],keepif:[(n,s)=>s?n:void 0],add:[Bt((n,s)=>n+s)],sub:[Bt((n,s)=>n-s)],mul:[Bt((n,s)=>n*s)],div:[Bt((n,s)=>n/s)],mod:[Bt(jt)],pow:[Bt(Math.pow)],log2:[Bt(Math.log2)],band:[Bt((n,s)=>n&s)],bor:[Bt((n,s)=>n|s)],bxor:[Bt((n,s)=>n^s)],blshift:[Bt((n,s)=>n<<s)],brshift:[Bt((n,s)=>n>>s)],lt:[(n,s)=>n<s],gt:[(n,s)=>n>s],lte:[(n,s)=>n<=s],gte:[(n,s)=>n>=s],eq:[(n,s)=>n==s],eqt:[(n,s)=>n===s],ne:[(n,s)=>n!=s],net:[(n,s)=>n!==s],and:[(n,s)=>n&&s],or:[(n,s)=>n||s],func:[(n,s)=>s(n)]},t=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[s,a]]of Object.entries(e)){H.prototype["_"+n]=function(r){return this.fmap(i=>s(i,r))},Object.defineProperty(H.prototype,n,{get:function(){const r=this,i=(...o)=>r[n].in(...o);for(const o of t)i[o.toLowerCase()]=function(...u){var c=r;u=un(u),a&&(c=a(c),u=a(u));var h;return n==="keepif"?(h=c["_op"+o](u,d=>m=>s(d,m)),h=h.removeUndefineds()):h=c["_op"+o](u,d=>m=>$9(d,m,s)),h};return i.squeezein=i.squeeze,i}});for(const r of t)H.prototype[r.toLowerCase()]=function(...i){return this.set[r.toLowerCase()](i)}}H.prototype.struct=function(...n){return this.keepif.out(...n)},H.prototype.structAll=function(...n){return this.keep.out(...n)},H.prototype.mask=function(...n){return this.keepif.in(...n)},H.prototype.maskAll=function(...n){return this.keep.in(...n)},H.prototype.reset=function(...n){return this.keepif.reset(...n)},H.prototype.resetAll=function(...n){return this.keep.reset(...n)},H.prototype.restart=function(...n){return this.keepif.restart(...n)},H.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const eC=qe,tC=qe,nC=Mr,Ws=e=>new H(()=>[],e),Ie=Ws(1),on=Ws(0);function _e(e){function t(s){return s.span.spanCycles.map(a=>new Qe(U(a.begin).wholeCycle(),a,e))}const n=new H(t,1);return n.__pure=e,n}function go(e){return e instanceof H||e?._Pattern}function j(e){return go(e)?e:Fi&&typeof e=="string"?Fi(e):_e(e)}function np(e){let t=_e([]);for(const n of e)t=t.bind(s=>n.fmap(a=>s.concat([a])));return t}function qe(...e){e=e.map(s=>Array.isArray(s)?un(...s):j(s));const t=s=>Ln(e.map(a=>a.query(s))),n=new H(t);return Nt&&(n._steps=sn(...e.map(s=>s._steps))),n}function bo(e,t){if(t=t.map(r=>Array.isArray(r)?un(...r):j(r)),t.length===0)return Ie;if(t.length===1)return t[0];const[n,...s]=t.map(r=>r._steps),a=Nt?n.maximum(...s):void 0;return qe(...e(a,t))}function sp(...e){return bo((t,n)=>n.map(s=>s._steps.eq(t)?s:kt(s,Ws(t.sub(s._steps)))),e)}function ap(...e){return bo((t,n)=>n.map(s=>s._steps.eq(t)?s:kt(Ws(t.sub(s._steps)),s)),e)}function rp(...e){return bo((t,n)=>n.map(s=>{if(s._steps.eq(t))return s;const a=Ws(t.sub(s._steps).div(2));return kt(a,s,a)}),e)}function sC(e,...t){const[n,...s]=t.map(i=>i._steps),a=n.maximum(...s),r={centre:rp,left:sp,right:ap,expand:qe,repeat:(...i)=>Mr(...i).steps(a)};return e.inhabit(r).fmap(i=>i(...t)).innerJoin().setSteps(a)}function Qn(...e){if(e=e.map(s=>Array.isArray(s)?Xt(...s):j(s)),e.length==1)return e[0];const t=function(s){const a=s.span,r=jt(a.begin.sam(),e.length),i=e[r];if(!i)return[];const o=a.begin.floor().sub(a.begin.div(e.length).floor());return i.withHapTime(u=>u.add(o)).query(s.setSpan(a.withTime(u=>u.sub(o))))},n=Nt?sn(...e.map(s=>s._steps)):void 0;return new H(t).splitQueries().setSteps(n)}function Mo(...e){e=e.map(j);const t=function(n){const s=Math.floor(n.span.begin)%e.length;return e[s]?.query(n)||[]};return new H(t).splitQueries()}function fa(...e){return Qn(...e)}function aC(...e){const t=e.reduce((n,[s])=>n+s,0);return e=e.map(([n,s])=>[n,s.fast(n)]),kt(...e).slow(t)}function rC(...e){let t=U(0);for(let n of e)n.length==2&&n.unshift(t),t=n[1];return qe(...e.map(([n,s,a])=>_e(j(a)).compress(U(n).div(t),U(s).div(t)))).slow(t).innerJoin()}function Xt(...e){let t=Qn(...e);return e.length>1&&(t=t._fast(e.length),t._steps=e.length),e.length==1&&e[0].__steps_source&&(e._steps=e[0]._steps),t}function un(...e){return Xt(...e)}function ip(...e){return Xt(...e)}function Ai(e){return Array.isArray(e)?e.length==0?[Ie,0]:e.length==1?Ai(e[0]):[Xt(...e.map(t=>Ai(t)[0])),e.length]:[j(e),1]}const iC=Xe((e,t)=>j(t).mask(e)),oC=Xe((e,t)=>j(t).struct(e)),uC=Xe((e,t)=>j(t).superimpose(...e)),cC=Xe((e,t)=>j(t).withValue(e)),lC=Xe((e,t)=>j(t).bind(e)),pC=Xe((e,t)=>j(t).innerBind(e)),hC=Xe((e,t)=>j(t).outerBind(e)),dC=Xe((e,t)=>j(t).squeezeBind(e)),mC=Xe((e,t)=>j(t).stepBind(e)),fC=Xe((e,t)=>j(t).polyBind(e)),yC=Xe((e,t)=>j(t).set(e)),gC=Xe((e,t)=>j(t).keep(e)),bC=Xe((e,t)=>j(t).keepif(e)),MC=Xe((e,t)=>j(t).add(e)),xC=Xe((e,t)=>j(t).sub(e)),CC=Xe((e,t)=>j(t).mul(e)),GC=Xe((e,t)=>j(t).div(e)),PC=Xe((e,t)=>j(t).mod(e)),vC=Xe((e,t)=>j(t).pow(e)),XC=Xe((e,t)=>j(t).band(e)),wC=Xe((e,t)=>j(t).bor(e)),ZC=Xe((e,t)=>j(t).bxor(e)),FC=Xe((e,t)=>j(t).blshift(e)),AC=Xe((e,t)=>j(t).brshift(e)),SC=Xe((e,t)=>j(t).lt(e)),DC=Xe((e,t)=>j(t).gt(e)),LC=Xe((e,t)=>j(t).lte(e)),EC=Xe((e,t)=>j(t).gte(e)),kC=Xe((e,t)=>j(t).eq(e)),RC=Xe((e,t)=>j(t).eqt(e)),VC=Xe((e,t)=>j(t).ne(e)),BC=Xe((e,t)=>j(t).net(e)),zC=Xe((e,t)=>j(t).and(e)),WC=Xe((e,t)=>j(t).or(e)),NC=Xe((e,t)=>j(t).func(e));function k(e,t,n=!0,s=!1,a=r=>r.innerJoin()){if(Array.isArray(e)){const u={};for(const c of e)u[c]=k(c,t,n,s,a);return u}const r=t.length;var i;n?i=function(...u){u=u.map(j);const c=u[u.length-1];let h;if(r===1)h=t(c);else{const d=u.slice(0,-1);if(d.every(m=>m.__pure!=null)){const m=d.map(y=>y.__pure),g=d.filter(y=>y.__pure_loc).map(y=>y.__pure_loc);h=t(...m,c),h=h.withContext(y=>{const C=(y.locations||[]).concat(g);return{...y,locations:C}})}else{const[m,...g]=d;let y=(...C)=>t(...C,c);y=Xe(y,null,r-1),h=a(g.reduce((C,X)=>C.appLeft(X),m.fmap(y)))}}return s&&(h._steps=c._steps),h}:i=function(...u){u=u.map(j);const c=t(...u);return s&&(c._steps=u[u.length-1]._steps),c},H.prototype[e]=function(...u){if(r===2&&u.length!==1)u=[un(...u)];else if(r!==u.length+1)throw new Error(`.${e}() expects ${r-1} inputs but got ${u.length}.`);return u=u.map(j),i(...u,this)},r>1&&(H.prototype["_"+e]=function(...u){const c=t(...u,this);return s&&c.setSteps(this._steps),c});const o=Xe(i,null,r);return yo[e]=o,o}function Ns(e,t,n=!0,s=!1,a=r=>r.stepJoin()){return k(e,t,n,s,a)}const TC=k("round",function(e){return e.asNumber().fmap(t=>Math.round(t))}),IC=k("floor",function(e){return e.asNumber().fmap(t=>Math.floor(t))}),YC=k("ceil",function(e){return e.asNumber().fmap(t=>Math.ceil(t))}),HC=k("toBipolar",function(e){return e.fmap(t=>t*2-1)}),KC=k("fromBipolar",function(e){return e.fmap(t=>(t+1)/2)}),_C=k("range",function(e,t,n){return n.mul(t-e).add(e)}),jC=k("rangex",function(e,t,n){return n._range(Math.log(e),Math.log(t)).fmap(Math.exp)}),UC=k("range2",function(e,t,n){return n.fromBipolar()._range(e,t)}),JC=k("ratio",e=>e.fmap(t=>Array.isArray(t)?t.slice(1).reduce((n,s)=>n/s,t[0]):t)),OC=k("compress",function(e,t,n){return e=U(e),t=U(t),e.gt(t)||e.gt(1)||t.gt(1)||e.lt(0)||t.lt(0)?Ie:n._fastGap(U(1).div(t.sub(e)))._late(e)}),{compressSpan:QC,compressspan:qC}=k(["compressSpan","compressspan"],function(e,t){return t._compress(e.begin,e.end)}),{fastGap:$C,fastgap:eG}=k(["fastGap","fastgap"],function(e,t){const n=function(a){const r=a.begin.sam(),i=a.begin.sub(r).mul(e).min(1),o=a.end.sub(r).mul(e).min(1);if(!(i>=1))return new ot(r.add(i),r.add(o))},s=function(a){const r=a.part.begin,i=a.part.end,o=r.sam(),u=r.sub(o).div(e).min(1),c=i.sub(o).div(e).min(1),h=new ot(o.add(u),o.add(c)),d=a.whole?new ot(h.begin.sub(r.sub(a.whole.begin).div(e)),h.end.add(a.whole.end.sub(i).div(e))):void 0;return new Qe(d,h,a.value,a.context)};return t.withQuerySpanMaybe(n).withHap(s).splitQueries()}),tG=k("focus",function(e,t,n){return e=U(e),t=U(t),n._early(e.sam())._fast(U(1).div(t.sub(e)))._late(e)}),{focusSpan:nG,focusspan:sG}=k(["focusSpan","focusspan"],function(e,t){return t._focus(e.begin,e.end)}),aG=k("ply",function(e,t){const n=t.fmap(s=>_e(s)._fast(e)).squeezeJoin();return Nt&&(n._steps=U(e).mulmaybe(t._steps)),n}),{fast:rG,density:$R}=k(["fast","density"],function(e,t){return e===0?Ie:(e=U(e),t.withQueryTime(n=>n.mul(e)).withHapTime(n=>n.div(e)).setSteps(t._steps))},!0,!0),iG=k("hurry",function(e,t){return t._fast(e).mul(_e({speed:e}))}),{slow:oG,sparsity:uG}=k(["slow","sparsity"],function(e,t){return e===0?Ie:t._fast(U(1).div(e))}),cG=k("inside",function(e,t,n){return t(n._slow(e))._fast(e)}),lG=k("outside",function(e,t,n){return t(n._fast(e))._slow(e)}),pG=k("lastOf",function(e,t,n){const s=Array(e-1).fill(n);return s.push(t(n)),Mo(...s)}),{firstOf:hG,every:dG}=k(["firstOf","every"],function(e,t,n){const s=Array(e-1).fill(n);return s.unshift(t(n)),Mo(...s)}),mG=k("apply",function(e,t){return e(t)}),fG=k("cpm",function(e,t){return t._fast(e/60/1)}),yG=k("early",function(e,t){return e=U(e),t.withQueryTime(n=>n.add(e)).withHapTime(n=>n.sub(e))},!0,!0),op=k("late",function(e,t){return e=U(e),t._early(U(0).sub(e))},!0,!0),gG=k("zoom",function(e,t,n){if(t=U(t),e=U(e),e.gte(t))return on;const s=t.sub(e),a=Nt?n._steps?.mulmaybe(s):void 0;return n.withQuerySpan(r=>r.withCycle(i=>i.mul(s).add(e))).withHapSpan(r=>r.withCycle(i=>i.sub(e).div(s))).splitQueries().setSteps(a)}),{zoomArc:bG,zoomarc:MG}=k(["zoomArc","zoomarc"],function(e,t){return t.zoom(e.begin,e.end)}),xG=k("bite",(e,t,n)=>t.fmap(s=>a=>{const r=U(s).div(a).mod(1),i=r.add(U(1).div(a));return n.zoom(r,i)}).appLeft(e).squeezeJoin(),!1),CG=k("linger",function(e,t){return e==0?Ie:e<0?t._zoom(e.add(1),1)._slow(e):t._zoom(0,e)._slow(e)},!0,!0),{segment:GG,seg:PG}=k(["segment","seg"],function(e,t){return t.struct(_e(!0)._fast(e)).setSteps(e)}),vG=k("swingBy",(e,t,n)=>n.inside(t,op(ip(0,e/2)))),XG=k("swing",(e,t)=>t.swingBy(1/3,e)),{invert:wG,inv:ZG}=k(["invert","inv"],function(e){return e.fmap(t=>!t)},!0,!0),FG=k("when",function(e,t,n){return e?t(n):n}),AG=k("off",function(e,t,n){return qe(n,t(n.late(e)))}),SG=k("brak",function(e){return e.when(Qn(!1,!0),t=>Xt(t,Ie)._late(.25))}),up=k("rev",function(e){const t=function(n){const s=n.span,a=s.begin.sam(),r=s.begin.nextSam(),i=function(o){const u=o.withTime(h=>a.add(r.sub(h))),c=u.begin;return u.begin=u.end,u.end=c,u};return e.query(n.setSpan(i(s))).map(o=>o.withSpan(i))};return new H(t).splitQueries()},!1,!0),DG=k("revv",function(e){const t=n=>new ot(U(0).sub(n.end),U(0).sub(n.begin));return e.withQuerySpan(t).withHapSpan(t)}),LG=k("pressBy",function(e,t){return t.fmap(n=>_e(n).compress(e,1)).squeezeJoin()}),EG=k("press",function(e){return e._pressBy(.5)});H.prototype.hush=function(){return Ie};const kG=k("palindrome",function(e){return e.lastOf(2,up)},!0,!0),{juxBy:RG,juxby:VG}=k(["juxBy","juxby"],function(e,t,n){e/=2;const s=function(i,o,u){return o in i?i[o]:u},a=n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)-e})),r=t(n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)+e})));return qe(a,r).setSteps(Nt?sn(a._steps,r._steps):void 0)}),BG=k("jux",function(e,t){return t._juxBy(1,e,t)}),{echoWith:zG,echowith:WG,stutWith:NG,stutwith:TG}=k(["echoWith","echowith","stutWith","stutwith"],function(e,t,n,s){return qe(...Za(0,e-1).map(a=>n(s.late(U(t).mul(a)),a)))}),IG=k("echo",function(e,t,n,s){return s._echoWith(e,t,(a,r)=>a.gain(Math.pow(n,r)))}),YG=k("stut",function(e,t,n,s){return s._echoWith(e,n,(a,r)=>a.gain(Math.pow(t,r)))}),cp=k("applyN",function(e,t,n){let s=n;for(let a=0;a<e;a++)s=t(s);return s}),HG=k(["plyWith","plywith"],function(e,t,n){const s=n.fmap(a=>fa(...Za(0,e-1).map(r=>cp(r,t,a)))._fast(e)).squeezeJoin();return Nt&&(s._steps=U(e).mulmaybe(n._steps)),s}),KG=k(["plyForEach","plyforeach"],function(e,t,n){const s=n.fmap(a=>fa(fa(_e(a),...Za(1,e-1).map(r=>t(_e(a),r))))._fast(e)).squeezeJoin();return Nt&&(s._steps=U(e).mulmaybe(n._steps)),s}),xo=function(e,t,n=!1){return e=U(e),Qn(...Za(0,e.sub(1)).map(s=>n?t.late(U(s).div(e)):t.early(U(s).div(e))))},_G=k("iter",function(e,t){return xo(e,t,!1)},!0,!0),{iterBack:jG,iterback:UG}=k(["iterBack","iterback"],function(e,t){return xo(e,t,!0)},!0,!0),{repeatCycles:JG}=k("repeatCycles",function(e,t){return new H(function(n){const s=n.span.begin.sam(),a=s.div(e).sam(),r=s.sub(a);return n=n.withSpan(i=>i.withTime(o=>o.sub(r))),t.query(n).map(i=>i.withSpan(o=>o.withTime(u=>u.add(r))))}).splitQueries()},!0,!0),Co=function(e,t,n,s=!1,a=!1){const r=Array(e-1).fill(!1);r.unshift(!0);const i=xo(e,un(...r),!s);return a||(n=n.repeatCycles(e)),n.when(i,t)},{chunk:OG,slowchunk:QG,slowChunk:qG}=k(["chunk","slowchunk","slowChunk"],function(e,t,n){return Co(e,t,n,!1,!1)},!0,!0),{chunkBack:$G,chunkback:eP}=k(["chunkBack","chunkback"],function(e,t,n){return Co(e,t,n,!0)},!0,!0),{fastchunk:tP,fastChunk:nP}=k(["fastchunk","fastChunk"],function(e,t,n){return Co(e,t,n,!1,!0)},!0,!0),{chunkinto:sP,chunkInto:aP}=k(["chunkinto","chunkInto"],function(e,t,n){return n.into(Xt(!0,...Array(e-1).fill(!1))._iterback(e),t)}),{chunkbackinto:rP,chunkBackInto:iP}=k(["chunkbackinto","chunkBackInto"],function(e,t,n){return n.into(Xt(!0,...Array(e-1).fill(!1))._iter(e)._early(1),t)}),oP=k("bypass",function(e,t){return e=!!parseInt(e),e?Ie:t},!0,!0),{ribbon:uP,rib:cP}=k(["ribbon","rib"],(e,t,n)=>n.early(e).restart(_e(1).slow(t))),lP=k("hsla",(e,t,n,s,a)=>a.color(`hsla(${e}turn,${t*100}%,${n*100}%,${s})`)),pP=k("hsl",(e,t,n,s)=>s.color(`hsl(${e}turn,${t*100}%,${n*100}%)`));H.prototype.tag=function(e){return this.withContext(t=>({...t,tags:(t.tags||[]).concat([e])}))};const hP=k("filter",(e,t)=>t.withHaps(n=>n.filter(e))),dP=k("filterWhen",(e,t)=>t.filter(n=>e(n.whole.begin))),mP=k("within",(e,t,n,s)=>qe(n(s.filterWhen(a=>a.cyclePos()>=e&&a.cyclePos()<=t)),s.filterWhen(a=>a.cyclePos()<e||a.cyclePos()>t)));H.prototype.stepJoin=function(){const e=this,t=kt(...Si(Di(e.queryArc(0,1))))._steps,n=function(s){const a=e.early(s.span.begin.sam()).query(s.setSpan(new ot(U(0),U(1))));return kt(...Si(Di(a))).query(s)};return new H(n,t)};H.prototype.stepBind=function(e){return this.fmap(e).stepJoin()};function Si(e){const t=e.filter((r,i)=>i.hasSteps).reduce((r,i)=>r.add(i),U(0)),n=fs(e.map((r,i)=>i._steps)).reduce((r,i)=>r.add(i),U(0)),s=t.eq(0)?void 0:n.div(t);function a(r,i){return i._steps===void 0?[r.mulmaybe(s),i]:[i._steps,i]}return e.map(r=>a(...r))}function Di(e){const t=Ln(e.map(s=>[s.part.begin,s.part.end])),n=_l([U(0),U(1),...t]);return Kl(n).map(s=>[s[1].sub(s[0]),qe(...lp(new ot(...s),e).map(a=>a.value.withHap(r=>r.setContext(r.combineContext(a)))))])}function lp(e,t){return fs(t.map(n=>pp(e,n)))}function pp(e,t){const n=e.intersection(t.part);if(n!=null)return new Qe(t.whole,n,t.value,t.context)}const hp=k("pace",function(e,t){return t._steps===void 0?t:t._steps.eq(U(0))?on:t._fast(U(e).div(t._steps)).setSteps(e)});function dp(e,...t){const n=t.map(a=>Ai(a));if(n.length==0)return Ie;e==0&&(e=n[0][1]);const s=[];for(const a of n)a[1]!=0&&(e==a[1]?s.push(a[0]):s.push(a[0]._fast(U(e).div(U(a[1])))));return qe(...s)}function Mr(...e){if(Array.isArray(e[0]))return dp(0,...e);if(e=e.filter(s=>s.hasSteps),e.length==0)return Ie;const t=sn(...e.map(s=>s._steps));if(t.eq(U(0)))return on;const n=qe(...e.map(s=>s.pace(t)));return n._steps=t,n}function kt(...e){if(e.length===0)return on;const t=i=>Array.isArray(i)?i:[i._steps??1,i];if(e=e.map(t),e.find(i=>i[0]===void 0)){const i=e.map(u=>u[0]).filter(u=>u!==void 0);if(i.length===0)return Xt(...e.map(u=>u[1]));if(i.length===e.length)return on;const o=i.reduce((u,c)=>u.add(c),U(0)).div(i.length);for(let u of e)u[0]===void 0&&(u[0]=o)}if(e.length==1)return j(e[0][1]).withSteps(i=>e[0][0]);const n=e.map(i=>i[0]).reduce((i,o)=>i.add(o),U(0));let s=U(0);const a=[];for(const[i,o]of e){if(U(i).eq(0))continue;const u=s.add(i);a.push(j(o)._compress(s.div(n),u.div(n))),s=u}const r=qe(...a);return r._steps=n,r}function mp(...e){e=e.map(a=>Array.isArray(a)?a.map(j):[j(a)]);const t=sn(...e.map(a=>U(a.length)));let n=[];for(let a=0;a<t;++a)n.push(...e.map(r=>r.length==0?Ie:r[a%r.length]));n=n.filter(a=>a.hasSteps&&a._steps>0);const s=n.reduce((a,r)=>a.add(r._steps),U(0));return n=kt(...n),n._steps=s,n}const fp=Ns("take",function(e,t){if(!t.hasSteps||t._steps.lte(0)||(e=U(e),e.eq(0)))return on;const n=e<0;n&&(e=e.abs());const s=e.div(t._steps);return s.lte(0)?on:s.gte(1)?t:n?t.zoom(U(1).sub(s),1):t.zoom(0,s)}),yp=Ns("drop",function(e,t){return t.hasSteps?(e=U(e),e.lt(0)?t.take(t._steps.add(e)):t.take(U(0).sub(t._steps.sub(e)))):on}),gp=Ns("extend",function(e,t){return t.fast(e).expand(e)}),fP=Ns("replicate",function(e,t){return t.repeatCycles(e).fast(e).expand(e)}),bp=Ns("expand",function(e,t){return t.withSteps(n=>n.mul(U(e)))}),Mp=Ns("contract",function(e,t){return t.withSteps(n=>n.div(U(e)))});H.prototype.shrinklist=function(e){const t=this;if(!t.hasSteps)return[t];let[n,s]=Array.isArray(e)?e:[e,t._steps];if(n=U(n),s===0||n===0)return[t];const a=n>0,r=[];if(a){const i=U(1).div(t._steps).mul(n);for(let o=0;o<s;++o){const u=i.mul(o);if(u.gt(1))break;r.push([u,1])}}else{n=U(0).sub(n);const i=U(1).div(t._steps).mul(n);for(let o=0;o<s;++o){const u=U(1).sub(i.mul(o));if(u.lt(0))break;r.push([U(0),u])}}return r.map(i=>t.zoom(...i))};const xp=(e,t)=>t.shrinklist(e),Cp=k("shrink",function(e,t){if(!t.hasSteps)return on;const n=t.shrinklist(e),s=kt(...n);return s._steps=n.reduce((a,r)=>a.add(r._steps),U(0)),s},!0,!1,e=>e.stepJoin()),yP=k("grow",function(e,t){if(!t.hasSteps)return on;const n=t.shrinklist(U(0).sub(e));n.reverse();const s=kt(...n);return s._steps=n.reduce((a,r)=>a.add(r._steps),U(0)),s},!0,!1,e=>e.stepJoin()),Gp=function(e,...t){return e.tour(...t)};H.prototype.tour=function(...e){return kt(...[].concat(...e.map((t,n)=>[...e.slice(0,e.length-n),this,...e.slice(e.length-n)]),this,...e))};const Pp=function(...e){e=e.filter(s=>s.hasSteps);const t=Qn(...e.map(s=>s._slow(s._steps))),n=sn(...e.map(s=>s._steps));return t._fast(n).setSteps(n)},gP=kt,Go=kt,bP=kt,MP=mp,xP=Mr;H.prototype.s_polymeter=H.prototype.polymeter;const CP=Cp;H.prototype.s_taper=H.prototype.shrink;const GP=xp;H.prototype.s_taperlist=H.prototype.shrinklist;const PP=fp;H.prototype.s_add=H.prototype.take;const vP=yp;H.prototype.s_sub=H.prototype.drop;const XP=bp;H.prototype.s_expand=H.prototype.expand;const wP=gp;H.prototype.s_extend=H.prototype.extend;const ZP=Mp;H.prototype.s_contract=H.prototype.contract;const FP=Gp;H.prototype.s_tour=H.prototype.tour;const AP=Pp;H.prototype.s_zip=H.prototype.zip;const SP=hp;H.prototype.steps=H.prototype.pace;const DP=k("chop",function(e,t){const n=Array.from({length:e},(r,i)=>i).map(r=>({begin:r/e,end:(r+1)/e})),s=function(r,i){if("begin"in r&&"end"in r&&r.begin!==void 0&&r.end!==void 0){const o=r.end-r.begin;i={begin:r.begin+i.begin*o,end:r.begin+i.end*o}}return Object.assign({},r,i)},a=function(r){return un(n.map(i=>s(r,i)))};return t.squeezeBind(a).setSteps(Nt?U(e).mulmaybe(t._steps):void 0)}),LP=k("striate",function(e,t){const n=Array.from({length:e},(a,r)=>r).map(a=>({begin:a/e,end:(a+1)/e})),s=Qn(...n);return t.set(s)._fast(e).setSteps(Nt?U(e).mulmaybe(t._steps):void 0)}),vp=function(e,t,n=.5){return t.speed(1/e*n).unit("c").slow(e)},Xp=k("slice",function(e,t,n){return e.innerBind(s=>t.outerBind(a=>n.outerBind(r=>{r=r instanceof Object?r:{s:r};const i=Array.isArray(s)?s[a]:a/s,o=Array.isArray(s)?s[a+1]:(a+1)/s;return _e({begin:i,end:o,_slices:s,...r})}))).setSteps(t._steps)},!1);H.prototype.onTriggerTime=function(e){return this.onTrigger((t,n,s,a)=>{const r=a-n;window.setTimeout(()=>{e(t)},r*1e3)},!1)};const EP=k("splice",function(e,t,n){const s=Xp(e,t,n);return new H(a=>{const r=a.controls._cps||1;return s.query(a).map(i=>i.withValue(o=>({speed:r/o._slices/i.whole.duration*(o.speed||1),unit:"c",...o})))}).setSteps(t._steps)},!1),{loopAt:kP,loopat:RP}=k(["loopAt","loopat"],function(e,t){const n=t._steps?t._steps.div(e):void 0;return new H(s=>vp(e,t,s.controls._cps).query(s),n)}),VP=k("fit",e=>e.withHaps((t,n)=>t.map(s=>s.withValue(a=>{const r=("end"in a?a.end:1)-("begin"in a?a.begin:0);return{...a,speed:(n.controls._cps||1)/s.whole.duration*r,unit:"c"}})))),{loopAtCps:BP,loopatcps:zP}=k(["loopAtCps","loopatcps"],function(e,t,n){return vp(e,n,t)}),WP=e=>_e(1).withValue(()=>j(e())).innerJoin();let ac=e=>e<.5?1:1-(e-.5)/.5,wp=(e,t,n)=>{t=j(t),e=j(e),n=j(n);let s=t.fmap(r=>({gain:ac(r)})),a=t.fmap(r=>({gain:ac(1-r)}));return qe(e.mul(s),n.mul(a))};H.prototype.xfade=function(e,t){return wp(this,e,t)};const NP=e=>(t,n,s)=>{t=U(t).mod(n),n=U(n);const a=t.div(n),r=t.add(1).div(n);return e(s.fmap(i=>_e(i)._compress(a,r)))},{beat:TP}=k(["beat"],NP(e=>e.innerJoin())),Po=(e,t,n)=>{n=U(n);const s=U(1).div(e.length),a=o=>{const u=[];for(const[c,h]of o.entries())h&&u.push([U(c).div(o.length),h]);return u},r=gr(([o,u],[c,h])=>{const d=n.mul(c-o).add(o),m=d.add(s);return new ot(d,m)},a(e),a(t));function i(o){const u=o.span.begin.sam(),c=o.span.cycleArc(),h=[];for(const d of r){const m=d.intersection(c);m!==void 0&&h.push(new Qe(d.withTime(g=>g.add(u)),m.withTime(g=>g.add(u)),!0))}return h}return new H(i).splitQueries()},IP=(e,t,n)=>(e=j(e),t=j(t),n=j(n),e.innerBind(s=>t.innerBind(a=>n.innerBind(r=>Po(s,a,r))))),qn=function(e){const t=function(n,s){const a=j(n).fmap(r=>Array.isArray(r)?[...r,e]:[r,1,e]);return s?s.distort(a):_e({}).distort(a)};return H.prototype[e]=function(n){return t(n,this)},t},YP=qn("soft"),HP=qn("hard"),KP=qn("cubic"),_P=qn("diode"),jP=qn("asym"),UP=qn("fold"),JP=qn("sinefold"),OP=qn("chebyshev"),vo=e=>{let t=_e(Xe((...n)=>n,null,e.length));for(const n of e)t=t.appBoth(j(n));return t},xr=e=>Array.isArray(e)?vo(e):j(e);H.prototype.partials=function(e){return this.withValue(t=>n=>({...t,partials:n})).appLeft(xr(e))};const QP=e=>xr(e).as("partials");H.prototype.phases=function(e){return this.withValue(t=>n=>({...t,phases:n})).appLeft(xr(e))};const qP=e=>xr(e).as("phases");H.prototype.FX=function(...e){return e=e.map(j),this.withValue(t=>n=>{const s=t.FX??[];return{...t,FX:s.concat(n)}}).appLeft(vo(e))};const $P=e=>{let t=_e(Xe((...n)=>n,null,e.length));for(const n of e)t=t.appLeft(n);return t};H.prototype.worklet=function(e,...t){return t=t.map(j),this.outerBind(n=>$P(t).withValue(s=>{const a=n.workletInputs??[];return{...n,workletSrc:e,workletInputs:a.concat(s)}}))};const ev=(...e)=>_e({}).worklet(...e);function Cr(e){let t=Array.isArray(e);e=t?e:[e];const n=e[0],s=r=>{let i;if(typeof r=="object"&&r.value!==void 0&&(i={...r},r=r.value,delete i.value),t&&Array.isArray(r)){const o=i||{};return r.forEach((u,c)=>{c<e.length&&(o[e[c]]=u)}),o}else return i?(i[n]=r,i):{[n]:r}},a=function(r,i){return i?typeof r>"u"?i.fmap(s):i.set(j(r).withValue(s)):j(r).withValue(s)};return H.prototype[n]=function(r){return a(r,this)},a}const ya=new Map;function Zp(e){return ya.has(e)}function v(e,...t){const n=Array.isArray(e)?e[0]:e;let s={};return s[n]=Cr(e),ya.set(n,n),t.forEach(a=>{s[a]=s[n],ya.set(a,n),H.prototype[a]=H.prototype[n]}),s}function Gn(e,t,...n){e=Array.isArray(e)?e:[e];let s={};for(let a=1;a<=t;a++){let r=[...n],i=[...e];if(a===1){const u=r.map(h=>`${h}1`),c=i.map(h=>`${h}1`);r=r.concat(u).concat(c)}else r=r.map(u=>`${u}${a}`),i=i.map(u=>`${u}${a}`);const o=v(i,...r);s={...s,...o}}return s}const{s:Fp,sound:Ap}=v(["s","n","gain"],"sound"),{wt:Sp,wavetablePosition:Dp}=v("wt","wavetablePosition"),{wtenv:Lp}=v("wtenv"),{wtattack:Ep,wtatt:kp}=v("wtattack","wtatt"),{wtdecay:Rp,wtdec:Vp}=v("wtdecay","wtdec"),{wtsustain:Bp,wtsus:zp}=v("wtsustain","wtsus"),{wtrelease:Wp,wtrel:Np}=v("wtrelease","wtrel"),{wtrate:Tp}=v("wtrate"),{wtsync:Ip}=v("wtsync"),{wtdepth:Yp}=v("wtdepth"),{wtshape:Hp}=v("wtshape"),{wtdc:Kp}=v("wtdc"),{wtskew:_p}=v("wtskew"),{warp:jp,wavetableWarp:Up}=v("warp","wavetableWarp"),{warpattack:Jp,warpatt:Op}=v("warpattack","warpatt"),{warpdecay:Qp,warpdec:qp}=v("warpdecay","warpdec"),{warpsustain:$p,warpsus:eh}=v("warpsustain","warpsus"),{warprelease:th,warprel:nh}=v("warprelease","warprel"),{warprate:sh}=v("warprate"),{warpdepth:ah}=v("warpdepth"),{warpshape:rh}=v("warpshape"),{warpdc:ih}=v("warpdc"),{warpskew:oh}=v("warpskew"),{warpmode:uh,wavetableWarpMode:ch}=v("warpmode","wavetableWarpMode"),{wtphaserand:lh,wavetablePhaseRand:ph}=v("wtphaserand","wavetablePhaseRand"),{warpenv:hh}=v("warpenv"),{warpsync:dh}=v("warpsync"),{source:mh,src:fh}=v("source","src"),{n:yh}=v("n"),{note:gh}=v(["note","n"]),{accelerate:bh}=v("accelerate"),{velocity:Mh,vel:xh}=v("velocity","vel"),{gain:Ch}=v("gain"),{postgain:Gh}=v("postgain"),{amp:Ph}=v("amp"),{attack:vh,att:Xh}=v("attack","att"),{fmh:wh,fmh1:Zh,fmh2:Fh,fmh3:Ah,fmh4:Sh,fmh5:Dh,fmh6:Lh,fmh7:Eh,fmh8:kh}=Gn(["fmh","fmi"],8,"fmh"),{fmi:Rh,fmi1:Vh,fmi2:Bh,fmi3:zh,fmi4:Wh,fmi5:Nh,fmi6:Th,fmi7:Ih,fmi8:Yh,fm:Hh,fm1:Kh,fm2:_h,fm3:jh,fm4:Uh,fm5:Jh,fm6:Oh,fm7:Qh,fm8:qh}=Gn(["fmi","fmh"],8,"fm"),{fmenv:$h,fmenv1:ed,fmenv2:td,fmenv3:nd,fmenv4:sd,fmenv5:ad,fmenv6:rd,fmenv7:id,fmenv8:od}=Gn("fmenv",8),{fmattack:ud,fmattack1:cd,fmattack2:ld,fmattack3:pd,fmattack4:hd,fmattack5:dd,fmattack6:md,fmattack7:fd,fmattack8:yd,fmatt:gd,fmatt1:bd,fmatt2:Md,fmatt3:xd,fmatt4:Cd,fmatt5:Gd,fmatt6:Pd,fmatt7:vd,fmatt8:Xd}=Gn("fmattack",8,"fmatt"),{fmwave:wd,fmwave1:Zd,fmwave2:Fd,fmwave3:Ad,fmwave4:Sd,fmwave5:Dd,fmwave6:Ld,fmwave7:Ed,fmwave8:kd}=Gn("fmwave",8),{fmdecay:Rd,fmdecay1:Vd,fmdecay2:Bd,fmdecay3:zd,fmdecay4:Wd,fmdecay5:Nd,fmdecay6:Td,fmdecay7:Id,fmdecay8:Yd,fmdec:Hd,fmdec1:Kd,fmdec2:_d,fmdec3:jd,fmdec4:Ud,fmdec5:Jd,fmdec6:Od,fmdec7:Qd,fmdec8:qd}=Gn("fmdecay",8,"fmdec"),{fmsustain:$d,fmsustain1:em,fmsustain2:tm,fmsustain3:nm,fmsustain4:sm,fmsustain5:am,fmsustain6:rm,fmsustain7:im,fmsustain8:om,fmsus:um,fmsus1:cm,fmsus2:lm,fmsus3:pm,fmsus4:hm,fmsus5:dm,fmsus6:mm,fmsus7:fm,fmsus8:ym}=Gn("fmsustain",8,"fmsus"),{fmrelease:gm,fmrelease1:bm,fmrelease2:Mm,fmrelease3:xm,fmrelease4:Cm,fmrelease5:Gm,fmrelease6:Pm,fmrelease7:vm,fmrelease8:Xm,fmrel:wm,fmrel1:Zm,fmrel2:Fm,fmrel3:Am,fmrel4:Sm,fmrel5:Dm,fmrel6:Lm,fmrel7:Em,fmrel8:km}=Gn("fmrelease",8,"fmrel");for(let e=0;e<=8;e++)for(let t=0;t<=8;t++)v(`fmi${e}${t}`,`fm${e}${t}`);const{bank:Rm}=v("bank"),{chorus:Vm}=v("chorus"),{analyze:Bm}=v("analyze"),{fft:zm}=v("fft"),{decay:Wm,dec:Nm}=v("decay","dec"),{sustain:Tm,sus:Im}=v("sustain","sus"),{release:Ym,rel:Hm}=v("release","rel"),{hold:Km}=v("hold"),{bandf:_m,bpf:jm,bp:Um}=v(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:Jm,bpq:Om}=v("bandq","bpq"),{begin:Qm}=v("begin"),{end:qm}=v("end"),{loop:$m}=v("loop"),{loopBegin:e0,loopb:t0}=v("loopBegin","loopb"),{loopEnd:n0,loope:s0}=v("loopEnd","loope"),{crush:a0}=v("crush"),{coarse:r0}=v("coarse"),{tremolo:i0,trem:o0}=v(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:u0}=v(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:c0}=v("tremolodepth","tremdepth"),{tremoloskew:l0}=v("tremoloskew","tremskew"),{tremolophase:p0}=v("tremolophase","tremphase"),{tremoloshape:h0}=v("tremoloshape","tremshape"),{drive:d0}=v("drive"),{duck:m0}=v("duckorbit","duck"),{duckdepth:f0}=v("duckdepth"),{duckonset:y0}=v("duckonset","duckons"),{duckattack:g0}=v("duckattack","duckatt"),{byteBeatExpression:b0,bbexpr:M0}=v("byteBeatExpression","bbexpr"),{byteBeatStartTime:x0,bbst:C0}=v("byteBeatStartTime","bbst"),{channels:G0,ch:P0}=v("channels","ch"),{pw:v0}=v(["pw","pwrate","pwsweep"]),{pwrate:X0}=v("pwrate"),{pwsweep:w0}=v("pwsweep"),{phaserrate:Z0,ph:F0,phaser:A0}=v(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:S0,phs:D0}=v("phasersweep","phs"),{phasercenter:L0,phc:E0}=v("phasercenter","phc"),{phaserdepth:k0,phd:R0,phasdp:V0}=v("phaserdepth","phd","phasdp"),{channel:B0}=v("channel"),{cut:z0}=v("cut"),{cutoff:W0,ctf:N0,lpf:T0,lp:I0}=v(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Y0,lpe:H0}=v("lpenv","lpe"),{hpenv:K0,hpe:_0}=v("hpenv","hpe"),{bpenv:j0,bpe:U0}=v("bpenv","bpe"),{lpattack:J0,lpa:O0}=v("lpattack","lpa"),{hpattack:Q0,hpa:q0}=v("hpattack","hpa"),{bpattack:$0,bpa:e1}=v("bpattack","bpa"),{lpdecay:t1,lpd:n1}=v("lpdecay","lpd"),{hpdecay:s1,hpd:a1}=v("hpdecay","hpd"),{bpdecay:r1,bpd:i1}=v("bpdecay","bpd"),{lpsustain:o1,lps:u1}=v("lpsustain","lps"),{hpsustain:c1,hps:l1}=v("hpsustain","hps"),{bpsustain:p1,bps:h1}=v("bpsustain","bps"),{lprelease:d1,lpr:m1}=v("lprelease","lpr"),{hprelease:f1,hpr:y1}=v("hprelease","hpr"),{bprelease:g1,bpr:b1}=v("bprelease","bpr"),{ftype:M1}=v("ftype"),{fanchor:x1}=v("fanchor"),{lprate:C1}=v("lprate"),{lpsync:G1}=v("lpsync"),{lpdepth:P1}=v("lpdepth"),{lpdepthfrequency:v1,lpdepthfreq:X1}=v("lpdepthfrequency","lpdepthfreq"),{lpshape:w1}=v("lpshape"),{lpdc:Z1}=v("lpdc"),{lpskew:F1}=v("lpskew"),{bprate:A1}=v("bprate"),{bpsync:S1}=v("bpsync"),{bpdepth:D1}=v("bpdepth"),{bpdepthfrequency:L1,bpdepthfreq:E1}=v("bpdepthfrequency","bpdepthfreq"),{bpshape:k1}=v("bpshape"),{bpdc:R1}=v("bpdc"),{bpskew:V1}=v("bpskew"),{hprate:B1}=v("hprate"),{hpsync:z1}=v("hpsync"),{hpdepth:W1}=v("hpdepth"),{hpdepthfrequency:N1,hpdepthfreq:T1}=v("hpdepthfrequency","hpdepthfreq"),{hpshape:I1}=v("hpshape"),{hpdc:Y1}=v("hpdc"),{hpskew:H1}=v("hpskew"),{vib:K1,vibrato:_1,v:j1}=v(["vib","vibmod"],"vibrato","v"),{noise:U1}=v("noise"),{vibmod:J1,vmod:O1}=v(["vibmod","vib"],"vmod"),{hcutoff:Q1,hpf:q1,hp:$1}=v(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:ef,hpq:tf}=v("hresonance","hpq"),{resonance:nf,lpq:sf}=v("resonance","lpq"),{djf:af}=v("djf"),{delay:rf}=v(["delay","delaytime","delayfeedback"]),{delayfeedback:of,delayfb:uf,dfb:cf}=v("delayfeedback","delayfb","dfb"),{delayspeed:lf}=v("delayspeed"),{delaytime:pf,delayt:hf,dt:df}=v("delaytime","delayt","dt"),{delaysync:mf}=v("delaysync"),{lock:ff}=v("lock"),{detune:yf,det:gf}=v("detune","det"),{unison:bf}=v("unison"),{spread:Mf}=v("spread"),{dry:xf}=v("dry"),{fadeTime:Cf,fadeOutTime:Gf}=v("fadeTime","fadeOutTime"),{fadeInTime:Pf}=v("fadeInTime"),{freq:vf}=v("freq"),{pattack:Xf,patt:wf}=v("pattack","patt"),{pdecay:Zf,pdec:Ff}=v("pdecay","pdec"),{psustain:Af,psus:Sf}=v("psustain","psus"),{prelease:Df,prel:Lf}=v("prelease","prel"),{penv:Ef}=v("penv"),{pcurve:kf}=v("pcurve"),{panchor:Rf}=v("panchor"),{gate:Vf,gat:Bf}=v("gate","gat"),{leslie:zf}=v("leslie"),{lrate:Wf}=v("lrate"),{lsize:Nf}=v("lsize"),{activeLabel:Tf}=v("activeLabel"),{label:If}=v(["label","activeLabel"]),{degree:Yf}=v("degree"),{mtranspose:Hf}=v("mtranspose"),{ctranspose:Kf}=v("ctranspose"),{harmonic:_f}=v("harmonic"),{stepsPerOctave:jf}=v("stepsPerOctave"),{octaveR:Uf}=v("octaveR"),{nudge:Jf}=v("nudge"),{octave:Of,oct:Qf}=v("octave","oct"),{orbit:qf}=v("orbit","o"),{bus:$f}=v("bus"),{busgain:ey,bgain:ty}=v("busgain","bgain"),{overgain:ny}=v("overgain"),{overshape:sy}=v("overshape"),{pan:ay}=v("pan"),{panspan:ry}=v("panspan"),{pansplay:iy}=v("pansplay"),{panwidth:oy}=v("panwidth"),{panorient:uy}=v("panorient"),{slide:cy}=v("slide"),{semitone:ly}=v("semitone"),{voice:py}=v("voice"),{chord:hy}=v("chord"),{dictionary:dy,dict:my}=v("dictionary","dict"),{anchor:fy}=v("anchor"),{offset:yy}=v("offset"),{octaves:gy}=v("octaves"),{mode:by}=v(["mode","anchor"]),{room:My}=v(["room","size"]),{roomlp:xy,rlp:Cy}=v("roomlp","rlp"),{roomdim:Gy,rdim:Py}=v("roomdim","rdim"),{roomfade:vy,rfade:Xy}=v("roomfade","rfade"),{ir:wy,iresponse:Zy}=v(["ir","i"],"iresponse"),{irspeed:Fy}=v("irspeed"),{irbegin:Ay}=v("irbegin"),{roomsize:Sy,size:Dy,sz:Ly,rsize:Ey}=v("roomsize","size","sz","rsize"),{shape:ky}=v(["shape","shapevol"]),{distort:Ry,dist:Vy}=v(["distort","distortvol","distorttype"],"dist"),{distortvol:By}=v("distortvol","distvol"),{distorttype:zy}=v("distorttype","disttype"),{compressor:Wy}=v(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:Ny}=v("compressorKnee"),{compressorRatio:Ty}=v("compressorRatio"),{compressorAttack:Iy}=v("compressorAttack"),{compressorRelease:Yy}=v("compressorRelease"),{speed:Xo}=v("speed"),{stretch:Hy}=v("stretch"),{unit:Ky}=v("unit"),{squiz:_y}=v("squiz"),{vowel:jy}=v("vowel"),{waveloss:Uy}=v("waveloss"),{density:tv}=v("density"),{expression:Jy}=v("expression"),{sustainpedal:Oy}=v("sustainpedal"),{fshift:Qy}=v("fshift"),{fshiftnote:qy}=v("fshiftnote"),{fshiftphase:$y}=v("fshiftphase"),{triode:eg}=v("triode"),{krush:tg}=v("krush"),{kcutoff:ng}=v("kcutoff"),{octer:sg}=v("octer"),{octersub:ag}=v("octersub"),{octersubsub:rg}=v("octersubsub"),{ring:ig}=v("ring"),{ringf:og}=v("ringf"),{ringdf:ug}=v("ringdf"),{freeze:cg}=v("freeze"),{xsdelay:lg}=v("xsdelay"),{tsdelay:pg}=v("tsdelay"),{real:hg}=v("real"),{imag:dg}=v("imag"),{enhance:mg}=v("enhance"),{comb:fg}=v("comb"),{smear:yg}=v("smear"),{scram:gg}=v("scram"),{binshift:bg}=v("binshift"),{hbrick:Mg}=v("hbrick"),{lbrick:xg}=v("lbrick"),{frameRate:Cg}=v("frameRate"),{frames:Gg}=v("frames"),{hours:Pg}=v("hours"),{minutes:vg}=v("minutes"),{seconds:Xg}=v("seconds"),{songPtr:wg}=v("songPtr"),{uid:Zg}=v("uid"),{val:Fg}=v("val"),{cps:Ag}=v("cps"),{clip:Sg,legato:Dg}=v("clip","legato"),{duration:Lg,dur:Eg}=v("duration","dur"),{zrand:kg}=v("zrand"),{curve:Rg}=v("curve"),{deltaSlide:Vg}=v("deltaSlide"),{pitchJump:Bg}=v("pitchJump"),{pitchJumpTime:zg}=v("pitchJumpTime"),{znoise:Wg}=v("znoise"),{zmod:Ng}=v("zmod"),{zcrush:Tg}=v("zcrush"),{zdelay:Ig}=v("zdelay"),{zzfx:Yg}=v("zzfx"),{color:Hg,colour:Kg}=v(["color","colour"]);let wo=(...e)=>e.reduce((t,n)=>Object.assign(t,{[n]:Cr(n)}),{});const _g=k("adsr",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s,a,r]=e;return t.set({attack:n,decay:s,sustain:a,release:r})}),jg=k("ad",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s=n]=e;return t.attack(n).decay(s)}),Ug=k("ds",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s=0]=e;return t.set({decay:n,sustain:s})}),Jg=k("ar",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,s=n]=e;return t.set({attack:n,release:s})}),{midichan:Og}=v("midichan"),{midimap:Qg}=v("midimap"),{midiport:qg}=v("midiport"),{midicmd:$g}=v("midicmd"),eb=k("control",(e,t)=>{if(!Array.isArray(e))throw new Error("control expects an array of [ccn, ccv]");const[n,s]=e;return t.ccn(n).ccv(s)}),{ccn:tb}=v("ccn"),{ccv:nb}=v("ccv"),{ctlNum:sb}=v("ctlNum"),{nrpnn:ab}=v("nrpnn"),{nrpv:rb}=v("nrpv"),{progNum:ib}=v("progNum"),ob=k("sysex",(e,t)=>{if(!Array.isArray(e))throw new Error("sysex expects an array of [id, data]");const[n,s]=e;return t.sysexid(n).sysexdata(s)}),{sysexid:ub}=v("sysexid"),{sysexdata:cb}=v("sysexdata"),{midibend:lb}=v("midibend"),{miditouch:pb}=v("miditouch"),{polyTouch:hb}=v("polyTouch"),{oschost:db}=v("oschost"),{oscport:mb}=v("oscport"),ga=e=>ya.has(e)?ya.get(e):e,fb=k("as",(e,t)=>(e=Array.isArray(e)?e:[e],t.fmap(n=>{n=Array.isArray(n)?n:[n];const s=[];for(let a=0;a<e.length;++a)n[a]!==void 0&&s.push([ga(e[a]),n[a]]);return Object.fromEntries(s)}))),yb=k("scrub",(e,t)=>e.outerBind(n=>{Array.isArray(n)||(n=[n]);const[s,a=1]=n;return t.begin(s).mul(Xo(a)).clip(1)}),!1),Li=new Map,nv=(e,t,...n)=>{const s=Li.get(e)??new Map,a=new Set([t,...n]);for(const r of a)s.set(String(r).toLowerCase(),t);Li.set(e,s)},Zo=(e,t=[])=>{for(const[n,...s]of t)nv(e,n,...s)},sv=(e,t)=>{const n=Li.get(e);return n?n.get(String(t).toLowerCase())??t:t};Zo("lfo",[["control","c"],["subControl","sc"],["rate","r"],["depth","dep","dr"],["depthabs","da"],["dcoffset","dc"],["shape","sh"],["skew","sk"],["curve","cu"],["sync","s"],["fxi"]]);Zo("env",[["control","c"],["subControl","sc"],["attack","att","a"],["decay","dec","d"],["sustain","sus","s"],["release","rel","r"],["depth","dep","dr"],["depthabs","da"],["acurve","ac"],["dcurve","dc"],["rcurve","rc"],["fxi"]]);Zo("bmod",[["bus","b"],["control","c"],["subControl","sc"],["depth","dep","dr"],["depthabs","da"],["dc"],["fxi"]]);H.prototype.modulate=function(e,t,n){t={control:void 0,...t};const s=["lfo","env","bmod"];if(!s.includes(e))return yt(`[core] Modulation type ${e} not found. Please use one of 'lfo', 'env', 'bmod'`),this;let a=this,r;a=a.fmap(i=>o=>({v:i,id:o})).appLeft(j(n));for(const[i,o]of Object.entries(t)){const u=sv(e,i),c=j(o);a=a.fmap(({v:h,id:d})=>m=>{if(r===void 0){let y=ga(Object.keys(h).at(-1));s.includes(y)&&(y=`${y}_${[...h[y].__ids].at(-1)}`),r=y}h[e]??={__ids:new Set};const g=h[e];return d??=g.__ids.size,g[d]??={control:r},g.__ids.add(d),m===void 0?{v:h,id:d}:(u==="control"||u==="subControl"?g[d][u]=ga(m):g[d][u]=m,{v:h,id:d})}).appLeft(c)}return a.fmap(({v:i})=>i)};H.prototype.lfo=function(e,t){return this.modulate("lfo",e,t)};const gb=e=>_e({}).lfo(e);H.prototype.env=function(e,t){return this.modulate("env",e,t)};const bb=e=>_e({}).env(e);H.prototype.bmod=function(e,t){return this.modulate("bmod",e,t)};const Mb=e=>_e({}).bmod(e),{transient:xb}=v(["transient","transsustain"]),{FXrelease:Cb,FXrel:Gb,FXr:Pb,fxr:vb}=v("FXrelease","FXrel","FXr","fxr"),av=Object.freeze(Object.defineProperty({__proto__:null,FXr:Pb,FXrel:Gb,FXrelease:Cb,accelerate:bh,activeLabel:Tf,ad:jg,adsr:_g,amp:Ph,analyze:Bm,anchor:fy,ar:Jg,as:fb,att:Xh,attack:vh,bandf:_m,bandq:Jm,bank:Rm,bbexpr:M0,bbst:C0,begin:Qm,bgain:ty,binshift:bg,bmod:Mb,bp:Um,bpa:e1,bpattack:$0,bpd:i1,bpdc:R1,bpdecay:r1,bpdepth:D1,bpdepthfreq:E1,bpdepthfrequency:L1,bpe:U0,bpenv:j0,bpf:jm,bpq:Om,bpr:b1,bprate:A1,bprelease:g1,bps:h1,bpshape:k1,bpskew:V1,bpsustain:p1,bpsync:S1,bus:$f,busgain:ey,byteBeatExpression:b0,byteBeatStartTime:x0,ccn:tb,ccv:nb,ch:P0,channel:B0,channels:G0,chord:hy,chorus:Vm,clip:Sg,coarse:r0,color:Hg,colour:Kg,comb:fg,compressor:Wy,compressorAttack:Iy,compressorKnee:Ny,compressorRatio:Ty,compressorRelease:Yy,control:eb,cps:Ag,createParam:Cr,createParams:wo,crush:a0,ctf:N0,ctlNum:sb,ctranspose:Kf,curve:Rg,cut:z0,cutoff:W0,dec:Nm,decay:Wm,degree:Yf,delay:rf,delayfb:uf,delayfeedback:of,delayspeed:lf,delaysync:mf,delayt:hf,delaytime:pf,deltaSlide:Vg,density:tv,det:gf,detune:yf,dfb:cf,dict:my,dictionary:dy,dist:Vy,distort:Ry,distorttype:zy,distortvol:By,djf:af,drive:d0,dry:xf,ds:Ug,dt:df,duck:m0,duckattack:g0,duckdepth:f0,duckonset:y0,dur:Eg,duration:Lg,end:qm,enhance:mg,env:bb,expression:Jy,fadeInTime:Pf,fadeOutTime:Gf,fadeTime:Cf,fanchor:x1,fft:zm,fm:Hh,fm1:Kh,fm2:_h,fm3:jh,fm4:Uh,fm5:Jh,fm6:Oh,fm7:Qh,fm8:qh,fmatt:gd,fmatt1:bd,fmatt2:Md,fmatt3:xd,fmatt4:Cd,fmatt5:Gd,fmatt6:Pd,fmatt7:vd,fmatt8:Xd,fmattack:ud,fmattack1:cd,fmattack2:ld,fmattack3:pd,fmattack4:hd,fmattack5:dd,fmattack6:md,fmattack7:fd,fmattack8:yd,fmdec:Hd,fmdec1:Kd,fmdec2:_d,fmdec3:jd,fmdec4:Ud,fmdec5:Jd,fmdec6:Od,fmdec7:Qd,fmdec8:qd,fmdecay:Rd,fmdecay1:Vd,fmdecay2:Bd,fmdecay3:zd,fmdecay4:Wd,fmdecay5:Nd,fmdecay6:Td,fmdecay7:Id,fmdecay8:Yd,fmenv:$h,fmenv1:ed,fmenv2:td,fmenv3:nd,fmenv4:sd,fmenv5:ad,fmenv6:rd,fmenv7:id,fmenv8:od,fmh:wh,fmh1:Zh,fmh2:Fh,fmh3:Ah,fmh4:Sh,fmh5:Dh,fmh6:Lh,fmh7:Eh,fmh8:kh,fmi:Rh,fmi1:Vh,fmi2:Bh,fmi3:zh,fmi4:Wh,fmi5:Nh,fmi6:Th,fmi7:Ih,fmi8:Yh,fmrel:wm,fmrel1:Zm,fmrel2:Fm,fmrel3:Am,fmrel4:Sm,fmrel5:Dm,fmrel6:Lm,fmrel7:Em,fmrel8:km,fmrelease:gm,fmrelease1:bm,fmrelease2:Mm,fmrelease3:xm,fmrelease4:Cm,fmrelease5:Gm,fmrelease6:Pm,fmrelease7:vm,fmrelease8:Xm,fmsus:um,fmsus1:cm,fmsus2:lm,fmsus3:pm,fmsus4:hm,fmsus5:dm,fmsus6:mm,fmsus7:fm,fmsus8:ym,fmsustain:$d,fmsustain1:em,fmsustain2:tm,fmsustain3:nm,fmsustain4:sm,fmsustain5:am,fmsustain6:rm,fmsustain7:im,fmsustain8:om,fmwave:wd,fmwave1:Zd,fmwave2:Fd,fmwave3:Ad,fmwave4:Sd,fmwave5:Dd,fmwave6:Ld,fmwave7:Ed,fmwave8:kd,frameRate:Cg,frames:Gg,freeze:cg,freq:vf,fshift:Qy,fshiftnote:qy,fshiftphase:$y,ftype:M1,fxr:vb,gain:Ch,gat:Bf,gate:Vf,getControlName:ga,harmonic:_f,hbrick:Mg,hcutoff:Q1,hold:Km,hours:Pg,hp:$1,hpa:q0,hpattack:Q0,hpd:a1,hpdc:Y1,hpdecay:s1,hpdepth:W1,hpdepthfreq:T1,hpdepthfrequency:N1,hpe:_0,hpenv:K0,hpf:q1,hpq:tf,hpr:y1,hprate:B1,hprelease:f1,hps:l1,hpshape:I1,hpskew:H1,hpsustain:c1,hpsync:z1,hresonance:ef,imag:dg,ir:wy,irbegin:Ay,iresponse:Zy,irspeed:Fy,isControlName:Zp,kcutoff:ng,krush:tg,label:If,lbrick:xg,legato:Dg,leslie:zf,lfo:gb,lock:ff,loop:$m,loopBegin:e0,loopEnd:n0,loopb:t0,loope:s0,lp:I0,lpa:O0,lpattack:J0,lpd:n1,lpdc:Z1,lpdecay:t1,lpdepth:P1,lpdepthfreq:X1,lpdepthfrequency:v1,lpe:H0,lpenv:Y0,lpf:T0,lpq:sf,lpr:m1,lprate:C1,lprelease:d1,lps:u1,lpshape:w1,lpskew:F1,lpsustain:o1,lpsync:G1,lrate:Wf,lsize:Nf,midibend:lb,midichan:Og,midicmd:$g,midimap:Qg,midiport:qg,miditouch:pb,minutes:vg,mode:by,mtranspose:Hf,n:yh,noise:U1,note:gh,nrpnn:ab,nrpv:rb,nudge:Jf,oct:Qf,octave:Of,octaveR:Uf,octaves:gy,octer:sg,octersub:ag,octersubsub:rg,offset:yy,orbit:qf,oschost:db,oscport:mb,overgain:ny,overshape:sy,pan:ay,panchor:Rf,panorient:uy,panspan:ry,pansplay:iy,panwidth:oy,patt:wf,pattack:Xf,pcurve:kf,pdec:Ff,pdecay:Zf,penv:Ef,ph:F0,phasdp:V0,phaser:A0,phasercenter:L0,phaserdepth:k0,phaserrate:Z0,phasersweep:S0,phc:E0,phd:R0,phs:D0,pitchJump:Bg,pitchJumpTime:zg,polyTouch:hb,postgain:Gh,prel:Lf,prelease:Df,progNum:ib,psus:Sf,psustain:Af,pw:v0,pwrate:X0,pwsweep:w0,rdim:Py,real:hg,registerControl:v,registerMultiControl:Gn,rel:Hm,release:Ym,resonance:nf,rfade:Xy,ring:ig,ringdf:ug,ringf:og,rlp:Cy,room:My,roomdim:Gy,roomfade:vy,roomlp:xy,roomsize:Sy,rsize:Ey,s:Fp,scram:gg,scrub:yb,seconds:Xg,semitone:ly,shape:ky,size:Dy,slide:cy,smear:yg,songPtr:wg,sound:Ap,source:mh,speed:Xo,spread:Mf,squiz:_y,src:fh,stepsPerOctave:jf,stretch:Hy,sus:Im,sustain:Tm,sustainpedal:Oy,sysex:ob,sysexdata:cb,sysexid:ub,sz:Ly,transient:xb,trem:o0,tremolo:i0,tremolodepth:c0,tremolophase:p0,tremoloshape:h0,tremoloskew:l0,tremolosync:u0,triode:eg,tsdelay:pg,uid:Zg,unison:bf,unit:Ky,v:j1,val:Fg,vel:xh,velocity:Mh,vib:K1,vibmod:J1,vibrato:_1,vmod:O1,voice:py,vowel:jy,warp:jp,warpatt:Op,warpattack:Jp,warpdc:ih,warpdec:qp,warpdecay:Qp,warpdepth:ah,warpenv:hh,warpmode:uh,warprate:sh,warprel:nh,warprelease:th,warpshape:rh,warpskew:oh,warpsus:eh,warpsustain:$p,warpsync:dh,waveloss:Uy,wavetablePhaseRand:ph,wavetablePosition:Dp,wavetableWarp:Up,wavetableWarpMode:ch,wt:Sp,wtatt:kp,wtattack:Ep,wtdc:Kp,wtdec:Vp,wtdecay:Rp,wtdepth:Yp,wtenv:Lp,wtphaserand:lh,wtrate:Tp,wtrel:Np,wtrelease:Wp,wtshape:Hp,wtskew:_p,wtsus:zp,wtsustain:Bp,wtsync:Ip,xsdelay:lg,zcrush:Tg,zdelay:Ig,zmod:Ng,znoise:Wg,zrand:kg,zzfx:Yg},Symbol.toStringTag,{value:"Module"})),rv=function(e,t){const[n,s]=e,[a,r]=t,[i,o]=mo(s,a);return[[s,n-s],[gr((u,c)=>u.concat(c),i,r),o]]},iv=function(e,t){const[n,s]=e,[a,r]=t,[i,o]=mo(n,r);return[[n,s-n],[gr((u,c)=>u.concat(c),a,i),o]]},Xb=function(e,t){const[n,s]=e;return Math.min(n,s)<=1?[e,t]:Xb(...n>s?rv(e,t):iv(e,t))},Fo=function(e,t){const n=e<0,s=Math.abs(e),a=t-s,r=Array(s).fill([1]),i=Array(a).fill([0]),o=Xb([s,a],[r,i]),u=Ln(o[1][0]).concat(Ln(o[1][1]));return n?u.map(c=>1-c):u},Gr=function(e,t,n){const s=Fo(e,t);return n?Il(s,-n):s},ov=k("euclid",function(e,t,n){return n.struct(Gr(e,t,0))}),uv=k("bjork",function(e,t){Array.isArray(e)||(e=[e]);const[n,s=n,a=0]=e;return t.struct(Gr(n,s,a))}),{euclidrot:cv,euclidRot:lv}=k(["euclidrot","euclidRot"],function(e,t,n,s){return s.struct(Gr(e,t,n))}),wb=function(e,t,n,s){if(e<1)return Ie;const a=Gr(e,t,0).join("").split("1").slice(1).map(r=>[r.length+1,!0]);return s.struct(Go(...a)).late(U(n).div(t))},pv=k(["euclidLegato"],function(e,t,n){return wb(e,t,0,n)}),hv=k(["euclidLegatoRot"],function(e,t,n,s){return wb(e,t,n,s)}),{euclidish:dv,eish:mv}=k(["euclidish","eish"],function(e,t,n,s){const a=Po(Fo(e,t),new Array(e).fill(1),n);return s.struct(a).setSteps(t)});function Zb(e,t,n=.05,s=.1,a=.1,r=globalThis.setInterval,i=globalThis.clearInterval,o=!0){let u=0,c=0,h=10**4,d=.01;const m=S=>n=S(n);a=a||s/2;const g=()=>{const S=e(),L=S+s+a;for(c===0&&(c=S+d);c<L;)c=o?Math.round(c*h)/h:c,t(c,n,u,S),c+=n,u++};let y;const C=()=>{X(),g(),y=r(g,s*1e3)},X=()=>{y!==void 0&&i(y),y=void 0};return{setDuration:m,start:C,stop:()=>{u=0,c=0,X()},pause:()=>X(),duration:n,interval:s,getPhase:()=>c,minLatency:d}}class Fb{constructor({interval:t,onTrigger:n,onToggle:s,onError:a,getTime:r,latency:i=.1,setInterval:o,clearInterval:u,beforeStart:c}){this.started=!1,this.beforeStart=c,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=r,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=s,this.latency=i,this.clock=Zb(r,(h,d,m,g)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=h),this.num_ticks_since_cps_change++;const y=this.num_ticks_since_cps_change*d*this.cps;try{const C=this.lastEnd;this.lastBegin=C;const X=this.num_cycles_at_cps_change+y;if(this.lastEnd=X,this.lastTick=h,h<g){console.log("skip query: too late");return}this.pattern.queryArc(C,X,{_cps:this.cps,cyclist:"cyclist"}).forEach(S=>{if(S.hasOnset()){const L=(S.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+i,z=S.duration/this.cps,A=L-h;n?.(S,A,z,this.cps,L),S.value.cps!==void 0&&this.cps!=S.value.cps&&(this.cps=S.value.cps,this.num_ticks_since_cps_change=0)}})}catch(C){wa(C),a?.(C)}},t,.1,.1,o,u)}now(){if(!this.started)return 0;const t=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+t*this.cps}setStarted(t){this.started=t,this.onToggle?.(t)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");yt("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){yt("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){yt("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(t,n=!1){this.pattern=t,n&&!this.started&&await this.start()}setCps(t=.5){this.cps!==t&&(this.cps=t,this.num_ticks_since_cps_change=0)}log(t,n,s){const a=s.filter(r=>r.hasOnset());console.log(`${t.toFixed(4)} - ${n.toFixed(4)} ${Array(a.length).fill("I").join("")}`)}}let ca={};const Ab=function(){Sb()},Sb=function(){ca={}},fv=k("timeline",function(e,t){e=j(e);const n=function(s){const a=!!s.controls.cyclist,r=e.query(s),i=[];for(const o of r){const u=o.value;let c;if(u===0)c=0;else if(u in ca)c=ca[u];else{const d=o.wholeOrPart();!a||s.span.begin.lt(d.midpoint())?c=d.begin:c=d.end}a&&(ca[u]=c,u!==0&&delete ca[-u]);const h=t.late(c).query(s.setSpan(o.part)).map(d=>d.setContext(d.combineContext(o)));i.push(...h)}return i};return new H(n,t._steps)},!1),Pn=function(e,t,n=!0){const s=Array.isArray(e),a=Object.keys(e).length;return e=Jl(e,j),a===0?Ie:t.fmap(r=>{let i=r;return s&&(i=n?Math.round(i)%a:br(Math.round(i),0,e.length-1)),e[i]})},Db=function(e,t){return Array.isArray(t)&&([t,e]=[e,t]),yv(e,t)},yv=k("pick",function(e,t){return Pn(e,t,!1).innerJoin()}),Lb=k("pickmod",function(e,t){return Pn(e,t,!0).innerJoin()}),gv=k("pickF",function(e,t,n){return n.apply(Db(e,t))}),bv=k("pickmodF",function(e,t,n){return n.apply(Lb(e,t))}),Mv=k("pickOut",function(e,t){return Pn(e,t,!1).outerJoin()}),xv=k("pickmodOut",function(e,t){return Pn(e,t,!0).outerJoin()}),Cv=k("pickRestart",function(e,t){return Pn(e,t,!1).restartJoin()}),Gv=k("pickmodRestart",function(e,t){return Pn(e,t,!0).restartJoin()}),Pv=k("pickReset",function(e,t){return Pn(e,t,!1).resetJoin()}),vv=k("pickmodReset",function(e,t){return Pn(e,t,!0).resetJoin()}),{inhabit:Xv,pickSqueeze:wv}=k(["inhabit","pickSqueeze"],function(e,t){return Pn(e,t,!1).squeezeJoin()}),{inhabitmod:Zv,pickmodSqueeze:Fv}=k(["inhabitmod","pickmodSqueeze"],function(e,t){return Pn(e,t,!0).squeezeJoin()}),Av=(e,t)=>(t=t.map(j),t.length==0?Ie:e.fmap(n=>{const s=jt(Math.round(n),t.length);return t[s]}).squeezeJoin());class Sv{constructor({onTrigger:t,onToggle:n,getTime:s}){this.started=!1,this.cps=.5,this.getTime=s,this.time_at_last_tick_message=0,this.collator=new Ol({getTargetClockTime:s}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEwoKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkqLjAwMX1sZXQgXz0wLHI9MCxvPS41O2NvbnN0IGg9bmV3IE1hcCxtPS4xLE09bmV3IEJyb2FkY2FzdENoYW5uZWwoInN0cnVkZWx0aWNrIiksYj0ocyxlKT0+e00ucG9zdE1lc3NhZ2Uoe3R5cGU6cyxwYXlsb2FkOmV9KX0sQz1FKEwsKHMsZSx0LG4pPT57Y29uc3QgaT1yKmUsZD1zLW4sYz1uK2QsdT1pKm8sbD1fK3UsZz1uLWMtZSxmPWUqbyxwPWwrZix5PWwrZypvO2IoInRpY2siLHtiZWdpbjpsLGVuZDpwLGNwczpvLHRpbWU6bixjeWNsZTp5fSkscisrfSxtKTtsZXQgaz0hMTtjb25zdCBJPXM9PntoLnNldChzLHtzdGFydGVkOiEwfSksIWsmJihDLnN0YXJ0KCksaz0hMCl9LEE9YXN5bmMgcz0+e2guc2V0KHMse3N0YXJ0ZWQ6ITF9KTtjb25zdCBlPUFycmF5LmZyb20oaC52YWx1ZXMoKSkuc29tZSh0PT50LnN0YXJ0ZWQpOyFrfHxlfHwoQy5zdG9wKCksdygwKSxrPSExKX0sdz1zPT57cj0wLF89c30sRD1zPT57Y29uc3R7dHlwZTplLHBheWxvYWQ6dH09cztzd2l0Y2goZSl7Y2FzZSJjcHNjaGFuZ2UiOntpZih0LmNwcyE9PW8pe2NvbnN0IG49ciptO189XytuKm8sbz10LmNwcyxyPTB9YnJlYWt9Y2FzZSJzZXRjeWNsZSI6e3codC5jeWNsZSk7YnJlYWt9Y2FzZSJ0b2dnbGUiOnt0LnN0YXJ0ZWQ/SShzLmlkKTpBKHMuaWQpO2JyZWFrfX19O3NlbGYub25jb25uZWN0PWZ1bmN0aW9uKHMpe2NvbnN0IGU9cy5wb3J0c1swXTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKHQpe0QodC5kYXRhKX0pLGUuc3RhcnQoKX07ZnVuY3Rpb24gRShzLGUsdD0uMDUsbj0uMSxpPS4xKXtsZXQgZD0wLGM9MCx1PTEwKio0LGw9LjAxO2NvbnN0IGc9YT0+dD1hKHQpO2k9aXx8bi8yO2NvbnN0IGY9KCk9Pntjb25zdCBhPXMoKSxPPWErbitpO2ZvcihjPT09MCYmKGM9YStsKTtjPE87KWM9TWF0aC5yb3VuZChjKnUpL3UsYz49YSYmZShjLHQsZCxhKSxjPGEmJmNvbnNvbGUubG9nKCJUT08gTEFURSIsYyksYys9dCxkKyt9O2xldCBwO2NvbnN0IHk9KCk9PntUKCksZigpLHA9c2V0SW50ZXJ2YWwoZixuKjFlMyl9LFQ9KCk9PnAhPT12b2lkIDAmJmNsZWFySW50ZXJ2YWwocCk7cmV0dXJue3NldER1cmF0aW9uOmcsc3RhcnQ6eSxzdG9wOigpPT57ZD0wLGM9MCxUKCl9LHBhdXNlOigpPT5UKCksZHVyYXRpb246dCxpbnRlcnZhbDpuLGdldFBoYXNlOigpPT5jLG1pbkxhdGVuY3k6bH19fSkoKTsK",import.meta.url).href,import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const a=i=>{const{cps:o,begin:u,end:c,cycle:h,time:d}=i;this.cps=o,this.cycle=h;const m=this.collator.calculateOffset(d)+d;r(u,c,m),this.time_at_last_tick_message=m},r=(i,o,u)=>{this.started!==!1&&this.pattern.queryArc(i,o,{_cps:this.cps,cyclist:"neocyclist"}).forEach(c=>{if(c.hasOnset()){const h=Zi(c.whole.begin-this.cycle,this.cps)+u+this.latency,d=Zi(c.duration,this.cps);t?.(c,0,d,this.cps,h)}})};this.channel.onmessage=i=>{if(!this.started)return;const{payload:o,type:u}=i.data;u==="tick"&&a(o)}}sendMessage(t,n){this.worker.port.postMessage({type:t,payload:n,id:this.id})}now(){const t=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+t}setCps(t=1){this.sendMessage("cpschange",{cps:t})}setCycle(t){this.sendMessage("setcycle",{cycle:t})}setStarted(t){this.sendMessage("toggle",{started:t}),this.started=t,this.onToggle?.(t)}start(){yt("[cyclist] start"),this.setStarted(!0)}stop(){yt("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(t,n=!1){this.pattern=t,n&&!this.started&&this.start()}log(t,n,s){const a=s.filter(r=>r.hasOnset());console.log(`${t.toFixed(4)} - ${n.toFixed(4)} ${Array(a.length).fill("I").join("")}`)}}let Ei,Eb,kb,Rb,Vb;function ki(){if(!Ei)throw new Error("no time set! use setTime to define a time source");return Ei()}function ir(e){Ei=e}function Bb(e){Eb=e}function Dv(){return Eb?.()}function zb(e){kb=e}function Lv(){return kb}function Wb(e){Rb=e}function Ev(){return Rb}function Nb(e){Vb=!!e}function kv(){return Vb}function Ri(e,t){if(t||(t="assertion failed"),!e)throw new Error(t)}let Ae=class{constructor(e,t){this.type=e,t!==void 0&&(this.value=t),this.ins=[]}static parseInput(e,t){if(typeof e=="function"){if(!t)throw new Error("tried to parse function input without without passing node..");return e(t)}return typeof e=="object"?e:typeof e=="number"&&!isNaN(e)||typeof e=="string"?Ut(e):(console.log(`invalid input type "${typeof e}" for node of type "${t.type}", falling back to 0. The input was:`,e),0)}};const Es=(e,t)=>new Ae(e,t);let Pt=new Map;const Kn="poly",Vi="exit";Ae.prototype.inherit=function(e){return e.inputOf&&(this.inputOf=e.inputOf),e.outputOf&&(this.outputOf=e.outputOf),this};Ae.prototype.toObject=function(){return JSON.parse(JSON.stringify(this))};Ae.prototype.stringify=function(){return JSON.stringify(this,null,2).replaceAll('"',"'")};function Tb(e,...t){let n=1;if(t=t.map(a=>{if(Array.isArray(a)){if(a.length===1)return a[0];a=new Ae(Kn).withIns(...a)}if(typeof a=="function"){const r=a(new Ae("peek"));r.type===Kn&&(n=Math.max(r.ins.length,n))}return a.type===Kn&&(n=Math.max(a.ins.length,n)),a}),n===1){const a=Es(e);return a.withIns(...t.map(r=>Ae.parseInput(r,a)))}if(e===Vi){const a=t.map(r=>r.type===Kn?r.ins.map(i=>Ae.parseInput(i).inherit(i)):r).flat();return Es(Vi).withIns(...a)}const s=Array.from({length:n},(a,r)=>{const i=new Ae(e),o=t.map(u=>u.type===Kn?Ae.parseInput(u.ins[r%u.ins.length],i).inherit(u):(u=Ae.parseInput(u,i),u.type===Kn&&(u=u.ins[r]),u));return i.withIns(...o)});return new Ae(Kn).withIns(...s)}function Rv(e,t){const n=Pt.get(e);return n?.ins?.[t]?n.ins[t].name:""}let $=(e,t)=>gt(e,(...n)=>Tb(e,...n),t);Pt.set("register",{tags:["meta"],graph:!1,description:"Registers a new Node function. Sets it on the prototype + returns the function itself. Like `module` but doesn't hide complexity in graph viz.",examples:[`let kick = register('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let gt=(e,t,n)=>(n&&Pt.set(e,n),Ae.prototype[e]=function(...s){return t(this,...s)},Ae.prototype["_"+e]=function(){return this},t);Pt.set("module",{tags:["meta"],graph:!0,description:"Creates a module. Like `register`, but the graph viz will hide the internal complexity of the module.",examples:[`let kick = module('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let Vv=0;function Tt(e,t,n){return gt(e,(...s)=>{const a=Vv++;return s=s.map((r,i)=>Ae.parseInput(r).asModuleInput?.(e,a,i)),t(...s).asModuleOutput?.(e,a)},n)}Pt.set("n",{tags:["math"],description:"Constant value node. Turns a number into a Node.",ins:[{name:"value",default:0}]});function Ut(e){return Array.isArray(e)?poly(...e.map(t=>Ut(t))):typeof e=="object"?e:Es("n",e)}Pt.set("out",{tags:["meta"],description:"Sends the node to the audio output"});Pt.set("withIns",{internal:!0,tags:["innards"],description:"Sets the inputs of a node. Returns the node itself",ins:[{name:"in",dynamic:!0}]});Ae.prototype.withIns=function(...e){return this.ins=e,this};Pt.set("flatten",{internal:!0,tags:["innards"],description:"Flattens the node to a list of all nodes in the graph, where each Node's ins are now indices"});Ae.prototype.flatten=function(){return zv(this)};Pt.set("apply",{graph:!0,tags:["meta"],description:"Applies the given function to the Node. Useful when a node has to be used multiple times.",examples:[`impulse(4)
.apply(imp=>imp
  .seq(110,220,330,440)
  .sine()
  .mul( imp.ad(.1,.1) )
).out()`]});Ae.prototype.apply=function(e){return e(this)};Pt.set("clone",{internal:!0,tags:["innards"],description:"Clones the node"});Ae.prototype.clone=function(){return new Ae(this.type,this.value).withIns(...this.ins)};Pt.set("map",{tags:["meta"],description:"Applies the given function to all ins if it's poly node. Otherwise it applies the function to itself.",examples:[`n([110,220,330])
.map( freq=>freq.mul([1,1.007]).saw().mix() )
.mix(2).mul(.5).out()`]});Ae.prototype.map=function(e){return this.type!=="poly"?e(this):poly(...this.ins.map(e))};Ae.prototype.channel=function(e){return this.type!=="poly"?this:this.ins[e%this.ins.length]};Pt.set("select",{tags:["meta"],graph:!0,description:"Find the first occurence of the given type up in the graph and returns the match. Useful to exit a feedback loop at another point.",examples:[`sine(220).mul(impulse(1).ad(.001,.2))
.add( x=>x.delay(.2).mul(.8) )
.select('delay').out()
`]});Ae.prototype.select=function(e){for(let t of this.ins){if(t.type===e)return t;const n=t.select(e);if(n)return n}};Pt.set("debug",{tags:["meta"],description:"Logs the node to the console"});Ae.prototype.debug=function(e=t=>t){return console.log(e(this)),this};function Bv(e){const t=modules.get(e),n=Array.from({length:t.length},(a,r)=>Es(`$INPUT${r}`)),s=t(...n);return JSON.stringify(s,null,2)}function zv(e){const t=[];return Ao(e,n=>(t.push(n),n)),t.map(n=>{let s={...n,type:n.type,ins:n.ins.map(a=>t.indexOf(a)+"")};return n.value!==void 0&&(s.value=n.value),n.to!==void 0&&(s.to=t.indexOf(n.to)),s})}let Ib=$("exit",{internal:!0});function Yb(e,t){let n=[];const s=gt("out",function(a,r=[0,1]){return n.push(a.output(r)),a});return t?(t.out=s,Function(...Object.keys(t),e)(...Object.values(t))):(globalThis.out=s,Function(e)()),Ib(...n)}Ae.prototype.over=function(e){return this.apply(t=>add(t,e(t)))};Ae.prototype.dfs=function(e,t){return this.apply(n=>Ao(n,e,t))};Ae.prototype.apply2=function(e){return e(this,this)};let Ao=(e,t,n=[])=>(e=t(e,n),n.push(e),e.ins=e.ins.map(s=>n.includes(s)?s:Ao(s,t,n)),e);Ae.prototype.asModuleInput=function(e,t,n){return this.inputOf=this.inputOf||[],this.inputOf.push([e,t,n]),this};Ae.prototype.asModuleOutput=function(e,t){return this.outputOf=[e,t],this};function So(e,t={}){const{log:n=!1,lang:s="js",fallbackType:a="thru",constType:r="n",getRegister:i=y=>`r[${y}]`,getOutput:o=y=>`o[${y}]`,getSource:u=y=>`s[${y}]`}=t;n&&console.log("compile",e);const c=Wv(e);let h=[],d=y=>c[y].type!==r?i(y):typeof c[y].value=="string"?`"${c[y].value}"`:c[y].value;const m=[];for(let y in c){const C=c[y],X=c[y].ins.map(A=>d(c.indexOf(A))),S=m.length;let L=Pt.get(C.type);L||(console.warn(`unhandled node type "${c[y].type}". falling back to "${a}"`),L=Pt.get(a));const z={vars:X,node:C,nodes:c,id:y,ugenIndex:S,ugen:L.ugen,name:d(y),lang:s,getRegister:i,getOutput:o,getSource:u};L.compile&&h.push(L.compile(z)),L.ugen&&m.push({type:L.ugen,inputs:X})}const g=h.join(`
`);return n&&(console.log("compiled code:"),console.log(g)),{src:g,ugens:m,registers:c.length}}Ae.prototype.compile=function(e){return So(this,e)};function Wv(e){const t=[],n=new Set;function s(a){if(!(typeof a!="object"||n.has(a))){n.add(a);for(let r in a.ins)s(a.ins[r]);t.push(a)}}return s(e),t}const rc=Object.freeze(Object.defineProperty({__proto__:null,compile:So},Symbol.toStringTag,{value:"Module"}));class Hb{constructor(){this._events={}}on(t,n){this._events[t]||(this._events[t]=[]);let s=this._events[t];Ri(s.indexOf(n)==-1),s.push(n)}removeListener(t,n){let s=this._events[t],a=s.indexOf(n);a!=-1&&s.splice(a,1)}trigger(t,...n){let s=this._events[t]||[];for(let a=0;a<s.length;a++)s[a].apply(null,n)}}class Nv extends Hb{constructor(t=navigator){super(),this.midiAccess=null,this.getMIDIAccess(t)}async getMIDIAccess(t){if("requestMIDIAccess"in t){this.midiAccess=await t.requestMIDIAccess({sysex:!1}),console.log("got MIDI access");for(let n of this.midiAccess.inputs.values())n.state=="connected"&&(n.onmidimessage=s=>this.trigger("midimessage",n.id,s.data));this.midiAccess.onstatechange=n=>{n.port.type=="input"&&n.port.state=="connected"&&(console.log("MIDI device connected:",n.port.name,"PORT:",n.port.id),n.port.onmidimessage=s=>this.trigger("midimessage",n.port.id,s.data))}}}broadcast(t,n){if(midi)for(let s of this.midiAccess.outputs.values())s.send(t,n)}}function Tv(e){let t=e[0]&240,n=(e[0]&15)+1;if(t==176&&e.length==3){let s=e[1],a=e[2]/127*2-1;return{type:"CC",channel:n,cc:s,value:a}}if(t==224&&e.length==3){let s=e[1],a=(e[2]<<7|s)/16383*2-1;return{type:"PITCHBEND",channel:n,value:a}}if(t==144&&e.length==3){let s=e[1],a=e[2]/127;return{type:"NOTE_ON",channel:n,note:s,velocity:a}}if(t==128&&e.length==3){let s=e[1];return{type:"NOTE_ON",channel:n,note:s,velocity:0}}}class Iv extends Hb{constructor(){super(),this.attach()}attach(){typeof window<"u"&&(this.handleMouseMove=t=>{const n=t.clientX/document.body.clientWidth*2-1,s=t.clientY/document.body.clientHeight*2-1;this.trigger("move",n,s)},document.addEventListener("mousemove",this.handleMouseMove))}detach(){typeof window<"u"&&document.removeEventListener("mousemove",this.handleMouseMove)}}const Yv="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGcoaCx0KXtpZih0fHwodD0iYXNzZXJ0aW9uIGZhaWxlZCIpLCFoKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBTKGgsdCxzKXtyZXR1cm4gaDw9MD90Omg+PTE/czp0K2gqKHMtdCl9ZnVuY3Rpb24gUChoLHQscyl7cmV0dXJuIGg8PXQ/MDpoPj1zPzE6cz09PXQ/MDooaC10KS8ocy10KX1mdW5jdGlvbiBFKGgsdCl7cmV0dXJuIGg8dD8oaC89dCxoK2gtaCpoLTEpOmg+MS10PyhoPShoLTEpL3QsaCpoK2graCsxKTowfWZ1bmN0aW9uIFUoaCl7cmV0dXJuIE1hdGguZmxvb3IoaCk9PT1ofWZ1bmN0aW9uIF8oaCl7cmV0dXJuIFUoaCkmJmg+MH1mdW5jdGlvbiBrKGgsdCl7dD1NYXRoLm1pbihNYXRoLm1heCh0LDApLDEpLHQtPS4wMTt2YXIgcz0yKnQvKDEtdCksZT0oMStzKSpoLygxK3MqTWF0aC5hYnMoaCkpO3JldHVybiBlfWZ1bmN0aW9uIHcoaCx0LHMpe3JldHVybiBoPj0xP3M6dCtoKihzLXQpfWZ1bmN0aW9uIFQoKXt0aGlzLnN0YXRlPSJvZmYiLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5zdGFydFZhbD0wfVQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oaCx0LHMsZSxpLG4pe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcj1oLXRoaXMuc3RhcnRUaW1lO3JldHVybiByPnM/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1oLDEpOncoci9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCByPWgtdGhpcy5zdGFydFRpbWUsbD13KHIvZSwxLGkpO3JldHVybiB0PD0wPyh0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1oLHRoaXMuc3RhcnRWYWw9bCxsKTpyPmU/KHRoaXMuc3RhdGU9InN1c3RhaW4iLHRoaXMuc3RhcnRUaW1lPWgsaSk6bH1jYXNlInN1c3RhaW4iOnJldHVybiB0PD0wJiYodGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPWkpLGk7Y2FzZSJyZWxlYXNlIjp7bGV0IHI9aC10aGlzLnN0YXJ0VGltZTtpZihyPm4pcmV0dXJuIHRoaXMuc3RhdGU9Im9mZiIsMDtsZXQgbD13KHIvbix0aGlzLnN0YXJ0VmFsLDApO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPWgsdGhpcy5zdGFydFZhbD1sKSxsfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn07ZnVuY3Rpb24gdigpe3RoaXMuczA9MCx0aGlzLnMxPTB9di5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oaCx0LHMpe2coIWlzTmFOKGgpLCJOYU4gdmFsdWUgZmVkIGluIFR3b1BvbGVGaWx0ZXIiKSx0PU1hdGgubWluKHQsMSkscz1NYXRoLm1heChzLDApO3ZhciBlPU1hdGgucG93KC41LCgxLXQpLy4xMjUpLGk9TWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSksbj0xLWkqZSxyPXRoaXMuczAsbD10aGlzLnMxO3JldHVybiByPW4qci1lKmwrZSpoLGw9bipsK2UqcixoPWwsdGhpcy5zMD1yLHRoaXMuczE9bCxofTtsZXQgQT1jbGFzcyBDe2NvbnN0cnVjdG9yKHQscyl7dGhpcy5zYW1wbGVSYXRlPXQscz90aGlzLmJ1ZmZlcj1zLnNsaWNlKDApOih0aGlzLmJ1ZmZlcj1uZXcgRmxvYXQzMkFycmF5KDEwKnQpLHRoaXMuYnVmZmVyLmZpbGwoMCkpLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1yZXNldCgpe3RoaXMuYnVmZmVyLmZpbGwoMCksdGhpcy53cml0ZUlkeD0wLHRoaXMucmVhZElkeD0wfWNsb25lKCl7Y29uc3QgdD1uZXcgQyh0aGlzLnNhbXBsZVJhdGUsdGhpcy5idWZmZXIpO3JldHVybiB0LndyaXRlSWR4PXRoaXMud3JpdGVJZHgsdC5yZWFkSWR4PXRoaXMucmVhZElkeCx0fXdyaXRlKHQscyl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09dDtsZXQgZT1NYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuc2FtcGxlUmF0ZSpzKSx0aGlzLmJ1ZmZlci5sZW5ndGgtMSk7dGhpcy5yZWFkSWR4PXRoaXMud3JpdGVJZHgtZSx0aGlzLnJlYWRJZHg8MCYmKHRoaXMucmVhZElkeCs9dGhpcy5idWZmZXIubGVuZ3RoKX1yZWFkKCl7cmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMucmVhZElkeF19fTtjb25zdCB5PTEvNDhlMyxNPTI0LE49TS80O2NsYXNzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgcSBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5lbnY9bmV3IFR9dXBkYXRlKHQscyxlLGksbixyKXtyZXR1cm4gdGhpcy5lbnYuZXZhbCh0LHMsZSxpLG4scil9fWNsYXNzIEYgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9TSp0LzYwLGU9LjU7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSpzLHRoaXMucGhhc2UlMTxlPzE6LTF9fWNsYXNzIEQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuaW5TZ249ITAsdGhpcy5vdXRTZ249ITAsdGhpcy5jbG9ja0NudD0wfXVwZGF0ZSh0LHMpe2xldCBlPXQ+MDtyZXR1cm4gdGhpcy5pblNnbiE9ZSYmKHRoaXMuY2xvY2tDbnQrKyx0aGlzLmNsb2NrQ250Pj1zJiYodGhpcy5jbG9ja0NudD0wLHRoaXMub3V0U2duPSF0aGlzLm91dFNnbikpLHRoaXMuaW5TZ249ZSx0aGlzLm91dFNnbj8xOi0xfX1jbGFzcyBMIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBPPW5ldyBNYXA7Y2xhc3MgViBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1zLmlucHV0c1syXTtuJiZPLmhhcyhuKT90aGlzLmRlbGF5PU8uZ2V0KG4pLmNsb25lKCk6dGhpcy5kZWxheT1uZXcgQShlKSxuJiZPLnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIEcgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBrKHQscyl9fWNsYXNzIFIgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIEJ7Y29uc3RydWN0b3IoKXt0aGlzLnZhbHVlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnZhbHVlPXQsdGhpcy52YWx1ZX19Y29uc3QgJD0zNDA7bGV0IEk9MDtjbGFzcyBIe2NvbnN0cnVjdG9yKCl7dGhpcy5jaD1JLHRoaXMuc3RhcnRfc2VlZD0kKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9MS8oMTw8MjQpLEkrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT1NYXRoLnJhbmRvbSgpKjItMX11cGRhdGUodCl7cmV0dXJuIHQ/KHRoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTEsdGhpcy52YWx1ZSk6dGhpcy52YWx1ZX19Y2xhc3MgS3t1cGRhdGUodCl7cmV0dXJuIE1hdGgucmFuZG9tKCk8dCp5P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgV3tjb25zdHJ1Y3Rvcigpe3RoaXMub3V0PTB9dXBkYXRlKCl7bGV0IHQ9TWF0aC5yYW5kb20oKSoyLTE7cmV0dXJuIHRoaXMub3V0PSh0aGlzLm91dCsuMDIqdCkvMS4wMix0aGlzLm91dH19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe3RoaXMuYjA9MCx0aGlzLmIxPTAsdGhpcy5iMj0wLHRoaXMuYjM9MCx0aGlzLmI0PTAsdGhpcy5iNT0wLHRoaXMuYjY9MH11cGRhdGUoKXtjb25zdCB0PU1hdGgucmFuZG9tKCkqMi0xO3RoaXMuYjA9Ljk5ODg2KnRoaXMuYjArdCouMDU1NTE3OSx0aGlzLmIxPS45OTMzMip0aGlzLmIxK3QqLjA3NTA3NTksdGhpcy5iMj0uOTY5KnRoaXMuYjIrdCouMTUzODUyLHRoaXMuYjM9Ljg2NjUqdGhpcy5iMyt0Ki4zMTA0ODU2LHRoaXMuYjQ9LjU1KnRoaXMuYjQrdCouNTMyOTUyMix0aGlzLmI1PS0uNzYxNip0aGlzLmI1LXQqLjAxNjg5ODtjb25zdCBzPXRoaXMuYjArdGhpcy5iMSt0aGlzLmIyK3RoaXMuYjMrdGhpcy5iNCt0aGlzLmI1K3RoaXMuYjYrdCouNTM2MjtyZXR1cm4gdGhpcy5iNj10Ki4xMTU5MjYscyouMTF9fWNsYXNzIFkgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIHogZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCxzKXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxPHM/MTotMX19Y2xhc3MgWiBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5waGFzZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxKjItMX19Y2xhc3MgSntjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9RSh0aGlzLnBoYXNlLHMpLGk9Mip0aGlzLnBoYXNlLTEtZTtyZXR1cm4gdGhpcy5waGFzZSs9cyx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlLT0xKSxpfX1jbGFzcyBRIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTAsdGhpcy5zeW5jU2duPSExfXVwZGF0ZSh0LHMsZSl7IXRoaXMuc3luY1NnbiYmcz4wJiYodGhpcy5waGFzZT0wKSx0aGlzLnN5bmNTZ249cz4wO2xldCBpPSh0aGlzLnBoYXNlK2UpJTE7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LE1hdGguc2luKGkqMipNYXRoLlBJKX19Y2xhc3MgdHR7ZEJUb0xpbmVhcih0KXtyZXR1cm4gTWF0aC5wb3coMTAsdC8yMCl9bGluZWFyVG9EQih0KXtyZXR1cm4gMjAqTWF0aC5sb2cxMCh0KX11cGRhdGUodCxzLGUpe2xldCBpPXRoaXMubGluZWFyVG9EQihNYXRoLmFicyh0KSksbj0wO3JldHVybiBpPnMmJihuPShpLXMpKigxLTEvZSkpLHRoaXMuZEJUb0xpbmVhcigtbil9fWNsYXNzIHN0IGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3RoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0O2xldCBzPXRoaXMucGhhc2UlMTtyZXR1cm4oczwuNT8yKnM6MS0yKihzLS41KSkqMi0xfX1jbGFzcyBldCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1lLzMwO2coXyhuKSksdGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheShuKSx0aGlzLndyaXRlUG9zPTB9dXBkYXRlKHQscyxlLGkpe3JldHVybiB0aGlzLmJ1ZmZlclt0aGlzLndyaXRlUG9zXT10LHRoaXMud3JpdGVQb3MrKyx0aGlzLndyaXRlUG9zJXRoaXMuYnVmZmVyLmxlbmd0aD09MCYmKHRoaXMud3JpdGVQb3M9MCx0aGlzLnNlbmQoe3R5cGU6IlNFTkRfU0FNUExFUyIsaWQ6cyxzYW1wbGVzOnRoaXMuYnVmZmVyLGNoYW5uZWxzOmUsY2hhbm5lbDppfSkpLHR9fWNsYXNzIGl0e2NvbnN0cnVjdG9yKCl7dGhpcy5sYWdVbml0PTQ0MTAsdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyp0aGlzLmxhZ1VuaXQsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgaHR7Y29uc3RydWN0b3IoKXt0aGlzLmxhc3Q9MH11cGRhdGUodCxzLGUpe2NvbnN0IGk9cyp5LG49ZSp5O2xldCByPXQtdGhpcy5sYXN0O3JldHVybiByPmk/cj1pOnI8LW4mJihyPS1uKSx0aGlzLmxhc3QrPXIsdGhpcy5sYXN0fX1jbGFzcyBhdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgbnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMX19Y2xhc3MgcnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMH19Y2xhc3MgdXQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBzPDAmJihzPTApLHM9cysxLHQ9dCpzLDQqKE1hdGguYWJzKC4yNSp0Ky4yNS1NYXRoLnJvdW5kKC4yNSp0Ky4yNSkpLS4yNSl9fWNsYXNzIGx0IGV4dGVuZHMgb3t1cGRhdGUodCl7cmV0dXJuIHR9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmcoITEpfX1nZXRGcmVxKCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMuZnJlcTtjYXNlIm9mZiI6cmV0dXJuIHRoaXMuZnJlcTtkZWZhdWx0OmcoITEpfX1nZXRWZWxvY2l0eSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLnZlbG9jaXR5O2Nhc2Uib2ZmIjpyZXR1cm4gdGhpcy52ZWxvY2l0eTtkZWZhdWx0OmcoITEpfX19Y2xhc3Mgb3QgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWdhdGUifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRHYXRlKCl9fWNsYXNzIGN0IGV4dGVuZHMgbXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlmcmVxIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0RnJlcSgpfX1jbGFzcyBkdCBleHRlbmRzIG17Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgZnR7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBwdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgYnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBndCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBtdCBleHRlbmRzIG97dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyBTdHt1cGRhdGUodCxzLGUsaSxuKXtsZXQgcj1QKHQscyxlKTtyZXR1cm4gUyhyLGksbil9fWNsYXNzIHd0e3VwZGF0ZSh0LHMsZSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQscyksZSl9fWNsYXNzIHZ0e2NvbnN0cnVjdG9yKCl7dGhpcy5oaT0hMX11cGRhdGUodCl7cmV0dXJuIXRoaXMuaGkmJnQ+MD8odGhpcy5oaT0hMCwxKToodGhpcy5oaSYmdDw9MCYmKHRoaXMuaGk9ITEpLDApfX1jbGFzcyB5dHtjb25zdHJ1Y3Rvcigpe3RoaXMueDE9MCx0aGlzLngyPTAsdGhpcy55MT0wLHRoaXMueTI9MCx0aGlzLmEwPTEsdGhpcy5hMT0wLHRoaXMuYTI9MCx0aGlzLmIwPTEsdGhpcy5iMT0wLHRoaXMuYjI9MH11cGRhdGUodD0wLHM9MCxlPTUwMCxpPTEsbj0xKXtjb25zdCByPTIqTWF0aC5QSSplL3NhbXBsZVJhdGUsbD1NYXRoLnNpbihyKTtpPU1hdGgucG93KDEwLGkvMjApO2NvbnN0IHU9bC8oMippKSxjPU1hdGguY29zKHIpO2lmKHM9PT0wKXRoaXMuYjE9MS1jLHRoaXMuYjA9dGhpcy5iMS8yLHRoaXMuYjI9dGhpcy5iMCx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09MSl0aGlzLmIwPSgxK2MpLzIsdGhpcy5iMT0tKDErYyksdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0yKXRoaXMuYjA9bC8yLHRoaXMuYjE9MCx0aGlzLmIyPS10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0zKXRoaXMuYjA9MSx0aGlzLmIxPS0yKmMsdGhpcy5iMj0xLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT00KXRoaXMuYjA9MS11LHRoaXMuYjE9LTIqYyx0aGlzLmIyPTErdSx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09NSl7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKTt0aGlzLmIwPTErdSphLHRoaXMuYjE9LTIqYyx0aGlzLmIyPTEtdSphLHRoaXMuYTA9MSt1L2EsdGhpcy5hMT0tMipjLHRoaXMuYTI9MS11L2F9ZWxzZSBpZihzPT09Nil7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKSxkPTIqTWF0aC5zcXJ0KGEpKnUsZj0oYS0xKSpjLHA9KGErMSkqYzt0aGlzLmIwPWEqKGErMS1mK2QpLHRoaXMuYjE9MiphKihhLTEtcCksdGhpcy5iMj1hKihhKzEtZi1kKSx0aGlzLmEwPWErMStmK2QsdGhpcy5hMT0tMiooYS0xK3ApLHRoaXMuYTI9YSsxK2YtZH1lbHNlIGlmKHM9PT03KXtjb25zdCBhPU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQoYSkqdSxmPShhLTEpKmMscD0oYSsxKSpjO3RoaXMuYjA9YSooYSsxK2YrZCksdGhpcy5iMT0tMiphKihhLTErcCksdGhpcy5iMj1hKihhKzErZi1kKSx0aGlzLmEwPWErMS1mK2QsdGhpcy5hMT0yKihhLTEtcCksdGhpcy5hMj1hKzEtZi1kfXRoaXMuYjAvPXRoaXMuYTAsdGhpcy5iMS89dGhpcy5hMCx0aGlzLmIyLz10aGlzLmEwLHRoaXMuYTEvPXRoaXMuYTAsdGhpcy5hMi89dGhpcy5hMCx0aGlzLmEwPTE7Y29uc3QgYj10aGlzLmIwKnQrdGhpcy5iMSp0aGlzLngxK3RoaXMuYjIqdGhpcy54Mi10aGlzLmExKnRoaXMueTEtdGhpcy5hMip0aGlzLnkyO3JldHVybiB0aGlzLngyPXRoaXMueDEsdGhpcy54MT10LHRoaXMueTI9dGhpcy55MSx0aGlzLnkxPWIsYn19Y29uc3QgTXQ9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLEFEU1JOb2RlOnEsQXVkaW9JbjpsdCxBdWRpb05vZGU6byxCUEY6cnQsQmlxdWFkRmlsdGVyOnl0LEJyb3duTm9pc2VPc2M6VyxDQzpwdCxDTE9DS19QUFE6TSxDTE9DS19QUFM6TixDbGlwOnd0LENsb2NrOkYsQ2xvY2tEaXY6RCxDbG9ja091dDpMLERlbGF5OlYsRGlzdG9ydDpHLER1c3RPc2M6SyxGaWx0ZXI6bnQsRm9sZDp1dCxIb2xkOlIsSW1wdWxzZU9zYzpZLExhZzppdCxMY2dOb2lzZTpILE1pZGlDQzpidCxNaWRpRnJlcTpjdCxNaWRpR2F0ZTpvdCxNaWRpSW46bSxNaWRpVmVsOmR0LE5vaXNlT3NjOmosT3V0cHV0OkIsUGljazptdCxQaW5rTm9pc2U6WCxQdWxzZU9zYzp6LFJlbWFwOlN0LFNhd09zYzpKLFNjb3BlOmV0LFNlcXVlbmNlOmd0LFNpZGVjaGFpbkNvbXByZXNzb3I6dHQsU2lnbmFsOmZ0LFNpbmVPc2M6USxTbGV3Omh0LFNsaWRlOmF0LFRyaU9zYzpzdCxUcmlnOnZ0LFphd09zYzpafSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpLHg9bmV3IE1hcChPYmplY3QuZW50cmllcyhNdCkpO2NsYXNzIE90e2NvbnN0cnVjdG9yKHQscyl7Zyh0PT00OGUzKSx0aGlzLnNhbXBsZVJhdGU9dCx0aGlzLnBsYXlQb3M9MCx0aGlzLnNlbmQ9cyx0aGlzLnVuaXRzPVtdLHRoaXMudW5pdElEPTAsdGhpcy5mYWRlVGltZT0uMDEsdGhpcy5tYXhVbml0cz0xLHRoaXMucT1bXX1mYWRlT3V0VW5pdCh0KXt0LmZhZGVPdXQodGhpcy5wbGF5UG9zLHRoaXMuZmFkZVRpbWUpLHRoaXMuZnJlZVVuaXQodC5pZCx0aGlzLmZhZGVUaW1lKX1mYWRlT3V0VW5pdEJ5SWQodCl7Y29uc3Qgcz10aGlzLnVuaXRzLmZpbmQoZT0+ZS5pZD09PXQpO3MmJnRoaXMuZmFkZU91dFVuaXQocyl9ZmFkZU91dEFsbFVuaXRzKCl7dGhpcy51bml0cy5mb3JFYWNoKHQ9PnRoaXMuZmFkZU91dFVuaXQodCkpfWZhZGVPdXRPbGRVbml0cygpe2NvbnN0IHQ9dGhpcy51bml0cy5maWx0ZXIoZT0+ZS5hY3RpdmUpLHM9dC5sZW5ndGgtdGhpcy5tYXhVbml0cztzPD0wfHx0LnNsaWNlKDAscykuZm9yRWFjaChlPT50aGlzLmZhZGVPdXRVbml0KGUpKX1zdG9wKCl7dGhpcy5mYWRlT3V0QWxsVW5pdHMoKSx0aGlzLnNlbmQoe3R5cGU6IlNUT1AiLGZhZGVUaW1lOnRoaXMuZmFkZVRpbWV9KX1zcGF3blVuaXQodCxzKXtjb25zdCBlPW5ldyB4dCh0aGlzLnVuaXRJRCsrLHQsdGhpcy5zYW1wbGVSYXRlLHRoaXMuc2VuZCk7dGhpcy51bml0cy5wdXNoKGUpLGUuZmFkZUluKHRoaXMucGxheVBvcyx0aGlzLmZhZGVUaW1lKSx0aGlzLmZhZGVPdXRPbGRVbml0cygpLGNvbnNvbGUubG9nKGBzcGF3biB1bml0ICR7ZS5pZH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApLHMmJnRoaXMuc2NoZWR1bGVNZXNzYWdlKHttc2c6e3R5cGU6IkZBREVfT1VUX1VOSVQiLGlkOmUuaWR9LHRpbWU6c30pfWZyZWVVbml0KHQscyl7aWYocyl7dGhpcy5zY2hlZHVsZU1lc3NhZ2Uoe21zZzp7dHlwZToiRlJFRV9VTklUIixpZDp0fSx0aW1lOnN9KTtyZXR1cm59Y29uc3QgZT10aGlzLnVuaXRzLmxlbmd0aDt0aGlzLnVuaXRzPXRoaXMudW5pdHMuZmlsdGVyKGk9PmkuaWQhPT10KSxlPnRoaXMudW5pdHMubGVuZ3RoJiZjb25zb2xlLmxvZyhgZnJlZSB1bml0ICR7dH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApfXBhcnNlTXNnKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UiU1BBV05fVU5JVCI6dGhpcy5zcGF3blVuaXQodC51bml0LHQuZHVyYXRpb24pO2JyZWFrO2Nhc2UiRlJFRV9VTklUIjp0aGlzLmZyZWVVbml0KHQuaWQpO2JyZWFrO2Nhc2UiRkFERV9PVVRfVU5JVCI6dGhpcy5mYWRlT3V0VW5pdEJ5SWQodC5pZCk7YnJlYWs7Y2FzZSJOT1RFX09OIjp0aGlzLm5vdGVPbih0KTticmVhaztjYXNlIkNDIjp0aGlzLm1pZGlDQyh0KTticmVhaztjYXNlIlNFVF9DT05UUk9MIjp0aGlzLnNldENvbnRyb2wodCk7YnJlYWs7Y2FzZSJGQURFX1RJTUUiOnRoaXMuZmFkZVRpbWU9TnVtYmVyKHQuZmFkZVRpbWUpO2JyZWFrO2Nhc2UiTUFYX1VOSVRTIjp0aGlzLm1heFVuaXRzPU51bWJlcih0Lm1heFVuaXRzKTticmVhaztjYXNlIlNUT1AiOnRoaXMuc3RvcCgpO2JyZWFrO2Nhc2UiU0VUX1VHRU4iOnRoaXMuYWRkVWdlbih0LmNsYXNzTmFtZSx0LnVnZW4pO2JyZWFrO2Nhc2UiU0NIRURVTEVfTVNHIjp0aGlzLnNjaGVkdWxlTWVzc2FnZSh0KTticmVhaztjYXNlIkJBVENIX01TRyI6dC5tZXNzYWdlcy5mb3JFYWNoKHM9PnRoaXMucGFyc2VNc2cocykpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihgdW5rbm93biBtZXNzYWdlIHR5cGUgJHt0LnR5cGV9YCl9fW5vdGVPbih0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5ub3RlT24odCkpfW1pZGlDQyh0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5taWRpQ0ModCkpfXNldENvbnRyb2wodCl7dGhpcy51bml0cy5mb3JFYWNoKHM9PnMuc2V0Q29udHJvbCh0KSl9c2NoZWR1bGVNZXNzYWdlKHQpe2lmKHQudGltZT10aGlzLnBsYXlQb3MrdC50aW1lLCF0aGlzLnEubGVuZ3RoKXt0aGlzLnEucHVzaCh0KTtyZXR1cm59bGV0IHM9MDtmb3IoO3M8dGhpcy5xLmxlbmd0aCYmdGhpcy5xW3NdLnRpbWU8dC50aW1lOylzKys7dGhpcy5xLnNwbGljZShzLDAsdCl9Z2VuU2FtcGxlKHQpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy5wbGF5UG9zOyl0aGlzLnBhcnNlTXNnKHRoaXMucVswXS5tc2cpLHRoaXMucS5zaGlmdCgpO2lmKCF0aGlzLnVuaXRzLmxlbmd0aClyZXR1cm5bMCwwXTtjb25zdCBzPVswLDBdO2ZvcihsZXQgZT0wO2U8dGhpcy51bml0cy5sZW5ndGg7ZSsrKXtjb25zdCBpPXRoaXMudW5pdHNbZV0sbj1pLmdldExldmVsKHRoaXMucGxheVBvcyk7aS5nZW5TYW1wbGUodGhpcy5wbGF5UG9zLGkubm9kZXMsdCxpLnJlZ2lzdGVycyxpLm91dHB1dHMsaS5zb3VyY2VzKSxzWzBdKz1pLm91dHB1dHNbMF0qbixzWzFdKz1pLm91dHB1dHNbMV0qbn1yZXR1cm4gdGhpcy5wbGF5UG9zKz0xLzQ4ZTMsc31hZGRVZ2VuKHQscyl7Y29uc3QgZT1uZXcgRnVuY3Rpb24oYCR7c307cmV0dXJuICR7dH1gKSgpO3guc2V0KHQsZSl9fWNsYXNzIHh0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3RoaXMuaWQ9dCx0aGlzLnNhbXBsZVJhdGU9ZSx0aGlzLnNlbmQ9aSx0aGlzLm5vZGVzPVtdLHRoaXMuYWN0aXZlPSEwO2ZvcihsZXQgciBpbiBzLnVnZW5zKXtjb25zdCBsPXMudWdlbnNbcl07aWYoeC5oYXMobC50eXBlKSl7Y29uc3QgdT14LmdldChsLnR5cGUpLGM9TnVtYmVyKHIpO3RoaXMubm9kZXNbY109bmV3IHUoYyxsLHRoaXMuc2FtcGxlUmF0ZSx0aGlzLnNlbmQpfWVsc2UgY29uc29sZS53YXJuKGB1bmtub3duIHVnZW4gIiR7bC50eXBlfSJgKX10aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkocy5yZWdpc3RlcnMpLmZpbGwoMCk7bGV0IG49MTY7dGhpcy5vdXRwdXRzPW5ldyBBcnJheShuKS5maWxsKDApLHRoaXMuc291cmNlcz1uZXcgQXJyYXkobikuZmlsbCgwKSxzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCmArcy5zcmMsdGhpcy5nZW5TYW1wbGU9bmV3IEZ1bmN0aW9uKCJ0aW1lIiwibm9kZXMiLCJpbnB1dCIsInIiLCJvIiwicyIscy5zcmMpfW5vdGVPbih0KXt2YXIgdSxjLGI7Y29uc3R7Y2hhbm5lbDpzLG5vdGU6ZSx2ZWxvY2l0eTppfT10LG49dGhpcy5ub2Rlcy5maWx0ZXIoYT0+YS50eXBlPT09Im1pZGlmcmVxIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSkscj10aGlzLm5vZGVzLmZpbHRlcihhPT5hLnR5cGU9PT0ibWlkaWdhdGUiJiYoYS5jaGFubmVsPT09LTF8fGEuY2hhbm5lbD09PXMpKSxsPXRoaXMubm9kZXMuZmlsdGVyKGE9PmEudHlwZT09PSJtaWRpdmVsIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSk7aWYoaT4wKXtsZXQgYT1uLmZpbmQocD0+cC5pc0ZyZWUoKSl8fG5bMF0sZD1yLmZpbmQocD0+cC5pc0ZyZWUoKSl8fHJbMF0sZj1sLmZpbmQocD0+cC5pc0ZyZWUoKSl8fGxbMF07YT09bnVsbHx8YS5ub3RlT24oZSxpKSxkPT1udWxsfHxkLm5vdGVPbihlLGkpLGY9PW51bGx8fGYubm90ZU9uKGUsaSl9ZWxzZSh1PW4uZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fHUubm90ZU9mZigpLChjPXIuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGMubm90ZU9mZigpLChiPWwuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGIubm90ZU9mZigpfW1pZGlDQyh0KXtjb25zdHtjaGFubmVsOnMsY2M6ZSx2YWx1ZTppfT10O3RoaXMubm9kZXMuZm9yRWFjaChuPT57bi50eXBlPT09Im1pZGljYyImJihuLmNoYW5uZWw9PT0tMXx8bi5jaGFubmVsPT09cykmJm4uY2NudW1iZXI9PT1lJiZuLnNldFZhbHVlKGkpfSl9c2V0Q29udHJvbCh0KXtjb25zdHt2YWx1ZTpzLGlkOmV9PXQsaT10aGlzLm5vZGVzLmZpbmQobj0+bi50eXBlPT09ImNjIiYmbi5pZD09PWUpO2kmJmkuc2V0VmFsdWUocyl9Z2V0TGV2ZWwodCl7cmV0dXJuIHRoaXMuZmFkZVN0YXJ0PT09dm9pZCAwPzA6dGhpcy5hY3RpdmU/UygodC10aGlzLmZhZGVTdGFydCkvdGhpcy5mYWRlVGltZSwwLC4zKTpTKCh0LXRoaXMuZmFkZVN0YXJ0KS90aGlzLmZhZGVUaW1lLHRoaXMuZmFkZUZyb20sMCl9ZmFkZUluKHQscyl7dGhpcy5mYWRlU3RhcnQ9dCx0aGlzLmZhZGVUaW1lPXN9ZmFkZU91dCh0LHMpe3RoaXMuZmFkZVRpbWU9cyx0aGlzLmZhZGVGcm9tPXRoaXMuZ2V0TGV2ZWwodCksdGhpcy5hY3RpdmU9ITEsdGhpcy5mYWRlU3RhcnQ9dH1pc0RvbmUodCl7cmV0dXJuIXRoaXMuYWN0aXZlJiZ0aGlzLmdldExldmVsKHQpPT09MH19Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSx0aGlzLmF1ZGlvR3JhcGg9bmV3IE90KDQ4ZTMsdGhpcy5wb3J0LnBvc3RNZXNzYWdlLmJpbmQodGhpcy5wb3J0KSl9b25tZXNzYWdlKHQpe2xldCBzPXQuZGF0YTt0aGlzLmF1ZGlvR3JhcGgucGFyc2VNc2cocyl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1zWzBdLG49dFswXVswXSxyPWlbMF0sbD1pWzFdO2ZvcihsZXQgdT0wO3U8ci5sZW5ndGg7dSsrKXtsZXRbYyxiXT10aGlzLmF1ZGlvR3JhcGguZ2VuU2FtcGxlKG4/blt1XTowKTtyW3VdPWMsbFt1XT1ifXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2FtcGxlLWdlbmVyYXRvciIsVHQpfSkoKTsK",Hv="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIG4gZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiaXNSZWNvcmRpbmciLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuX2J1ZmZlclNpemU9MjA0OCx0aGlzLl9idWZmZXI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl9idWZmZXJTaXplKSx0aGlzLl9pbml0QnVmZmVyKCl9X2luaXRCdWZmZXIoKXt0aGlzLl9ieXRlc1dyaXR0ZW49MH1faXNCdWZmZXJFbXB0eSgpe3JldHVybiB0aGlzLl9ieXRlc1dyaXR0ZW49PT0wfV9pc0J1ZmZlckZ1bGwoKXtyZXR1cm4gdGhpcy5fYnl0ZXNXcml0dGVuPT09dGhpcy5fYnVmZmVyU2l6ZX1fYXBwZW5kVG9CdWZmZXIoZSl7dGhpcy5faXNCdWZmZXJGdWxsKCkmJnRoaXMuX2ZsdXNoKCksdGhpcy5fYnVmZmVyW3RoaXMuX2J5dGVzV3JpdHRlbl09ZSx0aGlzLl9ieXRlc1dyaXR0ZW4rPTF9X2ZsdXNoKCl7bGV0IGU9dGhpcy5fYnVmZmVyO3RoaXMuX2J5dGVzV3JpdHRlbjx0aGlzLl9idWZmZXJTaXplJiYoZT1lLnNsaWNlKDAsdGhpcy5fYnl0ZXNXcml0dGVuKSksdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtldmVudFR5cGU6ImRhdGEiLGF1ZGlvQnVmZmVyOmV9KSx0aGlzLl9pbml0QnVmZmVyKCl9X3JlY29yZGluZ1N0b3BwZWQoKXt0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZToic3RvcCJ9KX1wcm9jZXNzKGUsbyxoKXtjb25zdCBpPWguaXNSZWNvcmRpbmcsZj1vWzBdLHM9ZVswXSx1PWZbMF0sXz1mWzFdO2xldCByPSExO2ZvcihsZXQgdD0wO3Q8dS5sZW5ndGg7dCsrKXQ8aS5sZW5ndGgmJihyPWlbdF09PT0xKSwhciYmIXRoaXMuX2lzQnVmZmVyRW1wdHkoKSYmKHRoaXMuX2ZsdXNoKCksdGhpcy5fcmVjb3JkaW5nU3RvcHBlZCgpKSxyJiYodGhpcy5fYXBwZW5kVG9CdWZmZXIoc1swXVt0XSksdGhpcy5fYXBwZW5kVG9CdWZmZXIoc1sxXVt0XSkpLHVbdF09c1swXVt0XSxfW3RdPXNbMV1bdF07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJyZWNvcmRlciIsbil9KSgpOwo=";function Kv(e,t,n){if(e.length<1)return;e[0];const s=3,a=32,r=e.map(m=>m.length).reduce((m,g)=>m+g,0),i=a/8,o=n*i,u=44,c=new ArrayBuffer(u+r*i),h=new DataView(c);Ka(h,0,"RIFF"),h.setUint32(4,36+r*i,!0),Ka(h,8,"WAVE"),Ka(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,s,!0),h.setUint16(22,n,!0),h.setUint32(24,t,!0),h.setUint32(28,t*o,!0),h.setUint16(32,o,!0),h.setUint16(34,a,!0),Ka(h,36,"data"),h.setUint32(40,r*i,!0);let d=44;for(const m of e)_v(h,d,m),d+=m.length*i;return c}function Ka(e,t,n){for(let s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))}function _v(e,t,n){for(var s=0;s<n.length;s++,t+=4)e.setFloat32(t,n[s],!0)}const ic=Object.freeze(Object.defineProperty({__proto__:null,Node:Ae,compile:So,evaluate:Yb,exit:Ib,exportModule:Bv,getInletName:Rv,getNode:Tb,module:Tt,n:Ut,node:Es,nodeRegistry:Pt,outputType:Vi,polyType:Kn,register:gt,registerNode:$},Symbol.toStringTag,{value:"Module"}));let jv=e=>`Math.sin(${e})`,Uv=e=>`Math.cos(${e})`,Jv=e=>`Math.tan(${e})`,Ov=e=>`Math.asin(${e})`,Qv=e=>`Math.acos(${e})`,qv=e=>`Math.atan(${e})`,Kb=(e,t,n)=>`${e} = ${t};${n?` /* ${n} */`:""}`,Do=(e,...t)=>Kb(e.name,`nodes[${e.ugenIndex}].update(${t.join(",")})`,e.node.type),$v=e=>`(2 ** ((${e} - 69) / 12) * 440)`,eX=(e,t)=>`${e} ** ${t}`,tX=e=>`Math.exp(${e})`,nX=e=>`Math.log(${e})`,sX=(e,t)=>`${e}%${t}`,aX=e=>`Math.abs(${e})`,rX=e=>`Math.round(${e})`,iX=e=>`Math.floor(${e})`,oX=e=>`Math.sign(${e})`,uX=e=>`Math.ceil(${e})`,cX=(e,t)=>`Math.min(${e}, ${t})`,lX=(e,t)=>`Math.max(${e}, ${t})`,pX=(e,t)=>`[${e}, ${t}]`,ba=e=>`${e}[0]`,hX=e=>`${e}[1]`,dX=(e,t)=>`(${ba(e)} < ${ba(t)} ? ${e} : ${t})`,mX=(e,t)=>`(${ba(e)} > ${ba(t)} ? ${e} : ${t})`;const fX=Object.freeze(Object.defineProperty({__proto__:null,abs:aX,ceil:uX,def:Kb,defAcos:Qv,defAsin:Ov,defAtan:qv,defCos:Uv,defSin:jv,defTan:Jv,defUgen:Do,exp:tX,floor:iX,log:nX,max:lX,midinote:$v,min:cX,mod:sX,pair_a:ba,pair_a_max:mX,pair_a_min:dX,pair_b:hX,pair_make:pX,pow:eX,round:rX,sign:oX},Symbol.toStringTag,{value:"Module"}));class yX{constructor(t=null){this.ugens=new Map,this.outputNode=t}async spawn(t,n){this.graph=t;const{src:s,ugens:a,registers:r}=t.compile({log:!1});!this.mouse&&s.includes("mouse")&&this.initMouse(),!this.midiInited&&a.some(i=>i.type.startsWith("Midi"))&&this.initMidi(),!this.audioIn&&a.some(i=>i.type==="AudioIn")&&await this.initAudioIn(),this.sendCustomUgens(),this.send({type:"SPAWN_UNIT",unit:{src:s,ugens:a,registers:r},duration:n})}registerUgen(t){this.ugens.set(t.name,t)}sendCustomUgens(){if(!this.ugens.size)return;let t=[];for(let[n,s]of this.ugens)t.push({type:"SET_UGEN",className:n,ugen:s+""});this.send({type:"BATCH_MSG",messages:t})}scheduleMessage(t,n){this.send({type:"SCHEDULE_MSG",msg:t,time:n})}setControl(t,n,s){const a={type:"SET_CONTROL",id:t,value:n};s?this.send({type:"SCHEDULE_MSG",time:s,msg:a}):this.send(a)}setControls(t){const n={type:"BATCH_MSG",messages:t.map(s=>{const a={type:"SET_CONTROL",id:s.id,value:s.value};return s.time===void 0?a:{type:"SCHEDULE_MSG",time:s.time,msg:a}})};this.send(n)}async initAudioIn(){console.log("init audio input...");const t=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});this.audioCtx.createMediaStreamSource(t).connect(this.audioWorklet)}initMidi(){console.log("init midi input..."),this.midiInited=!0,new Nv().on("midimessage",(t,n)=>{const s=Tv(n);s&&this.send(s)})}initMouse(){console.log("init mouse"),this.mouse=new Iv,this.mouse.on("move",(t,n)=>{this.setControl("mouseX",t),this.setControl("mouseY",n)})}send(t){Ri(t instanceof Object),this.audioWorklet&&this.audioWorklet.port.postMessage(t)}async init(){if(!this.audioCtx){if(Ri(!this.audioCtx),this.audioCtx=this.outputNode?.context||new AudioContext({latencyHint:"interactive",sampleRate:48e3}),await this.audioCtx.resume(),!this.audioCtx.audioWorklet)throw new Error("Audio cannot be loaded: non-secure origin? (AudioContext.audioWorklet is undefined)");await this.audioCtx.audioWorklet.addModule(Yv),await this.audioCtx.audioWorklet.addModule(Hv),this.audioWorklet=new AudioWorkletNode(this.audioCtx,"sample-generator",{outputChannelCount:[2]}),this.audioWorklet.port.onmessage=t=>{const{id:n,time:s,type:a}=t.data;a==="SIGNAL_TRIGGER"?this.graph.dfs(r=>{if(r.type==="signal"&&r.id===n){const i=r.callback(s,n);isNaN(i)?i!==void 0&&console.warn(`expected number from "on" callback with id "${n}", got "${i}" instead.`):window.postMessage({type:"KABELSALAT_SET_CONTROL",value:i,id:n})}return r}):a==="STOP"?setTimeout(()=>this.destroy(),t.data.fadeTime*1e3+200):a==="SEND_SAMPLES"&&this.graph.dfs(r=>(r.type!=="scope"||r.ins.length<2||r.ins[1].value!==n||window.postMessage({type:"KABELSALAT_UPDATE_SCOPE",samples:t.data.samples,channels:t.data.channels,channel:t.data.channel,id:n}),r))},this.recorder=new window.AudioWorkletNode(this.audioCtx,"recorder"),this.audioWorklet.connect(this.recorder),this.sendCustomUgens(),this.recorder.connect(this.outputNode||this.audioCtx.destination),this.recorder.port.onmessage=t=>{if(t.data.eventType==="data"&&this.recordedBuffers.push(t.data.audioBuffer),t.data.eventType==="stop"){console.log("recording stopped");const n=Kv(this.recordedBuffers,this.audioCtx.sampleRate,2);gX(n,"kabelsalat.wav","audio/wav"),this.recordedBuffers=[]}},this.recordOnPlay&&this.record()}}destroy(){this.audioWorklet?.disconnect(),this.audioWorklet=null,this.recorder?.disconnect(),this.recorder=null,!this.outputNode&&this.audioCtx?.close(),this.audioCtx=null}stop(){this.audioCtx&&this.send({type:"STOP"}),this.mouse?.detach()}record(){if(!this.audioCtx){this.recordOnPlay=!0;return}this.recordedBuffers=[],this.recorder.parameters.get("isRecording").setValueAtTime(1,0),console.log("recording started")}stopRecording(){this.recordOnPlay=!1,this.audioCtx&&this.recorder.parameters.get("isRecording").setValueAtTime(0,0)}set fadeTime(t){this.send({type:"FADE_TIME",fadeTime:t})}set maxUnits(t){this.send({type:"MAX_UNITS",maxUnits:t})}}function gX(e,t,n){const s=new Blob([e],{type:n}),a=document.createElement("a");a.href=window.URL.createObjectURL(s),a.download=t,a.click()}let bX=0;gt("signal",(e,t)=>{const n=bX++,s=getNode("signal",e,n);return s.callback=t,s.id=n,s},{ugen:"Signal",compile:({vars:[e,t],...n})=>Do(n,e,t,"time")});let MX=e=>`sin(${e})`,xX=e=>`cos(${e})`,CX=e=>`tan(${e})`,GX=e=>`asin(${e})`,PX=e=>`acos(${e})`,vX=e=>`atan(${e})`,Bi=(e,t,n)=>`${e} = ${t};${n?` /* ${n} */`:""}`,XX=(e,...t)=>{if(t.unshift(`nodes[${e.ugenIndex}]`),e.ugen==="Sequence"||e.ugen==="Pick"){const n=t.length-2,s=`(float[${n}]){${t.slice(2).join(",")}}`;return Bi(e.name,`${e.ugen}_update(${t[0]}, ${t[1]}, ${n}, ${s})`,e.ugen)}return Bi(e.name,`${e.ugen}_update(${t.join(",")})`,e.ugen)},wX=e=>`pow(2.0, ((${e} - 69.0) / 12.0)) * 440.0`,ZX=(e,t)=>`pow(${e}, ${t})`,FX=e=>`exp(${e})`,AX=e=>`log(${e})`,SX=(e,t)=>`${e}>=${t}?${e}-${t}:${e}`,DX=e=>`fabs(${e})`,LX=(e,t)=>`fmin(${e}, ${t})`,EX=(e,t)=>`fmax(${e}, ${t})`,kX=e=>`fround(${e})`,RX=e=>`floor(${e})`,VX=e=>`ceil(${e})`,BX=(e,t)=>`((pair) {${e}, ${t}})`,Ma=e=>`${e}.a`,zX=e=>`${e}.b`,WX=(e,t)=>`(${Ma(e)} < ${Ma(t)} ? ${e} : ${t})`,NX=(e,t)=>`(${Ma(e)} > ${Ma(t)} ? ${e} : ${t})`;const TX=Object.freeze(Object.defineProperty({__proto__:null,abs:DX,ceil:VX,def:Bi,defAcos:PX,defAsin:GX,defAtan:vX,defCos:xX,defSin:MX,defTan:CX,defUgen:XX,exp:FX,floor:RX,log:AX,max:EX,midinote:wX,min:LX,mod:SX,pair_a:Ma,pair_a_max:NX,pair_a_min:WX,pair_b:zX,pair_make:BX,pow:ZX,round:kX},Symbol.toStringTag,{value:"Module"})),I={js:fX,c:TX},_b=(e,t)=>$(e,{ugen:t,compile:({vars:n,...s})=>I[s.lang].defUgen(s,...n)});let IX=gt("time",e=>new Ae("time",e),{tags:["meta"],description:"Returns elapsed time in seconds",compile:({name:e,lang:t})=>I[t].def(e,"time")}),YX=gt("raw",(e,t)=>new Ae("raw",t).withIns(Ut(e)),{ins:[{name:"in"},{name:"code",description:"expression with variable `t` being the elapsed time and `$input` the input."}],tags:["meta"],description:"Raw code node, expects floats between -1 and 1",compile:({vars:e,node:t,name:n})=>`let $input = ${e[0]}; 
const ${n} = (${t.value}); // raw`,examples:[`sine(4).range(.5,1)
.raw("(time*110%1*2-1)*$input")
.out()`]}),HX=gt("bytebeat",(e,t)=>new Ae("bytebeat",t).withIns(Ut(e)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"bytebeat code with variable `t`"}],tags:["meta"],description:"Bytebeat node, expects numbers from 0 to 255",examples:[`time().mul(8000).bytebeat\`
// Fractalized Past
// by: lhphr
// from: https://dollchan.net/btb/res/3.html#69

(t>>10^t>>11)%5*((t>>14&3^t>>15&1)+1)*t%99+((3+(t>>14&3)-(t>>16&1))/3*t%99&64)
\`.out()`],compile:({vars:e,node:t,name:n})=>`let t = ${e[0]}; 
const ${n} = ((${t.value}) & 255) / 127.5 - 1; // bytebeat`}),KX=gt("floatbeat",(e,t)=>new Ae("bytebeat",t).withIns(Ut(e)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"floatbeat code with variable `t`"}],tags:["meta"],description:"Raw code node, expects numbers from -1 to 1",compile:({vars:e,node:t,name:n})=>`let t = ${e[0]}; const ${n} = (${t.value}); // floatbeat`}),_X=$("adsr",{ugen:"ADSRNode",tags:["envelope"],description:"ADSR envelope",examples:[`impulse(1).perc(.5)
.adsr(.01, .1, .5, .1)
.mul(sine(220)).out()`],ins:[{name:"gate",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"},{name:"sus",default:.2,description:"sustain level"},{name:"rel",default:.1,description:"release time"}],compile:({vars:[e=0,t=.02,n=.1,s=.2,a=.1],...r})=>I[r.lang].defUgen(r,"time",e,t,n,s,a)}),jX=Tt("ar",(e=0,t=.02,n=.1)=>e.adsr(t,0,1,n),{tags:["envelope"],description:"AR envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"rel",default:.1,description:"release time"}]}),UX=Tt("ad",(e=0,t=.02,n=.1)=>e.adsr(t,n,0,n),{tags:["envelope"],description:"AD envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"}]}),JX=$("clock",{ugen:"Clock",internal:!0,tags:["regular","clock"],description:"Clock source, with tempo in BPM",examples:["clock(120).clockdiv(16).mul(sine(220)).out()"],ins:[{name:"bpm",default:120,description:"clock tempo in bpm (beats per minute)"}],compile:({vars:[e=120],...t})=>I[t.lang].defUgen(t,e)}),OX=$("clockdiv",{ugen:"ClockDiv",tags:["clock","trigger"],description:"Clock signal divider",examples:["impulse(8).clockdiv(2).ad(.1,.1).mul(sine(220)).out()"],ins:[{name:"clock",default:0,description:"clock input"},{name:"divisor",default:2,description:"tempo divisor"}],compile:({vars:[e=0,t=2],...n})=>I[n.lang].defUgen(n,e,t)}),QX=$("distort",{ugen:"Distort",tags:["fx","distortion"],description:"Overdrive-style distortion",examples:[`sine(220)
.distort( saw(.5).range(0,1) )
.out()`],ins:[{name:"in",default:0},{name:"amt",default:0,description:"distortion amount"}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),jb=$("noise",{ugen:"NoiseOsc",tags:["source","noise"],description:"White noise source",examples:["noise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."}],compile:({lang:e,vars:[t=1],...n})=>I[e].defUgen(n,t)}),qX=$("lcgnoise",{ugen:"LcgNoise",tags:["source","noise"],description:"Lcg white noise source.",examples:["lcgnoise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."},{name:"reset",default:0,description:"if 1, the random number generator sequence will reset."}],compile:({lang:e,vars:[t=1,n=0],...s})=>I[e].defUgen(s,t,n)}),$X=$("pink",{ugen:"PinkNoise",tags:["source","noise"],description:"Pink noise source",examples:["pink().mul(.5).out()"],ins:[],compile:({lang:e,...t})=>I[e].defUgen(t)}),ew=$("brown",{ugen:"BrownNoiseOsc",tags:["source","noise"],description:"Brown noise source",examples:["brown().out()"],ins:[],compile:({lang:e,...t})=>I[e].defUgen(t)}),tw=$("dust",{ugen:"DustOsc",tags:["trigger","noise","source"],description:"Generates random impulses from 0 to +1.",examples:["dust(200).out()"],ins:[{name:"density",default:0,description:"average impulses per second"}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),Ub=$("impulse",{ugen:"ImpulseOsc",tags:["regular","trigger"],description:"Regular single sample impulses (0 - 1)",examples:["impulse(10).out()"],ins:[{name:"freq",default:0},{name:"phase",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),nw=$("saw",{ugen:"SawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with anti aliasing",examples:["saw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),sw=$("zaw",{ugen:"ZawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with sharp edges. Use saw for anti aliased variant.",examples:["zaw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),aw=$("sine",{tags:["regular","waveform","source"],ugen:"SineOsc",description:"Sine wave oscillator",examples:["sine(220).out()"],ins:[{name:"freq",default:0},{name:"sync",default:0,description:"sync input"},{name:"phase",default:0,description:"phase offset"}],compile:({vars:[e=0,t=0,n=0],...s})=>I[s.lang].defUgen(s,e,t,n)}),rw=$("tri",{ugen:"TriOsc",tags:["regular","waveform","source"],description:"Triangle wave oscillator",examples:["tri(220).out()"],ins:[{name:"freq",default:0}],compile:({vars:[e=0],...t})=>I[t.lang].defUgen(t,e)}),iw=$("pulse",{ugen:"PulseOsc",tags:["regular","waveform","source"],description:"Pulse wave oscillator",examples:["pulse(220, sine(.1).range(.1,.5)).mul(.5).out()"],ins:[{name:"freq",default:0},{name:"pw",default:.5,description:"pulse width 0 - 1"}],compile:({vars:[e=0,t=.5],...n})=>I[n.lang].defUgen(n,e,t)}),ow=$("slide",{ugen:"Slide",tags:["fx"],internal:!0,description:"Slide/portamento node",examples:[`impulse(2).seq(55,110,220,330)
.slide(4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1}],compile:({vars:[e=0,t=1],...n})=>I[n.lang].defUgen(n,e,t)}),uw=$("lag",{ugen:"Lag",tags:["fx"],description:"Smoothes a signal. Good for slide / portamento effects.",examples:[`impulse(2).seq(220,330,440,550)
.lag(.4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1,description:"60 dB lag time in seconds"}],compile:({vars:[e=0,t=1],...n})=>I[n.lang].defUgen(n,e,t)}),cw=$("slew",{ugen:"Slew",tags:["fx"],description:"Limits the slope of an input signal. The slope is expressed in units per second.",examples:["pulse(800).slew(4000, 4000).out()"],ins:[{name:"in",default:0},{name:"up",default:1,description:"Maximum upward slope in units per second"},{name:"dn",default:1,description:"Maximum downward slope in units per second"}],compile:({vars:[e=0,t=1,n=1],...s})=>I[s.lang].defUgen(s,e,t,n)}),Jb=$("filter",{ugen:"Filter",tags:["fx","filter"],internal:!0,description:"Two-pole low-pass filter",examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"],ins:[{name:"in",default:0},{name:"cutoff",default:1},{name:"reso",default:0}],compile:({vars:[e=0,t=1,n=0],...s})=>I[s.lang].defUgen(s,e,t,n)}),lw=$("fold",{ugen:"Fold",tags:["fx","distortion","limiter"],description:'Distort incoming audio signal by "folding"',examples:[`sine(55)
.fold( sine(.5).range(0.2,4) )
.out()`],ins:[{name:"in",default:0},{name:"rate",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),pw=$("seq",{ugen:"Sequence",tags:["sequencer"],description:"Trigger controlled sequencer",examples:[`impulse(2).seq(220,330,440,550)
.sine().out()`],ins:[{name:"trig",default:0},{name:"step",default:0,dynamic:!0,description:"step inputs"}],compile:({vars:e,...t})=>I[t.lang].defUgen(t,...e)}),hw=$("delay",{ugen:"Delay",tags:["fx"],description:"Delay line node",examples:[`impulse(1).ad(.01,.2).mul(sine(220))
.add(x=>x.delay(.1).mul(.8)).out()`],ins:[{name:"in",default:0},{name:"time",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),dw=$("hold",{ugen:"Hold",tags:["fx"],description:"Sample and hold",examples:[`noise().hold(impulse(2))
.range(220,880).sine().out()`],ins:[{name:"in",default:0},{name:"trig",default:0}],compile:({vars:[e=0,t=0],...n})=>I[n.lang].defUgen(n,e,t)}),mw=$("midifreq",{ugen:"MidiFreq",tags:["external","midi"],description:"Outputs frequency of midi note in. Multiple instances will do voice allocation",examples:["midifreq().sine().out()"],ins:[{name:"channel",default:-1,description:"Channel filter. Defaults to all channels"}],compile:({vars:[e=-1],...t})=>I[t.lang].defUgen(t,e)}),fw=$("midigate",{ugen:"MidiGate",tags:["external","midi"],description:"outputs gate of midi note in. Multiple instances will do voice allocation",examples:["midigate().lag(1).mul(sine(220)).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[e=-1],...t})=>I[t.lang].defUgen(t,e)}),yw=$("midivel",{ugen:"MidiVel",tags:["external","midi"],description:"outputs velocity of midi note in. Multiple instances will do voice allocation",examples:["midigate().ar(0.01,0.2).mul(saw(midifreq())).mul(midivel()).mul(.8).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[e=-1],...t})=>I[t.lang].defUgen(t,e)}),gw=$("midicc",{ugen:"MidiCC",tags:["external","midi"],description:"Outputs bipolar value of given midi cc number. initValue can be set to be the output before getting first cc message.",examples:["midicc(74).range(100,200).sine().out()"],ins:[{name:"ccnumber",default:-1},{name:"channel",default:-1},{name:"initValue",default:-1}],compile:({vars:[e=-1,t=-1],...n})=>I[n.lang].defUgen(n,e,t)}),Lo=$("cc",{ugen:"CC",tags:["external"],description:"CC control",ins:[{name:"id",default:0},{name:"value",default:0}],compile:({vars:[e],...t})=>I[t.lang].defUgen(t,e)}),bw=$("audioin",{ugen:"AudioIn",tags:["source","external"],description:"External Audio Input, depends on your system input",examples:["audioin().add(x=>x.delay(.1).mul(.8)).out()"],ins:[],compile:e=>I[e.lang].defUgen(e,"input")}),zi=$("log",{tags:["math"],description:"calculates the logarithm (base 10) of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].log(e))}),Ob=$("exp",{tags:["math"],description:"raises e to the power of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].exp(e))}),Mw=$("pow",{tags:["math"],description:"raises the input to the given power",ins:[{name:"in"},{name:"power"}],compile:({vars:[e=0,t=1],name:n,lang:s})=>I[s].def(n,I[s].pow(e,t))}),Qb=$("sin",{tags:["math"],description:"calculates the sine of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defSin(e))}),qb=$("cos",{tags:["math"],description:"calculates the cosine of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defCos(e))}),xw=$("tan",{tags:["math"],description:"calculates the tan of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defTan(e))}),Cw=$("acos",{tags:["math"],description:"calculates the acos of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defAcos(e))}),Gw=$("asin",{tags:["math"],description:"calculates the asin of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defAsin(e))}),Pw=$("atan",{tags:["math"],description:"calculates the atan of the input signal",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].defAtan(e))}),vw=$("mul",{tags:["math"],description:"Multiplies the given signals.",examples:["sine(220).mul( sine(4).range(.25,1) ).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" * ")||0)}),Eo=$("add",{tags:["math"],description:"sums the given signals",examples:["n([0,3,7,10]).add(60).midinote().sine().mix(2).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" + ")||0)}),Xw=$("div",{tags:["math"],description:"adds the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" / ")||0)}),ww=$("sub",{tags:["math"],description:"subtracts the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.join(" - ")||0)}),Zw=$("mod",{tags:["math"],description:"calculates the modulo",examples:["add(x=>x.add(.003).mod(1)).out()"],ins:[{name:"in"},{name:"modulo"}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,I[n].mod(...e)||0)}),Fw=$("abs",{tags:["math"],description:"returns the absolute value of the signal",ins:[{name:"in"}],examples:["sine(440).abs().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].abs(e))}),Aw=$("round",{tags:["math"],description:"Rounds the signal to the nearest integer",ins:[{name:"in"}],examples:["sine(440.5).round().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].round(e))}),Sw=$("clamp",{tags:["math"],description:"Clamps the signal to stay within the given range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine(440.5).clamp(-.6,.6).out()"],compile:({vars:[e=0,t=-1,n=1],name:s,lang:a})=>{const r=I[a].min(t,n),i=I[a].max(t,n),o=I[a].min(I[a].max(e,r),i);return I[a].def(s,o)}}),Dw=$("floor",{tags:["math"],description:"Rounds the signal down",ins:[{name:"in"}],examples:["sine(440.5).floor().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].floor(e))}),Lw=$("ceil",{tags:["math"],description:"Rounds the signal up",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].ceil(e))}),Ew=$("sign",{tags:["math"],description:"Returns 1 if positive and -1 if negative. uses Math.sign",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,I[n].sign(e))}),kw=$("min",{tags:["math"],description:"returns the minimum of the given signals",examples:["impulse(4).apply(x => min(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.reduce(I[n].min)||0)}),Rw=$("max",{tags:["math"],description:"returns the maximum of the given signals",examples:["impulse(4).apply(x => max(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,e.reduce(I[n].max)||0)}),Vw=$("argmin",{tags:["math"],description:"returns the index of the minimum of the given signals",examples:["argmin(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,I[n].pair_b(e.map(I[n].pair_make).reduce(I[n].pair_a_min))||0)}),Bw=$("argmax",{tags:["math"],description:"returns the index of the maximum of the given signals",examples:["argmax(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:e,name:t,lang:n})=>I[n].def(t,I[n].pair_b(e.map(I[n].pair_make).reduce(I[n].pair_a_max))||0)}),$b=$("greater",{tags:["logic"],description:"returns 1 if input is greater then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`greater(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} > ${t}`)}),eM=$("lower",{tags:["logic"],description:"returns 1 if input is lower then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`lower(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} < ${t}`)}),zw=$b,Ww=eM,Nw=$("xor",{tags:["logic"],description:"returns 1 if exactly one of the inputs is 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} != ${t} ? 1 : 0`)}),Tw=$("and",{tags:["logic"],description:"returns 1 if both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} && ${t} ? 1 : 0`)}),Iw=$("or",{tags:["logic"],description:"returns 1 if one or both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0],name:n,lang:s})=>I[s].def(n,`${e} || ${t} ? 1 : 0`)}),Yw=$("not",{tags:["logic"],description:"returns 1 if input is 0, otherwise 0",ins:[{name:"in"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,`(${e} === 0 ? 1 : 0)`)}),Hw=$("bool",{tags:["logic"],description:"returns 1 signal is non zero. inspired by genish",ins:[{name:"a"}],compile:({vars:[e=0],name:t,lang:n})=>I[n].def(t,`(${e} === 0 ? 0 : 1)`)}),Kw=$("ifelse",{tags:["logic"],description:"if control is 1, a is returned, otherwise b",ins:[{name:"control"},{name:"a"},{name:"b"}],compile:({vars:[e=0,t=0,n=0],name:s,lang:a})=>I[a].def(s,`(${e} === 1 ? ${t} : ${n})`),examples:["ifelse(pulse(1), sine(220), sine(330)).out()"]}),_w=$("range",{tags:["math"],description:"Scales the incoming bipolar value to the given range.",examples:["sine(.5).range(.25,1).mul(sine(440)).out()"],ins:[{name:"in"},{name:"min"},{name:"max"}],compile:({vars:e,name:t,lang:n})=>{const[s,a,r,i=1]=e,o=`((${s} + 1) * 0.5)`,u=i===1?o:I[n].pow(o,i);return I[n].def(t,`${u} * (${r} - ${a}) + ${a}`)}}),jw=$("remap",{ugen:"Remap",tags:["math"],description:"Remaps input from one value range to another",ins:[{name:"in"},{name:"inmin"},{name:"inmax"},{name:"outmin"},{name:"outmax"}],compile:({vars:[e=0,t=-1,n=1,s=-1,a=1],...r})=>I[r.lang].defUgen(r,e,t,n,s,a)}),Uw=$("thru",{compile:({name:e,vars:t,lang:n})=>I[n].def(e,t[0],"thru")}),Jw=Tt("rangex",(e,t,n)=>{let s=zi(t),a=zi(n).sub(s),r=e.unipolar().mul(a).add(s);return Ob(r)},{tags:["math"],description:"exponential range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine([1,3]).rangex(100, 2e3).sine().out()"]}),Ow=$("midinote",{compile:({vars:[e],name:t,lang:n})=>I[n].def(t,I[n].midinote(e)),tags:["math"],description:"convert midi number to frequency",ins:[{name:"midi"}],examples:[`impulse(4).seq(0,3,7,12).add(60)
.midinote().sine().out()`]}),Qw=$("src",{internal:!0,compile:({vars:[e=0],name:t,lang:n,...s})=>I[n].def(t,s.getSource(e),`read source ${e}`)}),qw=$("output",{internal:!0,ugen:"Output",compile:({vars:[e,t=0],name:n,lang:s,...a})=>{const r=a.getOutput(t),i=a.getSource(t);return[I[s].def(r,[r,e].join(" + "),`+ output ${t}`),I[s].def(i,r,`write source ${t}`)].join(`
`)}}),tM=$("poly"),nM=Ut(Math.PI),$w=gt("fork",(e,t=1)=>tM(...Array.from({length:t},()=>e.clone())),{ins:[{name:"in"},{name:"times"}],tags:["multi-channel"],description:"split the signal into n channels",examples:["dust(4).fork(2).adsr(.1).mul(sine(220)).out()"]}),eZ=Tt("perc",(e,t)=>e.adsr(0,0,1,t),{tags:["envelope"],description:"percussive envelope. usable with triggers or gates",ins:[{name:"gate"},{name:"release"}],examples:["impulse(4).perc(.1).mul( pink() ).out()"]}),tZ=Tt("hpf",(e,t,n=0)=>e.sub(e.lpf(t,n)),{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],examples:["tri([220,331,442]).mix().hpf(sine(.5).range(0,.9)).out()"]}),nZ=Tt("lpf",Jb,{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"low pass filter",tags:["fx","filter"],examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"]}),sZ=$("bpf",{ugen:"BPF",ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],compile:({vars:[e=0,t=1,n=0],...s})=>I[s.lang].defUgen(s,e,t,n)}),aZ=Tt("lfnoise",e=>jb().hold(Ub(e)),{ins:[{name:"freq"}],description:"low frequency stepped noise.",tags:["regular","noise"],examples:["lfnoise(4).range(200,800).sine().out()"]}),rZ=Tt("bipolar",e=>Ut(e).mul(2).sub(1),{ins:[{name:"in"}],description:"convert unipolar [0,1] signal to bipolar [-1,1]",tags:["math"]}),iZ=Tt("unipolar",e=>Ut(e).add(1).div(2),{ins:[{name:"in"}],description:"convert bipolar [-1,1] signal to unipolar [0,1]",tags:["math"]}),oZ=Tt("pan",(e,t)=>(t=Ut(t).add(1).mul(nM,.25),e.mul([qb(t),Qb(t)])),{ins:[{name:"in"},{name:"pos",description:"bipolar position: -1 = left, 0 = center, 1 = right"}],description:"pans signal to stereo position. splits signal path in 2",tags:["multi-channel"],examples:["sine(220).pan(sine(.25)).out()"]}),uZ=$("pick",{tags:["multi-channel"],ugen:"Pick",description:"Pick",ins:[{name:"index"},{name:"inputs",dynamic:!0}],description:"picks input of given index",examples:[`sine(.25).range(0,2).round()
.pick(...sine([220,330,440]).ins)
.out()`],compile:({vars:e,...t})=>I[t.lang].defUgen(t,...e)}),cZ=$("clip",{tags:["fx"],ugen:"Clip",description:"Hard limits the signal between lo and hi.",ins:[{name:"input"},{name:"lo"},{name:"hi"}],compile:({vars:[e=0,t=-1,n=1],...s})=>I[s.lang].defUgen(s,e,t,n)}),lZ=$("trig",{tags:["trigger"],ugen:"Trig",description:"Emits a trigger impulse whenever the signal becomes positive. Useful to turn gates into triggers.",ins:[{name:"input",default:0},{name:"lo",default:-1},{name:"hi",default:1}],compile:({vars:[e=0,t=-1,n=1],...s})=>I[s.lang].defUgen(s,e,t,n),examples:[`pulse(2)
.trig() // comment out to hear difference
.ar(.01,.2)
.mul(sine(200)).out()`]}),pZ=$("qf",{tags:["fx","filter"],ugen:"BiquadFilter",description:"biQuad Filter.",ins:[{name:"input",default:0},{name:"type",default:0,description:"filter type: 0 = lowpass, 1 = highpass, 2 = band pass, 3 = notch, 4 = allpass, 5 = peaking, 6 = lowshelf, 7 = highshelf"},{name:"freq",default:500,description:"filter cutoff in Hz"},{name:"q",default:1,description:"q factor"},{name:"gain",default:1}],compile:({vars:e,...t})=>I[t.lang].defUgen(t,...e),examples:[`pink()
.qf(
 impulse(.5).seq(0,1,2,3,4,5,6,7), // type
  tri(0.5).rangex(100, 8000),  // freq
 10, // Q
 1, // gain (only relevant for types 5-7)
).div(4).out();`]}),hZ=gt("qlpf",(e,t,n=10)=>e.qf(0,t,n),{description:"biQuad Low Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qlpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),dZ=gt("qhpf",(e,t,n=10)=>e.qf(1,t,n),{description:"biQuad High pass filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qhpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),mZ=gt("qbpf",(e,t,n=10)=>e.qf(2,t,n),{description:"biQuad Band Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qbpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),fZ=gt("qnf",(e,t,n=10)=>e.qf(3,t,n),{description:"biQuad Notch Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qnf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),yZ=gt("qapf",(e,t,n=10)=>e.qf(3,t,n),{description:"biQuad All Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`impulse(1).qapf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),gZ=gt("split",(e,t)=>e.type!=="poly"?t([e]):t(e.ins),{ins:[{name:"input"},{name:"fn"}],tags:["multi-channel"],description:"apply fn to an array of signals, one for each channel in input",examples:["sine([220,330,550]).split(chs => add(...chs)).out()"]}),bZ=gt("mix",(e,t=1)=>{if([1,2].includes(t)||(t=2,console.warn("mix only supports 1 or 2 channels atm.. falling back to 2")),e.type!=="poly")return e;if(t===2){const n=e.ins.map((s,a,r)=>{const i=(a/(r.length-1)*2-1+1)*Math.PI/4;return s.mul([Math.cos(i),Math.sin(i)]).inherit(e)});return Eo(...n)}return e.ins=e.ins.map(n=>n.inherit(e)),Es("mix").withIns(...e.ins)},{compile:({vars:e,name:t,lang:n})=>I[n].def(t,`(${e.join(" + ")})`),description:`mixes down multiple channels. Useful to make sure you get a mono or stereo signal out at the end. 
When mixing down to 2 channels, the input channels are equally distributed over the stereo image, e.g. 3 channels are panned [-1,0,1]`,ins:[{name:"in"},{name:"channels",default:1,description:"how many channels to mix down to. Only supports 1 and 2"}],tags:["multi-channel"],examples:["sine([220,330,440]).mix(2).out()"]});Ae.prototype.feedback=function(e){return this.add(e)};let MZ=e=>Eo(e),xZ=Ut,CZ=Ut,GZ=Tt("mouseX",()=>Lo("mouseX"),{ins:[],description:"X position of mouse, bipolar range",tags:["external"],examples:["mouseX.range(100,800).sine().out()"]}),PZ=GZ(),vZ=Tt("mouseY",()=>Lo("mouseY"),{ins:[],description:"Y position of mouse, bipolar range",tags:["external"],examples:["mouseY.range(800,100).sine().out()"]}),XZ=vZ(),wZ=gt("scope",(e,t)=>{let n=1;e.type==="poly"&&(n=e.ins.length);const s=getNode("scope",e,t,n);return s.type!=="poly"?(s.ins.push({type:"n",value:0,ins:[]}),s):(s.ins.forEach((a,r)=>a.ins.push({type:"n",value:r,ins:[]})),s)},{ugen:"Scope",description:"renders an an oscilloscope of the current point in the graph. expects values between -1 and 1. warning: this feature is still experimental! when using it, make sure to not switch tabs, as it might fry your browser.",compile:({vars:[e,t,n,s],...a})=>Do(a,e,t,n,s)});const oc=Object.freeze(Object.defineProperty({__proto__:null,B:xZ,PI:nM,_:CZ,abs:Fw,acos:Cw,ad:UX,add:Eo,adsr:_X,and:Tw,ar:jX,argmax:Bw,argmin:Vw,asin:Gw,atan:Pw,audioin:bw,bipolar:rZ,bool:Hw,bpf:sZ,brown:ew,bytebeat:HX,cc:Lo,ceil:Lw,clamp:Sw,clip:cZ,clock:JX,clockdiv:OX,cos:qb,delay:hw,distort:QX,div:Xw,dust:tw,exp:Ob,feedback:MZ,filter:Jb,floatbeat:KX,floor:Dw,fold:lw,fork:$w,greater:$b,gt:zw,hold:dw,hpf:tZ,ifelse:Kw,impulse:Ub,lag:uw,lfnoise:aZ,log:zi,lower:eM,lpf:nZ,lt:Ww,max:Rw,midicc:gw,midifreq:mw,midigate:fw,midinote:Ow,midivel:yw,min:kw,mix:bZ,mod:Zw,mouseX:PZ,mouseY:XZ,mul:vw,noise:jb,not:Yw,or:Iw,output:qw,pan:oZ,perc:eZ,pick:uZ,pink:$X,poly:tM,pow:Mw,pulse:iw,qapf:yZ,qbpf:mZ,qf:pZ,qhpf:dZ,qlpf:hZ,qnf:fZ,range:_w,rangex:Jw,raw:YX,registerUgen:_b,remap:jw,rng:qX,round:Aw,saw:nw,scope:wZ,seq:pw,sign:Ew,sin:Qb,sine:aw,slew:cw,slide:ow,split:gZ,src:Qw,sub:ww,tan:xw,thru:Uw,time:IX,tri:rw,trig:lZ,unipolar:iZ,xor:Nw,zaw:sw},Symbol.toStringTag,{value:"Module"}));class ZZ{constructor({onToggle:t,onToggleRecording:n,beforeEval:s,transpiler:a,localScope:r=!1,outputNode:i=null}={}){this.outputNode=i,this.audio=new yX(this.outputNode),this.onToggle=t,this.transpiler=a,this.onToggleRecording=n,this.beforeEval=s,this.localScope=r,typeof window<"u"&&(r||(Object.assign(globalThis,ic),Object.assign(globalThis,oc),Object.assign(globalThis,rc),Object.assign(globalThis,{repl:this})),window.addEventListener("message",u=>{u.data.type==="KABELSALAT_SET_CONTROL"&&this.audio.setControl(u.data.id,u.data.value)}));const o=this;Ae.prototype.spawn=function(u=[0,1],c){o.audio.spawn(this.output(u).exit(),c)}}registerUgen(t,n){return this.audio.registerUgen(n),_b(t,n.name)}evaluate(t){this.localScope||(Object.assign(globalThis,{audio:this.audio}),Object.assign(globalThis,{addUgen:this.registerUgen.bind(this)}));let n;this.transpiler?n=this.transpiler(t):n={output:t},this.beforeEval?.(n);let s;return this.localScope&&(s={...ic,...oc,...rc,audio:this.audio,addUgen:this.registerUgen.bind(this),repl:this}),Yb(n.output,s)}async play(t){await this.audio.init(),t.ins.length&&this.audio.spawn(t),this.onToggle?.(!0)}run(t){const n=this.evaluate(t);this.play(n)}stop(){this.stopRecording(),this.audio.stop(),this.onToggle?.(!1)}record(){this.audio.record(),this.onToggleRecording?.(!0)}stopRecording(){this.audio.stopRecording(),this.onToggleRecording?.(!1)}}function FZ({defaultOutput:e,onEvalError:t,beforeEval:n,beforeStart:s,afterEval:a,getTime:r,transpiler:i,onToggle:o,editPattern:u,onUpdateState:c,sync:h=!1,setInterval:d,clearInterval:m,id:g,mondo:y=!1}){const C=new ZZ({localScope:!0}),X={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},S={id:g},L=B=>{Object.assign(X,B),X.isDirty=X.code!==X.activeCode,X.error=X.evalError||X.schedulerError,c?.(X)},z={onTrigger:sM({defaultOutput:e,getTime:r}),getTime:r,onToggle:B=>{L({started:B}),Nb(B),o?.(B),B||Ab()},setInterval:d,clearInterval:m,beforeStart:s},A=h&&typeof SharedWorker<"u"?new Sv(z):new Fb(z);Wb(z.onTrigger),Bb(()=>A.cps);let Z={},E=0,D;const V=function(){return Z={},E=0,D=void 0,Ie},T=B=>C.evaluate(B).compile({log:!1});function K(B){return B._Pattern?B.__pure:B}const J=async(B,xe=!0)=>(B=u?.(B)||B,await A.setPattern(B,xe),zb(B),B);ir(()=>A.now());const Y=()=>A.stop(),Q=()=>A.start(),ee=()=>A.pause(),ye=()=>A.toggle(),ae=B=>(A.setCps(K(B)),Ie),ge=B=>(A.setCps(K(B)/60),Ie);let pe=[];const He=function(B){return pe.push(B),Ie},pt=function(B){return D=B,Ie},ut=()=>{H.prototype.p=function(xe){return typeof xe=="string"&&(xe.startsWith("_")||xe.endsWith("_"))?Ie:(xe.includes("$")&&(xe=`${xe}${E}`,E++),Z[xe]=this,this)},H.prototype.q=function(xe){return Ie};try{for(let xe=1;xe<10;++xe)Object.defineProperty(H.prototype,`d${xe}`,{get(){return this.p(xe)},configurable:!0}),Object.defineProperty(H.prototype,`p${xe}`,{get(){return this.p(xe)},configurable:!0}),H.prototype[`q${xe}`]=Ie}catch(xe){console.warn("injectPatternMethods: error:",xe)}const B=k("cpm",function(xe,rt){return rt._fast(xe/60/A.cps)});return rr({all:He,each:pt,hush:V,cpm:B,setCps:ae,setcps:ae,setCpm:ge,setcpm:ge,compileKabel:T})};return{scheduler:A,evaluate:async(B,xe=!0,rt=!0)=>{if(!B)throw new Error("no code to evaluate");try{L({code:B,pending:!0}),await ut(),ir(()=>A.now()),await n?.({code:B}),pe=[],rt&&V(),y&&(B=`mondolang\`${B}\``);let{pattern:Be,meta:Ge}=await ep(B,i,S);if(Object.keys(Z).length){let ze=[],Se=!1;for(const[Re,wt]of Object.entries(Z)){const ce=Re.length>1&&Re.startsWith("S");if(ce&&Se===!1&&(ze=[],Se=!0),!Se||Se&&ce){const We=wt.withState(Ct=>Ct.setControls({id:Re}));ze.push(We)}}D&&(ze=ze.map(Re=>D(Re))),Be=qe(...ze)}else D&&(Be=D(Be));if(pe.length)for(const ze of pe)Be=ze(Be);return go(Be)||(Be=Ie),yt("[eval] code updated"),Be=await J(Be,xe),L({miniLocations:Ge?.miniLocations||[],widgets:Ge?.widgets||[],activeCode:B,pattern:Be,evalError:void 0,schedulerError:void 0,pending:!1}),a?.({code:B,pattern:Be,meta:Ge}),Be}catch(Be){yt(`[eval] error: ${Be.message}`,"error"),console.error(Be),L({evalError:Be,pending:!1}),t?.(Be)}},start:Q,stop:Y,pause:ee,setCps:ae,setPattern:J,setCode:B=>L({code:B}),toggle:ye,state:X}}const sM=({getTime:e,defaultOutput:t})=>async(n,s,a,r,i)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await t(n,s,a,r,i),n.context.onTrigger&&await n.context.onTrigger(n,e(),r,i)}catch(o){wa(o,"getTrigger")}};function AZ(e){return new H(t=>[new Qe(void 0,t.span,e)])}const St=e=>{const t=n=>[new Qe(void 0,n.span,e(n.span.begin,n.controls))];return new H(t)},Fa=St(e=>e%1),ko=Fa.toBipolar(),Pr=St(e=>1-e%1),Ro=Pr.toBipolar(),Vo=St(e=>Math.sin(Math.PI*2*e)),aM=Vo.fromBipolar(),SZ=aM._early(U(1).div(4)),DZ=Vo._early(U(1).div(4)),rM=St(e=>Math.floor(e*2%2)),LZ=rM.toBipolar(),EZ=Xt(Fa,Pr),kZ=Xt(ko,Ro),RZ=Xt(Pr,Fa),VZ=Xt(Ro,ko),BZ=St(Zs);let Bo=0,zo=0;typeof window<"u"&&document.addEventListener("mousemove",e=>{Bo=e.clientY/document.body.clientHeight,zo=e.clientX/document.body.clientWidth});const zZ=St(()=>Bo),WZ=St(()=>Bo),NZ=St(()=>zo),TZ=St(()=>zo),IZ=e=>(e|=0,e^=e>>>16,e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),e^=e>>>16,e>>>0),YZ=e=>Math.floor(e*536870912),HZ=(e,t=0,n=0)=>{const s=e>>>0>>>0,a=Math.floor(e/4294967296)>>>0;let r=s^Math.imul(a^2246822507,3266489909);return r^=Math.imul(t^2135587861,2654435769),r^=Math.imul(n^374761393,668265261),r>>>0},uc=(e,t=0,n=0)=>IZ(HZ(e,t,n))/4294967296,KZ=(e,t,n=0)=>{const s=YZ(e);if(t===1)return uc(s,0,n);const a=new Array(t);for(let r=0;r<t;r++)a[r]=uc(s,r,n);return a},iM=e=>{const t=e<<13^e,n=t>>17^t;return n<<5^n},_Z=e=>e-Math.trunc(e),jZ=e=>iM(Math.trunc(_Z(e/300)*536870912)),cc=e=>e%536870912/536870912,UZ=(e,t)=>{if(t===1)return Math.abs(cc(e));const n=[];for(let s=0;s<t;s++)n.push(cc(e)),e=iM(e);return n},JZ=(e,t)=>UZ(jZ(e),t);let oM="legacy";const Un=(e,t=1,n=0)=>oM==="legacy"?JZ(e+n,t):KZ(e,t,n),OZ=(e="legacy")=>oM=e,uM=e=>Fa.range(0,e).round().segment(e),QZ=e=>{const t=j(e).log2(0).floor().add(1);return cM(e,t)},cM=(e,t=16)=>{t=j(t);const n=uM(t).mul(-1).add(t.sub(1));return j(e).segment(t).brshift(n).band(_e(1))},qZ=e=>{const t=j(e).log2(0).floor().add(1);return lM(e,t)},lM=(e,t=16)=>j(e).withValue(n=>s=>{const a=[];for(let r=s-1;r>=0;r--)a.push(n>>r&1);return a}).appLeft(j(t)),$Z=e=>St(t=>n=>Un(t,n).map(Math.abs)).appLeft(j(e)),pM=e=>St((t,n)=>{const s=Un(t.floor().add(.5),e,n.randSeed).map((r,i)=>[r,i]).sort((r,i)=>(r[0]>i[0])-(r[0]<i[0])).map(r=>r[1]),a=t.cyclePos().mul(e).floor()%e;return s[a]})._segment(e),hM=(e,t,n)=>{const s=[...Array(t).keys()].map(a=>n.zoom(U(a).div(t),U(a+1).div(t)));return e.fmap(a=>s[a].repeatCycles(t)._fast(t)).innerJoin()},eF=k("shuffle",(e,t)=>hM(pM(e),e,t)),tF=k("scramble",(e,t)=>hM(No(e)._segment(e),e,t)),dM=(e,t)=>new H(n=>{let{randSeed:s,...a}=n.controls;return s=e(s),t.query(n.setControls({...a,randSeed:s}))},t._steps),nF=k("seed",(e,t)=>dM(()=>e,t)),At=St((e,t)=>Un(e,1,t.randSeed)),sF=At.toBipolar(),Wo=e=>At.fmap(t=>t<e),aF=e=>j(e).fmap(Wo).innerJoin(),rF=Wo(.5),No=e=>At.fmap(t=>Math.trunc(t*e)),iF=e=>j(e).fmap(No).innerJoin(),To=(e,t)=>(t=t.map(j),t.length==0?Ie:e.range(0,t.length).fmap(n=>{const s=Math.min(Math.max(Math.floor(n),0),t.length-1);return t[s]})),vr=(e,t)=>To(e,t).outerJoin(),Xr=(e,t)=>To(e,t).innerJoin(),mM=(...e)=>vr(At,e),oF=(...e)=>Xr(At,e),uF=mM;H.prototype.choose=function(...e){return vr(this,e)};H.prototype.choose2=function(...e){return vr(this.fromBipolar(),e)};const fM=(...e)=>Xr(At.segment(1),e),cF=fM,yM=function(e,...t){const n=t.map(o=>j(o[0])),s=[];let a=_e(0);for(const o of t)a=a.add(o[1]),s.push(a);const r=np(s),i=function(o){const u=a.mul(o);return r.fmap(c=>h=>n[c.findIndex(d=>d>h,c)]).appLeft(u)};return e.bind(i)},lF=(...e)=>yM(...e).outerJoin(),pF=(...e)=>lF(At,...e),gM=(...e)=>yM(At.segment(1),...e).innerJoin(),hF=gM;function dF(e,t=0){let n=Math.floor(e),s=n+1;const a=u=>6*u**5-15*u**4+10*u**3,r=u=>c=>h=>c+a(u)*(h-c),i=Un(n,1,t),o=Un(s,1,t);return r(e-n)(i)(o)}function mF(e,t=0){const n=Math.floor(e),s=n+1,a=Un(n,1,t),r=Un(s,1,t),i=a+r,o=(e-n)/(s-n);return((u,c,h)=>u+h*(c-u))(a,i,o)/2}const fF=St((e,t)=>dF(e,t.randSeed)),yF=St((e,t)=>mF(e,t.randSeed)),gF=k("degradeByWith",(e,t,n)=>n.fmap(s=>a=>s).appLeft(e.filterValues(s=>s>t)),!0,!0),bF=k("degradeBy",function(e,t){return t._degradeByWith(At,e)},!0,!0),MF=k("degrade",e=>e._degradeBy(.5),!0,!0),xF=k("undegradeBy",function(e,t){return t._degradeByWith(At.fmap(n=>1-n),e)},!0,!0),CF=k("undegrade",e=>e._undegradeBy(.5),!0,!0),GF=k("sometimesBy",function(e,t,n){return j(e).fmap(s=>qe(n._degradeBy(s),t(n._undegradeBy(1-s)))).innerJoin()}),PF=k("sometimes",function(e,t){return t._sometimesBy(.5,e)}),vF=k("someCyclesBy",function(e,t,n){return j(e).fmap(s=>qe(n._degradeByWith(At._segment(1),s),t(n._degradeByWith(At.fmap(a=>1-a)._segment(1),1-s)))).innerJoin()}),XF=k("someCycles",function(e,t){return t._someCyclesBy(.5,e)}),wF=k("often",function(e,t){return t.sometimesBy(.75,e)}),ZF=k("rarely",function(e,t){return t.sometimesBy(.25,e)}),FF=k("almostNever",function(e,t){return t.sometimesBy(.1,e)}),AF=k("almostAlways",function(e,t){return t.sometimesBy(.9,e)}),SF=k("never",function(e,t){return t}),DF=k("always",function(e,t){return e(t)});function Io(e){Array.isArray(e)===!1&&(e=[e]);const t=ql();return e.every(n=>{const s=Ql.get(n)??n;return t[s]})}const LF=k("whenKey",function(e,t,n){return n.when(Io(e),t)}),EF=k("keyDown",function(e){return e.fmap(Io)}),kF=new H(function(e){return[new Qe(void 0,e.span,e.span.duration)]}),bM=new H(function(e){return[new Qe(void 0,e.span,U(1).div(e.span.duration))]}),RF=bM,VF=new H(function(e){const t=U(1).div(e.span.duration);return[new Qe(void 0,e.span,Math.log(t)/Math.log(2)+1)]});let or;try{or=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let lc=or?.getVoices();function BF(e,t,n){or.cancel();const s=new SpeechSynthesisUtterance(e);s.lang=t,lc=or.getVoices();const a=lc.filter(r=>r.lang.includes(t));typeof n=="number"?s.voice=a[n%a.length]:typeof n=="string"&&(s.voice=a.find(r=>r.name===r)),speechSynthesis.speak(s)}const zF=k("speak",function(e,t,n){return n.onTrigger(s=>{BF(s.value,e,t)})}),WF=function(e,t={}){const n=document.getElementById("code"),s="background-image:url("+e+");background-size:contain;";n.style=s;const{className:a}=n,r=(o,u)=>{({style:()=>n.style=s+";"+u,className:()=>n.className=u+" "+a})[o]()},i=Object.entries(t).filter(([o,u])=>typeof u=="function");Object.entries(t).filter(([o,u])=>typeof u=="string").forEach(([o,u])=>r(o,u)),i.length},NF=()=>{const e=document.getElementById("code");e&&(e.style="")};yt("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const MM=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Ol,Cyclist:Fb,FXr:Pb,FXrel:Gb,FXrelease:Cb,Fraction:U,Hap:Qe,Pattern:H,State:Ls,TimeSpan:ot,__chooseWith:To,_brandBy:Wo,_fitslice:lp,_irand:No,_keyDown:Io,_match:pp,_mod:jt,_morph:Po,_polymeterListSteps:dp,_retime:Si,_slices:Di,accelerate:bh,activeLabel:Tf,ad:jg,add:MC,adsr:_g,almostAlways:AF,almostNever:FF,always:DF,amp:Ph,analyze:Bm,anchor:fy,and:zC,apply:mG,applyN:cp,ar:Jg,arp:q9,arpWith:Q9,arrange:aC,as:fb,asym:jP,att:Xh,attack:vh,averageArray:Wl,backgroundImage:WF,band:XC,bandf:_m,bandq:Jm,bank:Rm,base64ToUnicode:Ul,bbexpr:M0,bbst:C0,beat:TP,begin:Qm,berlin:yF,bgain:ty,binary:QZ,binaryL:qZ,binaryN:cM,binaryNL:lM,bind:lC,binshift:bg,bite:xG,bjork:uv,bjorklund:Fo,blshift:FC,bmod:Mb,bor:wC,bp:Um,bpa:e1,bpattack:$0,bpd:i1,bpdc:R1,bpdecay:r1,bpdepth:D1,bpdepthfreq:E1,bpdepthfrequency:L1,bpe:U0,bpenv:j0,bpf:jm,bpq:Om,bpr:b1,bprate:A1,bprelease:g1,bps:h1,bpshape:k1,bpskew:V1,bpsustain:p1,bpsync:S1,brak:SG,brand:rF,brandBy:aF,brshift:AC,bus:$f,busgain:ey,bxor:ZC,bypass:oP,byteBeatExpression:b0,byteBeatStartTime:x0,calculateSteps:U9,cat:fa,ccn:tb,ccv:nb,ceil:YC,ch:P0,channel:B0,channels:G0,chebyshev:OP,choose:mM,chooseCycles:fM,chooseIn:oF,chooseInWith:Xr,chooseOut:uF,chooseWith:vr,chop:DP,chord:hy,chorus:Vm,chunk:OG,chunkBack:$G,chunkBackInto:iP,chunkInto:aP,chunkback:eP,chunkbackinto:rP,chunkinto:sP,clamp:br,cleanupUi:NF,clip:Sg,coarse:r0,code2hash:N9,color:Hg,colour:Kg,comb:fg,compose:F9,compress:OC,compressSpan:QC,compressor:Wy,compressorAttack:Iy,compressorKnee:Ny,compressorRatio:Ty,compressorRelease:Yy,compressspan:qC,constant:A9,contract:Mp,control:eb,controls:av,cosine:SZ,cosine2:DZ,cpm:fG,cps:Ag,createClock:Zb,createParam:Cr,createParams:wo,crush:a0,ctf:N0,ctlNum:sb,ctranspose:Kf,cubic:KP,curry:Xe,curve:Rg,cut:z0,cutoff:W0,cycleToSeconds:Zi,cyclesPer:kF,dec:Nm,decay:Wm,degrade:MF,degradeBy:bF,degradeByWith:gF,degree:Yf,delay:rf,delayfb:uf,delayfeedback:of,delayspeed:lf,delaysync:mf,delayt:hf,delaytime:pf,deltaSlide:Vg,det:gf,detune:yf,dfb:cf,dict:my,dictionary:dy,diode:_P,dist:Vy,distort:Ry,distorttype:zy,distortvol:By,div:GC,djf:af,drawLine:$l,drive:d0,drop:yp,dry:xf,ds:Ug,dt:df,duck:m0,duckattack:g0,duckdepth:f0,duckonset:y0,dur:Eg,duration:Lg,early:yG,echo:IG,echoWith:zG,echowith:WG,eish:mv,end:qm,enhance:mg,env:bb,eq:kC,eqt:RC,errorLogger:wa,euclid:ov,euclidLegato:pv,euclidLegatoRot:hv,euclidRot:lv,euclidish:dv,euclidrot:cv,evalScope:rr,evaluate:ep,every:dG,expand:bp,expression:Jy,extend:gp,fadeInTime:Pf,fadeOutTime:Gf,fadeTime:Cf,fanchor:x1,fast:rG,fastChunk:nP,fastGap:$C,fastcat:Xt,fastchunk:tP,fastgap:eG,fft:zm,filter:hP,filterWhen:dP,firstOf:hG,fit:VP,flatten:Ln,floor:IC,fm:Hh,fm1:Kh,fm2:_h,fm3:jh,fm4:Uh,fm5:Jh,fm6:Oh,fm7:Qh,fm8:qh,fmatt:gd,fmatt1:bd,fmatt2:Md,fmatt3:xd,fmatt4:Cd,fmatt5:Gd,fmatt6:Pd,fmatt7:vd,fmatt8:Xd,fmattack:ud,fmattack1:cd,fmattack2:ld,fmattack3:pd,fmattack4:hd,fmattack5:dd,fmattack6:md,fmattack7:fd,fmattack8:yd,fmdec:Hd,fmdec1:Kd,fmdec2:_d,fmdec3:jd,fmdec4:Ud,fmdec5:Jd,fmdec6:Od,fmdec7:Qd,fmdec8:qd,fmdecay:Rd,fmdecay1:Vd,fmdecay2:Bd,fmdecay3:zd,fmdecay4:Wd,fmdecay5:Nd,fmdecay6:Td,fmdecay7:Id,fmdecay8:Yd,fmenv:$h,fmenv1:ed,fmenv2:td,fmenv3:nd,fmenv4:sd,fmenv5:ad,fmenv6:rd,fmenv7:id,fmenv8:od,fmh:wh,fmh1:Zh,fmh2:Fh,fmh3:Ah,fmh4:Sh,fmh5:Dh,fmh6:Lh,fmh7:Eh,fmh8:kh,fmi:Rh,fmi1:Vh,fmi2:Bh,fmi3:zh,fmi4:Wh,fmi5:Nh,fmi6:Th,fmi7:Ih,fmi8:Yh,fmrel:wm,fmrel1:Zm,fmrel2:Fm,fmrel3:Am,fmrel4:Sm,fmrel5:Dm,fmrel6:Lm,fmrel7:Em,fmrel8:km,fmrelease:gm,fmrelease1:bm,fmrelease2:Mm,fmrelease3:xm,fmrelease4:Cm,fmrelease5:Gm,fmrelease6:Pm,fmrelease7:vm,fmrelease8:Xm,fmsus:um,fmsus1:cm,fmsus2:lm,fmsus3:pm,fmsus4:hm,fmsus5:dm,fmsus6:mm,fmsus7:fm,fmsus8:ym,fmsustain:$d,fmsustain1:em,fmsustain2:tm,fmsustain3:nm,fmsustain4:sm,fmsustain5:am,fmsustain6:rm,fmsustain7:im,fmsustain8:om,fmwave:wd,fmwave1:Zd,fmwave2:Fd,fmwave3:Ad,fmwave4:Sd,fmwave5:Dd,fmwave6:Ld,fmwave7:Ed,fmwave8:kd,focus:tG,focusSpan:nG,focusspan:sG,fold:UP,fractionalArgs:S9,frameRate:Cg,frames:Gg,freeze:cg,freq:vf,freqToMidi:lo,fromBipolar:KC,fshift:Qy,fshiftnote:qy,fshiftphase:$y,ftype:M1,func:NC,fxr:vb,gain:Ch,gap:Ws,gat:Bf,gate:Vf,getAccidentalsOffset:co,getControlName:ga,getCps:Dv,getCurrentKeyboardState:ql,getEventOffsetMs:P9,getFreq:zl,getFrequency:Tl,getIsStarted:kv,getPattern:Lv,getPerformanceTimeSeconds:I9,getPlayableNoteValue:Z9,getRandsAtTime:Un,getSoundIndex:w9,getTime:ki,getTrigger:sM,getTriggerFunc:Ev,grow:yP,gt:DC,gte:EC,hard:HP,harmonic:_f,hash2code:T9,hbrick:Mg,hcutoff:Q1,hold:Km,hours:Pg,hp:$1,hpa:q0,hpattack:Q0,hpd:a1,hpdc:Y1,hpdecay:s1,hpdepth:W1,hpdepthfreq:T1,hpdepthfrequency:N1,hpe:_0,hpenv:K0,hpf:q1,hpq:tf,hpr:y1,hprate:B1,hprelease:f1,hps:l1,hpshape:I1,hpskew:H1,hpsustain:c1,hpsync:z1,hresonance:ef,hsl:pP,hsla:lP,hurry:iG,id:Zs,imag:dg,inhabit:Xv,inhabitmod:Zv,innerBind:pC,inside:cG,inv:ZG,invert:wG,ir:wy,irand:iF,irbegin:Ay,iresponse:Zy,irspeed:Fy,isControlName:Zp,isNote:ms,isNoteWithOctave:M9,isPattern:go,isaw:Pr,isaw2:Ro,iter:_G,iterBack:jG,iterback:UG,itri:RZ,itri2:VZ,jux:BG,juxBy:RG,juxby:VG,kcutoff:ng,keep:gC,keepif:bC,keyAlias:Ql,keyDown:EF,krush:tg,label:If,lastOf:pG,late:op,lbrick:xg,legato:Dg,leslie:zf,lfo:gb,linger:CG,listRange:Za,lock:ff,logKey:oo,logger:yt,loop:$m,loopAt:kP,loopAtCps:BP,loopBegin:e0,loopEnd:n0,loopat:RP,loopatcps:zP,loopb:t0,loope:s0,lp:I0,lpa:O0,lpattack:J0,lpd:n1,lpdc:Z1,lpdecay:t1,lpdepth:P1,lpdepthfreq:X1,lpdepthfrequency:v1,lpe:H0,lpenv:Y0,lpf:T0,lpq:sf,lpr:m1,lprate:C1,lprelease:d1,lps:u1,lpshape:w1,lpskew:F1,lpsustain:o1,lpsync:G1,lrate:Wf,lsize:Nf,lt:SC,lte:LC,mapArgs:ho,mask:iC,midi2note:X9,midiToFreq:Ds,midibend:lb,midichan:Og,midicmd:$g,midimap:Qg,midiport:qg,miditouch:pb,minutes:vg,mod:PC,mode:by,morph:IP,mouseX:TZ,mouseY:WZ,mousex:NZ,mousey:zZ,mtranspose:Hf,mul:CC,n:yh,nanFallback:Nl,ne:VC,net:BC,never:SF,noise:U1,note:gh,noteToMidi:yn,nothing:on,nrpnn:ab,nrpv:rb,nudge:Jf,numeralArgs:Bt,objectMap:Jl,oct:Qf,octave:Of,octaveR:Uf,octaves:gy,octer:sg,octersub:ag,octersubsub:rg,off:AG,offset:yy,often:wF,or:WC,orbit:qf,oschost:db,oscport:mb,outerBind:hC,outside:lG,overgain:ny,overshape:sy,pace:hp,pairs:Kl,palindrome:kG,pan:ay,panchor:Rf,panorient:uy,panspan:ry,pansplay:iy,panwidth:oy,parray:vo,parseFractional:Hl,parseNumeral:po,partials:QP,patt:wf,pattack:Xf,pcurve:kf,pdec:Ff,pdecay:Zf,penv:Ef,per:bM,perCycle:RF,perlin:fF,perx:VF,ph:F0,phasdp:V0,phaser:A0,phasercenter:L0,phaserdepth:k0,phaserrate:Z0,phasersweep:S0,phases:qP,phc:E0,phd:R0,phs:D0,pick:Db,pickF:gv,pickOut:Mv,pickReset:Pv,pickRestart:Cv,pickSqueeze:wv,pickmod:Lb,pickmodF:bv,pickmodOut:xv,pickmodReset:vv,pickmodRestart:Gv,pickmodSqueeze:Fv,pipe:Yl,pitchJump:Bg,pitchJumpTime:zg,ply:aG,plyForEach:KG,plyWith:HG,pm:nC,polyBind:fC,polyTouch:hb,polymeter:Mr,polyrhythm:eC,postgain:Gh,pow:vC,pr:tC,prel:Lf,prelease:Df,press:EG,pressBy:LG,progNum:ib,psus:Sf,psustain:Af,pure:_e,pw:v0,pwrate:X0,pwsweep:w0,rand:At,rand2:sF,randL:$Z,randcat:cF,randrun:pM,range:_C,range2:UC,rangex:jC,rarely:ZF,ratio:JC,rdim:Py,real:hg,ref:WP,register:k,registerControl:v,registerMultiControl:Gn,reify:j,rel:Hm,release:Ym,removeUndefineds:fs,repeatCycles:JG,repl:FZ,replicate:fP,reset_state:Ab,reset_timelines:Sb,resonance:nf,rev:up,revv:DG,rfade:Xy,rib:cP,ribbon:uP,ring:ig,ringdf:ug,ringf:og,rlp:Cy,room:My,roomdim:Gy,roomfade:vy,roomlp:xy,roomsize:Sy,rotate:Il,round:TC,rsize:Ey,run:uM,s:Fp,s_add:PP,s_alt:MP,s_cat:bP,s_contract:ZP,s_expand:XP,s_extend:wP,s_polymeter:xP,s_sub:vP,s_taper:CP,s_taperlist:GP,s_tour:FP,s_zip:AP,saw:Fa,saw2:ko,scram:gg,scramble:tF,scrub:yb,seconds:Xg,seed:nF,seg:PG,segment:GG,semitone:ly,seq:ip,seqPLoop:rC,sequence:un,sequenceP:np,set:yC,setCpsFunc:Bb,setIsStarted:Nb,setPattern:zb,setStringParser:tp,setTime:ir,setTriggerFunc:Wb,shape:ky,shrink:Cp,shrinklist:xp,shuffle:eF,signal:St,silence:Ie,sine:aM,sine2:Vo,sinefold:JP,size:Dy,slice:Xp,slide:cy,slow:oG,slowChunk:qG,slowcat:Qn,slowcatPrime:Mo,slowchunk:QG,smear:yg,soft:YP,sol2note:B9,someCycles:XF,someCyclesBy:vF,sometimes:PF,sometimesBy:GF,songPtr:wg,sound:Ap,source:mh,sparsity:uG,speak:zF,speed:Xo,splice:EP,splitAt:mo,spread:Mf,square:rM,square2:LZ,squeeze:Av,squeezeBind:dC,squiz:_y,src:fh,stack:qe,stackBy:sC,stackCentre:rp,stackLeft:sp,stackRight:ap,steady:AZ,stepBind:mC,stepalt:mp,stepcat:kt,steps:SP,stepsPerOctave:jf,stretch:Hy,striate:LP,stringifyValues:fo,struct:oC,strudelScope:yo,stut:YG,stutWith:NG,stutwith:TG,sub:xC,superimpose:uC,sus:Im,sustain:Tm,sustainpedal:Oy,swing:XG,swingBy:vG,sysex:ob,sysexdata:cb,sysexid:ub,sz:Ly,take:fp,time:BZ,timeCat:Go,timecat:gP,timeline:fv,toBipolar:HC,tokenizeNote:Bl,tour:Gp,transient:xb,trem:o0,tremolo:i0,tremolodepth:c0,tremolophase:p0,tremoloshape:h0,tremoloskew:l0,tremolosync:u0,tri:EZ,tri2:kZ,triode:eg,tsdelay:pg,uid:Zg,undegrade:CF,undegradeBy:xF,unicodeToBase64:jl,uniq:z9,uniqsort:W9,uniqsortr:_l,unison:bf,unit:Ky,useRNG:OZ,v:j1,val:Fg,valueToMidi:G9,vel:xh,velocity:Mh,vib:K1,vibmod:J1,vibrato:_1,vmod:O1,voice:py,vowel:jy,warp:jp,warpatt:Op,warpattack:Jp,warpdc:ih,warpdec:qp,warpdecay:Qp,warpdepth:ah,warpenv:hh,warpmode:uh,warprate:sh,warprel:nh,warprelease:th,warpshape:rh,warpskew:oh,warpsus:eh,warpsustain:$p,warpsync:dh,waveloss:Uy,wavetablePhaseRand:ph,wavetablePosition:Dp,wavetableWarp:Up,wavetableWarpMode:ch,wchoose:pF,wchooseCycles:gM,when:FG,whenKey:LF,withSeed:dM,withValue:cC,within:mP,worklet:ev,wrandcat:hF,wt:Sp,wtatt:kp,wtattack:Ep,wtdc:Kp,wtdec:Vp,wtdecay:Rp,wtdepth:Yp,wtenv:Lp,wtphaserand:lh,wtrate:Tp,wtrel:Np,wtrelease:Wp,wtshape:Hp,wtskew:_p,wtsus:zp,wtsustain:Bp,wtsync:Ip,xfade:wp,xsdelay:lg,zcrush:Tg,zdelay:Ig,zip:Pp,zipWith:gr,zmod:Ng,znoise:Wg,zoom:gG,zoomArc:bG,zoomarc:MG,zrand:kg,zzfx:Yg},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class e extends DelayNode{constructor(n,s,a,r){return super(n),s=Math.abs(s),this.delayTime.value=a,this.feedbackGain=n.createGain(),this.feedbackGain.gain.value=Math.min(Math.abs(r),.995),this.feedback=this.feedbackGain.gain,this.delayGain=n.createGain(),this.delayGain.gain.value=s,this.connect(this.feedbackGain),this.connect(this.delayGain),this.feedbackGain.connect(this),this.connect=i=>this.delayGain.connect(i),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}BaseAudioContext.prototype.createFeedbackDelay=function(t,n,s){return new e(this,t,n,s)}}let xa;const xM=()=>(xa=new AudioContext,xa),ur=e=>(xa=e,xa),Ce=()=>xa||xM();function TF(){return Ce().currentTime}let CM=e=>console.log(e);function Ca(e,t="superdough"){ct(`[${t}] error: ${e.message}`)}const ct=(...e)=>CM(...e),GM=e=>{CM=e};let ri={};function PM(e,t){const n=Ce();if(ri[e])return ri[e];const s=2*n.sampleRate,a=n.createBuffer(1,s,n.sampleRate),r=a.getChannelData(0);let i=0,o,u,c,h,d,m,g;o=u=c=h=d=m=g=0;for(let y=0;y<s;y++)if(e==="white")r[y]=Math.random()*2-1;else if(e==="brown"){let C=Math.random()*2-1;r[y]=(i+.02*C)/1.02,i=r[y]}else if(e==="pink"){let C=Math.random()*2-1;o=.99886*o+C*.0555179,u=.99332*u+C*.0750759,c=.969*c+C*.153852,h=.8665*h+C*.3104856,d=.55*d+C*.5329522,m=-.7616*m-C*.016898,r[y]=o+u+c+h+d+m+g+C*.5362,r[y]*=.11,g=C*.115926}else if(e==="crackle"){const C=t*.01;Math.random()<C?r[y]=Math.random()*2-1:r[y]=0}return e!=="crackle"&&(ri[e]=a),a}function Wi(e="white",t,n=.02){const s=Ce().createBufferSource();return s.buffer=PM(e,n),s.loop=!0,s.start(t),{node:s,stop:a=>s.stop(a)}}function IF(e,t,n){const s=Wi("pink",n),a=LM(e,s.node,t);return bn(s.node,()=>{De(s.node)}),{node:a.node,stop:r=>s?.stop(r),teardown:a.teardown}}const Ni=new Map,Yo=Symbol("nodePoolKey"),YF=e=>!!e[Yo],vM=e=>e.context?.currentTime??0,HF=e=>{const t=new Set;e.parameters?.forEach(a=>t.add(a));const n=new Set;let s=e;for(;s!==Object.prototype;){for(const a of Object.getOwnPropertyNames(s)){if(n.has(a))continue;n.add(a);const r=e[a];r instanceof AudioParam&&t.add(r)}s=Object.getPrototypeOf(s)}return t},Ho=e=>{if(e.disconnect(),e instanceof AudioScheduledSourceNode)return;const t=e[Yo];if(t==null)return;const n=vM(e);HF(e).forEach(a=>a.cancelScheduledValues(n));const s=Ni.get(t)??[];s.push(new WeakRef(e)),Ni.set(t,s)},KF=e=>{if(!(e instanceof AudioWorkletNode))return!0;const t=vM(e),n=e?.parameters?.get("end").value??0;return t<n+.45},Aa=(e,t)=>{const n=Ni.get(e)??[];let s,a=!1;for(;n.length;)if(s=n.pop()?.deref(),s!=null&&KF(s)){a=!0;break}return a||(s=t()),s[Yo]=e,s},_F=e=>{if(typeof e!="string")return[];const[t,n="",s]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return t?[t,n,s?Number(s):void 0]:[]},jF={c:0,d:2,e:4,f:5,g:7,a:9,b:11},UF={"#":1,b:-1,s:1,f:-1},JF=e=>e?.split("").reduce((t,n)=>t+UF[n],0)||0,wr=(e,t=3)=>{const[n,s,a=t]=_F(e);if(!n)throw new Error('not a note: "'+e+'"');const r=jF[n.toLowerCase()],i=JF(s);return(Number(a)+1)*12+r+i},XM=e=>Math.pow(2,(e-69)/12)*440,gn=(e,t,n)=>Math.min(Math.max(e,t),n),OF=e=>12*Math.log(e/440)/Math.LN2+69,QF=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=e;return typeof n=="number"?OF(n):typeof s=="string"?wr(s):typeof s=="number"?s:t};function En(e,t=0,n){return isNaN(Number(e))?(!n&&ct(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const wM=(e,t)=>(e%t+t)%t,pc=(e,t)=>wM(Math.round(En(e,0)),t);function hc(e,t){return e/t}function ZM(e,t){const{s:n,n:s=0}=e;let a=QF(e,36),r=a-36,i,o=0;if(Array.isArray(t))o=pc(s,t.length),i=t[o];else{const c=d=>wr(d)-a,h=Object.keys(t).filter(d=>!d.startsWith("_")).reduce((d,m,g)=>!d||Math.abs(c(m))<Math.abs(c(d))?m:d,null);r=-c(h),o=pc(s,t[h].length),i=t[h][o]}const u=`${n}:${o}`;return{transpose:r,url:i,index:o,midi:a,label:u}}const ii=(e,t)=>Object.fromEntries(Object.entries(t).map(([n,s])=>[n,e[s]])),FM=e=>{try{return new URL(".",new URL(e)).href.replace(/\/$/,"")}catch{return e.split("/").slice(0,-1).join("/")}},Ko=["pink","white","brown","crackle"];function Ke(e){const t=Ce().createGain();return t.gain.value=e,t}function Ga(e,t,n){const s=Ke(n);return e.connect(s),s.connect(t),s}const dc=(e,t,n,s)=>s-n===0?0:(t-e)/(s-n);function Ft(e,t,n,s){const a=new AudioWorkletNode(e,t,s);return Object.entries(n).forEach(([r,i])=>{i!==void 0&&(a.parameters.get(r).value=i)}),a}const zt=(e,t,n,s,a,r,i,o,u,c="exponential")=>{t=En(t),n=En(n),s=En(s),a=En(a);const h=c==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";c==="exponential"&&(r=r===0?.001:r,i=i===0?.001:i);const d=i-r,m=r+s*d,g=u-o,y=C=>{let X;return t>C?X=C*dc(r,i,0,t)+r:X=(C-t)*dc(i,m,0,n)+i,c==="exponential"&&(X=X||.001),X};e.setValueAtTime(r,o),t>g?e[h](y(g),u):t+n>g?(e[h](y(t),o+t),e[h](y(g),u)):(e[h](y(t),o+t),e[h](y(t+n),o+t+n),e.setValueAtTime(m,u)),e[h](r,u+a)};function qF(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}function AM(e,t={}){return Ft(e,"envelope-processor",t)}function Ts(e,t={}){const{shape:n=0,begin:s=0,end:a=0,time:r,depth:i=1,dcoffset:o=-.5,frequency:u=1,skew:c=.5,phaseoffset:h=0,curve:d=1,min:m,max:g,...y}=t,C={begin:s,end:a,time:r??s,depth:i,dcoffset:o,frequency:u,skew:c,phaseoffset:h,curve:d,shape:qF(n),min:m??o*i,max:g??o*i+i,...y};return Ft(e,"lfo-processor",C)}function SM(e,t,n,s,a,r){const i=Aa("compressor",()=>new DynamicsCompressorNode(e,{}));return Object.entries({threshold:t??-3,ratio:n??10,knee:s??10,attack:a??.005,release:r??.05}).forEach(([o,u])=>{i[o].value=u}),i}const Wt=(e,t="linear",n)=>{const[s,a,r,i]=e;if(s==null&&a==null&&r==null&&i==null)return n??[.001,.001,1,.01];const o=r??(s!=null&&a==null||s==null&&a==null?1:.001);return[Math.max(s??0,.001),Math.max(a??0,.001),Math.min(o,1),Math.max(i??0,.01)]};function _o(e,t,n,s,a){let{defaultDepth:r=1,depth:i,dcoffset:o,...u}=a;i==null&&(i=Object.values(u).some(h=>h!=null)?r:0);let c;return i&&(c=Ts(e,{begin:n,end:s,depth:i,dcoffset:o,...u}),c.connect(t)),c}function Ti(e,t,n,s,a,r){let{amount:i,offset:o,defaultAmount:u=1,curve:c="linear",values:h,holdEnd:d,defaultValues:m}=a;i==null&&(i=h.some(C=>C!=null)?u:0);const g=o??0,y=i+g;if(Math.abs(y-g)){const[C,X,S,L]=Wt(h,c,m);zt(t,C,X,S,L,g,y,n,d,c)}return _o(e,t,n,s,r)}function DM(e,t,n,s,a,r){let{frequency:i,anchor:o,env:u,type:c,model:h,q:d=1,drive:m=.69,depth:g,depthfrequency:y,dcoffset:C=-.5,skew:X,shape:S,rate:L,sync:z}=s,A,Z;h==="ladder"?(Z=Ft(e,"ladder-processor",{frequency:i,q:d,drive:m}),A=Z.parameters.get("frequency")):(Z=Aa("filter",()=>e.createBiquadFilter()),Z.type=c,Object.entries({Q:d,frequency:i}).forEach(([Q,ee])=>{Z[Q].value=ee}),A=Z.frequency);const E=[s.attack,s.decay,s.sustain,s.release],[D,V,T,K]=Wt(E,"exponential",[.005,.14,0,.1]);if([...E,u].some(Q=>Q!==void 0)){u=En(u,1,!0),o=En(o,0,!0);const Q=Math.abs(u),ee=Q*o;let ye=gn(2**-ee*i,0,2e4),ae=gn(2**(Q-ee)*i,0,2e4);u<0&&([ye,ae]=[ae,ye]),zt(A,D,V,T,K,ye,ae,t,n,"exponential")}z!=null&&(L=a*z);const J=[g,y,X,S,L].some(Q=>Q!==void 0);let Y;if(J){g=g??1;const Q=r/a,ee={depth:y??(g??1)*i,dcoffset:C,skew:X,shape:S,frequency:L??a,min:-i+30,max:2e4-i,time:Q,curve:1};Y=_o(e,A,t,n,ee)}return{filter:Z,lfo:Y}}let mc=e=>e<.5?1:1-(e-.5)/.5;function LM(e,t,n=0){const s=Ce();if(!n)return e;let a=s.createGain(),r=s.createGain();e.connect(a),t.connect(r),a.gain.value=mc(n),r.gain.value=mc(1-n);let i=s.createGain();return a.connect(i),r.connect(i),{node:i,teardown:()=>{De(a),De(r),e.disconnect(a),t.disconnect(r)}}}let $F=["linear","exponential"];function ks(e,t,n,s){if((t.pattack??t.pdecay??t.psustain??t.prelease??t.penv)===void 0)return;const a=En(t.penv,1,!0),r=$F[t.pcurve??0];let[i,o,u,c]=Wt([t.pattack,t.pdecay,t.psustain,t.prelease],r,[.2,.001,1,.001]),h=t.panchor??u;const d=a*100,m=0-d*h,g=d-d*h;zt(e,i,o,u,c,m,g,n,s,r)}function Rs(e,t,n){const{vibmod:s=.5,vib:a}=t;let r;if(a>0){r=Ce().createOscillator(),r.frequency.value=a;const i=Ce().createGain();return i.gain.value=s*100,r.connect(i),i.connect(e),bn(r,()=>{De(i),De(r)}),r.start(n),{stop:o=>r.stop(o),nodes:{vib:[r],vib_gain:[i]}}}}function eA(e,t,n=Ce()){const s=n.currentTime;mn(n,e,s,t)}function mn(e,t,n,s){const a=new ConstantSourceNode(e),r=Ke(0);return r.connect(e.destination),a.connect(r),bn(a,()=>{De(r),De(a),t()}),a.start(n),a.stop(s),a}const tA=(e,t="sine")=>{const n=Ce();let s;return Ko.includes(t)?(s=n.createBufferSource(),s.buffer=PM(t,2),s.loop=!0):(s=n.createOscillator(),s.type=t,s.frequency.value=e),s.start(),s},nA=(e,t,n="sine")=>{const s=e.value*t;return{osc:tA(s,n),freq:s}};function Pa(e,t,n){const s=Ce(),a=[],r={},i={};for(let o=1;o<=8;o++)for(let u=0;u<=8;u++){let c;o===u+1?c=`fmi${o===1?"":o}`:c=`fmi${o}${u}`;const h=t[c];if(!h)continue;let d=[];for(let[m,g]of[[!0,o],[!1,u]]){if(g===0){d.push(e);continue}if(!r[g]){const Z=g===1?"":g,{osc:E,freq:D}=nA(e,t[`fmh${Z}`]??1,t[`fmwave${Z}`]??"sine");a.push(E);const V=[E],T=["attack","decay","sustain","release"].map(J=>t[`fm${J}${Z}`]);let K=E;if(T.some(J=>J!==void 0)){const J=s.createGain(),[Y,Q,ee,ye]=Wt(T),ae=n+t.duration,ge=t[`fmenv${Z}`]??"exp";zt(J.gain,Y,Q,ee,ye,0,1,n,ae,ge==="exp"?"exponential":"linear"),V.push(J),K=E.connect(J)}r[g]={input:E.frequency,output:K,freq:D,osc:E,toCleanup:V},i[`fm_${g}`]=[E]}const{input:y,output:C,freq:X,osc:S,toCleanup:L}=r[g],z=Ke(h),A=Ke(X);d.push(m?C.connect(z).connect(A):y),BM(S,[...L,z,A]),i[`fm_${g}_gain`]=[z]}if(!d[1]){ct(`[superdough] control ${c} failed to connect FM ${o} to target ${u} due to missing frequency parameter (likely because fm${u} is noise)`,"warning");continue}d[0].connect(d[1])}return{nodes:i,stop:o=>a.forEach(u=>u?.stop(o))}}const EM=e=>e/(1+e),sA=(e,t)=>(e%t+t)%t,aA=(e,t)=>(1+t)*e/(1+t*Math.abs(e)),Fs=(e,t)=>Math.tanh(e*(1+t)),rA=(e,t)=>gn((1+t)*e,-1,1),kM=(e,t)=>{let n=(1+.5*t)*e;const s=sA(n+1,4);return 1-Math.abs(s-2)},iA=(e,t)=>Math.sin(Math.PI/2*kM(e,t)),oA=(e,t)=>{const n=EM(Math.log1p(t)),s=(e-n/3*e*e*e)/(1-n/3);return Fs(s,t)},RM=(e,t,n=!1)=>{const s=1+2*t,a=.07*EM(Math.log1p(t)),r=Fs(e+a,2*t),i=Fs(n?a:-e+a,2*t),o=r-i,u=1/Math.cosh(s*a),c=u*u,h=Math.max(1e-8,(n?1:2)*s*c);return Fs(o/h,t)},uA=(e,t)=>RM(e,t,!0),cA=(e,t)=>{const n=10*Math.log1p(t);let s=1,a=e,r,i=0;for(let o=1;o<64;o++){if(o<2){i+=o==0?s:a;continue}r=2*e*s-a,a=s,s=r,o%2===0&&(i+=Math.min(1.3*n/o,2)*r)}return Fs(i,n/20)},jo={scurve:aA,soft:Fs,hard:rA,cubic:oA,diode:RM,asym:uA,fold:kM,sinefold:iA,chebyshev:cA},ta=Object.freeze(Object.keys(jo)),lA=e=>{let t=e;typeof e=="string"&&(t=ta.indexOf(e),t===-1&&(ct(`[superdough] Could not find waveshaping algorithm ${e}.
        Available options are ${ta.join(", ")}.
        Defaulting to ${ta[0]}.`),t=0));const n=ta[t%ta.length];return jo[n]},VM=(e,t,n)=>Ft(Ce(),"distort-processor",{distort:e,postgain:t},{processorOptions:{algorithm:n}}),_n=(e,t=36)=>{let{note:n,freq:s,octave:a=0}=e;return n=n||t,typeof n=="string"&&(n=wr(n)),!s&&typeof n=="number"&&(s=XM(n)),s*=Math.pow(2,a),Number(s)},bn=(e,t)=>{const n=t;e.onended=function(){n&&n(),this.onended=null}},De=e=>{if(e!=null){if(!(e instanceof AudioNode))throw new Error("releaseAudioNode can only release an AudioNode");if(e.disconnect(),e instanceof AudioScheduledSourceNode)try{e.stop()}catch{e.start(e.context.currentTime+5),e.stop()}e instanceof AudioWorkletNode&&e.parameters.get("end")?.setValueAtTime(0,0)}},BM=(e,t)=>{bn(e,()=>t.forEach(n=>De(n)))};var Uo={};Uo.generateReverb=function(e,t){for(var n=e.audioContext||new AudioContext,s=n.sampleRate,a=e.numChannels||2,r=e.decayTime*1.5,i=Math.round(e.decayTime*s),o=Math.round(r*s),u=Math.round((e.fadeInTime||0)*s),c=Math.pow(1/1e3,1/i),h=n.createBuffer(a,o,s),d=0;d<a;d++){for(var m=h.getChannelData(d),g=0;g<o;g++)m[g]=dA()*Math.pow(c,g);for(var g=0;g<u;g++)m[g]*=g/u}pA(h,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,t)};Uo.generateGraph=function(e,t,n,s,a){var r=document.createElement("canvas");r.width=t,r.height=n;var i=r.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,r.width,r.height),i.fillStyle="#fff";for(var o=t/e.length,u=n/(a-s),c=0;c<e.length;c++)i.fillRect(c*o,n-(e[c]-s)*u,1,1);return r};var pA=function(e,t,n,s,a){if(t==0){a(e);return}var r=hA(e),i=new OfflineAudioContext(e.numberOfChannels,r[0].length,e.sampleRate),o=i.createBufferSource();o.buffer=e;var u=i.createBiquadFilter();t=Math.min(t,e.sampleRate/2),n=Math.min(n,e.sampleRate/2),u.type="lowpass",u.Q.value=1e-4,u.frequency.setValueAtTime(t,0),u.frequency.linearRampToValueAtTime(n,s),o.connect(u),u.connect(i.destination),o.start(),i.oncomplete=function(c){a(c.renderedBuffer),De(u),De(o)},i.startRendering(),window.filterNode=u},hA=function(e){for(var t=[],n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t},dA=function(){return Math.random()*2-1};typeof AudioContext<"u"&&(BaseAudioContext.prototype.adjustLength=function(e,t,n=1,s=0){const a=Math.floor(gn(s,0,1)*t.length),r=t.sampleRate*e,i=this.createBuffer(t.numberOfChannels,t.length,t.sampleRate);for(let o=0;o<t.numberOfChannels;o++){let u=t.getChannelData(o),c=i.getChannelData(o);for(let h=0;h<r;h++){let d=(a+h*Math.abs(n))%u.length;n<1&&(d=d*-1),c[h]=u.at(d)||0}}return i},BaseAudioContext.prototype.createReverb=function(e,t,n,s,a,r,i){const o=this.createConvolver();return o.generate=(u=2,c=.1,h=15e3,d=1e3,m,g,y)=>{o.duration=u,o.fade=c,o.lp=h,o.dim=d,o.ir=m,o.irspeed=g,o.irbegin=y,m?o.buffer=this.adjustLength(u,m,g,y):Uo.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:h,lpFreqEnd:d},C=>{o.buffer=C})},o.generate(e,t,n,s,a,r,i),o});var fc={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(n,s){if(super(n),!fc[s])throw new Error("vowel: unknown vowel "+s);const{gains:a,qs:r,freqs:i}=fc[s];this.makeupGain=n.createGain(),this.filters=[],this.gains=[];for(let o=0;o<5;o++){const u=n.createGain();u.gain.value=a[o];const c=n.createBiquadFilter();c.type="bandpass",c.Q.value=r[o],c.frequency.value=i[o],super.connect(c),c.connect(u),this.filters.push(c),u.connect(this.makeupGain),this.gains.push(u)}return this.makeupGain.gain.value=8,this}connect(n){this.makeupGain.connect(n)}disconnect(){De(this.makeupGain),this.filters.forEach(De),this.gains.forEach(De),super.disconnect(),this.makeupGain=null,this.filters=null,this.gains=null}}BaseAudioContext.prototype.createVowelFilter=function(t){return new e(this,t)}}const mA="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oUil7InVzZSBzdHJpY3QiO3ZhciBXZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIFllPShSLFcsWCk9PlcgaW4gUj9XZShSLFcse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOlh9KTpSW1ddPVg7dmFyIER0PShSLFcsWCk9PlllKFIsdHlwZW9mIFchPSJzeW1ib2wiP1crIiI6VyxYKTtjbGFzcyBYIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgcz0wO3M8dGhpcy5uYklucHV0cztzKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMocywxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHMsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKXtsZXQgaT10W2VdLmxlbmd0aDtpIT10aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGUsaSl9Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspe2xldCBpPXNbZV0ubGVuZ3RoO2khPXRoaXMub3V0cHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhlLGkpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxzKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkocyk7Zm9yKGxldCBlPTA7ZTxzO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KHMpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtlXT10aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQscyl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bZV09bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtlXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dFtzXVtlXTt0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5zZXQoaSx0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dGhpcy5vdXRwdXRCdWZmZXJzW3NdW2VdLnN1YmFycmF5KDAsMTI4KTt0W3NdW2VdLnNldChpKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IHM9MDtzPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW3NdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtzKyspZm9yKGxldCBlPTA7ZTx0aGlzLmJsb2NrU2l6ZTtlKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW3NdW2VdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW3NdW2VdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQscyxlKXtjb25zdCBuPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW4/ITE6KHRoaXMuc3RhcnRlZD1uLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLGUpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhzKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQscyxlKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBRdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBzPW5ldyBBcnJheSh0aGlzLnNpemUqMiksZT0wO2U8cy5sZW5ndGg7ZSs9Mil7Y29uc3QgaD1NYXRoLlBJKmUvdGhpcy5zaXplO3NbZV09TWF0aC5jb3MoaCksc1tlKzFdPS1NYXRoLnNpbihoKX10aGlzLnRhYmxlPXM7Zm9yKHZhciBpPTAsbj0xO3RoaXMuc2l6ZT5uO248PD0xKWkrKzt0aGlzLl93aWR0aD1pJTI9PT0wP2ktMTppLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgYT0wO2E8dGhpcy5fYml0cmV2Lmxlbmd0aDthKyspe3RoaXMuX2JpdHJldlthXT0wO2Zvcih2YXIgbz0wO288dGhpcy5fd2lkdGg7bys9Mil7dmFyIGM9dGhpcy5fd2lkdGgtby0yO3RoaXMuX2JpdHJldlthXXw9KGE+Pj5vJjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxpPTA7aTx0Lmxlbmd0aDtpKz0yKWVbaT4+PjFdPXRbaV07cmV0dXJuIGV9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRbc109MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLGk9MDtpPGUubGVuZ3RoO2krPTIpZVtpXT10W2k+Pj4xXSxlW2krMV09MDtyZXR1cm4gZX1jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgcz10aGlzLl9jc2l6ZSxlPXM+Pj4xLGk9MjtpPGU7aSs9Mil0W3MtaV09dFtpXSx0W3MtaSsxXT0tdFtpKzFdfXRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxzKXtpZih0PT09cyl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9cyx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxzPXRoaXMuX2NzaXplLGU9dGhpcy5fd2lkdGgsaT0xPDxlLG49cy9pPDwxLGEsbyxjPXRoaXMuX2JpdHJldjtpZihuPT09NClmb3IoYT0wLG89MDthPHM7YSs9bixvKyspe2NvbnN0IG09Y1tvXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGEsbSxpKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgbT1jW29dO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoYSxtLGkpfXZhciBoPXRoaXMuX2ludj8tMToxLGY9dGhpcy50YWJsZTtmb3IoaT4+PTI7aT49MjtpPj49Mil7bj1zL2k8PDE7dmFyIHU9bj4+PjI7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIGQ9YSt1LGw9YSxwPTA7bDxkO2wrPTIscCs9aSl7Y29uc3QgbT1sLEk9bSt1LHc9SSt1LHY9dyt1LE09dFttXSxQPXRbbSsxXSxnPXRbSV0sVD10W0krMV0sQT10W3ddLFY9dFt3KzFdLE89dFt2XSxOPXRbdisxXSxDPU0sRj1QLHE9ZltwXSxCPWgqZltwKzFdLEw9ZypxLVQqQixFPWcqQitUKnEsSD1mWzIqcF0saXQ9aCpmWzIqcCsxXSwkPUEqSC1WKml0LFU9QSppdCtWKkgsSz1mWzMqcF0sWj1oKmZbMypwKzFdLGs9TypLLU4qWixmdD1PKlorTipLLGR0PUMrJCxydD1GK1UsbnQ9Qy0kLHB0PUYtVSxtdD1MK2ssYXQ9RStmdCxvdD1oKihMLWspLGd0PWgqKEUtZnQpLHZ0PWR0K210LEF0PXJ0K2F0LE90PWR0LW10LE50PXJ0LWF0LEN0PW50K2d0LEZ0PXB0LW90LEV0PW50LWd0LGt0PXB0K290O3RbbV09dnQsdFttKzFdPUF0LHRbSV09Q3QsdFtJKzFdPUZ0LHRbd109T3QsdFt3KzFdPU50LHRbdl09RXQsdFt2KzFdPWt0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPW5bc10sbz1uW3MrMV0sYz1uW3MrZV0saD1uW3MrZSsxXSxmPWErYyx1PW8raCxkPWEtYyxsPW8taDtpW3RdPWYsaVt0KzFdPXUsaVt0KzJdPWQsaVt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcysxXSx1PW5bcytlXSxkPW5bcytlKzFdLGw9bltzK29dLHA9bltzK28rMV0sbT1uW3MrY10sST1uW3MrYysxXSx3PWgrbCx2PWYrcCxNPWgtbCxQPWYtcCxnPXUrbSxUPWQrSSxBPWEqKHUtbSksVj1hKihkLUkpLE89dytnLE49ditULEM9TStWLEY9UC1BLHE9dy1nLEI9di1ULEw9TS1WLEU9UCtBO2lbdF09TyxpW3QrMV09TixpW3QrMl09QyxpW3QrM109RixpW3QrNF09cSxpW3QrNV09QixpW3QrNl09TCxpW3QrN109RX1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQscz10aGlzLl9jc2l6ZSxlPXRoaXMuX3dpZHRoLGk9MTw8ZSxuPXMvaTw8MSxhLG8sYz10aGlzLl9iaXRyZXY7aWYobj09PTQpZm9yKGE9MCxvPTA7YTxzO2ErPW4sbysrKXtjb25zdCBSdD1jW29dO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGEsUnQ+Pj4xLGk+Pj4xKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgUnQ9Y1tvXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChhLFJ0Pj4+MSxpPj4+MSl9dmFyIGg9dGhpcy5faW52Py0xOjEsZj10aGlzLnRhYmxlO2ZvcihpPj49MjtpPj0yO2k+Pj0yKXtuPXMvaTw8MTt2YXIgdT1uPj4+MSxkPXU+Pj4xLGw9ZD4+PjE7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIHA9MCxtPTA7cDw9bDtwKz0yLG0rPWkpe3ZhciBJPWErcCx3PUkrZCx2PXcrZCxNPXYrZCxQPXRbSV0sZz10W0krMV0sVD10W3ddLEE9dFt3KzFdLFY9dFt2XSxPPXRbdisxXSxOPXRbTV0sQz10W00rMV0sRj1QLHE9ZyxCPWZbbV0sTD1oKmZbbSsxXSxFPVQqQi1BKkwsSD1UKkwrQSpCLGl0PWZbMiptXSwkPWgqZlsyKm0rMV0sVT1WKml0LU8qJCxLPVYqJCtPKml0LFo9ZlszKm1dLGs9aCpmWzMqbSsxXSxmdD1OKlotQyprLGR0PU4qaytDKloscnQ9RitVLG50PXErSyxwdD1GLVUsbXQ9cS1LLGF0PUUrZnQsb3Q9SCtkdCxndD1oKihFLWZ0KSx2dD1oKihILWR0KSxBdD1ydCthdCxPdD1udCtvdCxOdD1wdCt2dCxDdD1tdC1ndDtpZih0W0ldPUF0LHRbSSsxXT1PdCx0W3ddPU50LHRbdysxXT1DdCxwPT09MCl7dmFyIEZ0PXJ0LWF0LEV0PW50LW90O3Rbdl09RnQsdFt2KzFdPUV0O2NvbnRpbnVlfWlmKHAhPT1sKXt2YXIga3Q9cHQsT2U9LW10LE5lPXJ0LENlPS1udCxGZT0taCp2dCxFZT0taCpndCxrZT0taCpvdCxSZT0taCphdCxEZT1rdCtGZSx6ZT1PZStFZSxxZT1OZStSZSxMZT1DZS1rZSxadD1hK2QtcCxYdD1hK3UtcDt0W1p0XT1EZSx0W1p0KzFdPXplLHRbWHRdPXFlLHRbWHQrMV09TGV9fX19X3NpbmdsZVJlYWxUcmFuc2Zvcm0yKHQscyxlKXtjb25zdCBpPXRoaXMuX291dCxuPXRoaXMuX2RhdGEsYT1uW3NdLG89bltzK2VdLGM9YStvLGg9YS1vO2lbdF09YyxpW3QrMV09MCxpW3QrMl09aCxpW3QrM109MH1fc2luZ2xlUmVhbFRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcytlXSx1PW5bcytvXSxkPW5bcytjXSxsPWgrdSxwPWgtdSxtPWYrZCxJPWEqKGYtZCksdz1sK20sdj1wLE09LUksUD1sLW0sZz1wLFQ9STtpW3RdPXcsaVt0KzFdPTAsaVt0KzJdPXYsaVt0KzNdPU0saVt0KzRdPVAsaVt0KzVdPTAsaVt0KzZdPWcsaVt0KzddPVR9fWxldCB0cz1yPT5jb25zb2xlLmxvZyhyKTtjb25zdCBzcz0oLi4ucik9PnRzKC4uLnIpLGVzPShyLHQscyk9Pk1hdGgubWluKE1hdGgubWF4KHIsdCkscyksenQ9cj0+ci8oMStyKSxpcz0ocix0KT0+KHIldCt0KSV0LHJzPShyLHQpPT4oMSt0KSpyLygxK3QqTWF0aC5hYnMocikpLEo9KHIsdCk9Pk1hdGgudGFuaChyKigxK3QpKSxucz0ocix0KT0+ZXMoKDErdCkqciwtMSwxKSxxdD0ocix0KT0+e2xldCBzPSgxKy41KnQpKnI7Y29uc3QgZT1pcyhzKzEsNCk7cmV0dXJuIDEtTWF0aC5hYnMoZS0yKX0sYXM9KHIsdCk9Pk1hdGguc2luKE1hdGguUEkvMipxdChyLHQpKSxvcz0ocix0KT0+e2NvbnN0IHM9enQoTWF0aC5sb2cxcCh0KSksZT0oci1zLzMqcipyKnIpLygxLXMvMyk7cmV0dXJuIEooZSx0KX0sTHQ9KHIsdCxzPSExKT0+e2NvbnN0IGU9MSsyKnQsbj0uMDcqenQoTWF0aC5sb2cxcCh0KSksYT1KKHIrbiwyKnQpLG89SihzP246LXIrbiwyKnQpLGM9YS1vLGg9MS9NYXRoLmNvc2goZSpuKSxmPWgqaCx1PU1hdGgubWF4KDFlLTgsKHM/MToyKSplKmYpO3JldHVybiBKKGMvdSx0KX0sV3Q9e3NjdXJ2ZTpycyxzb2Z0OkosaGFyZDpucyxjdWJpYzpvcyxkaW9kZTpMdCxhc3ltOihyLHQpPT5MdChyLHQsITApLGZvbGQ6cXQsc2luZWZvbGQ6YXMsY2hlYnlzaGV2OihyLHQpPT57Y29uc3Qgcz0xMCpNYXRoLmxvZzFwKHQpO2xldCBlPTEsaT1yLG4sYT0wO2ZvcihsZXQgbz0xO288NjQ7bysrKXtpZihvPDIpe2ErPW89PTA/ZTppO2NvbnRpbnVlfW49MipyKmUtaSxpPWUsZT1uLG8lMj09PTAmJihhKz1NYXRoLm1pbigxLjMqcy9vLDIpKm4pfXJldHVybiBKKGEscy8yMCl9fSxodD1PYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKFd0KSksaHM9cj0+e2xldCB0PXI7dHlwZW9mIHI9PSJzdHJpbmciJiYodD1odC5pbmRleE9mKHIpLHQ9PT0tMSYmKHNzKGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7cn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7aHQuam9pbigiLCAiKX0uCiAgICAgICAgRGVmYXVsdGluZyB0byAke2h0WzBdfS5gKSx0PTApKTtjb25zdCBzPWh0W3QlaHQubGVuZ3RoXTtyZXR1cm4gV3Rbc119O2Z1bmN0aW9uIGN0KHIsdCl7aWYodHx8KHQ9ImFzc2VydGlvbiBmYWlsZWQiKSwhcil0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gY3Mocix0LHMpe3JldHVybiByPD0wP3Q6cj49MT9zOnQrcioocy10KX1mdW5jdGlvbiB1cyhyLHQscyl7cmV0dXJuIHI8PXQ/MDpyPj1zPzE6cz09PXQ/MDooci10KS8ocy10KX1mdW5jdGlvbiBscyhyLHQpe3JldHVybiByPHQ/KHIvPXQscityLXIqci0xKTpyPjEtdD8ocj0oci0xKS90LHIqcityK3IrMSk6MH1mdW5jdGlvbiBmcyhyKXtyZXR1cm4gTWF0aC5mbG9vcihyKT09PXJ9ZnVuY3Rpb24gZHMocil7cmV0dXJuIGZzKHIpJiZyPjB9ZnVuY3Rpb24gcHMocix0KXt0PU1hdGgubWluKE1hdGgubWF4KHQsMCksMSksdC09LjAxO3ZhciBzPTIqdC8oMS10KSxlPSgxK3MpKnIvKDErcypNYXRoLmFicyhyKSk7cmV0dXJuIGV9ZnVuY3Rpb24gSXQocix0LHMpe3JldHVybiByPj0xP3M6dCtyKihzLXQpfWZ1bmN0aW9uIFl0KCl7dGhpcy5zdGF0ZT0ib2ZmIix0aGlzLnN0YXJ0VGltZT0wLHRoaXMuc3RhcnRWYWw9MH1ZdC5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihyLHQscyxlLGksbil7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2Uib2ZmIjpyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1yLHRoaXMuc3RhcnRWYWw9MCksMDtjYXNlImF0dGFjayI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7cmV0dXJuIGE+cz8odGhpcy5zdGF0ZT0iZGVjYXkiLHRoaXMuc3RhcnRUaW1lPXIsMSk6SXQoYS9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWUsbz1JdChhL2UsMSxpKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8sbyk6YT5lPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1yLGkpOm99Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXIsdGhpcy5zdGFydFZhbD1pKSxpO2Nhc2UicmVsZWFzZSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7aWYoYT5uKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IG89SXQoYS9uLHRoaXMuc3RhcnRWYWwsMCk7cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8pLG99fXRocm93ImludmFsaWQgZW52ZWxvcGUgc3RhdGUifTtmdW5jdGlvbiB3dCgpe3RoaXMuczA9MCx0aGlzLnMxPTB9d3QucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHIsdCxzKXtjdCghaXNOYU4ociksIk5hTiB2YWx1ZSBmZWQgaW4gVHdvUG9sZUZpbHRlciIpLHQ9TWF0aC5taW4odCwxKSxzPU1hdGgubWF4KHMsMCk7dmFyIGU9TWF0aC5wb3coLjUsKDEtdCkvLjEyNSksaT1NYXRoLnBvdyguNSwocysuMTI1KS8uMTI1KSxuPTEtaSplLGE9dGhpcy5zMCxvPXRoaXMuczE7cmV0dXJuIGE9biphLWUqbytlKnIsbz1uKm8rZSphLHI9byx0aGlzLnMwPWEsdGhpcy5zMT1vLHJ9O2xldCBtcz1jbGFzcyBKdHtjb25zdHJ1Y3Rvcih0LHMpe3RoaXMuc2FtcGxlUmF0ZT10LHM/dGhpcy5idWZmZXI9cy5zbGljZSgwKToodGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheSgxMCp0KSx0aGlzLmJ1ZmZlci5maWxsKDApKSx0aGlzLndyaXRlSWR4PTAsdGhpcy5yZWFkSWR4PTB9cmVzZXQoKXt0aGlzLmJ1ZmZlci5maWxsKDApLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1jbG9uZSgpe2NvbnN0IHQ9bmV3IEp0KHRoaXMuc2FtcGxlUmF0ZSx0aGlzLmJ1ZmZlcik7cmV0dXJuIHQud3JpdGVJZHg9dGhpcy53cml0ZUlkeCx0LnJlYWRJZHg9dGhpcy5yZWFkSWR4LHR9d3JpdGUodCxzKXt0aGlzLndyaXRlSWR4PSh0aGlzLndyaXRlSWR4KzEpJXRoaXMuYnVmZmVyLmxlbmd0aCx0aGlzLmJ1ZmZlclt0aGlzLndyaXRlSWR4XT10O2xldCBlPU1hdGgubWluKE1hdGguZmxvb3IodGhpcy5zYW1wbGVSYXRlKnMpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1lLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXJlYWQoKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19O2NvbnN0IFN0PTEvNDhlMyxfdD0yNCxncz1fdC80O2NsYXNzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgYnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZW52PW5ldyBZdH11cGRhdGUodCxzLGUsaSxuLGEpe3JldHVybiB0aGlzLmVudi5ldmFsKHQscyxlLGksbixhKX19Y2xhc3MgdnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9X3QqdC82MCxlPS41O3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqcyx0aGlzLnBoYXNlJTE8ZT8xOi0xfX1jbGFzcyBJcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5pblNnbj0hMCx0aGlzLm91dFNnbj0hMCx0aGlzLmNsb2NrQ250PTB9dXBkYXRlKHQscyl7bGV0IGU9dD4wO3JldHVybiB0aGlzLmluU2duIT1lJiYodGhpcy5jbG9ja0NudCsrLHRoaXMuY2xvY2tDbnQ+PXMmJih0aGlzLmNsb2NrQ250PTAsdGhpcy5vdXRTZ249IXRoaXMub3V0U2duKSksdGhpcy5pblNnbj1lLHRoaXMub3V0U2duPzE6LTF9fWNsYXNzIHdzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBNdD1uZXcgTWFwO2NsYXNzIFNzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPXMuaW5wdXRzWzJdO24mJk10LmhhcyhuKT90aGlzLmRlbGF5PU10LmdldChuKS5jbG9uZSgpOnRoaXMuZGVsYXk9bmV3IG1zKGUpLG4mJk10LnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIF9zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKX11cGRhdGUodCxzKXtyZXR1cm4gcHModCxzKX19Y2xhc3MgTXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIHhze2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy52YWx1ZT10LHRoaXMudmFsdWV9fWNvbnN0IHlzPTM0MDtsZXQgR3Q9MDtjbGFzcyBQc3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2g9R3QsdGhpcy5zdGFydF9zZWVkPXlzKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9NTk2MDQ2NDQ3NzUzOTA2M2UtMjMsR3QrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBUc3tjb25zdHJ1Y3Rvcigpe3RoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTF9dXBkYXRlKHQpe3JldHVybiB0Pyh0aGlzLnZhbHVlPU1hdGgucmFuZG9tKCkqMi0xLHRoaXMudmFsdWUpOnRoaXMudmFsdWV9fWNsYXNzIEJze3VwZGF0ZSh0KXtyZXR1cm4gTWF0aC5yYW5kb20oKTx0KlN0P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgVnN7Y29uc3RydWN0b3IoKXt0aGlzLm91dD0wfXVwZGF0ZSgpe2xldCB0PU1hdGgucmFuZG9tKCkqMi0xO3JldHVybiB0aGlzLm91dD0odGhpcy5vdXQrLjAyKnQpLzEuMDIsdGhpcy5vdXR9fWNsYXNzIEFze2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHQ9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCt0Ki4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErdCouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMit0Ki4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3QqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCt0Ki41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtdCouMDE2ODk4O2NvbnN0IHM9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNit0Ki41MzYyO3JldHVybiB0aGlzLmI2PXQqLjExNTkyNixzKi4xMX19Y2xhc3MgT3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIE5zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LHRoaXMucGhhc2UlMTxzPzE6LTF9fWNsYXNzIENzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqdCx0aGlzLnBoYXNlJTEqMi0xfX1jbGFzcyBGc3tjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9bHModGhpcy5waGFzZSxzKSxpPTIqdGhpcy5waGFzZS0xLWU7cmV0dXJuIHRoaXMucGhhc2UrPXMsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZS09MSksaX19Y2xhc3MgRXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MCx0aGlzLnN5bmNTZ249ITF9dXBkYXRlKHQscyxlKXshdGhpcy5zeW5jU2duJiZzPjAmJih0aGlzLnBoYXNlPTApLHRoaXMuc3luY1Nnbj1zPjA7bGV0IGk9KHRoaXMucGhhc2UrZSklMTtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsTWF0aC5zaW4oaSoyKk1hdGguUEkpfX1jbGFzcyBrc3tkQlRvTGluZWFyKHQpe3JldHVybiBNYXRoLnBvdygxMCx0LzIwKX1saW5lYXJUb0RCKHQpe3JldHVybiAyMCpNYXRoLmxvZzEwKHQpfXVwZGF0ZSh0LHMsZSl7bGV0IGk9dGhpcy5saW5lYXJUb0RCKE1hdGguYWJzKHQpKSxuPTA7cmV0dXJuIGk+cyYmKG49KGktcykqKDEtMS9lKSksdGhpcy5kQlRvTGluZWFyKC1uKX19Y2xhc3MgUnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZSUxO3JldHVybihzPC41PzIqczoxLTIqKHMtLjUpKSoyLTF9fWNsYXNzIERzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPWUvMzA7Y3QoZHMobikpLHRoaXMuYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkobiksdGhpcy53cml0ZVBvcz0wfXVwZGF0ZSh0LHMsZSxpKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy53cml0ZVBvc109dCx0aGlzLndyaXRlUG9zKyssdGhpcy53cml0ZVBvcyV0aGlzLmJ1ZmZlci5sZW5ndGg9PTAmJih0aGlzLndyaXRlUG9zPTAsdGhpcy5zZW5kKHt0eXBlOiJTRU5EX1NBTVBMRVMiLGlkOnMsc2FtcGxlczp0aGlzLmJ1ZmZlcixjaGFubmVsczplLGNoYW5uZWw6aX0pKSx0fX1jbGFzcyB6c3tjb25zdHJ1Y3Rvcigpe3RoaXMubGFnVW5pdD00NDEwLHRoaXMucz0wfXVwZGF0ZSh0LHMpe3JldHVybiBzPXMqdGhpcy5sYWdVbml0LHM8MSYmKHM9MSksdGhpcy5zKz0xL3MqKHQtdGhpcy5zKSx0aGlzLnN9fWNsYXNzIHFze2NvbnN0cnVjdG9yKCl7dGhpcy5sYXN0PTB9dXBkYXRlKHQscyxlKXtjb25zdCBpPXMqU3Qsbj1lKlN0O2xldCBhPXQtdGhpcy5sYXN0O3JldHVybiBhPmk/YT1pOmE8LW4mJihhPS1uKSx0aGlzLmxhc3QrPWEsdGhpcy5sYXN0fX1jbGFzcyBMcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgV3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB3dH11cGRhdGUodCxzLGUpe3JldHVybiB0aGlzLmZpbHRlci5hcHBseSh0LHMsZSksdGhpcy5maWx0ZXIuczF9fWNsYXNzIFlzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmZpbHRlcj1uZXcgd3R9dXBkYXRlKHQscyxlKXtyZXR1cm4gdGhpcy5maWx0ZXIuYXBwbHkodCxzLGUpLHRoaXMuZmlsdGVyLnMwfX1jbGFzcyBHcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSl9dXBkYXRlKHQscyl7cmV0dXJuIHM8MCYmKHM9MCkscz1zKzEsdD10KnMsNCooTWF0aC5hYnMoLjI1KnQrLjI1LU1hdGgucm91bmQoLjI1KnQrLjI1KSktLjI1KX19Y2xhc3MganMgZXh0ZW5kcyB5e3VwZGF0ZSh0KXtyZXR1cm4gdH19Y2xhc3MgYnQgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmN0KCExKX19Z2V0RnJlcSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLmZyZXE7Y2FzZSJvZmYiOnJldHVybiB0aGlzLmZyZXE7ZGVmYXVsdDpjdCghMSl9fWdldFZlbG9jaXR5KCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMudmVsb2NpdHk7Y2FzZSJvZmYiOnJldHVybiB0aGlzLnZlbG9jaXR5O2RlZmF1bHQ6Y3QoITEpfX19Y2xhc3MgSHMgZXh0ZW5kcyBidHtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlnYXRlIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0R2F0ZSgpfX1jbGFzcyBVcyBleHRlbmRzIGJ0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWZyZXEifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRGcmVxKCl9fWNsYXNzICRzIGV4dGVuZHMgYnR7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgS3N7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBacyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgWHMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBKcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBRcyBleHRlbmRzIHl7dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyB0ZXt1cGRhdGUodCxzLGUsaSxuKXtsZXQgYT11cyh0LHMsZSk7cmV0dXJuIGNzKGEsaSxuKX19Y2xhc3Mgc2V7dXBkYXRlKHQscyxlKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodCxzKSxlKX19Y2xhc3MgZWV7Y29uc3RydWN0b3IoKXt0aGlzLmhpPSExfXVwZGF0ZSh0KXtyZXR1cm4hdGhpcy5oaSYmdD4wPyh0aGlzLmhpPSEwLDEpOih0aGlzLmhpJiZ0PD0wJiYodGhpcy5oaT0hMSksMCl9fWNsYXNzIGlle2NvbnN0cnVjdG9yKCl7dGhpcy54MT0wLHRoaXMueDI9MCx0aGlzLnkxPTAsdGhpcy55Mj0wLHRoaXMuYTA9MSx0aGlzLmExPTAsdGhpcy5hMj0wLHRoaXMuYjA9MSx0aGlzLmIxPTAsdGhpcy5iMj0wfXVwZGF0ZSh0PTAscz0wLGU9NTAwLGk9MSxuPTEpe2NvbnN0IGE9MipNYXRoLlBJKmUvc2FtcGxlUmF0ZSxvPU1hdGguc2luKGEpO2k9TWF0aC5wb3coMTAsaS8yMCk7Y29uc3QgYz1vLygyKmkpLGg9TWF0aC5jb3MoYSk7aWYocz09PTApdGhpcy5iMT0xLWgsdGhpcy5iMD10aGlzLmIxLzIsdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT0xKXRoaXMuYjA9KDEraCkvMix0aGlzLmIxPS0oMStoKSx0aGlzLmIyPXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTIpdGhpcy5iMD1vLzIsdGhpcy5iMT0wLHRoaXMuYjI9LXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTMpdGhpcy5iMD0xLHRoaXMuYjE9LTIqaCx0aGlzLmIyPTEsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTQpdGhpcy5iMD0xLWMsdGhpcy5iMT0tMipoLHRoaXMuYjI9MStjLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT01KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApO3RoaXMuYjA9MStjKnUsdGhpcy5iMT0tMipoLHRoaXMuYjI9MS1jKnUsdGhpcy5hMD0xK2MvdSx0aGlzLmExPS0yKmgsdGhpcy5hMj0xLWMvdX1lbHNlIGlmKHM9PT02KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQodSkqYyxsPSh1LTEpKmgscD0odSsxKSpoO3RoaXMuYjA9dSoodSsxLWwrZCksdGhpcy5iMT0yKnUqKHUtMS1wKSx0aGlzLmIyPXUqKHUrMS1sLWQpLHRoaXMuYTA9dSsxK2wrZCx0aGlzLmExPS0yKih1LTErcCksdGhpcy5hMj11KzErbC1kfWVsc2UgaWYocz09PTcpe2NvbnN0IHU9TWF0aC5wb3coMTAsbi80MCksZD0yKk1hdGguc3FydCh1KSpjLGw9KHUtMSkqaCxwPSh1KzEpKmg7dGhpcy5iMD11Kih1KzErbCtkKSx0aGlzLmIxPS0yKnUqKHUtMStwKSx0aGlzLmIyPXUqKHUrMStsLWQpLHRoaXMuYTA9dSsxLWwrZCx0aGlzLmExPTIqKHUtMS1wKSx0aGlzLmEyPXUrMS1sLWR9dGhpcy5iMC89dGhpcy5hMCx0aGlzLmIxLz10aGlzLmEwLHRoaXMuYjIvPXRoaXMuYTAsdGhpcy5hMS89dGhpcy5hMCx0aGlzLmEyLz10aGlzLmEwLHRoaXMuYTA9MTtjb25zdCBmPXRoaXMuYjAqdCt0aGlzLmIxKnRoaXMueDErdGhpcy5iMip0aGlzLngyLXRoaXMuYTEqdGhpcy55MS10aGlzLmEyKnRoaXMueTI7cmV0dXJuIHRoaXMueDI9dGhpcy54MSx0aGlzLngxPXQsdGhpcy55Mj10aGlzLnkxLHRoaXMueTE9ZixmfX1jb25zdCByZT1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsQURTUk5vZGU6YnMsQXVkaW9JbjpqcyxBdWRpb05vZGU6eSxCUEY6WXMsQmlxdWFkRmlsdGVyOmllLEJyb3duTm9pc2VPc2M6VnMsQ0M6WnMsQ0xPQ0tfUFBROl90LENMT0NLX1BQUzpncyxDbGlwOnNlLENsb2NrOnZzLENsb2NrRGl2OklzLENsb2NrT3V0OndzLERlbGF5OlNzLERpc3RvcnQ6X3MsRHVzdE9zYzpCcyxGaWx0ZXI6V3MsRm9sZDpHcyxIb2xkOk1zLEltcHVsc2VPc2M6T3MsTGFnOnpzLExjZ05vaXNlOlBzLE1pZGlDQzpYcyxNaWRpRnJlcTpVcyxNaWRpR2F0ZTpIcyxNaWRpSW46YnQsTWlkaVZlbDokcyxOb2lzZU9zYzpUcyxPdXRwdXQ6eHMsUGljazpRcyxQaW5rTm9pc2U6QXMsUHVsc2VPc2M6TnMsUmVtYXA6dGUsU2F3T3NjOkZzLFNjb3BlOkRzLFNlcXVlbmNlOkpzLFNpZGVjaGFpbkNvbXByZXNzb3I6a3MsU2lnbmFsOktzLFNpbmVPc2M6RXMsU2xldzpxcyxTbGlkZTpMcyxUcmlPc2M6UnMsVHJpZzplZSxaYXdPc2M6Q3N9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSksbmU9bmV3IE1hcChPYmplY3QuZW50cmllcyhyZSkpLFk9MTI4LEQ9TWF0aC5QSSx6PTIqRCxHPTEvc2FtcGxlUmF0ZSx4dD1yPT4xLU1hdGguZXhwKC1HL3IpLGp0PXI9Pk1hdGgucG93KDEwLHIvMjApLFM9KHIsdCxzKT0+TWF0aC5taW4oTWF0aC5tYXgocix0KSxzKSx1dD0ocix0LHMpPT5zKih0LXIpK3IsYj0ocix0KT0+clt0XT8/clswXSxRPXI9PnItTWF0aC5mbG9vcihyKSx0dD1yPT5yfDAsc3Q9cj0+dHQocisuNSksYWU9cj0+dHQocisxKSxIdD1yPT5yLXR0KHIpLGo9cj0+e2NvbnN0IHQ9cioqMjtyZXR1cm4gciooMjcrdCkvKDI3KzkqdCl9LFV0PShyLHQpPT57aWYocjwyKXJldHVybiBpPT4wO2NvbnN0IHM9dC8oci0xKSxlPXQqLjU7cmV0dXJuIGk9Pmkqcy1lfSxldD0ocix0KT0+cipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIG9lKHIsdCl7dD1NYXRoLm1pbih0LDEtdCk7Y29uc3Qgcz0xL3Q7cmV0dXJuIHI8dD8ocio9cywyKnItcioqMi0xKTpyPjEtdD8ocj0oci0xKSpzLHIqKjIrMipyKzEpOjB9Y29uc3QgeXQ9e3RyaShyLHQ9LjUpe2NvbnN0IHM9MS10O3JldHVybiByPj10PzEvcy1yL3M6ci90fSxzaW5lKHIpe3JldHVybiBNYXRoLnNpbih6KnIpKi41Ky41fSxyYW1wKHIpe3JldHVybiByfSxzYXcocil7cmV0dXJuIDEtcn0sc3F1YXJlKHIsdD0uNSl7cmV0dXJuIHI+PXQ/MDoxfSxjdXN0b20ocix0PVswLDFdKXtjb25zdCBzPXQubGVuZ3RoLTEsZT1NYXRoLmZsb29yKHIqcyksaT0xL3Msbj1TKHRbZV0sMCwxKSxvPVModFtlKzFdLDAsMSksYz1uLGg9MCxmPWk7cmV0dXJuKG8tYykvKGYtaCkqKHItaSplKStufSxzYXdibGVwKHIsdCl7cmV0dXJuIDIqci0xLW9lKHIsdCl9fSxoZT1PYmplY3Qua2V5cyh5dCk7Y2xhc3MgY2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTotMWU5fSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MWU5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdLG89ZS5mcmVxdWVuY3lbMF0sYz1lLnRpbWVbMF0saD1lLmRlcHRoWzBdLGY9ZS5za2V3WzBdLHU9ZS5waGFzZW9mZnNldFswXSxkPWUuY3VydmVbMF0sbD1lLmRjb2Zmc2V0WzBdLHA9ZS5taW5bMF0sbT1lLm1heFswXSxJPWhlW2Uuc2hhcGVbMF1dLHc9YVswXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9SHQoYypvK3UpKTtjb25zdCB2PW8qRztmb3IobGV0IE09MDtNPHc7TSsrKXtmb3IobGV0IFA9MDtQPGEubGVuZ3RoO1ArKyl7bGV0IGc9KHl0W0ldKHRoaXMucGhhc2UsZikrbCkqaDtnPU1hdGgucG93KGcsZCksYVtQXVtNXT1TKGcscCxtKX10aGlzLmluY3JlbWVudFBoYXNlKHYpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsY2UpO2NsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7bGV0IG89ZS5jb2Fyc2VbMF0/PzA7bz1NYXRoLm1heCgxLG8pO2ZvcihsZXQgYz0wO2M8WTtjKyspZm9yKGxldCBoPTA7aDxpLmxlbmd0aDtoKyspbltoXVtjXT1jJW89PT0wP2lbaF1bY106bltoXVtjLTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsdWUpO2NsYXNzIGxlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtsZXQgbz1lLmNydXNoWzBdPz84O289TWF0aC5tYXgoMSxvKTtmb3IobGV0IGM9MDtjPFk7YysrKWZvcihsZXQgaD0wO2g8aS5sZW5ndGg7aCsrKXtjb25zdCBmPU1hdGgucG93KDIsby0xKTtuW2hdW2NdPU1hdGgucm91bmQoaVtoXVtjXSpmKS9mfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixsZSk7Y2xhc3MgZmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFhKXJldHVybiExO3RoaXMuc3RhcnRlZD1hO2xldCBvPWUuc2hhcGVbMF07bz1vPDE/bzouOTk5OTk5OTk5NixvPTIqby8oMS1vKTtjb25zdCBjPU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxlLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBoPTA7aDxZO2grKylmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyluW2ZdW2hdPSgxK28pKmlbZl1baF0vKDErbypNYXRoLmFicyhpW2ZdW2hdKSkqYztyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsZmUpO2NsYXNzICR0e2NvbnN0cnVjdG9yKCl7RHQodGhpcywiczAiLDApO0R0KHRoaXMsInMxIiwwKX11cGRhdGUodCxzLGU9MCl7ZT1TKGUsMCwxKSxzPVMocywwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCBpPVMoMipNYXRoLnNpbihzKkQqRyksMCwxLjE0KSxhPTEtTWF0aC5wb3coLjUsOCplKzEpKmk7cmV0dXJuIHRoaXMuczA9YSp0aGlzLnMwLWkqdGhpcy5zMStpKnQsdGhpcy5zMT1hKnRoaXMuczEraSp0aGlzLnMwLHRoaXMuczF9fWNsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InZhbHVlIixkZWZhdWx0VmFsdWU6LjV9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5maWx0ZXJzPVtuZXcgJHQsbmV3ICR0XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDt0aGlzLnN0YXJ0ZWQ9YTtjb25zdCBvPVMoZS52YWx1ZVswXSwwLDEpO2xldCBjPSJub25lIixoLGY9MTtvPi41MT8oYz0iaGlwYXNzIixmPShvLS41KSoyKTpvPC40OSYmKGM9ImxvcGFzcyIsZj1vKjIpLGg9TWF0aC5wb3coZioxMSw0KTtmb3IobGV0IHU9MDt1PGkubGVuZ3RoO3UrKylmb3IobGV0IGQ9MDtkPFk7ZCsrKWM9PSJub25lIj9uW3VdW2RdPWlbdV1bZF06KHRoaXMuZmlsdGVyc1t1XS51cGRhdGUoaVt1XVtkXSxoLC4xKSxjPT09ImxvcGFzcyI/blt1XVtkXT10aGlzLmZpbHRlcnNbdV0uczE6Yz09PSJoaXBhc3MiP25bdV1bZF09aVt1XVtkXS10aGlzLmZpbHRlcnNbdV0uczE6blt1XVtkXT1pW3VdW2RdKTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRqZi1wcm9jZXNzb3IiLGRlKTtjbGFzcyBwZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo1MDB9LHtuYW1lOiJxIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRyaXZlIixkZWZhdWx0VmFsdWU6LjY5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLnAwPVswLDBdLHRoaXMucDE9WzAsMF0sdGhpcy5wMj1bMCwwXSx0aGlzLnAzPVswLDBdLHRoaXMucDMyPVswLDBdLHRoaXMucDMzPVswLDBdLHRoaXMucDM0PVswLDBdfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7Y29uc3Qgbz1lLnFbMF0sYz1TKE1hdGguZXhwKGUuZHJpdmVbMF0pLC4xLDJlMyk7bGV0IGg9ZS5mcmVxdWVuY3lbMF07aD1oKnoqRyxoPWg+MT8xOmg7Y29uc3QgZj1NYXRoLm1pbig4LG8qLjEzKTtsZXQgdT0xL2MqTWF0aC5taW4oMS43NSwxK2YpO2ZvcihsZXQgZD0wO2Q8WTtkKyspZm9yKGxldCBsPTA7bDxpLmxlbmd0aDtsKyspe2NvbnN0IHA9dGhpcy5wM1tsXSouMzYwODkxK3RoaXMucDMyW2xdKi40MTcyOSt0aGlzLnAzM1tsXSouMTc3ODk2K3RoaXMucDM0W2xdKi4wNDM5NzI1O3RoaXMucDM0W2xdPXRoaXMucDMzW2xdLHRoaXMucDMzW2xdPXRoaXMucDMyW2xdLHRoaXMucDMyW2xdPXRoaXMucDNbbF0sdGhpcy5wMFtsXSs9KGooaVtsXVtkXSpjLWYqcCktaih0aGlzLnAwW2xdKSkqaCx0aGlzLnAxW2xdKz0oaih0aGlzLnAwW2xdKS1qKHRoaXMucDFbbF0pKSpoLHRoaXMucDJbbF0rPShqKHRoaXMucDFbbF0pLWoodGhpcy5wMltsXSkpKmgsdGhpcy5wM1tsXSs9KGoodGhpcy5wMltsXSktaih0aGlzLnAzW2xdKSkqaCxuW2xdW2RdPXAqdX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImxhZGRlci1wcm9jZXNzb3IiLHBlKTtjbGFzcyBtZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJkaXN0b3J0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InBvc3RnYWluIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHtwcm9jZXNzb3JPcHRpb25zOnR9KXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLmFsZ29yaXRobT1ocyh0LmFsZ29yaXRobSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtmb3IobGV0IG89MDtvPFk7bysrKXtjb25zdCBjPVMoYihlLnBvc3RnYWluLG8pLC4wMDEsMSksaD1NYXRoLmV4cG0xKGIoZS5kaXN0b3J0LG8pKTtmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyl7Y29uc3QgdT1pW2ZdW29dO25bZl1bb109Yyp0aGlzLmFsZ29yaXRobSh1LGgpfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRpc3RvcnQtcHJvY2Vzc29yIixtZSk7Y2xhc3MgZ2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2NvbnN0e3R5cGU6cyxwYXlsb2FkOmV9PXQuZGF0YXx8e307cz09PSJpbml0aWFsaXplIiYmdGhpcy5pbml0aWFsaXplKGUpfSx0aGlzLmluaXRpYWxpemUoKX1pbml0aWFsaXplKHQpe3RoaXMucGhhc2U9W119c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjotMX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOi0xfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdLGQ9ZS52b2ljZXNbMF07Zm9yKGxldCBsPTA7bDx1WzBdLmxlbmd0aDtsKyspe2NvbnN0IHA9YihlLmRldHVuZSxsKSxtPWIoZS5mcmVxc3ByZWFkLGwpLEk9YihlLnBhbnNwcmVhZCxsKSouNSsuNTtsZXQgdz1NYXRoLnNxcnQoMS1JKSx2PU1hdGguc3FydChJKSxNPWIoZS5mcmVxdWVuY3ksbCk7TT1ldChNLHAvMTAwKTtjb25zdCBQPVV0KGQsbSk7Zm9yKGxldCBnPTA7ZzxkO2crKyl7Y29uc3QgVD1ldChNLFAoZykpLEE9UShUKkcpO3RoaXMucGhhc2VbZ109dGhpcy5waGFzZVtnXT8/TWF0aC5yYW5kb20oKTtjb25zdCBWPXl0LnNhd2JsZXAodGhpcy5waGFzZVtnXSxBKTt1WzBdW2xdKz1WKncsdVsxXVtsXSs9Vip2O2xldCBPPXRoaXMucGhhc2VbZ10rQTtPPj0xJiYoTy09MSksdGhpcy5waGFzZVtnXT1PO2NvbnN0IE49dzt3PXYsdj1OfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInN1cGVyc2F3LW9zY2lsbGF0b3IiLGdlKTtjb25zdCBiZT0yMDQ4LFB0PW5ldyBNYXA7ZnVuY3Rpb24gdmUocil7aWYoIVB0LmhhcyhyKSl7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KHIpO2ZvcihsZXQgcz0wO3M8cjtzKyspdFtzXT0uNSooMS1NYXRoLmNvcyh6KnMvcikpO1B0LnNldChyLHQpfXJldHVybiBQdC5nZXQocil9Y2xhc3MgSWUgZXh0ZW5kcyBYe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOmJlfSxzdXBlcih0KSx0aGlzLnRpbWVDdXJzb3I9MCx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy5pbnZmZnRTaXplPTEvdGhpcy5mZnRTaXplLHRoaXMuaGFubldpbmRvdz12ZSh0aGlzLmZmdFNpemUpLHRoaXMuZmZ0PW5ldyBRdCh0aGlzLmZmdFNpemUpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy50aW1lQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLm1hZ25pdHVkZXM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmZmdFNpemUvMisxKSx0aGlzLnBlYWtJbmRleGVzPW5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpLHRoaXMubmJQZWFrcz0wfXByb2Nlc3NPTEEodCxzLGUpe2xldCBpPWUucGl0Y2hGYWN0b3JbZS5waXRjaEZhY3Rvci5sZW5ndGgtMV07aTwwJiYoaT1pKi4yNSksaT1NYXRoLm1heCgwLGkrMSk7Zm9yKGxldCBuPTA7bjx0aGlzLm5iSW5wdXRzO24rKylmb3IobGV0IGE9MDthPHRbbl0ubGVuZ3RoO2ErKyl7Y29uc3Qgbz10W25dW2FdLGM9c1tuXVthXTt0aGlzLmFwcGx5SGFubldpbmRvdyhvKSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsbyksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKGkpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IobGV0IHM9MDtzPHRoaXMuYmxvY2tTaXplO3MrKyl0W3NdKj10aGlzLmhhbm5XaW5kb3dbc10qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2xldCB0PTAscz0wO2Zvcig7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7Y29uc3QgZT10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3NdLGk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltzKzFdO3RoaXMubWFnbml0dWRlc1t0XT1lKioyK2kqKjIsdCs9MSxzKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDtsZXQgdD0yO2NvbnN0IHM9dGhpcy5tYWduaXR1ZGVzLmxlbmd0aC0yO2Zvcig7dDxzOyl7Y29uc3QgZT10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1lKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1lKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2ZvcihsZXQgcz0wO3M8dGhpcy5uYlBlYWtzO3MrKyl7Y29uc3QgZT10aGlzLnBlYWtJbmRleGVzW3NdLGk9c3QoZSp0KTtpZihpPnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IG49MCxhPXRoaXMuZmZ0U2l6ZTtzPjAmJihuPWUtc3QoKGUtdGhpcy5wZWFrSW5kZXhlc1tzLTFdKS8yKSksczx0aGlzLm5iUGVha3MtMSYmKGE9ZSthZSgodGhpcy5wZWFrSW5kZXhlc1tzKzFdLWUpLzIpKTtjb25zdCBvPW4tZSxjPWEtZSxoPXoqdGhpcy5pbnZmZnRTaXplKihpLWUpLGY9TWF0aC5jb3MoaCp0aGlzLnRpbWVDdXJzb3IpLHU9TWF0aC5zaW4oaCp0aGlzLnRpbWVDdXJzb3IpO2ZvcihsZXQgZD1vO2Q8YztkKyspe2NvbnN0IGw9ZStkLHA9aStkO2lmKHA+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7Y29uc3QgbT0yKmwsST1tKzEsdz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW21dLHY9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltJXSxNPXcqZi12KnUsUD13KnUrdipmLGc9MipwLFQ9ZysxO3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2ddKz1NLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW1RdKz1QfX19fXJlZ2lzdGVyUHJvY2Vzc29yKCJwaGFzZS12b2NvZGVyLXByb2Nlc3NvciIsSWUpO2NsYXNzIHdlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoaT0tRCx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9RCx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7Y29uc3QgaT1zWzBdO2xldCBuPTEsYTtmb3IobGV0IG89MDtvPChpWzBdLmxlbmd0aD8/MCk7bysrKXtjb25zdCBjPSgxLVMoYihlLnB1bHNld2lkdGgsbyksLS45OSwuOTkpKSpELGg9YihlLmRldHVuZSxvKSxmPWV0KGIoZS5mcmVxdWVuY3ksbyksaC8xMDApO2E9Zip6KkcsdGhpcy5kcGhpZis9LjEqKGEtdGhpcy5kcGhpZiksbio9Ljk5OTgsdGhpcy5lbnZmKz0uMSoobi10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpmKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49RCYmKHRoaXMucGhpLT16KTtsZXQgdT1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMCk7dGhpcy5ZMD0uNSoodSt0aGlzLlkwKTtsZXQgZD1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMStjKTt0aGlzLlkxPS41KihkK3RoaXMuWTEpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bb109LjE1Kih1LWQpKnRoaXMuZW52Zn1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInB1bHNlLW9zY2lsbGF0b3IiLHdlKTtjb25zdCBUdD17Yml0QzpmdW5jdGlvbihyLHQscyl7cmV0dXJuIHImdD9zOjB9LGJyOmZ1bmN0aW9uKHIsdD04KXtpZih0PjMyKXRocm93IG5ldyBFcnJvcigiYnIoKSBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMzIiKTtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspc3w9VHQuYml0QyhyLDE8PGUsMTw8dC0oZSsxKSk7cmV0dXJuIHN9LHNpbmY6ZnVuY3Rpb24ocil7cmV0dXJuIE1hdGguc2luKHIqRC8xMjgpfSxjb3NmOmZ1bmN0aW9uKHIpe3JldHVybiBNYXRoLmNvcyhyKkQvMTI4KX0sdGFuZjpmdW5jdGlvbihyKXtyZXR1cm4gTWF0aC50YW4ocipELzEyOCl9LHJlZ0c6ZnVuY3Rpb24ocix0KXtyZXR1cm4gdC50ZXN0KHIudG9TdHJpbmcoMikpfX07bGV0IGx0LEJ0O2Z1bmN0aW9uIFNlKHIpe2lmKGx0PT1udWxsKXtsdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXRoKSxCdD1sdC5tYXAoZT0+TWF0aFtlXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhUdCkscz10Lm1hcChlPT5UdFtlXSk7bHQucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxCdC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5zKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLmx0LCJ0IixgcmV0dXJuIDAsCiR7cnx8MH07YCkuYmluZChnbG9iYWxUaGlzLC4uLkJ0KX1jbGFzcyBfZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5wb3J0Lm9ubWVzc2FnZT10PT57bGV0e2NvZGVUZXh0OnN9PXQuZGF0YTtjb25zdHtieXRlQmVhdFN0YXJ0VGltZTplfT10LmRhdGE7ZSE9bnVsbCYmKHRoaXMudD0wLHRoaXMuaW5pdGlhbE9mZnNldD1NYXRoLmZsb29yKGUpKSxzPXMudHJpbSgpLnJlcGxhY2UoL15ldmFsXCh1bmVzY2FwZVwoZXNjYXBlKD86YHxcKCd8XCgifFwoYCkoLio/KSg/OmB8J1wpfCJcKXxgXCkpLnJlcGxhY2VcKFwvdVwoXC5cLlwpXC9nLFsiJ2BdXCQxJVsiJ2BdXClcKVwpJC8sKGksbik9PnVuZXNjYXBlKGVzY2FwZShuKS5yZXBsYWNlKC91KC4uKS9nLCIkMSUiKSkpLHRoaXMuZnVuYz1TZShzKX0sdGhpcy5pbml0aWFsT2Zmc2V0PTAsdGhpcy50PW51bGwsdGhpcy5mdW5jPW51bGx9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7dGhpcy50PT1udWxsJiYodGhpcy50PWUuYmVnaW5bMF0qc2FtcGxlUmF0ZSk7Y29uc3QgaT1zWzBdLG49MjU2Kkc7Zm9yKGxldCBhPTA7YTxpWzBdLmxlbmd0aDthKyspe2NvbnN0IG89YihlLmRldHVuZSxhKSxjPWV0KGIoZS5mcmVxdWVuY3ksYSksby8xMDApLGg9bipjKnRoaXMudCt0aGlzLmluaXRpYWxPZmZzZXQsdT0odGhpcy5mdW5jKGgpJjI1NSkvMTI3LjUtMSxkPVModSouMiwtLjQsLjQpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bYV09ZDt0aGlzLnQrK31yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImJ5dGUtYmVhdC1wcm9jZXNzb3IiLF9lKTtjbGFzcyBNZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiYXR0YWNrIixkZWZhdWx0VmFsdWU6LjAwNSxtaW5WYWx1ZTowfSx7bmFtZToiZGVjYXkiLGRlZmF1bHRWYWx1ZTouMTQsbWluVmFsdWU6MH0se25hbWU6InN1c3RhaW4iLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOjAsbWF4VmFsdWU6MX0se25hbWU6InJlbGVhc2UiLGRlZmF1bHRWYWx1ZTouMSxtaW5WYWx1ZTowfSx7bmFtZToiYXR0YWNrQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJkZWNheUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6LTFlOX0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjFlOX0se25hbWU6InJldHJpZ2dlciIsZGVmYXVsdFZhbHVlOjEsbWluVmFsdWU6MCxtYXhWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudmFsPTAsdGhpcy5zZWdJZHg9MCx0aGlzLnN0YXRlPTAsdGhpcy5iZWdpblRpbWU9MCx0aGlzLmVuZFRpbWU9MCx0aGlzLmF0dGFja1N0YXJ0PTB9X3dhcnAodCxzLGU9OCl7aWYodD09PTB8fHQ9PT0xKXJldHVybiB0O2lmKHM+MCl7Y29uc3QgaT0xK2UqcztyZXR1cm4gMS1NYXRoLnBvdygxLXQsaSl9ZWxzZXtjb25zdCBpPTEtZSpzO3JldHVybiBNYXRoLnBvdyh0LGkpfX1fYWR2YW5jZSh0LHMsZSxpKXtpZihlPT09MHx8dD09PXMpdGhpcy52YWw9cztlbHNle2NvbnN0IG49TWF0aC5taW4oMSwoY3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWUpL2UpLGE9dGhpcy5fd2FycChuLGkpO3RoaXMudmFsPXQrKHMtdCkqYX19cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdWzBdLG89YihlLnJldHJpZ2dlciwwKT49LjU7aSE9PXRoaXMuYmVnaW5UaW1lJiYodGhpcy5zdGF0ZT09PTB8fG8pJiYodGhpcy5iZWdpblRpbWU9aSx0aGlzLnN0YXRlPTEsdGhpcy5lbmRUaW1lPWIoZS5lbmQsMCksdGhpcy5hdHRhY2tTdGFydD10aGlzLnZhbCk7Y29uc3QgYz10aGlzLmVuZFRpbWUtdGhpcy5iZWdpblRpbWU7Zm9yKGxldCBoPTA7aDxhLmxlbmd0aDtoKyspe2NvbnN0IGY9YihlLmF0dGFjayxoKSx1PWIoZS5kZWNheSxoKSxkPWIoZS5zdXN0YWluLGgpLGw9YihlLnJlbGVhc2UsaCkscD1iKGUuYXR0YWNrQ3VydmUsaCksbT1iKGUuZGVjYXlDdXJ2ZSxoKSxJPWIoZS5yZWxlYXNlQ3VydmUsaCksdz1iKGUuZGVwdGgsaCksdj1iKGUubWluLGgpLE09YihlLm1heCxoKSxQPVt7dGltZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksc3RhcnQ6MCx0YXJnZXQ6MH0se3RpbWU6ZixzdGFydDp0aGlzLmF0dGFja1N0YXJ0LHRhcmdldDoxLGN1cnZlOnB9LHt0aW1lOmYrdSxzdGFydDoxLHRhcmdldDpkLGN1cnZlOm19LHt0aW1lOmMsc3RhcnQ6ZCx0YXJnZXQ6ZH0se3RpbWU6YytsLHN0YXJ0OmQsdGFyZ2V0OjAsY3VydmU6SX1dO2xldHt0aW1lOmcsc3RhcnQ6VCx0YXJnZXQ6QSxjdXJ2ZTpWfT1QW3RoaXMuc3RhdGVdO2Zvcih0aGlzLl9hZHZhbmNlKFQsQSxnLFYpO2N1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lPj1nOyl0aGlzLnN0YXRlPSh0aGlzLnN0YXRlKzEpJVAubGVuZ3RoLGc9UFt0aGlzLnN0YXRlXS50aW1lO2FbaF09Uyh0aGlzLnZhbCp3LHYsTSl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJlbnZlbG9wZS1wcm9jZXNzb3IiLE1lKTtjb25zdCB4PU9iamVjdC5mcmVlemUoe05PTkU6MCxBU1lNOjEsTUlSUk9SOjIsQkVORFA6MyxCRU5ETTo0LEJFTkRNUDo1LFNZTkM6NixRVUFOVDo3LEZPTEQ6OCxQV006OSxPUkJJVDoxMCxTUElOOjExLENIQU9TOjEyLFBSSU1FUzoxMyxCSU5BUlk6MTQsQlJPV05JQU46MTUsUkVDSVBST0NBTDoxNixXT1JNSE9MRToxNyxMT0dJU1RJQzoxOCxTSUdNT0lEOjE5LEZSQUNUQUw6MjAsRkxJUDoyMX0pO2Z1bmN0aW9uIHhlKHIpe3JldHVybiByPXIrMjEyNzkxMjIxNCsocjw8MTIpLHI9cl4zMzQ1MDcyNzAwXnI+Pj4xOSxyPXIrMzc0NzYxMzkzKyhyPDw1KSxyPXIrMzU1MDYzNTExNl5yPDw5LHI9cis0MjUxOTkzNzk3KyhyPDwzKSxyPXJeMzA0MjU5NDU2OV5yPj4+MTYscj4+PjB9Y29uc3QgS3Q9cj0+KHhlKHIpPj4+OCkvMTY3NzcyMTY7ZnVuY3Rpb24geWUocix0KXtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspcz1zPDwxfHImMSxyPj4+PTE7cmV0dXJuIHN9ZnVuY3Rpb24gUGUocil7Y29uc3QgdD1NYXRoLmZsb29yKHIpLHM9ci10LGU9S3QodCksaT1LdCh0KzEpO3JldHVybiBlKyhpLWUpKnN9ZnVuY3Rpb24gVGUocix0PTQpe2xldCBzPS41LGU9MCxpPTAsbj0xO2ZvcihsZXQgYT0wO2E8dDthKyspZSs9cypQZShyKm4pLGkrPXMscyo9LjUsbio9MjtyZXR1cm4gZS9pKjItMX1jb25zdCBWdD17fTtjbGFzcyBCZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOi0xLG1pbjotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6LTEsbWluOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMTgsbWluOjB9LHtuYW1lOiJwb3NpdGlvbiIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX0se25hbWU6IndhcnBNb2RlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjEsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNyxtaW46MCxtYXg6MX0se25hbWU6InBoYXNlcmFuZCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9XX1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLnBvcnQub25tZXNzYWdlPXM9Pntjb25zdHt0eXBlOmUscGF5bG9hZDppfT1zLmRhdGF8fHt9O2U9PT0iaW5pdGlhbGl6ZSImJnRoaXMuaW5pdGlhbGl6ZShpKX0sdGhpcy5pbml0aWFsaXplKCl9aW5pdGlhbGl6ZSh0KXtpZih0aGlzLnRhYmxlPW51bGwsdGhpcy5mcmFtZUxlbj1udWxsLHRoaXMubnVtRnJhbWVzPW51bGwsdGhpcy5waGFzZT1bXSx0IT1udWxsJiZ0LmtleSl7Y29uc3Qgcz10LmtleTt0aGlzLmZyYW1lTGVuPXQuZnJhbWVMZW4sVnRbc118fChWdFtzXT10LmZyYW1lcyksdGhpcy50YWJsZT1WdFtzXSx0aGlzLm51bUZyYW1lcz10aGlzLnRhYmxlLmxlbmd0aH19X21pcnJvcih0KXtyZXR1cm4gMS1NYXRoLmFicygyKnQtMSl9X3RvQml0cyh0LHM9MixlPTEyKXtjb25zdCBpPWUrKHMtZSkqdDtyZXR1cm57YjppLG46c3QoTWF0aC5wb3coMixpKSl9fV93YXJwUGhhc2UodCxzLGUpe3N3aXRjaChlKXtjYXNlIHguTk9ORTpyZXR1cm4gdDtjYXNlIHguQVNZTTp7Y29uc3QgaT0uMDErLjk5KnM7cmV0dXJuIHQ8aT8uNSp0L2k6LjUrLjUqKHQtaSkvKDEtaSl9Y2FzZSB4Lk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LHMseC5BU1lNKSk7Y2FzZSB4LkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMypzKTtjYXNlIHguQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKnMpKTtjYXNlIHguQkVORE1QOnJldHVybiBzPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMipzLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqcy0xLDIpO2Nhc2UgeC5TWU5DOntjb25zdCBpPU1hdGgucG93KDE2LHMqKjIpO3JldHVybiB0KmklMX1jYXNlIHguUVVBTlQ6e2NvbnN0e246aX09dGhpcy5fdG9CaXRzKHMpO3JldHVybiB0dCh0KmkpL2l9Y2FzZSB4LkZPTEQ6e2NvbnN0IG49MStNYXRoLm1heCgxLHN0KDcqcykpO3JldHVybiBNYXRoLmFicyhIdChuKnQpLS41KSoyfWNhc2UgeC5QV006e2NvbnN0IGk9UyguNSsuNDkqKDIqcy0xKSwwLDEpO3JldHVybiB0PGk/dC9pKi41Oi41Kyh0LWkpLygxLWkpKi41fWNhc2UgeC5PUkJJVDp7Y29uc3QgaT0uNSpzO3JldHVybiBRKHQraSpNYXRoLnNpbih6KjMqdCkpfWNhc2UgeC5TUElOOntjb25zdCBpPS41KnMse259PXRoaXMuX3RvQml0cyhzLDEsNik7cmV0dXJuIFEodCtpKk1hdGguc2luKHoqbip0KSl9Y2FzZSB4LkNIQU9TOntjb25zdCBuPSgzLjcrLjMqcykqdCooMS10KTtyZXR1cm4gUygoMS1zKSp0K3MqbiwwLDEpfWNhc2UgeC5QUklNRVM6e2NvbnN0IGk9YT0+e2lmKGE8MilyZXR1cm4hMTtpZihhJTI9PT0wKXJldHVybiBhPT09Mjtmb3IobGV0IG89MztvKioyPD1hO28rPTIpaWYoYSVvPT09MClyZXR1cm4hMTtyZXR1cm4hMH07bGV0e259PXRoaXMuX3RvQml0cyhzLDMpO2Zvcig7IWkobik7KW4rKztyZXR1cm4gdHQodCpuKS9ufWNhc2UgeC5CSU5BUlk6e2xldHtiOml9PXRoaXMuX3RvQml0cyhzLDMpO2k9c3QoaSk7Y29uc3Qgbj0xPDxpLGE9dHQodCpuKTtyZXR1cm4geWUoYSxpKS9ufWNhc2UgeC5CUk9XTklBTjp7Y29uc3QgaT0uMjUqcypUZSg2NCp0LDQpO3JldHVybiBRKHQraSl9Y2FzZSB4LlJFQ0lQUk9DQUw6e2NvbnN0IGk9Mis0KnMsbj10KmksYT10KygxLXQpKmksbz1hPjFlLTEyP24vYTowO3JldHVybiBTKG8sMCwxKX1jYXNlIHguV09STUhPTEU6e2NvbnN0IGk9UyguOCpzLDAsMSksbj0uNSooMS1pKSxhPS41KigxK2kpO3JldHVybiB0PG4/dC9uKi41OnQ+YT8uNSooMSsodC1hKS8oMS1hKSk6LjV9Y2FzZSB4LkxPR0lTVElDOntsZXQgaT10O2NvbnN0IG49My42Ky40KnMsYT0xK3N0KDIqcyk7Zm9yKGxldCBvPTA7bzxhO28rKylpPW4qaSooMS1pKTtyZXR1cm4gUyhpLDAsMSl9Y2FzZSB4LlNJR01PSUQ6e2NvbnN0IGk9MSsxMCpzLG49dC0uNSxhPTEvKDErTWF0aC5leHAoLWkqbikpLG89MS8oMStNYXRoLmV4cCguNSppKSksYz0xLygxK01hdGguZXhwKC0uNSppKSk7cmV0dXJuKGEtbykvKGMtbyl9Y2FzZSB4LkZSQUNUQUw6e2NvbnN0IGk9LjUqTWF0aC5zaW4oeip0KSpzO3JldHVybiBRKHQraSl9Y2FzZSB4LkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQscyl7Y29uc3QgZT10Lmxlbmd0aCxpPXMqZTtsZXQgbj1pfDA7bj49ZSYmKG49MCk7Y29uc3QgYT1pLW4sbz10W25dO2xldCBjPW4rMTtjPj1lJiYoYz0wKTtjb25zdCBoPXRbY107cmV0dXJuIG8rKGgtbykqYX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdWzBdLGQ9c1swXVsxXXx8c1swXVswXTtpZighdGhpcy50YWJsZSlyZXR1cm4gdS5maWxsKDApLGQhPT11JiZkLnNldCh1KSwhMDtjb25zdCBsPWUudm9pY2VzWzBdO2ZvcihsZXQgcD0wO3A8dS5sZW5ndGg7cCsrKXtjb25zdCBtPWIoZS5kZXR1bmUscCksST1iKGUuZnJlcXNwcmVhZCxwKSx2PVMoYihlLnBvc2l0aW9uLHApLDAsMSkqKHRoaXMubnVtRnJhbWVzLTEpLE09dnwwLFA9di1NLGc9UyhiKGUud2FycCxwKSwwLDEpLFQ9YihlLndhcnBNb2RlLHApLEE9UyhiKGUucGhhc2VyYW5kLHApLDAsMSksVj1sPjE/UyhiKGUucGFuc3ByZWFkLHApLDAsMSk6MCxPPU1hdGguc3FydCguNS0uNSpWKSxOPU1hdGguc3FydCguNSsuNSpWKTtsZXQgQz1iKGUuZnJlcXVlbmN5LHApO0M9ZXQoQyxtLzEwMCk7Y29uc3QgRj0xL01hdGguc3FydChsKSxxPVV0KGwsSSk7Zm9yKGxldCBCPTA7QjxsO0IrKyl7Y29uc3QgTD0oQiYxKT09MTtsZXQgRT1PLEg9TjtMJiYoRT1OLEg9Tyk7Y29uc3QgJD1ldChDLHEoQikpKkc7dGhpcy5waGFzZVtCXT10aGlzLnBoYXNlW0JdPz9NYXRoLnJhbmRvbSgpKkE7Y29uc3QgVT10aGlzLl93YXJwUGhhc2UodGhpcy5waGFzZVtCXSxnLFQpLEs9dGhpcy5fc2FtcGxlRnJhbWUodGhpcy50YWJsZVtNXSxVKSxaPXRoaXMuX3NhbXBsZUZyYW1lKHRoaXMudGFibGVbTWF0aC5taW4odGhpcy5udW1GcmFtZXMtMSxNKzEpXSxVKTtsZXQgaz11dChLLFosUCk7VD09PXguRkxJUCYmdGhpcy5waGFzZVtCXTxnJiYoaz0tayksdVtwXSs9aypFKkYsZFtwXSs9aypIKkYsdGhpcy5waGFzZVtCXT1RKHRoaXMucGhhc2VbQl0rJCl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixCZSk7Y2xhc3MgVmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVybltdfWNvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5nYWluQ29lZmY9eHQoLjIpLHRoaXMuYXZnR2Fpbj0xO2xldHthdHRhY2tUaW1lOnM9LjAwMyxzdXN0YWluVGltZTplPS4wOCxhdHRhY2s6aT0wLHN1c3RhaW46bj0wLHNlbnNpdGl2aXR5OmE9LjEsbWl4Om89MSxiZWdpbjpjPTAsZW5kOmg9MH09dC5wcm9jZXNzb3JPcHRpb25zO3M9UyhzLDVlLTQsLjA1KSxlPVMoZSwuMDEsLjUpLHRoaXMuYXR0YWNrQ29lZmY9eHQocyksdGhpcy5zdXN0YWluQ29lZmY9eHQoZSksdGhpcy5hdHRhY2tBbXQ9UyhpLC0xLDEpLHRoaXMuc3VzdGFpbkFtdD1TKG4sLTEsMSksdGhpcy5zY2FsaW5nPS41KzUqUyhhLDAsMSksdGhpcy5taXg9UyhvLDAsMSksdGhpcy5iZWdpbj1jLHRoaXMuZW5kPWgsdGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheSgyKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheSgyKX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdO2lmKGN1cnJlbnRUaW1lPj10aGlzLmVuZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9dGhpcy5iZWdpbilyZXR1cm4hMDtjb25zdCBhPWkubGVuZ3RoO2E+dGhpcy5hdHRhY2tFbnYubGVuZ3RoJiYodGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheShhKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheShhKSk7bGV0IG89dGhpcy5hdmdHYWluO2ZvcihsZXQgYz0wO2M8YTtjKyspe2xldCBoPXRoaXMuYXR0YWNrRW52W2NdLGY9dGhpcy5zdXN0YWluRW52W2NdO2ZvcihsZXQgdT0wO3U8WTt1Kyspe2NvbnN0IGQ9aVtjXVt1XSxsPU1hdGguYWJzKGQpO2g9dXQoaCxsLHRoaXMuYXR0YWNrQ29lZmYpLGY9dXQoZixsLHRoaXMuc3VzdGFpbkNvZWZmKTtjb25zdCBwPVModGhpcy5zY2FsaW5nKihoLWYpLyhmKzFlLTYpLC0xLjUsMS41KSxtPXA+MD9wOjAsST1wPDA/LXA6MCx3PWp0KHRoaXMuYXR0YWNrQW10Km0qMTgpLHY9anQodGhpcy5zdXN0YWluQW10KkkqMzYpLE09Uyh3KnYsMCw4KTtvPXV0KG8sTSx0aGlzLmdhaW5Db2VmZik7Y29uc3QgUD1vPi4wMDE/MS9vOjEsZz1kKk0qUDtsZXQgVD11dChkLGcsdGhpcy5taXgpO1QvPTErTWF0aC5hYnMoVCksbltjXVt1XT1UfXRoaXMuYXR0YWNrRW52W2NdPWgsdGhpcy5zdXN0YWluRW52W2NdPWZ9cmV0dXJuIHRoaXMuYXZnR2Fpbj1vLCEwfX1yZWdpc3RlclByb2Nlc3NvcigidHJhbnNpZW50LXByb2Nlc3NvciIsVmUpO2NsYXNzIEFlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBsYXlQb3M9MDtjb25zdCB0PTE2O3RoaXMub3V0cHV0cz1uZXcgQXJyYXkodCkuZmlsbCgwKSx0aGlzLnNvdXJjZXM9bmV3IEFycmF5KHQpLmZpbGwoMCksdGhpcy5nYXRlRW5kZWQ9ITEsdGhpcy5zdGFydGVkPSExLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3ZhciBoLGY7bGV0e3NyYzplLHNjaGVtYTp7dWdlbnM6aSxyZWdpc3RlcnM6bn0sc3RhcnQ6YSxnYXRlRW5kOm8sZW5kOmN9PXMuZGF0YTt0aGlzLnN0YXJ0PWEsdGhpcy5nYXRlRW5kPW8sdGhpcy5lbmQ9Yyx0aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkobikuZmlsbCgwKSx0aGlzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCiR7ZX1gLHRoaXMubm9kZXM9W107Zm9yKGxldCB1PTA7dTxpLmxlbmd0aDt1Kyspe2NvbnN0IGQ9aVt1XSxsPW5lLmdldChkLnR5cGUpLHA9bmV3IGwodSxkLHNhbXBsZVJhdGUpO3AudHlwZT09PSJjYyImJigoZj0oaD1kLmlucHV0cyk9PW51bGw/dm9pZCAwOmhbMF0pIT1udWxsJiZmLmluY2x1ZGVzKCJzdHJ1ZGVsLWdhdGUiKSkmJihwLnNldFZhbHVlKDEpLHRoaXMuZ2F0ZU5vZGU9cCksdGhpcy5ub2Rlc1t1XT1wfXRoaXMuZ2VuU2FtcGxlPW5ldyBGdW5jdGlvbigidGltZSIsIm5vZGVzIiwiaW5wdXQiLCJyIiwibyIsInMiLHRoaXMuc3JjKX19cHJvY2Vzcyh0LHMpe3ZhciBvLGM7Y29uc3QgZT0obz10WzBdKT09bnVsbD92b2lkIDA6b1swXTtpZihjdXJyZW50VGltZT49dGhpcy5lbmQpcmV0dXJuITE7aWYodGhpcy5nZW5TYW1wbGU9PT12b2lkIDB8fGN1cnJlbnRUaW1lPHRoaXMuc3RhcnQpcmV0dXJuITA7dGhpcy5zdGFydGVkPSEwLCF0aGlzLmdhdGVFbmRlZCYmY3VycmVudFRpbWU+dGhpcy5nYXRlRW5kJiYoKGM9dGhpcy5nYXRlTm9kZSk9PW51bGx8fGMuc2V0VmFsdWUoMCksdGhpcy5nYXRlRW5kZWQ9ITApO2NvbnN0IGk9c1swXSxuPWlbMF0sYT1pWzFdO2ZvcihsZXQgaD0wO2g8WTtoKyspe3RoaXMuZ2VuU2FtcGxlKHRoaXMucGxheVBvcyx0aGlzLm5vZGVzLGU/ZVtoXTowLHRoaXMucmVnaXN0ZXJzLHRoaXMub3V0cHV0cyx0aGlzLnNvdXJjZXMpO2NvbnN0IGY9dGhpcy5vdXRwdXRzWzBdLHU9dGhpcy5vdXRwdXRzWzFdO2E/KG5baF09ZixhW2hdPXUpOm5baF09LjUqKGYrdSksdGhpcy5wbGF5UG9zKz0xL3NhbXBsZVJhdGV9cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3NvcigiZ2VuZXJpYy1wcm9jZXNzb3IiLEFlKSxSLldhcnBNb2RlPXgsT2JqZWN0LmRlZmluZVByb3BlcnR5KFIsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLFJ9KHt9KTsK";let en=[],Yn=0;const _a=4;let fA=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(s){return n.lc=t.push(s),()=>{for(let r=Yn+_a;r<en.length;)en[r]===s?en.splice(r,_a):r+=_a;let a=t.indexOf(s);~a&&(t.splice(a,1),--n.lc||n.off())}},notify(s,a){let r=!en.length;for(let i of t)en.push(i,n.value,s,a);if(r){for(Yn=0;Yn<en.length;Yn+=_a)en[Yn](en[Yn+1],en[Yn+2],en[Yn+3]);en.length=0}},off(){},set(s){let a=n.value;a!==s&&(n.value=s,n.notify(a))},subscribe(s){let a=n.listen(s);return s(n.value),a},value:e};return n},yA=(e={})=>{let t=fA(e);return t.setKey=function(n,s){let a=t.value;typeof s>"u"&&n in t.value?(t.value={...t.value},delete t.value[n],t.notify(a,n)):t.value[n]!==s&&(t.value={...t.value,[n]:s},t.notify(a,n))},t};const gA={stretch:{node:"stretch",param:"pitchFactor"},gain:{node:"gain",param:"gain"},postgain:{node:"post",param:"gain"},pan:{node:"pan",param:"pan"},tremolo:{node:"tremolo",param:"frequency"},tremolosync:{node:"tremolo",param:"frequency"},tremolodepth:{node:"tremolo_gain",param:"gain"},tremoloskew:{node:"tremolo",param:"skew"},tremolophase:{node:"tremolo",param:"phase"},tremoloshape:{node:"tremolo",param:"shape"},lfo:{node:"lfo",param:"frequency"},lfo_rate:{node:"lfo",param:"frequency"},lfo_sync:{node:"lfo",param:"frequency"},lfo_depth:{node:"lfo",param:"depth"},lfo_depthabs:{node:"lfo",param:"depth"},lfo_skew:{node:"lfo",param:"skew"},lfo_curve:{node:"lfo",param:"curve"},lfo_dcoffset:{node:"lfo",param:"dcoffset"},env:{node:"env",param:"depth"},env_attack:{node:"env",param:"attack"},env_decay:{node:"env",param:"decay"},env_sustain:{node:"env",param:"sustain"},env_release:{node:"env",param:"release"},bmod:{node:"bmod",param:"depth"},bmod_depth:{node:"bmod",param:"depth"},bmod_depthabs:{node:"bmod",param:"depth"},cutoff:{node:"lpf",param:"frequency"},resonance:{node:"lpf",param:"Q"},lprate:{node:"lpf_lfo",param:"rate"},lpsync:{node:"lpf_lfo",param:"sync"},lpdepth:{node:"lpf_lfo",param:"depth"},lpdepthfrequency:{node:"lpf_lfo",param:"depth"},lpshape:{node:"lpf_lfo",param:"shape"},lpdc:{node:"lpf_lfo",param:"dcoffset"},lpskew:{node:"lpf_lfo",param:"skew"},hcutoff:{node:"hpf",param:"frequency"},hresonance:{node:"hpf",param:"Q"},hprate:{node:"hpf_lfo",param:"rate"},hpsync:{node:"hpf_lfo",param:"sync"},hpdepth:{node:"hpf_lfo",param:"depth"},hpdepthfrequency:{node:"hpf_lfo",param:"depth"},hpshape:{node:"hpf_lfo",param:"shape"},hpdc:{node:"hpf_lfo",param:"dcoffset"},hpskew:{node:"hpf_lfo",param:"skew"},bandf:{node:"bpf",param:"frequency"},bandq:{node:"bpf",param:"Q"},bprate:{node:"bpf_lfo",param:"rate"},bpsync:{node:"bpf_lfo",param:"sync"},bpdepth:{node:"bpf_lfo",param:"depth"},bpdepthfrequency:{node:"bpf_lfo",param:"depth"},bpshape:{node:"bpf_lfo",param:"shape"},bpdc:{node:"bpf_lfo",param:"dcoffset"},bpskew:{node:"bpf_lfo",param:"skew"},vowel:{node:"vowel",param:"frequency"},coarse:{node:"coarse",param:"coarse"},crush:{node:"crush",param:"crush"},shape:{node:"shape",param:"shape"},shapevol:{node:"shape",param:"postgain"},distort:{node:"distort",param:"distort"},distortvol:{node:"distort",param:"postgain"},distorttype:{node:"distort",param:"distort"},compressor:{node:"compressor",param:"threshold"},compressorRatio:{node:"compressor",param:"ratio"},compressorKnee:{node:"compressor",param:"knee"},compressorAttack:{node:"compressor",param:"attack"},compressorRelease:{node:"compressor",param:"release"},phaserrate:{node:"phaser_lfo",param:"frequency"},phasersweep:{node:"phaser_lfo",param:"depth"},phasercenter:{node:"phaser",param:"frequency"},phaserdepth:{node:"phaser",param:"Q"},delay:{node:"delay_mix",param:"gain"},delaytime:{node:"delay",param:"delayTime"},delayfeedback:{node:"delay",param:"feedback"},delaysync:{node:"delay",param:"delayTime"},dry:{node:"dry",param:"gain"},room:{node:"room_mix",param:"gain"},djf:{node:"djf",param:"value"},busgain:{node:"bus",param:"gain"},s:{node:"source",param:"frequency"},detune:{node:"source",param:"freqspread"},wt:{node:"source",param:"position"},warp:{node:"source",param:"warp"},freq:{node:"source",param:"frequency"},note:{node:"source",param:"frequency"},wtdc:{node:"wt_lfo",param:"dc"},wtskew:{node:"wt_lfo",param:"skew"},wtrate:{node:"wt_lfo",param:"frequency"},wtsync:{node:"wt_lfo",param:"frequency"},wtdepth:{node:"wt_lfo",param:"depth"},warpdc:{node:"warp_lfo",param:"dc"},warpskew:{node:"warp_lfo",param:"skew"},warprate:{node:"warp_lfo",param:"frequency"},warpsync:{node:"warp_lfo",param:"frequency"},warpdepth:{node:"warp_lfo",param:"depth"},fmi:{node:"fm_1_gain",param:"gain"},fmi2:{node:"fm_2_gain",param:"gain"},fmi3:{node:"fm_3_gain",param:"gain"},fmi4:{node:"fm_4_gain",param:"gain"},fmi5:{node:"fm_5_gain",param:"gain"},fmi6:{node:"fm_6_gain",param:"gain"},fmi7:{node:"fm_7_gain",param:"gain"},fmi8:{node:"fm_8_gain",param:"gain"},fmh:{node:"fm_1",param:"frequency"},fmh2:{node:"fm_2",param:"frequency"},fmh3:{node:"fm_3",param:"frequency"},fmh4:{node:"fm_4",param:"frequency"},fmh5:{node:"fm_5",param:"frequency"},fmh6:{node:"fm_6",param:"frequency"},fmh7:{node:"fm_7",param:"frequency"},fmh8:{node:"fm_8",param:"frequency"},pw:{node:"source",param:"pulsewidth"},pwrate:{node:"pw_lfo",param:"frequency"},pwsweep:{node:"pw_lfo",param:"depth"},vib:{node:"vib",param:"frequency"},vibmod:{node:"vib_gain",param:"gain"},byteBeatStartTime:{node:"source",param:"byteBeatStartTime"},spread:{node:"source",param:"panspread"},transient:{node:"transient",param:"attack"}};function bA(){return gA}const MA=(e,t)=>{if(e?.parameters){const s=e.parameters.get(t);if(s instanceof AudioParam)return s}let n=e?.[t];if(n===void 0&&t==="frequency"&&(n=e?.detune??e?.playbackRate),n instanceof AudioParam)return n},yc=bA(),xA=(e,t)=>{const n=e.split("_")[0];return yc[`${n}_${t}`]??yc[n]},Jo=(e,t)=>e==="frequency"&&t>=30?{min:20-t,max:24e3-t}:{min:void 0,max:void 0},CA=(e,t,n)=>{const s=Ce(),a=new Float32Array(256);for(let o=0;o<a.length;o++){const u=o/(a.length-1)*2-1;a[o]=gn(u*n,t,n)}const r=new WaveShaperNode(s,{curve:a}),i=Ke(1/n);return e.connect(i).connect(r),{modulator:e,toCleanup:[r,i]}},Oo=(e,t,n)=>{const s=xA(e,n);if(!s)return Ca(new Error(`Could not find control data for target '${e}'. It may not be modulatable.`),"superdough"),{targetParams:[],paramName:e};const a=s.param,r=t[s.node]?s.node:e,i=t[r];if(!i){const u=Object.keys(t);return Ca(new Error(`Could not connect to target '${r}' — it does not exist. Available targets: ${u.join(", ")}`),"superdough"),{targetParams:[],paramName:a}}const o=[];return i.forEach(u=>{const c=MA(u,a);o.push(c)}),{targetParams:o,paramName:a}},zM=(e,t,n)=>{const{rate:s=1,sync:a,cps:r,cycle:i,control:o="lfo",subControl:u,fxi:c="main",depth:h=1,depthabs:d,...m}=t,{targetParams:g,paramName:y}=Oo(o,n[c],u);if(!g.length)return;let C=g[0].value;C=C===0?1:C;const{min:X,max:S}=Jo(y,C),L=d??h*C,z={...m,frequency:a!==void 0?a*r:s,time:i/r,depth:L,min:X,max:S},A=Ts(Ce(),z);return n.main[`lfo_${e}`]=[A],g.forEach(Z=>A.connect(Z)),A},WM=(e,t,n)=>{const{control:s,subControl:a,acurve:r,dcurve:i,rcurve:o,depth:u=1,depthabs:c,fxi:h="main",...d}=t,{targetParams:m,paramName:g}=Oo(s,n[h],a);if(!m.length)return;let y=m[0].value;y=y===0?1:y;const{min:C,max:X}=Jo(g,y),S=c??u*y,L=AM(Ce(),{...d,depth:S,min:C,max:X,attackCurve:r,decayCurve:i,releaseCurve:o});return n.main[`env_${e}`]=[L],m.forEach(z=>L.connect(z)),L},NM=(e,t,n)=>{const s=Ce(),{control:a,subControl:r,depth:i=1,depthabs:o,fxi:u="main"}=e,{targetParams:c,paramName:h}=Oo(a,t[u],r);if(!c.length)return{toCleanup:[]};const d=n.getBus(e.bus),m=new ConstantSourceNode(s,{offset:e.dc??0});m.start(e.begin);const g=m.connect(Ke(1));d.connect(g);let y=c[0].value;y=y===0?1:y;const{min:C,max:X}=Jo(h,y),S=o??i*y,L=Ke(Math.sign(S)*Math.abs(S)/.3),z=g.connect(L),A=[];let Z=z;if(C!==void 0&&X!==void 0){const E=CA(z,C,X);Z=E.modulator,A.push(...E.toCleanup)}return mn(s,()=>{c.forEach(E=>Z.connect(E))},0,e.begin),A.push(m,g,L),{modulator:Z,toCleanup:A}},Qo={},oi={},GA=e=>Qo[e];function PA(e,t){var n=1024;if(e<n)return e+" B";var s=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do e/=n,++a;while(e>=n);return e.toFixed(1)+" "+s[a]}function TM(e,t){const{speed:n=1}=e,{transpose:s,url:a,index:r,midi:i,label:o}=ZM(e,t);let u=Math.abs(n)*Math.pow(2,s/12);return{transpose:s,url:a,index:r,midi:i,label:o,playbackRate:u}}const IM=async(e,t,n)=>{let{url:s,label:a,playbackRate:r}=TM(e,t);n&&(s=await n(s));const i=Ce(),o=await cr(s,i,a);return e.unit==="c"&&(r=r*o.duration),{buffer:o,playbackRate:r}},YM=async(e,t,n)=>{let{buffer:s,playbackRate:a}=await IM(e,t,n);e.speed<0&&(s=HM(s));const r=Ce().createBufferSource();r.buffer=s,r.playbackRate.value=a;const{loopBegin:i=0,loopEnd:o=1,begin:u=0,end:c=1}=e,h=r.buffer.duration,d=u*h;e.loop&&(r.loop=!0,r.loopStart=i*h,r.loopEnd=o*h);const m=h/r.playbackRate.value,g=(c-u)*m;return{bufferSource:r,offset:d,bufferDuration:h,playbackDuration:m,sliceDuration:g}},cr=(e,t,n,s=0)=>{const a=n?`sound "${n}:${s}"`:"sample";if(e=e.replace("#","%23"),!oi[e]){ct(`[sampler] load ${a}..`,"load-sample",{url:e});const r=Date.now();oi[e]=fetch(e).then(i=>i.arrayBuffer()).then(async i=>{const o=Date.now()-r,u=PA(i.byteLength);ct(`[sampler] load ${a}... done! loaded ${u} in ${o}ms`,"loaded-sample",{url:e});const c=await t.decodeAudioData(i);return Qo[e]=c,c})}return oi[e]};function HM(e){const t=Ce(),n=t.createBuffer(e.numberOfChannels,e.length,t.sampleRate);for(let s=0;s<e.numberOfChannels;s++)n.copyToChannel(e.getChannelData(s).slice().reverse(),s,s);return n}const vA=e=>Qo[e];function KM(e){if(e.startsWith("bubo:")){const[t,n]=e.split(":");e=`github:Bubobubobubobubo/dough-${n}`}return e}function _M(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let n=e.slice(7);n=n.endsWith("/")?n.slice(0,-1):n;let s=n.split("/"),a=s[0],r=s.length>=2?s[1]:"samples",i=s.length>=3?s[2]:"main",o=s.slice(3);return o.push(t||""),o=o.join("/"),`https://raw.githubusercontent.com/${a}/${r}/${i}/${o}`}const jM=(e,t,n=e._base||"")=>Object.entries(e).forEach(([s,a])=>{if(typeof a=="string"&&(a=[a]),typeof a!="object")throw new Error("wrong sample map format for "+s);n=a._base||n,n=KM(n),n.startsWith("github:")&&(n=_M(n,""));const r=i=>n+i;Array.isArray(a)?a=a.map(r):a=Object.fromEntries(Object.entries(a).map(([i,o])=>[i,(typeof o=="string"?[o]:o).map(r)])),t(s,a)});let UM={};function XA(e,t){UM[e]=t}function wA(e){const t=Object.entries(UM).find(([n])=>e.startsWith(n));if(t)return t[1]}async function ZA(e){const t=wA(e);if(t)return t(e);if(e=KM(e),e.startsWith("github:")&&(e=_M(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[a,r]=e.split("shabda:");e=`https://shabda.ndre.gr/${r}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[a,r]=e.split("shabda/speech");r=r.startsWith("/")?r.substring(1):r;let[i,o]=r.split(":"),u="f",c="en-GB";i&&([c,u]=i.split("/")),e=`https://shabda.ndre.gr/speech/${o}.json?gender=${u}&language=${c}&strudel=1'`}if(typeof fetch!="function")return;const n=FM(e);if(typeof fetch>"u")return;const s=await fetch(e).then(a=>a.json()).catch(a=>{throw console.error(a),new Error(`error loading "${e}"`)});return[s,s._base||n]}const JM=async(e,t=e._base||"",n={})=>{if(typeof e=="string"){const[r,i]=await ZA(e);return JM(r,t||i,n)}const{prebake:s,tag:a}=n;jM(e,(r,i)=>{QM(r,i,{baseUrl:t,prebake:s,tag:a})},t)},gc=[];async function OM(e,t,n,s,a){let{s:r,nudge:i=0,cut:o,loop:u,clip:c=void 0,n:h=0,speed:d=1,duration:m}=t;if(d===0)return;const g=Ce();let[y,C,X,S]=Wt([t.attack,t.decay,t.sustain,t.release]);const{bufferSource:L,sliceDuration:z,offset:A}=await YM(t,s,a);if(!L){ct(`[sampler] could not load "${r}:${h}"`,"error");return}if(g.currentTime>e){ct(`[sampler] loading sound "${r}:${h}" took too long`,"highlight"),De(L);return}const Z=Rs(L.detune,t,e),E=e+i;L.start(E,A);const D=g.createGain(),V=L.connect(D);c==null&&u==null&&t.release==null&&(m=z);let T=e+m;zt(V.gain,y,C,X,S,0,1,e,T,"linear"),ks(L.detune,t,e,T);const K=g.createGain();V.connect(K),bn(L,function(){De(L),Z?.stop(),De(V),De(K),n()});let J=T+S+.01;L.stop(J);const Y=ee=>{L.stop(ee)},Q={node:K,nodes:{source:[L],...Z?.nodes},stop:Y};if(o!==void 0){const ee=gc[o];ee&&(ee.node.gain.setValueAtTime(1,E),ee.node.gain.linearRampToValueAtTime(0,E+.01)),gc[o]=Q}return Q}function FA(e,t,n){nn(e,(s,a,r)=>OM(s,a,r,t),{type:"sample",samples:t,...n})}function QM(e,t,n){e.startsWith("wt_")?qo(e,t,n):FA(e,t,n)}const ws=(e,t)=>e!==void 0&&e!==t,Ii=e=>new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"});class AA{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(t){this.audioContext=t,this.output=Ii(t),this.summingNode=Ii(t),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(t,n=0){return this.djfNode==null&&(this.djfNode=Ft(this.audioContext,"djf-processor",{value:t}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(t,n),this.djfNode}getDelay(t=0,n=.5,s){return n=gn(n,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,t,n),this.delayNode.connect(this.summingNode),this.delayNode.start?.(s)),this.delayNode.delayTime.value!==t&&this.delayNode.delayTime.setValueAtTime(t,s),this.delayNode.feedback.value!==n&&this.delayNode.feedback.setValueAtTime(n,s),this.delayNode}getReverb(t,n,s,a,r,i,o){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(t,n,s,a,r,i,o),this.reverbNode.connect(this.summingNode)),(ws(t,this.reverbNode.duration)||ws(n,this.reverbNode.fade)||ws(s,this.reverbNode.lp)||ws(a,this.reverbNode.dim)||ws(i,this.reverbNode.irspeed)||ws(o,this.reverbNode.irbegin)||this.reverbNode.ir!==r)&&this.reverbNode.generate(t,n,s,a,r,i,o),this.reverbNode}sendReverb(t,n){return Ga(t,this.reverbNode,n)}sendDelay(t,n){return Ga(t,this.delayNode,n)}duck(t,n=0,s=.1,a=1){const r=n,i=Math.max(s,.002),o=this.output.gain;mn(this.audioContext,()=>{const u=this.audioContext.currentTime,c=o.value;o.cancelScheduledValues(u),o.setValueAtTime(c,u);const h=Math.max(t,u),d=gn(1-Math.sqrt(a),.01,c);o.exponentialRampToValueAtTime(d,h+r),o.exponentialRampToValueAtTime(1,h+r+i)},0,t-.01)}connectToOutput(t){t.connect(this.summingNode)}}class SA{channelMerger;destinationGain;constructor(t){this.audioContext=t,this.initializeAudio()}initializeAudio(){const t=this.audioContext,n=t.destination.maxChannelCount;this.audioContext.destination.channelCount=n,this.channelMerger=new ChannelMergerNode(t,{numberOfInputs:t.destination.channelCount}),this.destinationGain=new GainNode(t),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(t.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(t,n=[0,1])=>{const s=new StereoPannerNode(this.audioContext);t.connect(s);const a=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:s.channelCount});s.connect(a),n.forEach((r,i)=>{a.connect(this.channelMerger,i%s.channelCount,r%this.audioContext.destination.channelCount)})}}class qM{audioContext;output;nodes={};buses={};constructor(t){this.audioContext=t,this.output=new SA(t)}reset(){Object.values(this.nodes).forEach(t=>{t.disconnect()}),Object.values(this.buses).forEach(t=>{t.disconnect()}),this.nodes={},this.buses={},this.output.reset()}duck(t,n,s=0,a=.1,r=1){const i=[t].flat(),o=[s].flat(),u=[a].flat(),c=[r].flat();i.forEach((h,d)=>{const m=this.nodes[h];if(m==null){Ca(new Error(`duck target orbit ${h} does not exist`),"superdough");return}const g=o[d]??o[0],y=Math.max(u[d]??u[0],.002),C=c[d]??c[0];m.duck(n,g,y,C)})}getOrbit(t,n){return this.nodes[t]==null&&(this.nodes[t]=new AA(this.audioContext),this.output.connectToDestination(this.nodes[t].output,n)),this.nodes[t]}getBus(t){return this.buses[t]==null&&(this.buses[t]=Ii(this.audioContext)),this.buses[t]}}const Yi=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),Hi=new Set;function $M(){Hi.clear()}async function DA(e,t,n=2048){const s=`${e},${n}`;if(!Hi.has(s)){const a=(await RA(e,t)).getChannelData(0),r=a.length,i=Math.max(1,Math.floor(r/n)),o=new Array(i);for(let u=0;u<i;u++){const c=u*n;o[u]=a.subarray(c,c+n)}return Hi.add(s),{frames:o,frameLen:n,numFrames:i,key:s}}return{frameLen:n,key:s}}function LA(e,t){var n=1024;if(e<n)return e+" B";var s=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do e/=n,++a;while(e>=n);return e.toFixed(1)+" "+s[a]}function EA(e){const t=new DataView(e);let n=12;for(;n+8<=t.byteLength;){const s=String.fromCharCode(t.getUint8(n),t.getUint8(n+1),t.getUint8(n+2),t.getUint8(n+3)),a=t.getUint32(n+4,!0);if(s==="fmt ")return t.getUint32(n+12,!0);n+=8+a+(a&1)}return null}async function kA(e){const t=EA(e)||44100;return await new OfflineAudioContext(1,1,t).decodeAudioData(e)}const ui={},RA=(e,t)=>{if(e=e.replace("#","%23"),!ui[e]){ct(`[wavetable] load table ${t}..`,"load-table",{url:e});const n=Date.now();ui[e]=fetch(e).then(s=>s.arrayBuffer()).then(async s=>{const a=Date.now()-n,r=LA(s.byteLength);return ct(`[wavetable] load table ${t}... done! loaded ${r} in ${a}ms`,"loaded-table",{url:e}),await kA(s)})}return ui[e]};function e2(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,s]=e.split("github:");return s=s.endsWith("/")?s.slice(0,-1):s,s.split("/").length===2&&(s+="/main"),`https://raw.githubusercontent.com/${s}/${t}`}const bc=(e,t,n,s={})=>(t=e._base||t,Object.entries(e).forEach(([a,r])=>{if(a==="_base")return!1;if(typeof r=="string"&&(r=[r]),typeof r!="object")throw new Error("wrong json format for "+a);let i=t;i.startsWith("github:")&&(i=e2(i,"")),r=r.map(o=>i+o).filter(o=>o.toLowerCase().endsWith(".wav")?!0:(ct(`[wavetable] skipping ${o} -- wavetables must be ".wav" format`),!1)),r.length&&qo(a,r,{baseUrl:t,frameLen:n})}));function qo(e,t,n){nn(e,(s,a,r,i)=>t2(s,a,r,t,i,n?.frameLen??2048),{type:"wavetable",tables:t,...n})}const VA=async(e,t,n,s={})=>{if(n!==void 0)return bc(n,e,t);e.startsWith("github:")&&(e=e2(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432");const a=FM(e);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(e).then(r=>r.json()).then(r=>bc(r,a,t,s)).catch(r=>{throw console.error(r),new Error(`error loading "${e}"`)})};async function t2(e,t,n,s,a,r){const{s:i,n:o=0,duration:u,clip:c}=t,h=Ce(),[d,m,g,y]=Wt([t.attack,t.decay,t.sustain,t.release]);let{warpmode:C}=t;typeof C=="string"&&(C=Yi[C.toUpperCase()]??Yi.NONE);const X=_n(t),{url:S,label:L}=ZM(t,s),z=await DA(S,L,r);let A=e+u;c!==void 0&&(A=Math.min(e+c*u,A));const Z=A+y,E=Z+.01,D={begin:e,end:E,frequency:X,freqspread:t.detune,position:t.wt,warp:t.warp,warpMode:C,voices:Math.max(t.unison??1,1),panspread:t.spread,phaserand:t.wtphaserand??t.unison>1?1:0},V=Aa("wavetable",()=>new AudioWorkletNode(h,"wavetable-oscillator-processor",{outputChannelCount:[2]}));if(Object.entries(D).forEach(([rt,Be])=>{const Ge=V.parameters.get(rt),ze=Be!==void 0?Be:Ge.defaultValue;Ge.value=ze}),V.port.postMessage({type:"initialize",payload:z}),h.currentTime>e){ct(`[wavetable] still loading sound "${i}:${o}"`,"highlight");return}const T=[t.wtattack,t.wtdecay,t.wtsustain,t.wtrelease],K=[t.warpattack,t.warpdecay,t.warpsustain,t.warprelease],J=V.parameters,Y=J.get("position"),Q=J.get("warp");let ee=t.wtrate;t.wtsync!=null&&(ee=a*t.wtsync);const ye=Ti(h,Y,e,Z,{offset:t.wt,amount:t.wtenv,defaultAmount:.5,values:T,holdEnd:A,defaultValues:[0,.5,0,.1]},{frequency:ee,depth:t.wtdepth,defaultDepth:.5,shape:t.wtshape,skew:t.wtskew,dcoffset:t.wtdc??0});let ae=t.warprate;t.warpsync!=null&&(ae=ae=a*t.warpsync);const ge=Ti(h,Q,e,Z,{offset:t.warp,amount:t.warpenv,defaultAmount:.5,values:K,holdEnd:A,defaultValues:[0,.5,0,.1]},{frequency:ae,depth:t.warpdepth,defaultDepth:.5,shape:t.warpshape,skew:t.warpskew,dcoffset:t.warpdc??0}),pe=Rs(V.parameters.get("detune"),t,e),He=Pa(V.parameters.get("frequency"),t,e),pt=h.createGain(),ut=V.connect(pt);zt(ut.gain,d,m,g,y,0,.3,e,A,"linear"),ks(V.parameters.get("detune"),t,e,A);const B={node:ut,nodes:{source:[V],wt_lfo:[ye],warp_lfo:[ge],...He?.nodes,...pe?.nodes}},xe=mn(h,()=>{Ho(V),pe?.stop(),He?.stop(),De(ye),De(ge),n()},e,E);return B.stop=rt=>{xe.stop(rt)},B}const $o=128,Ki="System Standard";let eu=$o;function n2(e){eu=parseInt(e)??$o}let tu=!1;function s2(e){tu=e==!0}const an=yA();function nn(e,t,n={}){e=e.toLowerCase().replace(/\s+/g,"_"),an.setKey(e,{onTrigger:t,data:n})}let a2=e=>e;function dn(e){return a2(e)}function BA(e){a2=e}function _i(e){for(const n in e)e[n.toLowerCase()]=e[n];const t=an.get();for(const n in t){const[s,a]=n.split("_");if(!a)continue;const r=e[s];if(r){if(typeof r=="string")t[`${r}_${a}`.toLowerCase()]=t[n];else if(Array.isArray(r))for(const i of r)t[`${i}_${a}`.toLowerCase()]=t[n]}}an.set({...t})}async function zA(e){const t=await(await fetch(e)).json();_i(t)}async function WA(...e){switch(e.length){case 1:return typeof e[0]=="string"?zA(e[0]):_i(e[0]);case 2:return _i({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function NA(e,t){if(as(e)==null){ct("soundAlias: original sound not found");return}an.setKey(t,as(e))}function as(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),an.get().triangle):an.get()[e.toLowerCase()]}const r2=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const t=new Map;return t.set(Ki,""),e.forEach(n=>{t.set(n.label,n.deviceId)}),t};let Sa={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,busgain:1,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8,tremolodepth:1,tremolophase:0,release:.01};const TA=Object.freeze({...Sa});function IA(e,t){Sa[e]=t}function YA(){Sa={...TA}}let nu=new Map(Object.entries(Sa));function su(e,t){nu.set(e,t)}function at(e){return nu.get(e)}function HA(e){Object.keys(e).forEach(t=>{su(t,e[t])})}function i2(){nu=new Map(Object.entries(Sa))}function KA(e){i2(),e==="1.0"&&su("fanchor",.5)}const _A=()=>an.set({});let o2=[];function u2(e){o2.push(e)}let ja;function c2(){if(!ja){const e=Ce(),t=o2.concat([mA]);ja=Promise.all(t.map(n=>e.audioWorklet.addModule(n))).then(()=>ja=void 0)}return ja}async function au(e={}){const{disableWorklets:t=!1,maxPolyphony:n,audioDeviceName:s=Ki,multiChannelOrbits:a=!1}=e;if(n2(n),s2(a),$M(),typeof window>"u")return;const r=Ce();if(s!=null&&s!=Ki)try{const i=(await r2()).get(s),o=(i??"").length>0;r.sinkId!==i&&o&&await r.setSinkId(i),ct(`[superdough] Audio Device set to ${s}, it might take a few seconds before audio plays on all output channels`)}catch{ct("[superdough] failed to set audio interface","warning")}if(!r instanceof OfflineAudioContext&&await r.resume(),t){ct("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await c2(),ct("[superdough] AudioWorklets loaded")}catch(i){console.warn("could not load AudioWorklet effects",i)}ct("[superdough] ready")}let ci;async function l2(e){return ci||(ci=new Promise(t=>{document.addEventListener("mousedown",async function n(){document.removeEventListener("mousedown",n),await au(e),t()})})),ci}let is;function Zr(){return is==null&&(is=new qM(Ce())),is}function ji(e){return is=e,is}function p2(e,t){Zr().output.connectToDestination(e,t)}function jA(e,t,n=1,s=.5,a=1e3,r=2e3){const i=Ce(),o=Ts(i,{frequency:n,depth:r*2,begin:e,end:t}),u=1;let c=282;const h=[];for(let d=0;d<u;d++){const m=Aa("filter",()=>i.createBiquadFilter());m.type="notch",m.gain.value=1,m.frequency.value=a+c,m.Q.value=2-Math.min(Math.max(s*2,0),1.9),o.connect(m.detune),c+=282,h.push(m)}return{filterChain:h,lfo:o}}function UA(e){e=e??0;const t=["12db","ladder","24db"];return typeof e=="number"?t[Math.floor(wM(e,t.length))]:e}let Gt={},os={};function h2(e,t=1024,n=.5){if(!Gt[e]||Gt[e].context!=Ce()){const s=Ce().createAnalyser();s.fftSize=t,s.smoothingTimeConstant=n,Gt[e]=s,os[e]=new Float32Array(Gt[e].frequencyBinCount)}return Gt[e].fftSize!==t&&(Gt[e].fftSize=t,os[e]=new Float32Array(Gt[e].frequencyBinCount)),Gt[e]}function Fr(e="time",t=1){const n={time:()=>Gt[t]?.getFloatTimeDomainData(os[t]),frequency:()=>Gt[t]?.getFloatFrequencyData(os[t])}[e];if(!n)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),os[t]}function d2(){is?.reset(),Gt={},os={}}let na=new Map;function Mc(e){return(Array.isArray(e)?e:[e]).map(t=>t-1)}class JA{constructor(){this.audioNodes=[],this.tails=[]}connect(...t){return t.forEach(n=>{this.tails.forEach(s=>{s.connect(n)})}),this.tails=t,this.audioNodes.push(...t),this}connectOne(t,n){return this.tails[t].connect(n),this.tails[t]=n,this.audioNodes.push(n),this}releaseNodes(){this.audioNodes.forEach(t=>YF(t)?Ho(t):De(t)),this.audioNodes=[],this.tails=[]}}const Ar=async(e,t,n,s=.5,a=.5)=>{const r={main:{}},i=Ce(),o=Zr();let{stretch:u}=e;if(u!=null&&(t=t-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=n,t<i.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${t.toFixed(2)}, now: ${i.currentTime.toFixed(2)})`);return}let{s:c=at("s"),bank:h,source:d,postgain:m=at("postgain"),duckorbit:g,duckonset:y,duckattack:C,duckdepth:X,djf:S,release:L=at("release"),dry:z,delay:A=at("delay"),delayfeedback:Z=at("delayfeedback"),delaysync:E=at("delaysync"),delaytime:D,orbit:V=at("orbit"),bus:T,busgain:K=at("busgain"),room:J,roomfade:Y,roomlp:Q,roomdim:ee,roomsize:ye,ir:ae,irspeed:ge,irbegin:pe,i:He=at("i"),analyze:pt,fft:ut=at("fft"),FX:B=[],FXrelease:xe}=e;D=D??hc(E,s);const rt=Mc(tu&&V>0?[V*2-1,V*2]:at("channels")),Be=e.channels!=null?Mc(e.channels):rt,Ge=o.getOrbit(V,Be);g!=null&&o.duck(g,t,y,C,X),m=dn(m),A=dn(A),K=dn(K);const ze=t+n,Se=Math.max(L,xe??0),Re=ze+Se,wt=Math.round(Math.random()*1e6);for(let oe=0;oe<=na.size-eu;oe++){const O=na.entries().next(),$e=O.value[1].deref(),he=O.value[0],Ne=t+.25;$e?.node?.gain?.linearRampToValueAtTime(0,Ne),$e?.stop?.(Ne),na.delete(he)}if(["-","~","_"].includes(c))return;h&&c&&(c=`${h}_${c}`,e.s=c);const ce=new JA;let We;if(d)We=d(t,e,n,s),r.main.source=[We];else if(as(c)){const{onTrigger:oe}=as(c),O=await oe(t,e,()=>mn(i,()=>{ce.releaseNodes(),na.delete(wt)},0,Re),s);O&&(We=O.node,na.set(wt,new WeakRef(O)),r.main={...r.main,...O.nodes})}else throw new Error(`sound ${c} not found! Is it loaded?`);if(!We)return;if(i.currentTime>t){ct("[webaudio] skip hap: still loading",i.currentTime-t);return}ce.connect(We),B=[...B,e];for(let[oe,O]of Object.entries(B)){const $e=oe==B.length-1?"main":oe;r[$e]??={};const he=r[$e];let{gain:Ne=at("gain"),velocity:bt=at("velocity"),shapevol:pn=at("shapevol"),distorttype:Wn=at("distorttype"),distortvol:hn=at("distortvol"),tremolodepth:Zt=at("tremolodepth"),phaserdepth:wn=at("phaserdepth"),delay:Ze=at("delay"),delayfeedback:je=at("delayfeedback"),delaysync:de=at("delaysync"),delaytime:Je,i:Oe=at("i")}=O;if(Ne=dn(En(Ne,1)),pn=dn(pn),hn=dn(hn),bt=dn(bt),Zt=dn(Zt),Ne*=bt,Je=Je??hc(de,s),O.workletSrc!==void 0){const se=Ft(i,"generic-processor",{},{outputChannelCount:[2]});ce.connect(se);const be=O.workletSrc.replace(/\bpat\[(\d+)\]/g,(dt,Rt)=>O.workletInputs[Rt]).replaceAll("sFreq",_n(e)).replaceAll("sGate",`cc('strudel-gate-${wt}')`),{src:Ye,ugens:st,registers:we}=compileKabel(be);se.port.postMessage({src:Ye,schema:{ugens:st,registers:we},start:t,gateEnd:ze,end:Re})}if(O.stretch!==void 0){const se=Ft(i,"phase-vocoder-processor",{pitchFactor:O.stretch});ce.connect(se),he.stretch=[se]}if(O.transient!==void 0){const se=Ft(i,"transient-processor",{},{processorOptions:{attack:O.transient,sustain:O.transsustain,begin:t,end:Re}});ce.connect(se),he.transient=se}const ts=Ke(Ne);he.gain=[ts],ce.connect(ts);const ns=UA(e.ftype),ht=se=>DM(i,t,ze,se,s,a);if(O.cutoff!==void 0){const se=ii(O,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});se.type="lowpass";const{filter:be,lfo:Ye}=ht(se);if(he.lpf=[be],he.lpf_lfo=[Ye],ce.connect(be),Ye&&ce.audioNodes.push(Ye),ns==="24db"){const{filter:st,lfo:we}=ht(se);he.lpf.push(st),he.lpf_lfo.push(we),ce.connect(st),we&&ce.audioNodes.push(we)}}if(O.hcutoff!==void 0){const se=ii(O,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});se.type="highpass";const{filter:be,lfo:Ye}=ht(se);if(he.hpf=[be],he.hpf_lfo=[Ye],Ye&&ce.audioNodes.push(Ye),ce.connect(be),ns==="24db"){const{filter:st,lfo:we}=ht(se);he.hpf.push(st),he.hpf_lfo.push(we),ce.connect(st),we&&ce.audioNodes.push(we)}}if(O.bandf!==void 0){const se=ii(O,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});se.type="bandpass";const{filter:be,lfo:Ye}=ht(se);if(he.bpf=[be],he.bpf_lfo=[Ye],ce.connect(be),Ye&&ce.audioNodes.push(Ye),ns==="24db"){const{filter:st,lfo:we}=ht(se);he.bpf.push(st),he.bpf_lfo.push(we),ce.connect(st),we&&ce.audioNodes.push(we)}}if(O.vowel!==void 0){const se=i.createVowelFilter(O.vowel);he.vowel=se.filters,ce.connect(se)}if(O.coarse!==void 0){const se=Ft(i,"coarse-processor",{coarse:O.coarse});he.coarse=[se],ce.connect(se)}if(O.crush!==void 0){const se=Ft(i,"crush-processor",{crush:O.crush});he.crush=[se],ce.connect(se)}if(O.shape!==void 0){const se=Ft(i,"shape-processor",{shape:O.shape,postgain:pn});he.shape=[se],ce.connect(se)}if(O.distort!==void 0){const se=VM(O.distort,hn,Wn);he.distort=[se],ce.connect(se)}let Nn=O.tremolo;if(O.tremolosync!=null&&(Nn=s*O.tremolosync),Nn!==void 0){const se=Math.max(1-Zt,0),be=new GainNode(i,{gain:se}),Ye=a/s,st=Ts(i,{skew:O.tremoloskew??(O.tremoloshape!=null?.5:1),frequency:Nn,depth:Zt,time:Ye,dcoffset:0,shape:O.tremoloshape,phaseoffset:O.tremolophase,min:0,max:1,curve:1.5,begin:t,end:Re});he.tremolo=[st],he.tremolo_gain=[be],st.connect(be.gain),ce.audioNodes.push(st),ce.connect(be)}if(O.compressor!==void 0){const se=SM(i,O.compressor,O.compressorRatio,O.compressorKnee,O.compressorAttack,O.compressorRelease);he.compressor=[se],ce.connect(se)}if(O.pan!==void 0){const se=i.createStereoPanner();he.pan=[se],se.pan.value=2*O.pan-1,ce.connect(se)}if(O.phaserrate!==void 0&&wn>0){const{filterChain:se,lfo:be}=jA(t,Re,O.phaserrate,wn,O.phasercenter,O.phasersweep);he.phaser=[...se],he.phaser_lfo=[be],se.forEach(Ye=>ce.connect(Ye)),ce.audioNodes.push(be)}if($e!=="main"&&Ze>0&&Je>0&&je>0){const se=Ke(1);je=gn(je,0,.98);const be=i.createFeedbackDelay(1,Je,je),Ye=Ke(Ze),st=Ke(O.dry??1),we=new GainNode(i,{gain:1,channelCount:2,channelCountMode:"explicit"});ce.connect(se).connect(st,be).connectOne(1,Ye).connect(we),ce.audioNodes.push(be.feedbackGain,be.delayGain),he.delay=[be],he.delay_mix=[Ye]}if($e!=="main"&&O.room>0){let se;if(O.ir!==void 0){let Rt,Vt=as(O.ir);Array.isArray(Vt)?Rt=Vt.data.samples[O.i%Vt.data.samples.length]:typeof Vt=="object"&&(Rt=Object.values(Vt.data.samples).flat()[Oe%Object.values(Vt.data.samples).length]),se=await cr(Rt,i,O.ir,0)}const be=Ke(1),Ye=i.createReverb(O.roomsize,O.roomfade,O.roomlp,O.roomdim,se,O.irspeed,O.irbegin),st=Ke(O.room),we=Ke(O.dry??1),dt=new GainNode(i,{gain:1,channelCount:2,channelCountMode:"explicit"});ce.connect(be).connect(we,Ye).connectOne(1,st).connect(dt),he.room=[Ye],he.room_mix=[st]}}if(xe!==void 0&&xe>L){const oe=Ke(1);oe.gain.setValueAtTime(1,ze+L),oe.gain.linearRampToValueAtTime(0,Re),ce.connect(oe)}const Ct=new GainNode(i,{gain:m});if(r.main.post=[Ct],ce.connect(Ct),A>0&&D>0&&Z>0){const oe=Ge.getDelay(D,Z,t);r.main.delay=[oe];const O=Ge.sendDelay(Ct,A);r.main.delay_mix=[O],ce.audioNodes.push(O)}if(J>0){let oe;if(ae!==void 0){let he,Ne=as(ae);Array.isArray(Ne)?he=Ne.data.samples[He%Ne.data.samples.length]:typeof Ne=="object"&&(he=Object.values(Ne.data.samples).flat()[He%Object.values(Ne.data.samples).length]),oe=await cr(he,i,ae,0)}const O=Ge.getReverb(ye,Y,Q,ee,oe,ge,pe);r.main.room=[O];const $e=Ge.sendReverb(Ct,J);r.main.room_mix=[$e],ce.audioNodes.push($e)}if(T!=null){const oe=o.getBus(T),O=Ga(Ct,oe,K);ce.audioNodes.push(O)}if(S!=null){const oe=Ge.getDjf(S,t);r.main.djf=[oe]}if(pt&&!(i instanceof OfflineAudioContext)){const oe=h2(pt,2**(ut+5)),O=Ga(Ct,oe,1);ce.audioNodes.push(O)}if(z!=null){z=dn(z);const oe=new GainNode(i,{gain:z});ce.connect(oe),Ge.connectToOutput(oe)}else Ge.connectToOutput(Ct);B.forEach((oe,O)=>{const $e=O===B.length-1?"main":O;if(oe.lfo)for(const he of oe.lfo.__ids){const Ne=oe.lfo[he];Ne.fxi??=$e;const bt=zM(he,{...Ne,cps:s,cycle:a,begin:t,end:Re},r);bt&&ce.audioNodes.push(bt)}if(oe.env)for(const he of oe.env.__ids){const Ne=oe.env[he];Ne.fxi??=$e;const bt=WM(he,{...Ne,begin:t,end:Re},r);bt&&ce.audioNodes.push(bt)}if(oe.bmod)for(const he of oe.bmod.__ids){const Ne=oe.bmod[he];Ne.fxi??=$e;const{toCleanup:bt}=NM({...Ne,begin:t},r,is);ce.audioNodes.push(...bt)}})},OA=(e,t,n,s)=>{Ar(t,e-n,t.duration/s,s)},QA=["triangle","square","sawtooth","sine","user","one"],qA=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function $A(e,t){const n=e,s=new Float32Array(t);for(let a=0;a<t;a++){const r=a*2/t-1;s[a]=Math.tanh(r*n)}return s}function m2(){[...QA].forEach(e=>{nn(e,(t,n,s)=>{const[a,r,i,o]=Wt([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]),u=Ke(.3),c=y2(e,t,n,()=>{De(u),s()}),{node:h,nodes:d,stop:m,triggerRelease:g}=c,{duration:y}=n,C=Ke(1),X=h.connect(u).connect(C),S=t+y;zt(X.gain,a,r,i,o,0,1,t,S,"linear");const L=S+o+.01;return g?.(L),m(L),{node:X,nodes:d,stop:z=>{m(z)}}},{type:"synth",prebake:!0})}),nn("sbd",(e,t,n)=>{const{duration:s,decay:a=.5,pdecay:r=.5,penv:i=36,clip:o}=t,u=Ce(),c=.02,h=1.2,d=.025,m=1,g=u.createOscillator();g.type="triangle",g.frequency.value=_n(t,29),g.detune.setValueAtTime(i*100,0),g.detune.setValueAtTime(i*100,e),g.detune.exponentialRampToValueAtTime(.001,e+r);const y=Ke(1);y.gain.setValueAtTime(1,e+c),y.gain.exponentialRampToValueAtTime(.001,e+c+a),g.start(e);const C=Wi("brown",e,2),X=Ke(1);X.gain.setValueAtTime(h,e),X.gain.exponentialRampToValueAtTime(.001,e+d);const S=new WaveShaperNode(u);S.curve=$A(2,u.sampleRate);const L=Ke(m);bn(g,()=>{De(g),De(y),De(S),De(C.node),De(X),De(L),n()});const z=g.connect(S).connect(y).connect(L);C.node.connect(X).connect(L);let A=e+a+.01;return o!=null&&(A=Math.min(e+o*s,A)),L.gain.setValueAtTime(m,A-.01),L.gain.linearRampToValueAtTime(0,A),g.stop(A),C.stop(A),{node:z,nodes:{source:[g]},stop:Z=>{g.stop(Z)}}},{type:"synth",prebake:!0}),nn("supersaw",(e,t,n)=>{const s=Ce();let{duration:a,n:r,unison:i=5,spread:o=.6,detune:u}=t;u=u??r??.18;const c=_n(t),[h,d,m,g]=Wt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),y=e+a,C=y+g+.01,X=gn(i,1,100);let S=X>1?gn(o,0,1):0;const L={frequency:c,begin:e,end:C,freqspread:u,voices:X,panspread:S},z=Aa("supersaw",()=>new AudioWorkletNode(s,"supersaw-oscillator",{outputChannelCount:[2]}));Object.entries(L).forEach(([T,K])=>{const J=z.parameters.get(T),Y=K!==void 0?K:J.defaultValue;J.value=Y}),z.port.postMessage({type:"initialize"});const A=1/Math.sqrt(X);ks(z.parameters.get("detune"),t,e,y);const Z=Rs(z.parameters.get("detune"),t,e),E=Pa(z.parameters.get("frequency"),t,e);let D=Ke(1);D=z.connect(D),zt(D.gain,h,d,m,g,0,.3*A,e,y,"linear");let V=mn(s,()=>{Ho(z),n(),E?.stop(),Z?.stop()},e,C);return{node:D,nodes:{source:[z],...E?.nodes,...Z?.nodes},stop:T=>{V.stop(T)}}},{prebake:!0,type:"synth"}),nn("bytebeat",(e,t,n)=>{const s=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:a=0}=t,r=_n(t),{byteBeatExpression:i=s[a%s.length],byteBeatStartTime:o}=t,u=Ce();let{duration:c}=t;const[h,d,m,g]=Wt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),y=e+c,C=y+g+.01;let X=Ft(u,"byte-beat-processor",{frequency:r,begin:e,end:C},{outputChannelCount:[2]});X.port.postMessage({codeText:i,byteBeatStartTime:o,frequency:r});let S=Ke(1);S=X.connect(S),zt(S.gain,h,d,m,g,0,1,e,y,"linear");let L=mn(u,()=>{De(X),n()},e,C);return{node:S,source:X,stop:z=>{L.stop(z)}}},{prebake:!0,type:"synth"}),nn("pulse",(e,t,n)=>{const s=Ce();let{pwrate:a,pwsweep:r}=t;r==null&&(a!=null?r=.3:r=0),a==null&&r!=null&&(a=1);let{duration:i,pw:o=.5}=t;const u=_n(t),[c,h,d,m]=Wt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),g=e+i,y=g+m+.01;let C=Ft(s,"pulse-oscillator",{frequency:u,begin:e,end:y,pulsewidth:o},{outputChannelCount:[2]});ks(C.parameters.get("detune"),t,e,g);const X=Rs(C.parameters.get("detune"),t,e),S=Pa(C.parameters.get("frequency"),t,e);let L=Ke(1);L=C.connect(L),zt(L.gain,c,h,d,m,0,1,e,g,"linear");let z;r!=0&&(z=Ts(s,{frequency:a,depth:r,begin:e,end:y}),z.connect(C.parameters.get("pulsewidth")));let A=mn(s,()=>{De(C),De(z),n(),S?.stop(),X?.stop()},e,y);return{node:L,nodes:{source:[C],pw_lfo:[z],...S?.nodes,...X?.nodes},stop:Z=>{A.stop(Z)}}},{prebake:!0,type:"synth"}),nn("bus",(e,t,n)=>{const s=Ce(),[a,r,i,o]=Wt([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,1,.01]),u=e+t.duration,c=u+o+.01,h=Zr().getBus(t.n??0),d=h.connect(Ke(0));zt(d.gain,a,r,i,o,0,1,e,u,"linear");const m=mn(s,()=>{h.disconnect(d),n()},e,c);return{node:d,nodes:{source:[h]},stop:g=>{m.stop(g)}}},{prebake:!0,type:"input"}),[...Ko].forEach(e=>{nn(e,(t,n,s)=>{const[a,r,i,o]=Wt([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u,{density:c}=n;u=Wi(e,t,c);let{node:h,stop:d,triggerRelease:m}=u;const g=Ke(.3),{duration:y}=n;bn(h,()=>{De(h),De(g),s()});const C=Ke(1);let X=h.connect(g).connect(C);const S=t+y;zt(X.gain,a,r,i,o,0,1,t,S,"linear");const L=S+o+.01;return m?.(L),d(L),{node:X,nodes:{source:[h]},stop:z=>{d(z)}}},{type:"synth",prebake:!0})}),qA.forEach(([e,t])=>an.set({...an.get(),[e]:an.get()[t]}))}const xc=2*Math.PI;function f2(e,t,n){e=typeof e=="object"?e:new Float32Array(e).fill(1);const s=e.length,a=new Float32Array(s+1),r=new Float32Array(s+1),i=Ce(),o=i.createOscillator(),u={sawtooth:h=>[0,-1/h],square:h=>[0,h%2===0?0:1/h],triangle:h=>[h%2===0?0:1/(h*h),0],user:h=>[0,1]};if(!u[n])throw new Error(`unknown wave type ${n}`);for(let h=0;h<s;h++){const d=e[h],[m,g]=u[n](h+1),y=t?.[h]??0;let C=m*d,X=g*d;if(y!==0){const S=Math.cos(xc*y),L=Math.sin(xc*y);C=S*C-L*X,X=L*C+S*X}a[h+1]=C,r[h+1]=X}const c=i.createPeriodicWave(a,r);return o.setPeriodicWave(c),o}function y2(e,t,n,s){const{duration:a,noise:r=0}=n,i=n.partials??n.n;let o;if(e==="user"&&!i&&(ct("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),e="triangle"),e=e==="user"&&!i?"triangle":e,e==="one")return o=new ConstantSourceNode(Ce(),{offset:1}),o.start(t),{node:o,nodes:{source:o},stop:d=>o?.stop(d)};!i||i?.length===0||e==="sine"?(o=Ce().createOscillator(),o.type=e||"triangle"):o=f2(i,n.phases,e),o.frequency.value=_n(n);const u=Rs(o.detune,n,t);ks(o.detune,n,t,t+a);const c=Pa(o.frequency,n,t);let h;return r&&(h=IF(o,r,t)),bn(o,()=>{h?.teardown(),De(o),De(h?.node),s()}),o.start(t),{node:h?.node||o,nodes:{source:[o],...u?.nodes,...c?.nodes},stop:d=>{c.stop(d),u?.stop(d),h?.stop(d),o.stop(d)},triggerRelease:d=>{}}}function eS(e=1,t=.05,n=220,s=0,a=0,r=.1,i=0,o=1,u=0,c=0,h=0,d=0,m=0,g=0,y=0,C=0,X=0,S=1,L=0,z=0){let A=Math.PI*2,Z=Ce().sampleRate,E=He=>He>0?1:-1,D=u*=500*A/Z/Z,V=n*=(1+t*2*Math.random()-t)*A/Z,T=[],K=0,J=0,Y=0,Q=1,ee=0,ye=0,ae=0,ge,pe;for(s=s*Z+9,L*=Z,a*=Z,r*=Z,X*=Z,c*=500*A/Z**3,y*=A/Z,h*=A/Z,d*=Z,m=m*Z|0,pe=s+L+a+r+X|0;Y<pe;T[Y++]=ae)++ye%(C*100|0)||(ae=i?i>1?i>2?i>3?Math.sin((K%A)**3):Math.max(Math.min(Math.tan(K),1),-1):1-(2*K/A%2+2)%2:1-4*Math.abs(Math.round(K/A)-K/A):Math.sin(K),ae=(m?1-z+z*Math.sin(A*Y/m):1)*E(ae)*Math.abs(ae)**o*e*1*(Y<s?Y/s:Y<s+L?1-(Y-s)/L*(1-S):Y<s+L+a?S:Y<pe-X?(pe-Y-X)/r*S:0),ae=X?ae/2+(X>Y?0:(Y<pe-X?1:(pe-Y)/X)*T[Y-X|0]/2):ae),ge=(n+=u+=c)*Math.cos(y*J++),K+=ge-ge*g*(1-(Math.sin(Y)+1)*1e9%2),Q&&++Q>d&&(n+=h,V+=h,Q=0),m&&!(++ee%m)&&(n=V,u=D,Q||=1);return T}const g2=(e,t)=>{let{s:n,note:s=36,freq:a,zrand:r=0,attack:i=0,decay:o=0,sustain:u=.8,release:c=.1,curve:h=1,slide:d=0,deltaSlide:m=0,pitchJump:g=0,pitchJumpTime:y=0,lfo:C=0,znoise:X=0,zmod:S=0,zcrush:L=0,zdelay:z=0,tremolo:A=0,duration:Z=.2,zzfx:E}=e;const D=Math.max(Z-i-o,0);typeof s=="string"&&(s=wr(s)),!a&&typeof s=="number"&&(a=XM(s)),n=n.replace("z_","");const V=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;h=n==="square"?0:h;const T=eS(...E||[.25,r,a,i,D,c,V,h,d,m,g,y,C,X,S,L,z,u,o,A]),K=Ce(),J=K.createBuffer(1,T.length,K.sampleRate);J.getChannelData(0).set(T);const Y=Ce().createBufferSource();return Y.buffer=J,Y.start(t),{node:Y}};function tS(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{nn(e,(t,n,s)=>{const{node:a}=g2({s:e,...n},t);return bn(a,()=>{De(a),s()}),{node:a,nodes:{source:[a]},stop:()=>{}}},{type:"synth",prebake:!0})})}let As;async function b2(e,t){const n=`dsp-worklet-${Date.now()}`,s=`${t}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,a=`data:text/javascript;base64,${btoa(s)}`;await e.audioWorklet.addModule(a);const r=new AudioWorkletNode(e,n);return{node:r,stop:()=>r.port.postMessage("stop")}}const M2=()=>{As&&(As?.stop(),As?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{e.data==="strudel-stop"?M2():e.data?.dough&&As?.node.port.postMessage(e.data)});const nS=async e=>{const t=Ce();M2(),As=await b2(t,e),As.node.connect(t.destination)};function x2(e,t,n,s){window.postMessage({time:s,dough:e.value,currentTime:t,duration:e.duration,cps:n})}let la;function sS(){const e=Ce();la=Ft(e,"dough-processor",{},{outputChannelCount:[2]}),p2(la)}const er=new Map,Cc=new Map;H.prototype.supradough=function(){return this.onTrigger((e,t,n,s)=>{e.value._begin=s,e.value._duration=e.duration/n,!la&&sS();const a=(e.value.bank?e.value.bank+"_":"")+e.value.s,r=e.value.n??0,i=`${a}:${r}`;if(er.has(a)&&(e.value.s=i),er.has(a)&&!Cc.has(i)){const o=er.get(a),u=o[r%o.length];console.log(`load ${i} from ${u}`);const c=iS(u);Cc.set(i,c),c.then(({channels:h,sampleRate:d})=>la.port.postMessage({sample:i,channels:h,sampleRate:d}))}la.port.postMessage({spawn:e.value})},1)};function aS(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,s]=e.split("github:");return s=s.endsWith("/")?s.slice(0,-1):s,s.split("/").length===2&&(s+="/main"),`https://raw.githubusercontent.com/${s}/${t}`}async function rS(e){if(e.startsWith("github:")&&(e=aS(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[s,a]=e.split("shabda:");e=`https://shabda.ndre.gr/${a}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[s,a]=e.split("shabda/speech");a=a.startsWith("/")?a.substring(1):a;let[r,i]=a.split(":"),o="f",u="en-GB";r&&([u,o]=r.split("/")),e=`https://shabda.ndre.gr/speech/${i}.json?gender=${o}&language=${u}&strudel=1'`}if(typeof fetch!="function")return;const t=e.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const n=await fetch(e).then(s=>s.json()).catch(s=>{throw console.error(s),new Error(`error loading "${e}"`)});return[n,n._base||t]}async function iS(e){const t=await fetch(e).then(s=>s.arrayBuffer()).then(s=>Ce().decodeAudioData(s));let n=[];for(let s=0;s<t.numberOfChannels;s++)n.push(t.getChannelData(s));return{channels:n,sampleRate:t.sampleRate}}async function C2(e,t){if(typeof e=="string"){const[n,s]=await rS(e);return C2(n,s)}Object.entries(e).map(async([n,s])=>{n!=="_base"&&(s=s.map(a=>t+a),er.set(n,s))})}const oS="data:text/javascript;base64,dmFyIGh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHUsbSxmKT0+bSBpbiB1P2h0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5udCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2NvbnN0IE89KGgscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaCxzKSx0KTtmdW5jdGlvbiBfKGgpe3JldHVybiBWKGgpfWZ1bmN0aW9uIFQoaCxzLHQpe2NvbnN0IGk9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksbj1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBoKmkrcypufWNsYXNzIGd7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy91KSUxLHR9fWNsYXNzIEl7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiBNKGgscyl7cmV0dXJuIGg8cz8oaC89cyxoK2gtaCpoLTEpOmg+MS1zPyhoPShoLTEpL3MsaCpoK2graCsxKTowfWNsYXNzIFN7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvdTtsZXQgaT1NKHRoaXMucGhhc2UsdCksbj0yKnRoaXMucGhhc2UtMS1pO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLG59fWZ1bmN0aW9uIHooaCxzLHQpe3JldHVybiBoPDI/MDooKG4sbCxyKT0+cioobC1uKStuKSgtcyouNSxzKi41LHQvKGgtMSkpfWZ1bmN0aW9uIEYoaCxzKXtyZXR1cm4gaCpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEx7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksaT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBuPTAsbD0wO2ZvcihsZXQgcj0wO3I8dGhpcy52b2ljZXM7cisrKXtjb25zdCBhPUYocyx6KHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxyKSkvdSxjPShyJjEpPT0xO2xldCBkPXQ7YyYmKGQ9aSk7bGV0IGI9TSh0aGlzLnBoYXNlW3JdLGEpLEU9Mip0aGlzLnBoYXNlW3JdLTEtYjtuPW4rRSpkLGw9bCtFKmQsdGhpcy5waGFzZVtyXSs9YSx0aGlzLnBoYXNlW3JdPjEmJih0aGlzLnBoYXNlW3JdLT0xKX1yZXR1cm4gbitsfX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgcXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiczAiLDApO2UodGhpcywiczEiLDApfXVwZGF0ZShzLHQsaT0wKXtpPU1hdGgubWF4KGksMCksdD1NYXRoLm1pbih0LDJlNCk7bGV0IG49MipNYXRoLnNpbih0Km0pO249TyhuLDAsMS4xNCk7Y29uc3Qgcj0xLU1hdGgucG93KC41LChpKy4xMjUpLy4xMjUpKm47cmV0dXJuIHRoaXMuczA9cip0aGlzLnMwLW4qdGhpcy5zMStuKnMsdGhpcy5zMT1yKnRoaXMuczErbip0aGlzLnMwLHRoaXMuczF9fWNsYXNzIEN7Y29uc3RydWN0b3Iocz0wKXt0aGlzLnBoYXNlPXN9c2F3KHMsdCl7bGV0IGk9KHRoaXMucGhhc2UrcyklMSxuPU0oaSx0KTtyZXR1cm4gMippLTEtbn11cGRhdGUocyx0PS41KXtjb25zdCBpPXMvdTtsZXQgbj10aGlzLnNhdygwLGkpLXRoaXMuc2F3KHQsaSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2UraSklMSxuK3QqMi0xfX1jbGFzcyBOe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMsdD0uNSl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTE8dD8xOi0xfX1jbGFzcyBQe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ1cGRhdGUiLHM9Pk1hdGgucmFuZG9tKCk8cypmP01hdGgucmFuZG9tKCk6MCl9fWNsYXNzIEd7dXBkYXRlKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMi0xfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy5vdXQ9MH11cGRhdGUoKXtsZXQgcz1NYXRoLnJhbmRvbSgpKjItMTtyZXR1cm4gdGhpcy5vdXQ9KHRoaXMub3V0Ky4wMipzKS8xLjAyLHRoaXMub3V0fX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHM9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCtzKi4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErcyouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMitzKi4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3MqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCtzKi41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtcyouMDE2ODk4O2NvbnN0IHQ9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNitzKi41MzYyO3JldHVybiB0aGlzLmI2PXMqLjExNTkyNix0Ki4xMX19Y2xhc3MgJHtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDEpfXVwZGF0ZShzKXt0aGlzLnBoYXNlKz1mKnM7bGV0IHQ9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHR9fWZ1bmN0aW9uIHgoaCxzLHQsaT0xKXtpZihoPD0wKXJldHVybiBzO2lmKGg+PTEpcmV0dXJuIHQ7bGV0IG47cmV0dXJuIGk9PT0wP249aDppPjA/bj1NYXRoLnBvdyhoLGkpOm49MS1NYXRoLnBvdygxLWgsLWkpLHMrKHQtcykqbn1jbGFzcyB2e2NvbnN0cnVjdG9yKHM9e30pe3RoaXMuc3RhdGU9Im9mZiIsdGhpcy5zdGFydFRpbWU9MCx0aGlzLnN0YXJ0VmFsPTAsdGhpcy5kZWNheUN1cnZlPXMuZGVjYXlDdXJ2ZT8/MX11cGRhdGUocyx0LGksbixsLHIpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lO3JldHVybiBwPmk/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1zLDEpOngocC9pLHRoaXMuc3RhcnRWYWwsMSwxKX1jYXNlImRlY2F5Ijp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZSxhPXgocC9uLDEsbCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEsYSk6cD5uPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1zLGwpOmF9Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1sKSxsO2Nhc2UicmVsZWFzZSI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7aWYocD5yKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IGE9eChwL3IsdGhpcy5zdGFydFZhbCwwLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hKSxhfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn19Y29uc3QgVz0xMDtjbGFzcyBSe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ3cml0ZUlkeCIsMCk7ZSh0aGlzLCJyZWFkSWR4IiwwKTtlKHRoaXMsImJ1ZmZlciIsbmV3IEZsb2F0MzJBcnJheShXKnUpKX13cml0ZShzLHQpe3RoaXMud3JpdGVJZHg9KHRoaXMud3JpdGVJZHgrMSkldGhpcy5idWZmZXIubGVuZ3RoLHRoaXMuYnVmZmVyW3RoaXMud3JpdGVJZHhdPXM7bGV0IGk9TWF0aC5taW4oTWF0aC5mbG9vcih1KnQpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1pLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLndyaXRlKHMsdCksdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe2UodGhpcywiZGVsYXkiLG5ldyBSKTtlKHRoaXMsIm1vZHVsYXRvciIsbmV3IGspfXVwZGF0ZShzLHQsaSxuLGwpe2NvbnN0IHI9dGhpcy5tb2R1bGF0b3IudXBkYXRlKG4pKmwscD10aGlzLmRlbGF5LnVwZGF0ZShzLGkqKDErcikpO3JldHVybiBUKHMscCx0KX19Y2xhc3MgVXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiaG9sZCIsMCk7ZSh0aGlzLCJ0IiwwKX11cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBZe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBpPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmkpL2l9fWNsYXNzIFp7dXBkYXRlKHMsdD0wLGk9MSl7aT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsaSkpO2NvbnN0IG49TWF0aC5leHBtMSh0KTtyZXR1cm4oMStuKSpzLygxK24qTWF0aC5hYnMocykpKml9fWNsYXNzIHd7Y29uc3RydWN0b3Iocyx0LGkpe2UodGhpcywiYnVmZmVyIik7ZSh0aGlzLCJzYW1wbGVSYXRlIik7ZSh0aGlzLCJwb3MiLDApO2UodGhpcywic2FtcGxlRnJlcSIsQSgpKTt0aGlzLmJ1ZmZlcj1zLHRoaXMuc2FtcGxlUmF0ZT10LHRoaXMuZHVyYXRpb249dGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc2FtcGxlUmF0ZSx0aGlzLnNwZWVkPXUvdGhpcy5zYW1wbGVSYXRlLGkmJih0aGlzLnNwZWVkKj10aGlzLmR1cmF0aW9uKX11cGRhdGUocyl7aWYodGhpcy5wb3M+PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PXMvdGhpcy5zYW1wbGVGcmVxKnRoaXMuc3BlZWQ7bGV0IGk9dGhpcy5idWZmZXJbTWF0aC5mbG9vcih0aGlzLnBvcyldO3JldHVybiB0aGlzLnBvcz10aGlzLnBvcyt0LGl9fWUodywic2FtcGxlcyIsbmV3IE1hcCk7Y29uc3QgeT0oaCxzPSJsaW5lYXIiLHQpPT57Y29uc3RbcixwLGEsY109aDtpZihyPT1udWxsJiZwPT1udWxsJiZhPT1udWxsJiZjPT1udWxsKXJldHVybiB0Pz9bLjAwMSwuMDAxLDEsLjAxXTtjb25zdCBkPWE/PyhyIT1udWxsJiZwPT1udWxsfHxyPT1udWxsJiZwPT1udWxsPzE6LjAwMSk7cmV0dXJuW01hdGgubWF4KHI/PzAsLjAwMSksTWF0aC5tYXgocD8/MCwuMDAxKSxNYXRoLm1pbihkLDEpLE1hdGgubWF4KGM/PzAsLjAxKV19O2xldCBEPXtzaW5lOmcsc2F3OlMsemF3Okksc2F3dG9vdGg6Uyx6YXd0b290aDpJLHN1cGVyc2F3OkwsdHJpOmssdHJpYW5nbGU6ayxwdWxzZTpDLHNxdWFyZTpDLHB1bHplOk4sZHVzdDpQLGNyYWNrbGU6UCxpbXB1bHNlOiQsd2hpdGU6Ryxicm93bjpqLHBpbms6Qn07Y29uc3QgSD17Y2hvcnVzOjAsbm90ZTo0OCxzOiJ0cmlhbmdsZSIsYmFuazoiIixnYWluOjEscG9zdGdhaW46MSx2ZWxvY2l0eToxLGRlbnNpdHk6Ii4wMyIsZnR5cGU6IjEyZGIiLGZhbmNob3I6MCxyZXNvbmFuY2U6MCxocmVzb25hbmNlOjAsYmFuZHE6MCxjaGFubmVsczpbMSwyXSxwaGFzZXJkZXB0aDouNzUsc2hhcGV2b2w6MSxkaXN0b3J0dm9sOjEsZGVsYXk6MCxieXRlQmVhdEV4cHJlc3Npb246IjAiLGRlbGF5ZmVlZGJhY2s6LjUsZGVsYXlzcGVlZDoxLGRlbGF5dGltZTouMjUsb3JiaXQ6MSxpOjEsZmZ0OjgsejoidHJpYW5nbGUiLHBhbjouNSxmbWg6MSxmbWVudjowLHNwZWVkOjEscHc6LjV9O2xldCBvPWg9PkhbaF07Y29uc3QgSj17YzowLGQ6MixlOjQsZjo1LGc6NyxhOjksYjoxMX0sSz17IiMiOjEsYjotMSxzOjEsZjotMX0sUT0oaCxzPTMpPT57dmFyIGE7bGV0W3QsaT0iIixuPSIiXT0oKGE9U3RyaW5nKGgpLm1hdGNoKC9eKFthLWdBLUddKShbI2JzZl0qKShbMC05XSopJC8pKT09bnVsbD92b2lkIDA6YS5zbGljZSgxKSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraCsnIicpO2NvbnN0IGw9Slt0LnRvTG93ZXJDYXNlKCldLHI9KGk9PW51bGw/dm9pZCAwOmkuc3BsaXQoIiIpLnJlZHVjZSgoYyxkKT0+YytLW2RdLDApKXx8MDtyZXR1cm4oTnVtYmVyKG58fHMpKzEpKjEyK2wrcn0sdHQ9aD0+TWF0aC5wb3coMiwoaC02OSkvMTIpKjQ0MCxBPWg9PihoPWh8fG8oIm5vdGUiKSx0eXBlb2YgaD09InN0cmluZyImJihoPVEoaCwzKSksdHQoaCkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyBVKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgWSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWil9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIGV0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgUix0aGlzLl9kZWxheVI9bmV3IFJ9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyBzdChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGl0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgYXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IGV0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1pdCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsYXQpfSkoKTsK",uS=oS;u2(uS);const{Pattern:cS,logger:Ui,repl:lS}=MM;GM(Ui);const G2=e=>(e.ensureObjectValue(),e.value),P2=(e,t,n,s,a)=>Ar(G2(e),a,n,s,e.whole?.begin.valueOf());async function pS(e,t,n,s,a,r,i,o=void 0){let u=Ce();await u.close(),u=new OfflineAudioContext(2,(s-n)/t*a,a),ur(u),ji(new qM(u)),await au({maxPolyphony:r,multiChannelOrbits:i}),Ui("[webaudio] preloading");let c=e.queryArc(n,s,{_cps:t}).sort((h,d)=>h.whole.begin.valueOf()-d.whole.begin.valueOf());for(const h of c)if(h.hasOnset())try{await Ar(G2(h),(h.whole.begin.valueOf()-n)/t,h.duration/t,t,(h.whole?.begin.valueOf()-n)/t)}catch(d){Ca(d,"webaudio")}return Ui("[webaudio] start rendering"),u.startRendering().then(h=>{const d=hS(h),m=new Blob([d],{type:"audio/wav"}),g=URL.createObjectURL(m),y=document.createElement("a");y.href=g,o=o?`${o}.wav`:`${new Date().toISOString()}.wav`,y.download=`${o}`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g)}).finally(async()=>{ur(null),ji(null),d2()})}function v2(e={}){const t=e.audioContext??Ce();return ur(t),e={getTime:()=>t.currentTime,defaultOutput:P2,...e},lS(e)}cS.prototype.dough=function(){return this.onTrigger(x2,1)};function hS(e,t){t=t||{};var n=e.numberOfChannels,s=e.sampleRate,a=t.float32?3:1,r=a===3?32:16,i;return n===2?i=mS(e.getChannelData(0),e.getChannelData(1)):i=e.getChannelData(0),dS(i,a,s,n,r)}function dS(e,t,n,s,a){var r=a/8,i=s*r,o=new ArrayBuffer(44+e.length*r),u=new DataView(o);return Ua(u,0,"RIFF"),u.setUint32(4,36+e.length*r,!0),Ua(u,8,"WAVE"),Ua(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,t,!0),u.setUint16(22,s,!0),u.setUint32(24,n,!0),u.setUint32(28,n*i,!0),u.setUint16(32,i,!0),u.setUint16(34,a,!0),Ua(u,36,"data"),u.setUint32(40,e.length*r,!0),t===1?yS(u,44,e):fS(u,44,e),o}function mS(e,t){for(var n=e.length+t.length,s=new Float32Array(n),a=0,r=0;a<n;)s[a++]=e[r],s[a++]=t[r],r++;return s}function fS(e,t,n){for(var s=0;s<n.length;s++,t+=4)e.setFloat32(t,n[s],!0)}function yS(e,t,n){for(var s=0;s<n.length;s++,t+=2){var a=Math.max(-1,Math.min(1,n[s]));e.setInt16(t,a<0?a*32768:a*32767,!0)}}function Ua(e,t,n){for(var s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))}const ys=(e="test-canvas",t)=>{let{contextType:n="2d",pixelated:s=!1,pixelRatio:a=window.devicePixelRatio}={},r=document.querySelector("#"+e);if(!r){r=document.createElement("canvas"),r.id=e,r.width=window.innerWidth*a,r.height=window.innerHeight*a,r.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",s&&(r.style.imageRendering="pixelated"),document.body.prepend(r);let i;window.addEventListener("resize",()=>{i&&clearTimeout(i),i=setTimeout(()=>{r.width=window.innerWidth*a,r.height=window.innerHeight*a},200)})}return r.getContext(n,{willReadFrequently:!0})};let pa={};function gS(e){pa[e]!==void 0&&(cancelAnimationFrame(pa[e]),delete pa[e])}let Dn={};H.prototype.draw=function(e,t){if(typeof window>"u")return this;let{id:n=1,lookbehind:s=0,lookahead:a=0}=t,r=Math.max(ki(),0);gS(n),s=Math.abs(s),Dn[n]=(Dn[n]||[]).filter(c=>!c.isInFuture(r));let i=this.queryArc(r,r+a).filter(c=>c.hasOnset());Dn[n]=Dn[n].concat(i);let o;const u=()=>{const c=ki(),h=c+a;Dn[n]=Dn[n].filter(g=>g.isInNearPast(s,c));let d=Math.max(o||h,h-1/10);const m=this.queryArc(d,h).filter(g=>g.hasOnset());Dn[n]=Dn[n].concat(m),o=h,e(Dn[n],c,h,this),pa[n]=requestAnimationFrame(u)};return pa[n]=requestAnimationFrame(u),this};H.prototype.onPaint=function(e){return this.withState(t=>(t.controls.painters||(t.controls.painters=[]),t.controls.painters.push(e),t))};H.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};let bS={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function kn(){return bS}let Gc="#22222210";H.prototype.animate=function({callback:e,sync:t=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const s=ys();let{clientWidth:a,clientHeight:r}=s.canvas;a*=window.devicePixelRatio,r*=window.devicePixelRatio;let i=n===0?"99":Number((1-n)*100).toFixed(0);i=i.length===1?`0${i}`:i,Gc=`#200010${i}`;const o=u=>{let c;u=Math.round(u),c=this.slow(1e3).queryArc(u,u),s.fillStyle=Gc,s.fillRect(0,0,a,r),c.forEach(h=>{let{x:d,y:m,w:g,h:y,s:C,r:X,angle:S=0,fill:L="darkseagreen"}=h.value;if(g*=a,y*=r,X!==void 0&&S!==void 0){const A=S*2*Math.PI,[Z,E]=[(a-g)/2,(r-y)/2];d=Z+Math.cos(A)*X*Z,m=E+Math.sin(A)*X*E}else d*=a-g,m*=r-y;const z={...h.value,x:d,y:m,w:g,h:y};s.fillStyle=L,C==="rect"?s.fillRect(d,m,g,y):C==="ellipse"&&(s.beginPath(),s.ellipse(d+g/2,m+y/2,g/2,y/2,0,0,2*Math.PI),s.fill()),e&&e(s,z,h)}),window.frame=requestAnimationFrame(o)};return window.frame=requestAnimationFrame(o),Ie};const{x:X2,y:eV,w:tV,h:nV,angle:sV,r:aV,fill:rV,smear:iV}=wo("x","y","w","h","angle","r","fill","smear");k("rescale",function(e,t){return t.mul(X2(e).w(e).y(e).h(e))});k("moveXY",function(e,t,n){return n.add(X2(e).y(t))});k("zoomIn",function(e,t){const n=_e(1).sub(e).div(2);return t.rescale(e).move(n,n)});const sa=(e,t,n)=>e*(n-t)+t,Pc=e=>{let{value:t}=e;typeof e.value!="object"&&(t={value:t});let{note:n,n:s,freq:a,s:r}=t;if(a)return lo(a);if(n=n??s,typeof n=="string")try{return yn(n)}catch{return 0}return typeof n=="number"?n:r?"_"+r:t};H.prototype.pianoroll=function(e={}){let{cycles:t=4,playhead:n=.5,overscan:s=0,hideNegative:a=!1,ctx:r=ys(),id:i=1}=e,o=-t*n,u=t*(1-n);const c=(h,d)=>(!a||h.whole.begin>=0)&&h.isWithinTime(d+o,d+u);return this.draw((h,d)=>{w2({...e,time:d,ctx:r,haps:h.filter(m=>c(m,d))})},{lookbehind:o-s,lookahead:u+s,id:i}),this};function w2({time:e,haps:t,cycles:n=4,playhead:s=.5,flipTime:a=0,flipValues:r=0,hideNegative:i=!1,inactive:o=kn().foreground,active:u=kn().foreground,background:c="transparent",smear:h=0,playheadColor:d=kn().foreground,minMidi:m=10,maxMidi:g=90,autorange:y=0,timeframe:C,fold:X=1,vertical:S=0,labels:L=!1,fill:z=1,fillActive:A=!1,strokeActive:Z=!0,stroke:E,hideInactive:D=0,colorizeInactive:V=1,fontFamily:T,ctx:K,id:J}={}){const Y=K.canvas.width,Q=K.canvas.height;let ee=-n*s,ye=n*(1-s);J&&(t=t.filter(Se=>Se.hasTag(J))),C&&(console.warn("timeframe is deprecated! use from/to instead"),ee=0,ye=C);const ae=S?Q:Y,ge=S?Y:Q;let pe=S?[ae,0]:[0,ae];const He=ye-ee,pt=S?[0,ge]:[ge,0];let ut=g-m+1,B=ge/ut,xe=[];a&&pe.reverse(),r&&pt.reverse();const{min:rt,max:Be,values:Ge}=t.reduce(({min:Se,max:Re,values:wt},ce)=>{const We=Pc(ce);return{min:We<Se?We:Se,max:We>Re?We:Re,values:wt.includes(We)?wt:[...wt,We]}},{min:1/0,max:-1/0,values:[]});y&&(m=rt,g=Be,ut=g-m+1),xe=Ge.sort((Se,Re)=>typeof Se=="number"&&typeof Re=="number"?Se-Re:typeof Se=="number"?1:String(Se).localeCompare(String(Re))),B=X?ge/xe.length:ge/ut,K.fillStyle=c,K.globalAlpha=1,h||(K.clearRect(0,0,Y,Q),K.fillRect(0,0,Y,Q)),t.forEach(Se=>{const Re=Se.whole.begin<=e&&Se.endClipped>e;let wt=E??(Z&&Re),ce=!Re&&z||Re&&A;if(D&&!Re)return;let We=Se.value?.color;u=We||u,o=V&&We||o,We=Re?u:o,K.fillStyle=ce?We:"transparent",K.strokeStyle=We;const{velocity:Ct=1,gain:oe=1}=Se.value||{};K.globalAlpha=Ct*oe;const O=(Se.whole.begin-(a?ye:ee))/He,$e=sa(O,...pe);let he=sa(Se.duration/He,0,ae);const Ne=Pc(Se),bt=X?xe.indexOf(Ne)/xe.length:(Number(Ne)-m)/ut,pn=sa(bt,...pt);let Wn=0;const hn=sa(e/He,...pe);let Zt;if(S?Zt=[pn+1-(r?B:0),ae-hn+$e+Wn+1-(a?0:he),B-2,he-2]:Zt=[$e-hn+Wn+1-(a?he:0),pn+1-(r?0:B),he-2,B-2],wt&&K.strokeRect(...Zt),ce&&K.fillRect(...Zt),L){const wn=Se.value.note??Se.value.s+(Se.value.n?`:${Se.value.n}`:""),{label:Ze,activeLabel:je}=Se.value,de=(Re&&je||Ze)??wn;let Je=S?he:B*.75;K.font=`${Je}px ${T||"monospace"}`,K.fillStyle=ce?"black":We,K.textBaseline="top",K.fillText(de,...Zt)}}),K.globalAlpha=1;const ze=sa(-ee/He,...pe);return K.strokeStyle=d,K.beginPath(),S?(K.moveTo(0,ze),K.lineTo(ge,ze)):(K.moveTo(ze,0),K.lineTo(ze,ge)),K.stroke(),this}function MS(e,t={}){let[n,s]=e;n=Math.abs(n);const a=s+n,r=a!==0?n/a:0;return{fold:1,...t,cycles:a,playhead:r}}const xS=(e={})=>(t,n,s,a)=>w2({ctx:t,time:n,haps:s,...MS(a,e)});H.prototype.punchcard=function(e){return this.onPaint(xS(e))};H.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function CS(e,t,n,s){const a=(e-90)*Math.PI/180;return[n+Math.cos(a)*t,s+Math.sin(a)*t]}const vc=(e,t,n,s,a=0)=>CS((e+a)*360,t*e,n,s);function Xc(e){let{ctx:t,from:n=0,to:s=3,margin:a=50,cx:r=100,cy:i=100,rotate:o=0,thickness:u=a/2,color:c=kn().foreground,cap:h="round",stretch:d=1,fromOpacity:m=1,toOpacity:g=1}=e;n*=d,s*=d,o*=d,t.lineWidth=u,t.lineCap=h,t.strokeStyle=c,t.globalAlpha=m,t.beginPath();let[y,C]=vc(n,a,r,i,o);t.moveTo(y,C);const X=1/60;let S=n;for(;S<=s;){const[L,z]=vc(S,a,r,i,o);t.globalAlpha=(S-n)/(s-n)*g,t.lineTo(L,z),S+=X}t.stroke()}function GS(e){let{stretch:t=1,size:n=80,thickness:s=n/2,cap:a="butt",inset:r=3,playheadColor:i="#ffffff",playheadLength:o=.02,playheadThickness:u=s,padding:c=0,steady:h=1,activeColor:d=kn().foreground,inactiveColor:m=kn().gutterForeground,colorizeInactive:g=0,fade:y=!0,ctx:C,time:X,haps:S,drawTime:L,id:z}=e;z&&(S=S.filter(Y=>Y.hasTag(z)));const[A,Z]=[C.canvas.width,C.canvas.height];C.clearRect(0,0,A*2,Z*2);const[E,D]=[A/2,Z/2],V={margin:n/t,cx:E,cy:D,stretch:t,cap:a,thickness:s},T={...V,thickness:u,from:r-o,to:r,color:i},[K]=L,J=h*X;S.forEach(Y=>{const Q=Y.whole.begin<=X&&Y.endClipped>X,ee=Y.whole.begin-X+r,ye=Y.endClipped-X+r-c,ae=Y.value?.color||d,ge=g||Q?ae:m,pe=y?1-Math.abs((Y.whole.begin-X)/K):1;Xc({ctx:C,...V,from:ee,to:ye,rotate:J,color:ge,fromOpacity:pe,toOpacity:pe})}),Xc({ctx:C,...T,rotate:J})}H.prototype.spiral=function(e={}){return this.onPaint((t,n,s,a)=>GS({ctx:t,time:n,haps:s,drawTime:a,...e}))};const PS=Ds(36),wc=(e,t,n,s)=>{s=s*Math.PI*2;const a=Math.sin(s)*n+e,r=Math.cos(s)*n+t;return[a,r]},Zc=(e,t)=>.5-Math.log2(e/t)%1;function vS({haps:e,ctx:t,id:n,hapcircles:s=1,circle:a=0,edo:r=12,root:i=PS,thickness:o=3,hapRadius:u=6,mode:c="flake",margin:h=10}={}){const d=c==="polygon",m=c==="flake",g=t.canvas.width,y=t.canvas.height;t.clearRect(0,0,g,y);const C=kn().foreground,X=Math.min(g,y)/2-o/2-u-h,S=g/2,L=y/2;n&&(e=e.filter(A=>A.hasTag(n))),t.strokeStyle=C,t.fillStyle=C,t.globalAlpha=1,t.lineWidth=o,a&&(t.beginPath(),t.arc(S,L,X,0,2*Math.PI),t.stroke()),r&&(Array.from({length:r},(A,Z)=>{const E=Zc(i*Math.pow(2,Z/r),i),[D,V]=wc(S,L,X,E);t.beginPath(),t.arc(D,V,u,0,2*Math.PI),t.fill()}),t.stroke());let z=[];t.lineWidth=u,e.forEach(A=>{let Z;try{Z=Tl(A)}catch{return}const E=Zc(Z,i),[D,V]=wc(S,L,X,E),T=A.value.color||C;t.strokeStyle=T,t.fillStyle=T;const{velocity:K=1,gain:J=1}=A.value||{},Y=K*J;t.globalAlpha=Y,z.push([D,V,E,T,Y]),t.beginPath(),s&&(t.moveTo(D+u,V),t.arc(D,V,u,0,2*Math.PI),t.fill()),m&&(t.moveTo(S,L),t.lineTo(D,V)),t.stroke()}),t.strokeStyle=C,t.globalAlpha=1,d&&z.length&&(z=z.sort((A,Z)=>A[2]-Z[2]),t.beginPath(),t.moveTo(z[0][0],z[0][1]),z.forEach(([A,Z,E,D,V])=>{t.strokeStyle=D,t.globalAlpha=V,t.lineTo(A,Z)}),t.lineTo(z[0][0],z[0][1]),t.stroke())}H.prototype.pitchwheel=function(e={}){let{ctx:t=ys(),id:n=1}=e;return this.tag(n).onPaint((s,a,r)=>vS({...e,ctx:t,haps:r.filter(i=>i.isActive(a)),id:n}))};function Z2(e,{align:t=!0,color:n="white",thickness:s=3,scale:a=.25,pos:r=.75,trigger:i=0,ctx:o=ys(),id:u=1}={}){o.lineWidth=s,o.strokeStyle=n;let c=o.canvas;if(!e){o.beginPath();let C=r*c.height;o.moveTo(0,C),o.lineTo(c.width,C),o.stroke();return}const h=Fr("time",u);o.beginPath();const d=e.frequencyBinCount;let m=t?Array.from(h).findIndex((C,X,S)=>X&&S[X-1]>-i&&C<=-i):0;m=Math.max(m,0);const g=c.width*1/d;let y=0;for(let C=m;C<d;C++){const X=h[C]+1,S=(r-a*(X-1))*c.height;C===0?o.moveTo(y,S):o.lineTo(y,S),y+=g}o.stroke()}function F2(e,{color:t="white",scale:n=.25,pos:s=.75,lean:a=.5,min:r=-150,max:i=0,ctx:o=ys(),id:u=1}={}){if(!e){o.beginPath();let y=s*h.height;o.moveTo(0,y),o.lineTo(h.width,y),o.stroke();return}const c=Fr("frequency",u),h=o.canvas;o.fillStyle=t;const d=e.frequencyBinCount,m=h.width*1/d;let g=0;for(let y=0;y<d;y++){const C=br((c[y]-r)/(i-r),0,1)*n,X=C*h.height,S=(s-C*a)*h.height;o.fillRect(g,S,Math.max(m,1),X),g+=m}}function A2(e=0,t="0,0,0",n=ys()){e?(n.fillStyle=`rgba(${t},${1-e})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}H.prototype.fscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(()=>{A2(e.smear,"0,0,0",e.ctx),Gt[t]&&F2(Gt[t],e)},{id:t})};H.prototype.tscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{e.color=n[0]?.value?.color||kn().foreground,e.color,A2(e.smear,"0,0,0",e.ctx),Z2(Gt[t],e)},{id:t})};H.prototype.scope=H.prototype.tscope;let Fc={};H.prototype.spectrum=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{e.color=n[0]?.value?.color||Fc[t]||kn().foreground,Fc[t]=e.color,XS(Gt[t],e)},{id:t})};H.prototype.scope=H.prototype.tscope;const li=new Map;function XS(e,{thickness:t=3,speed:n=1,min:s=-80,max:a=0,ctx:r=ys(),id:i=1,color:o}={}){if(r.lineWidth=t,r.strokeStyle=o,!e)return;const u=n,c=Fr("frequency",i),h=r.canvas;r.fillStyle=o;const d=e.frequencyBinCount;let m=li.get(i)||r.getImageData(0,0,h.width,h.height);li.set(i,m),r.clearRect(0,0,r.canvas.width,r.canvas.height),r.putImageData(m,-u,0);let g=h.width-n;for(let y=0;y<d;y++){const C=br((c[y]-s)/(a-s),0,1);r.globalAlpha=C;const X=Math.log(y+1)/Math.log(d)*h.height;r.fillRect(g,h.height-X,u,2)}li.set(i,r.getImageData(0,0,h.width,h.height))}const wS=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:$o,Warpmode:Yi,aliasBank:WA,get analysers(){return Gt},get analysersData(){return os},applyFM:Pa,applyGainCurve:dn,applyParameterModulators:Ti,cleanupOnEnd:BM,connectBusModulator:NM,connectEnvelope:WM,connectLFO:zM,connectToDestination:p2,createFilter:DM,distortionAlgorithms:jo,dough:nS,doughTrigger:x2,doughsamples:C2,drawFrequencyScope:F2,drawTimeScope:Z2,drywet:LM,dspWorklet:b2,effectSend:Ga,errorLogger:Ca,gainNode:Ke,getADSRValues:Wt,getAnalyserById:h2,getAnalyzerData:Fr,getAudioContext:Ce,getAudioContextCurrentTime:TF,getAudioDevices:r2,getCachedBuffer:GA,getCompressor:SM,getDefaultValue:at,getDistortion:VM,getDistortionAlgorithm:lA,getEnvelope:AM,getFrequencyFromValue:_n,getLfo:Ts,getLoadedBuffer:vA,getOscillator:y2,getParamADSR:zt,getParamLfo:_o,getPitchEnvelope:ks,getSampleBuffer:IM,getSampleBufferSource:YM,getSampleInfo:TM,getSound:as,getSuperdoughAudioController:Zr,getVibratoOscillator:Rs,getWorklet:Ft,getZZFX:g2,initAudio:au,initAudioOnFirstClick:l2,loadBuffer:cr,loadWorklets:c2,logger:ct,get maxPolyphony(){return eu},get multiChannelOrbits(){return tu},noises:Ko,onTriggerSample:OM,onTriggerSynth:t2,onceEnded:bn,processSampleMap:jM,registerSampleSource:QM,registerSamplesPrefix:XA,registerSound:nn,registerSynthSounds:m2,registerWaveTable:qo,registerWorklet:u2,registerZZFXSounds:tS,releaseAudioNode:De,renderPatternAudio:pS,resetDefaultValues:i2,resetDefaults:YA,resetGlobalEffects:d2,resetLoadedSounds:_A,resetSeenKeys:$M,reverseBuffer:HM,samples:JM,scheduleAtTime:eA,setAudioContext:ur,setDefault:IA,setDefaultAudioContext:xM,setDefaultValue:su,setDefaultValues:HA,setGainCurve:BA,setLogger:GM,setMaxPolyphony:n2,setMultiChannelOrbits:s2,setSuperdoughAudioController:ji,setVersionDefaults:KA,soundAlias:NA,soundMap:an,superdough:Ar,superdoughTrigger:OA,tables:VA,waveformN:f2,webAudioTimeout:mn,webaudioOutput:P2,webaudioRepl:v2},Symbol.toStringTag,{value:"Module"}));function ZS(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function ps(e,t,n,s){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,ps.prototype),a.expected=t,a.found=n,a.location=s,a.name="SyntaxError",a}ZS(ps,Error);function pi(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}ps.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<e.length;s++)if(e[s].source===this.location.source){n=e[s].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,r=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(a):a,i=this.location.source+":"+r.line+":"+r.column;if(n){var o=this.location.end,u=pi("",r.line.toString().length," "),c=n[a.line-1],h=a.line===o.line?o.column:c.length+1,d=h-a.column||1;t+=`
 --> `+i+`
`+u+` |
`+r.line+" | "+c+`
`+u+" | "+pi("",a.column-1," ")+pi("",d,"^")}else t+=`
 at `+i}return t};ps.buildMessage=function(e,t){var n={literal:function(c){return'"'+a(c.text)+'"'},class:function(c){var h=c.parts.map(function(d){return Array.isArray(d)?r(d[0])+"-"+r(d[1]):r(d)});return"["+(c.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function s(c){return c.charCodeAt(0).toString(16).toUpperCase()}function a(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+s(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+s(h)})}function r(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+s(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+s(h)})}function i(c){return n[c.type](c)}function o(c){var h=c.map(i),d,m;if(h.sort(),h.length>0){for(d=1,m=1;d<h.length;d++)h[d-1]!==h[d]&&(h[m]=h[d],m++);h.length=m}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function u(c){return c?'"'+a(c)+'"':"end of input"}return"Expected "+o(e)+" but "+u(t)+" found."};function S2(e,t){t=t!==void 0?t:{};var n={},s=t.grammarSource,a={start:ju},r=ju,i=".",o="-",u="0",c=",",h="|",d="[",m="]",g="{",y="}",C="%",X="<",S=">",L="!",z="(",A=")",Z="/",E="*",D="?",V=":",T="..",K="^",J="struct",Y="target",Q="euclid",ee="slow",ye="rotL",ae="rotR",ge="fast",pe="scale",He="//",pt="cat",ut="$",B="setcps",xe="setbpm",rt="hush",Be=/^[1-9]/,Ge=/^[eE]/,ze=/^[+\-]/,Se=/^[0-9]/,Re=/^[ \n\r\t\xA0]/,wt=/^["']/,ce=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,We=/^[@_]/,Ct=/^[^\n]/,oe=ei("number"),O=Ee(".",!1),$e=Fn([["1","9"]],!1,!1),he=Fn(["e","E"],!1,!1),Ne=Fn(["+","-"],!1,!1),bt=Ee("-",!1),pn=Ee("0",!1),Wn=Fn([["0","9"]],!1,!1),hn=ei("whitespace"),Zt=Fn([" ",`
`,"\r","	"," "],!1,!1),wn=Ee(",",!1),Ze=Ee("|",!1),je=Fn(['"',"'"],!1,!1),de=ei('a letter, a number, "-", "#", ".", "^", "_"'),Je=Fn(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),Oe=Ee("[",!1),ts=Ee("]",!1),ns=Ee("{",!1),ht=Ee("}",!1),Nn=Ee("%",!1),se=Ee("<",!1),be=Ee(">",!1),Ye=Fn(["@","_"],!1,!1),st=Ee("!",!1),we=Ee("(",!1),dt=Ee(")",!1),Rt=Ee("/",!1),Vt=Ee("*",!1),Ba=Ee("?",!1),qr=Ee(":",!1),$r=Ee("..",!1),l=Ee("^",!1),b=Ee("struct",!1),f=Ee("target",!1),M=Ee("euclid",!1),P=Ee("slow",!1),R=Ee("rotL",!1),N=Ee("rotR",!1),_=Ee("fast",!1),te=Ee("scale",!1),Fe=Ee("//",!1),it=Fn([`
`],!0,!1),Zn=Ee("cat",!1),Tn=Ee("$",!1),za=Ee("setcps",!1),Wa=Ee("setbpm",!1),It=Ee("hush",!1),Bx=function(){return parseFloat(G5())},zx=function(p){const G=p.join("");return G==="."||G==="_"},Wx=function(p){return new p9(p.join(""))},Nx=function(p){return p},Tx=function(p,G){return p.arguments_.stepsPerCycle=G,p},Ix=function(p){return p},Yx=function(p){return p.arguments_.alignment="polymeter_slowcat",p},Hx=function(p){return G=>G.options_.weight=(G.options_.weight??1)+(p??2)-1},Kx=function(p){return G=>{const F=(G.options_.reps??1)+(p??2)-1;G.options_.reps=F,G.options_.ops=G.options_.ops.filter(W=>W.type_!=="replicate"),G.options_.ops.push({type_:"replicate",arguments_:{amount:F}}),G.options_.weight=F}},_x=function(p,G,F){return W=>W.options_.ops.push({type_:"bjorklund",arguments_:{pulse:p,step:G,rotation:F}})},jx=function(p){return G=>G.options_.ops.push({type_:"stretch",arguments_:{amount:p,type:"slow"}})},Ux=function(p){return G=>G.options_.ops.push({type_:"stretch",arguments_:{amount:p,type:"fast"}})},Jx=function(p){return G=>G.options_.ops.push({type_:"degradeBy",arguments_:{amount:p,seed:ai++}})},Ox=function(p){return G=>G.options_.ops.push({type_:"tail",arguments_:{element:p}})},Qx=function(p){return G=>G.options_.ops.push({type_:"range",arguments_:{element:p}})},qx=function(p,G){const F=new d9(p,{ops:[],weight:1,reps:1});for(const W of G)W(F);return F},$x=function(p,G){return new Ya(G,"fastcat",void 0,!!p)},e5=function(p){return{alignment:"stack",list:p}},t5=function(p){return{alignment:"rand",list:p,seed:ai++}},n5=function(p){return{alignment:"feet",list:p,seed:ai++}},s5=function(p,G){return G&&G.list.length>0?new Ya([p,...G.list],G.alignment,G.seed):p},a5=function(p,G){return new Ya(G?[p,...G.list]:[p],"polymeter")},r5=function(p){return p},i5=function(p){return{name:"struct",args:{mini:p}}},o5=function(p){return{name:"target",args:{name:p}}},u5=function(p,G,F){return{name:"bjorklund",args:{pulse:p,step:parseInt(G)}}},c5=function(p){return{name:"stretch",args:{amount:p}}},l5=function(p){return{name:"shift",args:{amount:"-"+p}}},p5=function(p){return{name:"shift",args:{amount:p}}},h5=function(p){return{name:"stretch",args:{amount:"1/"+p}}},d5=function(p){return{name:"scale",args:{scale:p.join("")}}},Hu=function(p,G){return G},m5=function(p,G){return G.unshift(p),new Ya(G,"slowcat")},f5=function(p){return p},y5=function(p,G){return new h9(p.name,p.args,G)},g5=function(p){return p},b5=function(p){return p},M5=function(p){return new si("setcps",{value:p})},x5=function(p){return new si("setcps",{value:p/120/2})},C5=function(){return new si("hush")},w=t.peg$currPos|0,Pe=w,bs=[{line:1,column:1}],Qt=w,Na=t.peg$maxFailExpected||[],ie=t.peg$silentFails|0,qs;if(t.startRule){if(!(t.startRule in a))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');r=a[t.startRule]}function G5(){return e.substring(Pe,w)}function Ku(){return ti(Pe,w)}function Ee(p,G){return{type:"literal",text:p,ignoreCase:G}}function Fn(p,G,F){return{type:"class",parts:p,inverted:G,ignoreCase:F}}function P5(){return{type:"end"}}function ei(p){return{type:"other",description:p}}function _u(p){var G=bs[p],F;if(G)return G;if(p>=bs.length)F=bs.length-1;else for(F=p;!bs[--F];);for(G=bs[F],G={line:G.line,column:G.column};F<p;)e.charCodeAt(F)===10?(G.line++,G.column=1):G.column++,F++;return bs[p]=G,G}function ti(p,G,F){var W=_u(p),ue=_u(G),et={source:s,start:{offset:p,line:W.line,column:W.column},end:{offset:G,line:ue.line,column:ue.column}};return et}function me(p){w<Qt||(w>Qt&&(Qt=w,Na=[]),Na.push(p))}function v5(p,G,F){return new ps(ps.buildMessage(p,G),p,G,F)}function ju(){var p;return p=l9(),p}function An(){var p,G;return ie++,p=w,S5(),G=Ta(),G!==n?(A5(),F5(),Pe=p,p=Bx()):(w=p,p=n),ie--,p===n&&ie===0&&me(oe),p}function X5(){var p;return e.charCodeAt(w)===46?(p=i,w++):(p=n,ie===0&&me(O)),p}function w5(){var p;return p=e.charAt(w),Be.test(p)?w++:(p=n,ie===0&&me($e)),p}function Z5(){var p;return p=e.charAt(w),Ge.test(p)?w++:(p=n,ie===0&&me(he)),p}function F5(){var p,G,F,W,ue;if(p=w,G=Z5(),G!==n){if(F=e.charAt(w),ze.test(F)?w++:(F=n,ie===0&&me(Ne)),F===n&&(F=null),W=[],ue=Ms(),ue!==n)for(;ue!==n;)W.push(ue),ue=Ms();else W=n;W!==n?(G=[G,F,W],p=G):(w=p,p=n)}else w=p,p=n;return p}function A5(){var p,G,F,W;if(p=w,G=X5(),G!==n){if(F=[],W=Ms(),W!==n)for(;W!==n;)F.push(W),W=Ms();else F=n;F!==n?(G=[G,F],p=G):(w=p,p=n)}else w=p,p=n;return p}function Ta(){var p,G,F,W;if(p=D5(),p===n)if(p=w,G=w5(),G!==n){for(F=[],W=Ms();W!==n;)F.push(W),W=Ms();G=[G,F],p=G}else w=p,p=n;return p}function S5(){var p;return e.charCodeAt(w)===45?(p=o,w++):(p=n,ie===0&&me(bt)),p}function D5(){var p;return e.charCodeAt(w)===48?(p=u,w++):(p=n,ie===0&&me(pn)),p}function Ms(){var p;return p=e.charAt(w),Se.test(p)?w++:(p=n,ie===0&&me(Wn)),p}function fe(){var p,G;for(ie++,p=[],G=e.charAt(w),Re.test(G)?w++:(G=n,ie===0&&me(Zt));G!==n;)p.push(G),G=e.charAt(w),Re.test(G)?w++:(G=n,ie===0&&me(Zt));return ie--,G=n,ie===0&&me(hn),p}function xs(){var p,G,F,W;return p=w,G=fe(),e.charCodeAt(w)===44?(F=c,w++):(F=n,ie===0&&me(wn)),F!==n?(W=fe(),G=[G,F,W],p=G):(w=p,p=n),p}function Uu(){var p,G,F,W;return p=w,G=fe(),e.charCodeAt(w)===124?(F=h,w++):(F=n,ie===0&&me(Ze)),F!==n?(W=fe(),G=[G,F,W],p=G):(w=p,p=n),p}function Ju(){var p,G,F,W;return p=w,G=fe(),e.charCodeAt(w)===46?(F=i,w++):(F=n,ie===0&&me(O)),F!==n?(W=fe(),G=[G,F,W],p=G):(w=p,p=n),p}function Cs(){var p;return p=e.charAt(w),wt.test(p)?w++:(p=n,ie===0&&me(je)),p}function Ia(){var p;return ie++,p=e.charAt(w),ce.test(p)?w++:(p=n,ie===0&&me(Je)),ie--,p===n&&ie===0&&me(de),p}function Ou(){var p,G,F,W;if(p=w,fe(),G=[],F=Ia(),F!==n)for(;F!==n;)G.push(F),F=Ia();else G=n;return G!==n?(F=fe(),Pe=w,W=zx(G),W?W=n:W=void 0,W!==n?(Pe=p,p=Wx(G)):(w=p,p=n)):(w=p,p=n),p}function L5(){var p,G,F,W;return p=w,fe(),e.charCodeAt(w)===91?(G=d,w++):(G=n,ie===0&&me(Oe)),G!==n?(fe(),F=$u(),F!==n?(fe(),e.charCodeAt(w)===93?(W=m,w++):(W=n,ie===0&&me(ts)),W!==n?(fe(),Pe=p,p=Nx(F)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function E5(){var p,G,F,W,ue;return p=w,fe(),e.charCodeAt(w)===123?(G=g,w++):(G=n,ie===0&&me(ns)),G!==n?(fe(),F=ec(),F!==n?(fe(),e.charCodeAt(w)===125?(W=y,w++):(W=n,ie===0&&me(ht)),W!==n?(ue=k5(),ue===n&&(ue=null),fe(),Pe=p,p=Tx(F,ue)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function k5(){var p,G,F;return p=w,e.charCodeAt(w)===37?(G=C,w++):(G=n,ie===0&&me(Nn)),G!==n?(F=Gs(),F!==n?(Pe=p,p=Ix(F)):(w=p,p=n)):(w=p,p=n),p}function R5(){var p,G,F,W;return p=w,fe(),e.charCodeAt(w)===60?(G=X,w++):(G=n,ie===0&&me(se)),G!==n?(fe(),F=ec(),F!==n?(fe(),e.charCodeAt(w)===62?(W=S,w++):(W=n,ie===0&&me(be)),W!==n?(fe(),Pe=p,p=Yx(F)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function Gs(){var p;return p=Ou(),p===n&&(p=L5(),p===n&&(p=E5(),p===n&&(p=R5()))),p}function Qu(){var p;return p=V5(),p===n&&(p=z5(),p===n&&(p=W5(),p===n&&(p=N5(),p===n&&(p=B5(),p===n&&(p=T5(),p===n&&(p=I5(),p===n&&(p=Y5()))))))),p}function V5(){var p,G,F;return p=w,fe(),G=e.charAt(w),We.test(G)?w++:(G=n,ie===0&&me(Ye)),G!==n?(F=An(),F===n&&(F=null),Pe=p,p=Hx(F)):(w=p,p=n),p}function B5(){var p,G,F;return p=w,fe(),e.charCodeAt(w)===33?(G=L,w++):(G=n,ie===0&&me(st)),G!==n?(F=An(),F===n&&(F=null),Pe=p,p=Kx(F)):(w=p,p=n),p}function z5(){var p,G,F,W,ue,et,qt;return p=w,e.charCodeAt(w)===40?(G=z,w++):(G=n,ie===0&&me(we)),G!==n?(fe(),F=$s(),F!==n?(fe(),W=xs(),W!==n?(fe(),ue=$s(),ue!==n?(fe(),xs(),fe(),et=$s(),et===n&&(et=null),fe(),e.charCodeAt(w)===41?(qt=A,w++):(qt=n,ie===0&&me(dt)),qt!==n?(Pe=p,p=_x(F,ue,et)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function W5(){var p,G,F;return p=w,e.charCodeAt(w)===47?(G=Z,w++):(G=n,ie===0&&me(Rt)),G!==n?(F=Gs(),F!==n?(Pe=p,p=jx(F)):(w=p,p=n)):(w=p,p=n),p}function N5(){var p,G,F;return p=w,e.charCodeAt(w)===42?(G=E,w++):(G=n,ie===0&&me(Vt)),G!==n?(F=Gs(),F!==n?(Pe=p,p=Ux(F)):(w=p,p=n)):(w=p,p=n),p}function T5(){var p,G,F;return p=w,e.charCodeAt(w)===63?(G=D,w++):(G=n,ie===0&&me(Ba)),G!==n?(F=An(),F===n&&(F=null),Pe=p,p=Jx(F)):(w=p,p=n),p}function I5(){var p,G,F;return p=w,e.charCodeAt(w)===58?(G=V,w++):(G=n,ie===0&&me(qr)),G!==n?(F=Gs(),F!==n?(Pe=p,p=Ox(F)):(w=p,p=n)):(w=p,p=n),p}function Y5(){var p,G,F;return p=w,e.substr(w,2)===T?(G=T,w+=2):(G=n,ie===0&&me($r)),G!==n?(F=Gs(),F!==n?(Pe=p,p=Qx(F)):(w=p,p=n)):(w=p,p=n),p}function $s(){var p,G,F,W;if(p=w,G=Gs(),G!==n){for(F=[],W=Qu();W!==n;)F.push(W),W=Qu();Pe=p,p=qx(G,F)}else w=p,p=n;return p}function In(){var p,G,F,W;if(p=w,e.charCodeAt(w)===94?(G=K,w++):(G=n,ie===0&&me(l)),G===n&&(G=null),F=[],W=$s(),W!==n)for(;W!==n;)F.push(W),W=$s();else F=n;return F!==n?(Pe=p,p=$x(G,F)):(w=p,p=n),p}function qu(){var p,G,F,W,ue;if(p=w,G=[],F=w,W=xs(),W!==n?(ue=In(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n),F!==n)for(;F!==n;)G.push(F),F=w,W=xs(),W!==n?(ue=In(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n);else G=n;return G!==n&&(Pe=p,G=e5(G)),p=G,p}function H5(){var p,G,F,W,ue;if(p=w,G=[],F=w,W=Uu(),W!==n?(ue=In(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n),F!==n)for(;F!==n;)G.push(F),F=w,W=Uu(),W!==n?(ue=In(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n);else G=n;return G!==n&&(Pe=p,G=t5(G)),p=G,p}function K5(){var p,G,F,W,ue;if(p=w,G=[],F=w,W=Ju(),W!==n?(ue=In(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n),F!==n)for(;F!==n;)G.push(F),F=w,W=Ju(),W!==n?(ue=In(),ue!==n?F=ue:(w=F,F=n)):(w=F,F=n);else G=n;return G!==n&&(Pe=p,G=n5(G)),p=G,p}function $u(){var p,G,F;return p=w,G=In(),G!==n?(F=qu(),F===n&&(F=H5(),F===n&&(F=K5())),F===n&&(F=null),Pe=p,p=s5(G,F)):(w=p,p=n),p}function ec(){var p,G,F;return p=w,G=In(),G!==n?(F=qu(),F===n&&(F=null),Pe=p,p=a5(G,F)):(w=p,p=n),p}function _5(){var p,G,F,W;return p=w,fe(),G=Cs(),G!==n?(fe(),F=$u(),F!==n?(fe(),W=Cs(),W!==n?(Pe=p,p=r5(F)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function j5(){var p;return p=t9(),p===n&&(p=Q5(),p===n&&(p=e9(),p===n&&(p=J5(),p===n&&(p=O5(),p===n&&(p=U5(),p===n&&(p=$5(),p===n&&(p=q5()))))))),p}function U5(){var p,G,F;return p=w,e.substr(w,6)===J?(G=J,w+=6):(G=n,ie===0&&me(b)),G!==n?(fe(),F=Ps(),F!==n?(Pe=p,p=i5(F)):(w=p,p=n)):(w=p,p=n),p}function J5(){var p,G,F,W,ue;return p=w,e.substr(w,6)===Y?(G=Y,w+=6):(G=n,ie===0&&me(f)),G!==n?(fe(),F=Cs(),F!==n?(W=Ou(),W!==n?(ue=Cs(),ue!==n?(Pe=p,p=o5(W)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function O5(){var p,G,F,W;return p=w,e.substr(w,6)===Q?(G=Q,w+=6):(G=n,ie===0&&me(M)),G!==n?(fe(),F=Ta(),F!==n?(fe(),W=Ta(),W!==n?(fe(),Ta(),Pe=p,p=u5(F,W)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function Q5(){var p,G,F;return p=w,e.substr(w,4)===ee?(G=ee,w+=4):(G=n,ie===0&&me(P)),G!==n?(fe(),F=An(),F!==n?(Pe=p,p=c5(F)):(w=p,p=n)):(w=p,p=n),p}function q5(){var p,G,F;return p=w,e.substr(w,4)===ye?(G=ye,w+=4):(G=n,ie===0&&me(R)),G!==n?(fe(),F=An(),F!==n?(Pe=p,p=l5(F)):(w=p,p=n)):(w=p,p=n),p}function $5(){var p,G,F;return p=w,e.substr(w,4)===ae?(G=ae,w+=4):(G=n,ie===0&&me(N)),G!==n?(fe(),F=An(),F!==n?(Pe=p,p=p5(F)):(w=p,p=n)):(w=p,p=n),p}function e9(){var p,G,F;return p=w,e.substr(w,4)===ge?(G=ge,w+=4):(G=n,ie===0&&me(_)),G!==n?(fe(),F=An(),F!==n?(Pe=p,p=h5(F)):(w=p,p=n)):(w=p,p=n),p}function t9(){var p,G,F,W,ue;if(p=w,e.substr(w,5)===pe?(G=pe,w+=5):(G=n,ie===0&&me(te)),G!==n)if(fe(),F=Cs(),F!==n){if(W=[],ue=Ia(),ue!==n)for(;ue!==n;)W.push(ue),ue=Ia();else W=n;W!==n?(ue=Cs(),ue!==n?(Pe=p,p=d5(W)):(w=p,p=n)):(w=p,p=n)}else w=p,p=n;else w=p,p=n;return p}function ni(){var p,G,F,W;if(p=w,e.substr(w,2)===He?(G=He,w+=2):(G=n,ie===0&&me(Fe)),G!==n){for(F=[],W=e.charAt(w),Ct.test(W)?w++:(W=n,ie===0&&me(it));W!==n;)F.push(W),W=e.charAt(w),Ct.test(W)?w++:(W=n,ie===0&&me(it));G=[G,F],p=G}else w=p,p=n;return p}function n9(){var p,G,F,W,ue,et,qt,vs;if(p=w,e.substr(w,3)===pt?(G=pt,w+=3):(G=n,ie===0&&me(Zn)),G!==n)if(fe(),e.charCodeAt(w)===91?(F=d,w++):(F=n,ie===0&&me(Oe)),F!==n)if(fe(),W=Ps(),W!==n){for(ue=[],et=w,qt=xs(),qt!==n?(vs=Ps(),vs!==n?(Pe=et,et=Hu(W,vs)):(w=et,et=n)):(w=et,et=n);et!==n;)ue.push(et),et=w,qt=xs(),qt!==n?(vs=Ps(),vs!==n?(Pe=et,et=Hu(W,vs)):(w=et,et=n)):(w=et,et=n);et=fe(),e.charCodeAt(w)===93?(qt=m,w++):(qt=n,ie===0&&me(ts)),qt!==n?(Pe=p,p=m5(W,ue)):(w=p,p=n)}else w=p,p=n;else w=p,p=n;else w=p,p=n;return p}function s9(){var p;return p=n9(),p===n&&(p=_5()),p}function Ps(){var p,G,F,W,ue;if(p=w,G=s9(),G!==n){for(fe(),F=[],W=ni();W!==n;)F.push(W),W=ni();Pe=p,p=f5(G)}else w=p,p=n;return p===n&&(p=w,G=j5(),G!==n?(fe(),e.charCodeAt(w)===36?(F=ut,w++):(F=n,ie===0&&me(Tn)),F!==n?(W=fe(),ue=Ps(),ue!==n?(Pe=p,p=y5(G,ue)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)),p}function a9(){var p,G;return p=w,G=Ps(),G!==n&&(Pe=p,G=g5(G)),p=G,p===n&&(p=ni()),p}function r9(){var p;return p=a9(),p}function i9(){var p,G;return p=w,fe(),G=o9(),G===n&&(G=u9(),G===n&&(G=c9())),G!==n?(fe(),Pe=p,p=b5(G)):(w=p,p=n),p}function o9(){var p,G,F;return p=w,e.substr(w,6)===B?(G=B,w+=6):(G=n,ie===0&&me(za)),G!==n?(fe(),F=An(),F!==n?(Pe=p,p=M5(F)):(w=p,p=n)):(w=p,p=n),p}function u9(){var p,G,F;return p=w,e.substr(w,6)===xe?(G=xe,w+=6):(G=n,ie===0&&me(Wa)),G!==n?(fe(),F=An(),F!==n?(Pe=p,p=x5(F)):(w=p,p=n)):(w=p,p=n),p}function c9(){var p,G;return p=w,e.substr(w,4)===rt?(G=rt,w+=4):(G=n,ie===0&&me(It)),G!==n&&(Pe=p,G=C5()),p=G,p}function l9(){var p;return p=r9(),p===n&&(p=i9()),p}var p9=function(p){this.type_="atom",this.source_=p,this.location_=Ku()},Ya=function(p,G,F,W){this.type_="pattern",this.arguments_={alignment:G,_steps:W},F!==void 0&&(this.arguments_.seed=F),this.source_=p},h9=function(p,G,F){this.type_=p,this.arguments_=G,this.source_=F},d9=function(p,G){this.type_="element",this.source_=p,this.options_=G,this.location_=Ku()},si=function(p,G){this.type_="command",this.name_=p,this.options_=G},ai=0;if(qs=r(),t.peg$library)return{peg$result:qs,peg$currPos:w,peg$FAILED:n,peg$maxFailExpected:Na,peg$maxFailPos:Qt};if(qs!==n&&w===e.length)return qs;throw qs!==n&&w<e.length&&me(P5()),v5(Na,Qt<e.length?e.charAt(Qt):null,Qt<e.length?ti(Qt,Qt+1):ti(Qt,Qt))}const FS=["start"],D2=3e-4,AS=(e,t)=>(n,s)=>{const a=e.source_[s].options_?.ops,r=n.__steps_source;if(a)for(const i of a)switch(i.type_){case"stretch":{const o=["fast","slow"],{type:u,amount:c}=i.arguments_;if(!o.includes(u))throw new Error(`mini: stretch: type must be one of ${o.join("|")} but got ${u}`);n=j(n)[u](t(c));break}case"replicate":{const{amount:o}=i.arguments_;n=j(n),n=n._repeatCycles(o)._fast(o);break}case"bjorklund":{i.arguments_.rotation?n=n.euclidRot(t(i.arguments_.pulse),t(i.arguments_.step),t(i.arguments_.rotation)):n=n.euclid(t(i.arguments_.pulse),t(i.arguments_.step));break}case"degradeBy":{n=j(n)._degradeByWith(At.early(D2*i.arguments_.seed),i.arguments_.amount??.5);break}case"tail":{const o=t(i.arguments_.element);n=n.fmap(u=>c=>Array.isArray(u)?[...u,c]:[u,c]).appLeft(o);break}case"range":{const o=t(i.arguments_.element);n=j(n);const u=(c,h,d=1)=>Array.from({length:Math.abs(h-c)/d+1},(m,g)=>c<h?c+g*d:c-g*d);n=((c,h)=>c.squeezeBind(d=>h.bind(m=>Xt(...u(d,m)))))(n,o);break}default:console.warn(`operator "${i.type_}" not implemented`)}return n.__steps_source=n.__steps_source||r,n};function Is(e,t,n,s=0){n?.(e);const a=r=>Is(r,t,n,s);switch(e.type_){case"pattern":{const r=e.source_.map(c=>a(c)).map(AS(e,a)),i=e.arguments_.alignment,o=r.filter(c=>c.__steps_source);let u;switch(i){case"stack":{u=qe(...r),o.length&&(u._steps=sn(...o.map(c=>U(c._steps))));break}case"polymeter_slowcat":{u=qe(...r.map(c=>c._slow(c.__weight))),o.length&&(u._steps=sn(...o.map(c=>U(c._steps))));break}case"polymeter":{const c=e.arguments_.stepsPerCycle?a(e.arguments_.stepsPerCycle).fmap(d=>U(d)):_e(U(r.length>0?r[0].__weight:1)),h=r.map(d=>d.fast(c.fmap(m=>m.div(d.__weight))));u=qe(...h);break}case"rand":{u=Xr(At.early(D2*e.arguments_.seed).segment(1),r),o.length&&(u._steps=sn(...o.map(c=>U(c._steps))));break}case"feet":{u=Xt(...r);break}default:{if(e.source_.some(c=>!!c.options_?.weight)){const c=e.source_.reduce((h,d)=>h.add(d.options_?.weight||U(1)),U(0));u=Go(...e.source_.map((h,d)=>[h.options_?.weight||U(1),r[d]])),u.__weight=c,u._steps=c,o.length&&(u._steps=u._steps.mul(sn(...o.map(h=>U(h._steps)))))}else u=un(...r),u._steps=r.length;e.arguments_._steps&&(u.__steps_source=!0)}}return o.length&&(u.__steps_source=!0),u}case"element":return a(e.source_);case"atom":{if(e.source_==="~"||e.source_==="-")return Ie;if(!e.location_)return console.warn("no location for",e),e.source_;const r=isNaN(Number(e.source_))?e.source_:Number(e.source_);if(s===-1)return _e(r);const[i,o]=ru(t,e,s);return _e(r).withLoc(i,o)}case"stretch":return a(e.source_).slow(a(e.arguments_.amount));default:return console.warn(`node type "${e.type_}" not implemented -> returning silence`),Ie}}const ru=(e,t,n=0)=>{const{start:s,end:a}=t.location_,r=e?.split("").slice(s.offset,a.offset).join(""),[i=0,o=0]=r?r.split(t.source_).map(u=>u.split("").filter(c=>c===" ").length):[];return[s.offset+i+n,a.offset-o+n]},Da=(e,t=0,n=e)=>{try{return S2(e)}catch(s){const a=[s.location.start.offset+t,s.location.end.offset+t],r=n.slice(0,a[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${r}: ${s.message}`)}},L2=(e,t,n)=>{const s=Da(e,t,n);let a=[];return Is(s,e,r=>{r.type_==="atom"&&a.push(r)},-1),a},iu=(e,t=0,n)=>L2(e,t,n).map(s=>ru(e,s,t)),ou=(...e)=>{const t=e.map(n=>{const s=`"${n}"`,a=Da(s);return Is(a,s)});return un(...t)},SS=(e,t)=>{const n=`"${e}"`,s=Da(n);return Is(s,n,null,t)},DS=e=>{const t=Da(e);return Is(t,e)};function LS(e){return typeof e=="string"?ou(e):j(e)}function E2(){tp(ou)}const ES=Object.freeze(Object.defineProperty({__proto__:null,StartRules:FS,SyntaxError:ps,getLeafLocation:ru,getLeafLocations:iu,getLeaves:L2,h:DS,m:SS,mini:ou,mini2ast:Da,miniAllStrings:E2,minify:LS,parse:S2,patternifyAST:Is},Symbol.toStringTag,{value:"Module"}));var kS=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],k2=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],RS="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",R2="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",hi={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},di="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",VS={5:di,"5module":di+" export import",6:di+" const class extends export import super"},BS=/^in(stanceof)?$/,zS=new RegExp("["+R2+"]"),WS=new RegExp("["+R2+RS+"]");function Ji(e,t){for(var n=65536,s=0;s<t.length;s+=2){if(n+=t[s],n>e)return!1;if(n+=t[s+1],n>=e)return!0}return!1}function Rn(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&zS.test(String.fromCharCode(e)):t===!1?!1:Ji(e,k2)}function Vs(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&WS.test(String.fromCharCode(e)):t===!1?!1:Ji(e,k2)||Ji(e,kS)}var Ve=function(e,t){t===void 0&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function Yt(e,t){return new Ve(e,{beforeExpr:!0,binop:t})}var Ht={beforeExpr:!0},Lt={startsExpr:!0},uu={};function ke(e,t){return t===void 0&&(t={}),t.keyword=e,uu[e]=new Ve(e,t)}var x={num:new Ve("num",Lt),regexp:new Ve("regexp",Lt),string:new Ve("string",Lt),name:new Ve("name",Lt),privateId:new Ve("privateId",Lt),eof:new Ve("eof"),bracketL:new Ve("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ve("]"),braceL:new Ve("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ve("}"),parenL:new Ve("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ve(")"),comma:new Ve(",",Ht),semi:new Ve(";",Ht),colon:new Ve(":",Ht),dot:new Ve("."),question:new Ve("?",Ht),questionDot:new Ve("?."),arrow:new Ve("=>",Ht),template:new Ve("template"),invalidTemplate:new Ve("invalidTemplate"),ellipsis:new Ve("...",Ht),backQuote:new Ve("`",Lt),dollarBraceL:new Ve("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ve("=",{beforeExpr:!0,isAssign:!0}),assign:new Ve("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ve("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ve("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Yt("||",1),logicalAND:Yt("&&",2),bitwiseOR:Yt("|",3),bitwiseXOR:Yt("^",4),bitwiseAND:Yt("&",5),equality:Yt("==/!=/===/!==",6),relational:Yt("</>/<=/>=",7),bitShift:Yt("<</>>/>>>",8),plusMin:new Ve("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Yt("%",10),star:Yt("*",10),slash:Yt("/",10),starstar:new Ve("**",{beforeExpr:!0}),coalesce:Yt("??",1),_break:ke("break"),_case:ke("case",Ht),_catch:ke("catch"),_continue:ke("continue"),_debugger:ke("debugger"),_default:ke("default",Ht),_do:ke("do",{isLoop:!0,beforeExpr:!0}),_else:ke("else",Ht),_finally:ke("finally"),_for:ke("for",{isLoop:!0}),_function:ke("function",Lt),_if:ke("if"),_return:ke("return",Ht),_switch:ke("switch"),_throw:ke("throw",Ht),_try:ke("try"),_var:ke("var"),_const:ke("const"),_while:ke("while",{isLoop:!0}),_with:ke("with"),_new:ke("new",{beforeExpr:!0,startsExpr:!0}),_this:ke("this",Lt),_super:ke("super",Lt),_class:ke("class",Lt),_extends:ke("extends",Ht),_export:ke("export"),_import:ke("import",Lt),_null:ke("null",Lt),_true:ke("true",Lt),_false:ke("false",Lt),_in:ke("in",{beforeExpr:!0,binop:7}),_instanceof:ke("instanceof",{beforeExpr:!0,binop:7}),_typeof:ke("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ke("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ke("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Jt=/\r\n?|\n|\u2028|\u2029/,NS=new RegExp(Jt.source,"g");function Ys(e){return e===10||e===13||e===8232||e===8233}function V2(e,t,n){n===void 0&&(n=e.length);for(var s=t;s<n;s++){var a=e.charCodeAt(s);if(Ys(a))return s<n-1&&a===13&&e.charCodeAt(s+1)===10?s+2:s+1}return-1}var B2=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Kt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,z2=Object.prototype,TS=z2.hasOwnProperty,IS=z2.toString,Hs=Object.hasOwn||function(e,t){return TS.call(e,t)},Ac=Array.isArray||function(e){return IS.call(e)==="[object Array]"},Sc=Object.create(null);function jn(e){return Sc[e]||(Sc[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Vn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var YS=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,va=function(e,t){this.line=e,this.column=t};va.prototype.offset=function(e){return new va(this.line,this.column+e)};var Sr=function(e,t,n){this.start=t,this.end=n,e.sourceFile!==null&&(this.source=e.sourceFile)};function W2(e,t){for(var n=1,s=0;;){var a=V2(e,s,t);if(a<0)return new va(n,t-s);++n,s=a}}var Oi={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Dc=!1;function HS(e){var t={};for(var n in Oi)t[n]=e&&Hs(e,n)?e[n]:Oi[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Dc&&typeof console=="object"&&console.warn&&(Dc=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Ac(t.onToken)){var s=t.onToken;t.onToken=function(a){return s.push(a)}}return Ac(t.onComment)&&(t.onComment=KS(t,t.onComment)),t}function KS(e,t){return function(n,s,a,r,i,o){var u={type:n?"Block":"Line",value:s,start:a,end:r};e.locations&&(u.loc=new Sr(this,i,o)),e.ranges&&(u.range=[a,r]),t.push(u)}}var Xa=1,Ks=2,cu=4,N2=8,T2=16,I2=32,lu=64,Y2=128,La=256,pu=Xa|Ks|La;function hu(e,t){return Ks|(e?cu:0)|(t?N2:0)}var lr=0,du=1,zn=2,H2=3,K2=4,_2=5,lt=function(e,t,n){this.options=e=HS(e),this.sourceFile=e.sourceFile,this.keywords=jn(VS[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var s="";e.allowReserved!==!0&&(s=hi[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(s+=" await")),this.reservedWords=jn(s);var a=(s?s+" ":"")+hi.strict;this.reservedWordsStrict=jn(a),this.reservedWordsStrictBind=jn(a+" "+hi.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Jt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=x.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Xa),this.regexpState=null,this.privateNameStack=[]},vn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};lt.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};vn.inFunction.get=function(){return(this.currentVarScope().flags&Ks)>0};vn.inGenerator.get=function(){return(this.currentVarScope().flags&N2)>0&&!this.currentVarScope().inClassFieldInit};vn.inAsync.get=function(){return(this.currentVarScope().flags&cu)>0&&!this.currentVarScope().inClassFieldInit};vn.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&La)return!1;if(t.flags&Ks)return(t.flags&cu)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};vn.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&lu)>0||n||this.options.allowSuperOutsideMethod};vn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Y2)>0};vn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};vn.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Ks|La))>0||n};vn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&La)>0};lt.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,s=0;s<e.length;s++)n=e[s](n);return n};lt.parse=function(e,t){return new this(t,e).parse()};lt.parseExpressionAt=function(e,t,n){var s=new this(n,e,t);return s.nextToken(),s.parseExpression()};lt.tokenizer=function(e,t){return new this(t,e)};Object.defineProperties(lt.prototype,vn);var Dt=lt.prototype,_S=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Dt.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Kt.lastIndex=e,e+=Kt.exec(this.input)[0].length;var t=_S.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Kt.lastIndex=e+t[0].length;var n=Kt.exec(this.input),s=n.index+n[0].length,a=this.input.charAt(s);return a===";"||a==="}"||Jt.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(a)||a==="!"&&this.input.charAt(s+1)==="=")}e+=t[0].length,Kt.lastIndex=e,e+=Kt.exec(this.input)[0].length,this.input[e]===";"&&e++}};Dt.eat=function(e){return this.type===e?(this.next(),!0):!1};Dt.isContextual=function(e){return this.type===x.name&&this.value===e&&!this.containsEsc};Dt.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Dt.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Dt.canInsertSemicolon=function(){return this.type===x.eof||this.type===x.braceR||Jt.test(this.input.slice(this.lastTokEnd,this.start))};Dt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Dt.semicolon=function(){!this.eat(x.semi)&&!this.insertSemicolon()&&this.unexpected()};Dt.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Dt.expect=function(e){this.eat(e)||this.unexpected()};Dt.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Dr=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Dt.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Dt.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,s=e.doubleProto;if(!t)return n>=0||s>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),s>=0&&this.raiseRecoverable(s,"Redefinition of __proto__ property")};Dt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Dt.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var re=lt.prototype;re.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==x.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var s=0,a=Object.keys(this.undefinedExports);s<a.length;s+=1){var r=a[s];this.raiseRecoverable(this.undefinedExports[r].start,"Export '"+r+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var mu={kind:"loop"},jS={kind:"switch"};re.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Kt.lastIndex=this.pos;var t=Kt.exec(this.input),n=this.pos+t[0].length,s=this.input.charCodeAt(n);if(s===91||s===92)return!0;if(e)return!1;if(s===123||s>55295&&s<56320)return!0;if(Rn(s,!0)){for(var a=n+1;Vs(s=this.input.charCodeAt(a),!0);)++a;if(s===92||s>55295&&s<56320)return!0;var r=this.input.slice(n,a);if(!BS.test(r))return!0}return!1};re.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Kt.lastIndex=this.pos;var e=Kt.exec(this.input),t=this.pos+e[0].length,n;return!Jt.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Vs(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};re.parseStatement=function(e,t,n){var s=this.type,a=this.startNode(),r;switch(this.isLet(e)&&(s=x._var,r="let"),s){case x._break:case x._continue:return this.parseBreakContinueStatement(a,s.keyword);case x._debugger:return this.parseDebuggerStatement(a);case x._do:return this.parseDoStatement(a);case x._for:return this.parseForStatement(a);case x._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case x._class:return e&&this.unexpected(),this.parseClass(a,!0);case x._if:return this.parseIfStatement(a);case x._return:return this.parseReturnStatement(a);case x._switch:return this.parseSwitchStatement(a);case x._throw:return this.parseThrowStatement(a);case x._try:return this.parseTryStatement(a);case x._const:case x._var:return r=r||this.value,e&&r!=="var"&&this.unexpected(),this.parseVarStatement(a,r);case x._while:return this.parseWhileStatement(a);case x._with:return this.parseWithStatement(a);case x.braceL:return this.parseBlock(!0,a);case x.semi:return this.parseEmptyStatement(a);case x._export:case x._import:if(this.options.ecmaVersion>10&&s===x._import){Kt.lastIndex=this.pos;var i=Kt.exec(this.input),o=this.pos+i[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===x._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var c=this.value,h=this.parseExpression();return s===x.name&&h.type==="Identifier"&&this.eat(x.colon)?this.parseLabeledStatement(a,c,h,e):this.parseExpressionStatement(a,h)}};re.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(x.semi)||this.insertSemicolon()?e.label=null:this.type!==x.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var s=0;s<this.labels.length;++s){var a=this.labels[s];if((e.label==null||a.name===e.label.name)&&(a.kind!=null&&(n||a.kind==="loop")||e.label&&n))break}return s===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};re.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};re.parseDoStatement=function(e){return this.next(),this.labels.push(mu),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(x._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(x.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};re.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(mu),this.enterScope(0),this.expect(x.parenL),this.type===x.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===x._var||this.type===x._const||n){var s=this.startNode(),a=n?"let":this.value;return this.next(),this.parseVar(s,!0,a),this.finishNode(s,"VariableDeclaration"),(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&s.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===x._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,s)):(t>-1&&this.unexpected(t),this.parseFor(e,s))}var r=this.isContextual("let"),i=!1,o=this.containsEsc,u=new Dr,c=this.start,h=t>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===x._in||(i=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===x._in&&this.unexpected(t),e.await=!0):i&&this.options.ecmaVersion>=8&&(h.start===c&&!o&&h.type==="Identifier"&&h.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),r&&i&&this.raise(h.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(h,!1,u),this.checkLValPattern(h),this.parseForIn(e,h)):(this.checkExpressionErrors(u,!0),t>-1&&this.unexpected(t),this.parseFor(e,h))};re.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,ha|(n?0:Qi),!1,t)};re.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(x._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};re.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(x.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};re.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(x.braceL),this.labels.push(jS),this.enterScope(0);for(var t,n=!1;this.type!==x.braceR;)if(this.type===x._case||this.type===x._default){var s=this.type===x._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),s?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(x.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};re.parseThrowStatement=function(e){return this.next(),Jt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var US=[];re.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?I2:0),this.checkLValPattern(e,t?K2:zn),this.expect(x.parenR),e};re.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===x._catch){var t=this.startNode();this.next(),this.eat(x.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(x._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};re.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};re.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(mu),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};re.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};re.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};re.parseLabeledStatement=function(e,t,n,s){for(var a=0,r=this.labels;a<r.length;a+=1){var i=r[a];i.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===x._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===e.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(s?s.indexOf("label")===-1?s+"label":s:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};re.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};re.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(x.braceL),e&&this.enterScope(0);this.type!==x.braceR;){var s=this.parseStatement(null);t.body.push(s)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};re.parseFor=function(e,t){return e.init=t,this.expect(x.semi),e.test=this.type===x.semi?null:this.parseExpression(),this.expect(x.semi),e.update=this.type===x.parenR?null:this.parseExpression(),this.expect(x.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};re.parseForIn=function(e,t){var n=this.type===x._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(x.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};re.parseVar=function(e,t,n,s){for(e.declarations=[],e.kind=n;;){var a=this.startNode();if(this.parseVarId(a,n),this.eat(x.eq)?a.init=this.parseMaybeAssign(t):!s&&n==="const"&&!(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!s&&a.id.type!=="Identifier"&&!(t&&(this.type===x._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):a.init=null,e.declarations.push(this.finishNode(a,"VariableDeclarator")),!this.eat(x.comma))break}return e};re.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?du:zn,!1)};var ha=1,Qi=2,j2=4;re.parseFunction=function(e,t,n,s,a){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!s)&&(this.type===x.star&&t&Qi&&this.unexpected(),e.generator=this.eat(x.star)),this.options.ecmaVersion>=8&&(e.async=!!s),t&ha&&(e.id=t&j2&&this.type!==x.name?null:this.parseIdent(),e.id&&!(t&Qi)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?du:zn:H2));var r=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hu(e.async,e.generator)),t&ha||(e.id=this.type===x.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,a),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(e,t&ha?"FunctionDeclaration":"FunctionExpression")};re.parseFunctionParams=function(e){this.expect(x.parenL),e.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};re.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var s=this.enterClassBody(),a=this.startNode(),r=!1;for(a.body=[],this.expect(x.braceL);this.type!==x.braceR;){var i=this.parseClassElement(e.superClass!==null);i&&(a.body.push(i),i.type==="MethodDefinition"&&i.kind==="constructor"?(r&&this.raiseRecoverable(i.start,"Duplicate constructor in the same class"),r=!0):i.key&&i.key.type==="PrivateIdentifier"&&JS(s,i)&&this.raiseRecoverable(i.key.start,"Identifier '#"+i.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(a,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};re.parseClassElement=function(e){if(this.eat(x.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),s="",a=!1,r=!1,i="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(x.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===x.star?o=!0:s="static"}if(n.static=o,!s&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===x.star)&&!this.canInsertSemicolon()?r=!0:s="async"),!s&&(t>=9||!r)&&this.eat(x.star)&&(a=!0),!s&&!r&&!a){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?i=u:s=u)}if(s?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=s,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===x.parenL||i!=="method"||a||r){var c=!n.static&&pr(n,"constructor"),h=c&&e;c&&i!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":i,this.parseClassMethod(n,a,r,h)}else this.parseClassField(n);return n};re.isClassElementNameStart=function(){return this.type===x.name||this.type===x.privateId||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword};re.parseClassElementName=function(e){this.type===x.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};re.parseClassMethod=function(e,t,n,s){var a=e.key;e.kind==="constructor"?(t&&this.raise(a.start,"Constructor can't be a generator"),n&&this.raise(a.start,"Constructor can't be an async method")):e.static&&pr(e,"prototype")&&this.raise(a.start,"Classes may not have a static property named prototype");var r=e.value=this.parseMethod(t,n,s);return e.kind==="get"&&r.params.length!==0&&this.raiseRecoverable(r.start,"getter should have no params"),e.kind==="set"&&r.params.length!==1&&this.raiseRecoverable(r.start,"setter should have exactly one param"),e.kind==="set"&&r.params[0].type==="RestElement"&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};re.parseClassField=function(e){if(pr(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&pr(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(x.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};re.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(La|lu);this.type!==x.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};re.parseClassId=function(e,t){this.type===x.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,zn,!1)):(t===!0&&this.unexpected(),e.id=null)};re.parseClassSuper=function(e){e.superClass=this.eat(x._extends)?this.parseExprSubscripts(null,!1):null};re.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};re.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var s=this.privateNameStack.length,a=s===0?null:this.privateNameStack[s-1],r=0;r<n.length;++r){var i=n[r];Hs(t,i.name)||(a?a.used.push(i):this.raiseRecoverable(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"))}};function JS(e,t){var n=t.key.name,s=e[n],a="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(a=(t.static?"s":"i")+t.kind),s==="iget"&&a==="iset"||s==="iset"&&a==="iget"||s==="sget"&&a==="sset"||s==="sset"&&a==="sget"?(e[n]="true",!1):s?!0:(e[n]=a,!1)}function pr(e,t){var n=e.computed,s=e.key;return!n&&(s.type==="Identifier"&&s.name===t||s.type==="Literal"&&s.value===t)}re.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==x.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};re.parseExport=function(e,t){if(this.next(),this.eat(x.star))return this.parseExportAllDeclaration(e,t);if(this.eat(x._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==x.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,s=e.specifiers;n<s.length;n+=1){var a=s[n];this.checkUnreserved(a.local),this.checkLocalExport(a.local),a.local.type==="Literal"&&this.raise(a.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};re.parseExportDeclaration=function(e){return this.parseStatement(null)};re.parseExportDefaultDeclaration=function(){var e;if(this.type===x._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,ha|j2,!1,e)}else if(this.type===x._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var s=this.parseMaybeAssign();return this.semicolon(),s}};re.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Hs(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};re.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var s=0,a=t.properties;s<a.length;s+=1){var r=a[s];this.checkPatternExport(e,r)}else if(n==="ArrayPattern")for(var i=0,o=t.elements;i<o.length;i+=1){var u=o[i];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};re.checkVariableExport=function(e,t){if(e)for(var n=0,s=t;n<s.length;n+=1){var a=s[n];this.checkPatternExport(e,a.id)}};re.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};re.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};re.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(x.braceL);!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;t.push(this.parseExportSpecifier(e))}return t};re.parseImport=function(e){return this.next(),this.type===x.string?(e.specifiers=US,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===x.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};re.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,zn),this.finishNode(e,"ImportSpecifier")};re.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,zn),this.finishNode(e,"ImportDefaultSpecifier")};re.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,zn),this.finishNode(e,"ImportNamespaceSpecifier")};re.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===x.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(x.comma)))return e;if(this.type===x.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(x.braceL);!this.eat(x.braceR);){if(t)t=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;e.push(this.parseImportSpecifier())}return e};re.parseWithClause=function(){var e=[];if(!this.eat(x._with))return e;this.expect(x.braceL);for(var t={},n=!0;!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var s=this.parseImportAttribute(),a=s.key.type==="Identifier"?s.key.name:s.key.value;Hs(t,a)&&this.raiseRecoverable(s.key.start,"Duplicate attribute key '"+a+"'"),t[a]=!0,e.push(s)}return e};re.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===x.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(x.colon),this.type!==x.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")};re.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===x.string){var e=this.parseLiteral(this.value);return YS.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};re.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};re.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Ot=lt.prototype;Ot.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var s=0,a=e.properties;s<a.length;s+=1){var r=a[s];this.toAssignable(r,t),r.type==="RestElement"&&(r.argument.type==="ArrayPattern"||r.argument.type==="ObjectPattern")&&this.raise(r.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Ot.toAssignableList=function(e,t){for(var n=e.length,s=0;s<n;s++){var a=e[s];a&&this.toAssignable(a,t)}if(n){var r=e[n-1];this.options.ecmaVersion===6&&t&&r&&r.type==="RestElement"&&r.argument.type!=="Identifier"&&this.unexpected(r.argument.start)}return e};Ot.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Ot.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==x.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Ot.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case x.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(x.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case x.braceL:return this.parseObj(!0)}return this.parseIdent()};Ot.parseBindingList=function(e,t,n,s){for(var a=[],r=!0;!this.eat(e);)if(r?r=!1:this.expect(x.comma),t&&this.type===x.comma)a.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===x.ellipsis){var i=this.parseRestBinding();this.parseBindingListItem(i),a.push(i),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else a.push(this.parseAssignableListItem(s))}return a};Ot.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Ot.parseBindingListItem=function(e){return e};Ot.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(x.eq))return n;var s=this.startNodeAt(e,t);return s.left=n,s.right=this.parseMaybeAssign(),this.finishNode(s,"AssignmentPattern")};Ot.checkLValSimple=function(e,t,n){t===void 0&&(t=lr);var s=t!==lr;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(s?"Binding ":"Assigning to ")+e.name+" in strict mode"),s&&(t===zn&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Hs(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==_2&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":s&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return s&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(s?"Binding":"Assigning to")+" rvalue")}};Ot.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=lr),e.type){case"ObjectPattern":for(var s=0,a=e.properties;s<a.length;s+=1){var r=a[s];this.checkLValInnerPattern(r,t,n)}break;case"ArrayPattern":for(var i=0,o=e.elements;i<o.length;i+=1){var u=o[i];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Ot.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=lr),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var tn=function(e,t,n,s,a){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=s,this.generator=!!a},nt={b_stat:new tn("{",!1),b_expr:new tn("{",!0),b_tmpl:new tn("${",!1),p_stat:new tn("(",!1),p_expr:new tn("(",!0),q_tmpl:new tn("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new tn("function",!1),f_expr:new tn("function",!0),f_expr_gen:new tn("function",!0,!1,null,!0),f_gen:new tn("function",!1,!1,null,!0)},_s=lt.prototype;_s.initialContext=function(){return[nt.b_stat]};_s.curContext=function(){return this.context[this.context.length-1]};_s.braceIsBlock=function(e){var t=this.curContext();return t===nt.f_expr||t===nt.f_stat?!0:e===x.colon&&(t===nt.b_stat||t===nt.b_expr)?!t.isExpr:e===x._return||e===x.name&&this.exprAllowed?Jt.test(this.input.slice(this.lastTokEnd,this.start)):e===x._else||e===x.semi||e===x.eof||e===x.parenR||e===x.arrow?!0:e===x.braceL?t===nt.b_stat:e===x._var||e===x._const||e===x.name?!1:!this.exprAllowed};_s.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};_s.updateContext=function(e){var t,n=this.type;n.keyword&&e===x.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};_s.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};x.parenR.updateContext=x.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===nt.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};x.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?nt.b_stat:nt.b_expr),this.exprAllowed=!0};x.dollarBraceL.updateContext=function(){this.context.push(nt.b_tmpl),this.exprAllowed=!0};x.parenL.updateContext=function(e){var t=e===x._if||e===x._for||e===x._with||e===x._while;this.context.push(t?nt.p_stat:nt.p_expr),this.exprAllowed=!0};x.incDec.updateContext=function(){};x._function.updateContext=x._class.updateContext=function(e){e.beforeExpr&&e!==x._else&&!(e===x.semi&&this.curContext()!==nt.p_stat)&&!(e===x._return&&Jt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===x.colon||e===x.braceL)&&this.curContext()===nt.b_stat)?this.context.push(nt.f_expr):this.context.push(nt.f_stat),this.exprAllowed=!1};x.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};x.backQuote.updateContext=function(){this.curContext()===nt.q_tmpl?this.context.pop():this.context.push(nt.q_tmpl),this.exprAllowed=!1};x.star.updateContext=function(e){if(e===x._function){var t=this.context.length-1;this.context[t]===nt.f_expr?this.context[t]=nt.f_expr_gen:this.context[t]=nt.f_gen}this.exprAllowed=!0};x.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==x.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Me=lt.prototype;Me.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var s=e.key,a;switch(s.type){case"Identifier":a=s.name;break;case"Literal":a=String(s.value);break;default:return}var r=e.kind;if(this.options.ecmaVersion>=6){a==="__proto__"&&r==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=s.start):this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),t.proto=!0);return}a="$"+a;var i=t[a];if(i){var o;r==="init"?o=this.strict&&i.init||i.get||i.set:o=i.init||i[r],o&&this.raiseRecoverable(s.start,"Redefinition of property")}else i=t[a]={init:!1,get:!1,set:!1};i[r]=!0}};Me.parseExpression=function(e,t){var n=this.start,s=this.startLoc,a=this.parseMaybeAssign(e,t);if(this.type===x.comma){var r=this.startNodeAt(n,s);for(r.expressions=[a];this.eat(x.comma);)r.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(r,"SequenceExpression")}return a};Me.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var s=!1,a=-1,r=-1,i=-1;t?(a=t.parenthesizedAssign,r=t.trailingComma,i=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Dr,s=!0);var o=this.start,u=this.startLoc;(this.type===x.parenL||this.type===x.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var h=this.startNodeAt(o,u);return h.operator=this.value,this.type===x.eq&&(c=this.toAssignable(c,!1,t)),s||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===x.eq?this.checkLValPattern(c):this.checkLValSimple(c),h.left=c,this.next(),h.right=this.parseMaybeAssign(e),i>-1&&(t.doubleProto=i),this.finishNode(h,"AssignmentExpression")}else s&&this.checkExpressionErrors(t,!0);return a>-1&&(t.parenthesizedAssign=a),r>-1&&(t.trailingComma=r),c};Me.parseMaybeConditional=function(e,t){var n=this.start,s=this.startLoc,a=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return a;if(this.eat(x.question)){var r=this.startNodeAt(n,s);return r.test=a,r.consequent=this.parseMaybeAssign(),this.expect(x.colon),r.alternate=this.parseMaybeAssign(e),this.finishNode(r,"ConditionalExpression")}return a};Me.parseExprOps=function(e,t){var n=this.start,s=this.startLoc,a=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||a.start===n&&a.type==="ArrowFunctionExpression"?a:this.parseExprOp(a,n,s,-1,e)};Me.parseExprOp=function(e,t,n,s,a){var r=this.type.binop;if(r!=null&&(!a||this.type!==x._in)&&r>s){var i=this.type===x.logicalOR||this.type===x.logicalAND,o=this.type===x.coalesce;o&&(r=x.logicalAND.binop);var u=this.value;this.next();var c=this.start,h=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,a),c,h,r,a),m=this.buildBinary(t,n,e,d,u,i||o);return(i&&this.type===x.coalesce||o&&(this.type===x.logicalOR||this.type===x.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(m,t,n,s,a)}return e};Me.buildBinary=function(e,t,n,s,a,r){s.type==="PrivateIdentifier"&&this.raise(s.start,"Private identifier can only be left side of binary expression");var i=this.startNodeAt(e,t);return i.left=n,i.operator=a,i.right=s,this.finishNode(i,r?"LogicalExpression":"BinaryExpression")};Me.parseMaybeUnary=function(e,t,n,s){var a=this.start,r=this.startLoc,i;if(this.isContextual("await")&&this.canAwait)i=this.parseAwait(s),t=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===x.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,s),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&U2(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&qi(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,i=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===x.privateId)(s||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),i=this.parsePrivateIdent(),this.type!==x._in&&this.unexpected();else{if(i=this.parseExprSubscripts(e,s),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(a,r);c.operator=this.value,c.prefix=!1,c.argument=i,this.checkLValSimple(i),this.next(),i=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(x.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(a,r,i,this.parseMaybeUnary(null,!1,!1,s),"**",!1);else return i};function U2(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&U2(e.expression)}function qi(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&qi(e.expression)||e.type==="ParenthesizedExpression"&&qi(e.expression)}Me.parseExprSubscripts=function(e,t){var n=this.start,s=this.startLoc,a=this.parseExprAtom(e,t);if(a.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return a;var r=this.parseSubscripts(a,n,s,!1,t);return e&&r.type==="MemberExpression"&&(e.parenthesizedAssign>=r.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=r.start&&(e.parenthesizedBind=-1),e.trailingComma>=r.start&&(e.trailingComma=-1)),r};Me.parseSubscripts=function(e,t,n,s,a){for(var r=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,i=!1;;){var o=this.parseSubscript(e,t,n,s,r,i,a);if(o.optional&&(i=!0),o===e||o.type==="ArrowFunctionExpression"){if(i){var u=this.startNodeAt(t,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}e=o}};Me.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(x.arrow)};Me.parseSubscriptAsyncArrow=function(e,t,n,s){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,s)};Me.parseSubscript=function(e,t,n,s,a,r,i){var o=this.options.ecmaVersion>=11,u=o&&this.eat(x.questionDot);s&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(x.bracketL);if(c||u&&this.type!==x.parenL&&this.type!==x.backQuote||this.eat(x.dot)){var h=this.startNodeAt(t,n);h.object=e,c?(h.property=this.parseExpression(),this.expect(x.bracketR)):this.type===x.privateId&&e.type!=="Super"?h.property=this.parsePrivateIdent():h.property=this.parseIdent(this.options.allowReserved!=="never"),h.computed=!!c,o&&(h.optional=u),e=this.finishNode(h,"MemberExpression")}else if(!s&&this.eat(x.parenL)){var d=new Dr,m=this.yieldPos,g=this.awaitPos,y=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var C=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1,d);if(a&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=m,this.awaitPos=g,this.awaitIdentPos=y,this.parseSubscriptAsyncArrow(t,n,C,i);this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=g||this.awaitPos,this.awaitIdentPos=y||this.awaitIdentPos;var X=this.startNodeAt(t,n);X.callee=e,X.arguments=C,o&&(X.optional=u),e=this.finishNode(X,"CallExpression")}else if(this.type===x.backQuote){(u||r)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var S=this.startNodeAt(t,n);S.tag=e,S.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(S,"TaggedTemplateExpression")}return e};Me.parseExprAtom=function(e,t,n){this.type===x.slash&&this.readRegexp();var s,a=this.potentialArrowAt===this.start;switch(this.type){case x._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),s=this.startNode(),this.next(),this.type===x.parenL&&!this.allowDirectSuper&&this.raise(s.start,"super() call outside constructor of a subclass"),this.type!==x.dot&&this.type!==x.bracketL&&this.type!==x.parenL&&this.unexpected(),this.finishNode(s,"Super");case x._this:return s=this.startNode(),this.next(),this.finishNode(s,"ThisExpression");case x.name:var r=this.start,i=this.startLoc,o=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(x._function))return this.overrideContext(nt.f_expr),this.parseFunction(this.startNodeAt(r,i),0,!1,!0,t);if(a&&!this.canInsertSemicolon()){if(this.eat(x.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===x.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(x.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[u],!0,t)}return u;case x.regexp:var c=this.value;return s=this.parseLiteral(c.value),s.regex={pattern:c.pattern,flags:c.flags},s;case x.num:case x.string:return this.parseLiteral(this.value);case x._null:case x._true:case x._false:return s=this.startNode(),s.value=this.type===x._null?null:this.type===x._true,s.raw=this.type.keyword,this.next(),this.finishNode(s,"Literal");case x.parenL:var h=this.start,d=this.parseParenAndDistinguishExpression(a,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=h),e.parenthesizedBind<0&&(e.parenthesizedBind=h)),d;case x.bracketL:return s=this.startNode(),this.next(),s.elements=this.parseExprList(x.bracketR,!0,!0,e),this.finishNode(s,"ArrayExpression");case x.braceL:return this.overrideContext(nt.b_expr),this.parseObj(!1,e);case x._function:return s=this.startNode(),this.next(),this.parseFunction(s,0);case x._class:return this.parseClass(this.startNode(),!1);case x._new:return this.parseNew();case x.backQuote:return this.parseTemplate();case x._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Me.parseExprAtomDefault=function(){this.unexpected()};Me.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===x.parenL&&!e)return this.parseDynamicImport(t);if(this.type===x.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Me.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(x.parenR)?e.options=null:(this.expect(x.comma),this.afterTrailingComma(x.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(x.parenR)||(this.expect(x.comma),this.afterTrailingComma(x.parenR)||this.unexpected())));else if(!this.eat(x.parenR)){var t=this.start;this.eat(x.comma)&&this.eat(x.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Me.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Me.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Me.parseParenExpression=function(){this.expect(x.parenL);var e=this.parseExpression();return this.expect(x.parenR),e};Me.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Me.parseParenAndDistinguishExpression=function(e,t){var n=this.start,s=this.startLoc,a,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var i=this.start,o=this.startLoc,u=[],c=!0,h=!1,d=new Dr,m=this.yieldPos,g=this.awaitPos,y;for(this.yieldPos=0,this.awaitPos=0;this.type!==x.parenR;)if(c?c=!1:this.expect(x.comma),r&&this.afterTrailingComma(x.parenR,!0)){h=!0;break}else if(this.type===x.ellipsis){y=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var C=this.lastTokEnd,X=this.lastTokEndLoc;if(this.expect(x.parenR),e&&this.shouldParseArrow(u)&&this.eat(x.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=g,this.parseParenArrowList(n,s,u,t);(!u.length||h)&&this.unexpected(this.lastTokStart),y&&this.unexpected(y),this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=g||this.awaitPos,u.length>1?(a=this.startNodeAt(i,o),a.expressions=u,this.finishNodeAt(a,"SequenceExpression",C,X)):a=u[0]}else a=this.parseParenExpression();if(this.options.preserveParens){var S=this.startNodeAt(n,s);return S.expression=a,this.finishNode(S,"ParenthesizedExpression")}else return a};Me.parseParenItem=function(e){return e};Me.parseParenArrowList=function(e,t,n,s){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,s)};var OS=[];Me.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===x.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var s=this.start,a=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),s,a,!0,!1),this.eat(x.parenL)?e.arguments=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1):e.arguments=OS,this.finishNode(e,"NewExpression")};Me.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===x.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===x.backQuote,this.finishNode(n,"TemplateElement")};Me.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var s=this.parseTemplateElement({isTagged:t});for(n.quasis=[s];!s.tail;)this.type===x.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(x.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(x.braceR),n.quasis.push(s=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Me.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===x.name||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===x.star)&&!Jt.test(this.input.slice(this.lastTokEnd,this.start))};Me.parseObj=function(e,t){var n=this.startNode(),s=!0,a={};for(n.properties=[],this.next();!this.eat(x.braceR);){if(s)s=!1;else if(this.expect(x.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(x.braceR))break;var r=this.parseProperty(e,t);e||this.checkPropClash(r,a,t),n.properties.push(r)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Me.parseProperty=function(e,t){var n=this.startNode(),s,a,r,i;if(this.options.ecmaVersion>=9&&this.eat(x.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===x.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(r=this.start,i=this.startLoc),e||(s=this.eat(x.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!s&&this.isAsyncProp(n)?(a=!0,s=this.options.ecmaVersion>=9&&this.eat(x.star),this.parsePropertyName(n)):a=!1,this.parsePropertyValue(n,e,s,a,r,i,t,o),this.finishNode(n,"Property")};Me.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Me.parsePropertyValue=function(e,t,n,s,a,r,i,o){(n||s)&&this.type===x.colon&&this.unexpected(),this.eat(x.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,i),e.kind="init"):this.options.ecmaVersion>=6&&this.type===x.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,s)):!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==x.comma&&this.type!==x.braceR&&this.type!==x.eq?((n||s)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||s)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=a),e.kind="init",t?e.value=this.parseMaybeDefault(a,r,this.copyNode(e.key)):this.type===x.eq&&i?(i.shorthandAssign<0&&(i.shorthandAssign=this.start),e.value=this.parseMaybeDefault(a,r,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Me.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(x.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(x.bracketR),e.key;e.computed=!1}return e.key=this.type===x.num||this.type===x.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Me.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Me.parseMethod=function(e,t,n){var s=this.startNode(),a=this.yieldPos,r=this.awaitPos,i=this.awaitIdentPos;return this.initFunction(s),this.options.ecmaVersion>=6&&(s.generator=e),this.options.ecmaVersion>=8&&(s.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hu(t,s.generator)|lu|(n?Y2:0)),this.expect(x.parenL),s.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(s,!1,!0,!1),this.yieldPos=a,this.awaitPos=r,this.awaitIdentPos=i,this.finishNode(s,"FunctionExpression")};Me.parseArrowExpression=function(e,t,n,s){var a=this.yieldPos,r=this.awaitPos,i=this.awaitIdentPos;return this.enterScope(hu(n,!1)|T2),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,s),this.yieldPos=a,this.awaitPos=r,this.awaitIdentPos=i,this.finishNode(e,"ArrowFunctionExpression")};Me.parseFunctionBody=function(e,t,n,s){var a=t&&this.type!==x.braceL,r=this.strict,i=!1;if(a)e.body=this.parseMaybeAssign(s),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!r||o)&&(i=this.strictDirective(this.end),i&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,_2),e.body=this.parseBlock(!1,void 0,i&&!r),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Me.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var s=n[t];if(s.type!=="Identifier")return!1}return!0};Me.checkParams=function(e,t){for(var n=Object.create(null),s=0,a=e.params;s<a.length;s+=1){var r=a[s];this.checkLValInnerPattern(r,du,t?null:n)}};Me.parseExprList=function(e,t,n,s){for(var a=[],r=!0;!this.eat(e);){if(r)r=!1;else if(this.expect(x.comma),t&&this.afterTrailingComma(e))break;var i=void 0;n&&this.type===x.comma?i=null:this.type===x.ellipsis?(i=this.parseSpread(s),s&&this.type===x.comma&&s.trailingComma<0&&(s.trailingComma=this.start)):i=this.parseMaybeAssign(!1,s),a.push(i)}return a};Me.checkUnreserved=function(e){var t=e.start,n=e.end,s=e.name;if(this.inGenerator&&s==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&s==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&s==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(s==="arguments"||s==="await")&&this.raise(t,"Cannot use "+s+" in class static initialization block"),this.keywords.test(s)&&this.raise(t,"Unexpected keyword '"+s+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var a=this.strict?this.reservedWordsStrict:this.reservedWords;a.test(s)&&(!this.inAsync&&s==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+s+"' is reserved"))}};Me.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Me.parseIdentNode=function(){var e=this.startNode();return this.type===x.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=x.name):this.unexpected(),e};Me.parsePrivateIdent=function(){var e=this.startNode();return this.type===x.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Me.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===x.semi||this.canInsertSemicolon()||this.type!==x.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(x.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Me.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var hr=lt.prototype;hr.raise=function(e,t){var n=W2(this.input,e);t+=" ("+n.line+":"+n.column+")";var s=new SyntaxError(t);throw s.pos=e,s.loc=n,s.raisedAt=this.pos,s};hr.raiseRecoverable=hr.raise;hr.curPosition=function(){if(this.options.locations)return new va(this.curLine,this.pos-this.lineStart)};var $n=lt.prototype,QS=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};$n.enterScope=function(e){this.scopeStack.push(new QS(e))};$n.exitScope=function(){this.scopeStack.pop()};$n.treatFunctionsAsVarInScope=function(e){return e.flags&Ks||!this.inModule&&e.flags&Xa};$n.declareName=function(e,t,n){var s=!1;if(t===zn){var a=this.currentScope();s=a.lexical.indexOf(e)>-1||a.functions.indexOf(e)>-1||a.var.indexOf(e)>-1,a.lexical.push(e),this.inModule&&a.flags&Xa&&delete this.undefinedExports[e]}else if(t===K2){var r=this.currentScope();r.lexical.push(e)}else if(t===H2){var i=this.currentScope();this.treatFunctionsAsVar?s=i.lexical.indexOf(e)>-1:s=i.lexical.indexOf(e)>-1||i.var.indexOf(e)>-1,i.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(u.flags&I2&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){s=!0;break}if(u.var.push(e),this.inModule&&u.flags&Xa&&delete this.undefinedExports[e],u.flags&pu)break}s&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};$n.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};$n.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};$n.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&pu)return t}};$n.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&pu&&!(t.flags&T2))return t}};var Lr=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new Sr(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},Ea=lt.prototype;Ea.startNode=function(){return new Lr(this,this.start,this.startLoc)};Ea.startNodeAt=function(e,t){return new Lr(this,e,t)};function J2(e,t,n,s){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=s),this.options.ranges&&(e.range[1]=n),e}Ea.finishNode=function(e,t){return J2.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Ea.finishNodeAt=function(e,t,n,s){return J2.call(this,e,t,n,s)};Ea.copyNode=function(e){var t=new Lr(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var qS="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",O2="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Q2=O2+" Extended_Pictographic",q2=Q2,$2=q2+" EBase EComp EMod EPres ExtPict",e3=$2,$S=e3,eD={9:O2,10:Q2,11:q2,12:$2,13:e3,14:$S},tD="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",nD={9:"",10:"",11:"",12:"",13:"",14:tD},Lc="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",t3="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",n3=t3+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",s3=n3+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",a3=s3+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",r3=a3+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",sD=r3+" "+qS,aD={9:t3,10:n3,11:s3,12:a3,13:r3,14:sD},i3={};function rD(e){var t=i3[e]={binary:jn(eD[e]+" "+Lc),binaryOfStrings:jn(nD[e]),nonBinary:{General_Category:jn(Lc),Script:jn(aD[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var mi=0,Ec=[9,10,11,12,13,14];mi<Ec.length;mi+=1){var iD=Ec[mi];rD(iD)}var ne=lt.prototype,dr=function(e,t){this.parent=e,this.base=t||this};dr.prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var n=e;n;n=n.parent)if(t.base===n.base&&t!==n)return!0;return!1};dr.prototype.sibling=function(){return new dr(this.parent,this.base)};var Xn=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=i3[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Xn.prototype.reset=function(e,t,n){var s=n.indexOf("v")!==-1,a=n.indexOf("u")!==-1;this.start=e|0,this.source=t+"",this.flags=n,s&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=a&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=a&&this.parser.options.ecmaVersion>=9)};Xn.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};Xn.prototype.at=function(e,t){t===void 0&&(t=!1);var n=this.source,s=n.length;if(e>=s)return-1;var a=n.charCodeAt(e);if(!(t||this.switchU)||a<=55295||a>=57344||e+1>=s)return a;var r=n.charCodeAt(e+1);return r>=56320&&r<=57343?(a<<10)+r-56613888:a};Xn.prototype.nextIndex=function(e,t){t===void 0&&(t=!1);var n=this.source,s=n.length;if(e>=s)return s;var a=n.charCodeAt(e),r;return!(t||this.switchU)||a<=55295||a>=57344||e+1>=s||(r=n.charCodeAt(e+1))<56320||r>57343?e+1:e+2};Xn.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};Xn.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};Xn.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};Xn.prototype.eat=function(e,t){return t===void 0&&(t=!1),this.current(t)===e?(this.advance(t),!0):!1};Xn.prototype.eatChars=function(e,t){t===void 0&&(t=!1);for(var n=this.pos,s=0,a=e;s<a.length;s+=1){var r=a[s],i=this.at(n,t);if(i===-1||i!==r)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0};ne.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,s=!1,a=!1,r=0;r<n.length;r++){var i=n.charAt(r);t.indexOf(i)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),i==="u"&&(s=!0),i==="v"&&(a=!0)}this.options.ecmaVersion>=15&&s&&a&&this.raise(e.start,"Invalid regular expression flag")};function oD(e){for(var t in e)return!0;return!1}ne.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&oD(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};ne.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var s=n[t];e.groupNames[s]||e.raise("Invalid named capture referenced")}};ne.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new dr(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};ne.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};ne.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};ne.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};ne.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};ne.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};ne.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var s=0,a=-1;if(this.regexp_eatDecimalDigits(e)&&(s=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(a=e.lastIntValue),e.eat(125)))return a!==-1&&a<s&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};ne.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};ne.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};ne.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),s=e.eat(45);if(n||s){for(var a=0;a<n.length;a++){var r=n.charAt(a);n.indexOf(r,a+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(s){var i=this.regexp_eatModifiers(e);!n&&!i&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var o=0;o<i.length;o++){var u=i.charAt(o);(i.indexOf(u,o+1)>-1||n.indexOf(u)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1};ne.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};ne.regexp_eatModifiers=function(e){for(var t="",n=0;(n=e.current())!==-1&&uD(n);)t+=Vn(n),e.advance();return t};function uD(e){return e===105||e===109||e===115}ne.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};ne.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};ne.regexp_eatSyntaxCharacter=function(e){var t=e.current();return o3(t)?(e.lastIntValue=t,e.advance(),!0):!1};function o3(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}ne.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!o3(n);)e.advance();return e.pos!==t};ne.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};ne.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var s=0,a=n;s<a.length;s+=1){var r=a[s];r.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};ne.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};ne.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Vn(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Vn(e.lastIntValue);return!0}return!1};ne.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,s=e.current(n);return e.advance(n),s===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(s=e.lastIntValue),cD(s)?(e.lastIntValue=s,!0):(e.pos=t,!1)};function cD(e){return Rn(e,!0)||e===36||e===95}ne.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,s=e.current(n);return e.advance(n),s===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(s=e.lastIntValue),lD(s)?(e.lastIntValue=s,!0):(e.pos=t,!1)};function lD(e){return Vs(e,!0)||e===36||e===95||e===8204||e===8205}ne.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};ne.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};ne.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};ne.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};ne.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};ne.regexp_eatZero=function(e){return e.current()===48&&!Er(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};ne.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};ne.regexp_eatControlLetter=function(e){var t=e.current();return u3(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function u3(e){return e>=65&&e<=90||e>=97&&e<=122}ne.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,s=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(s&&a>=55296&&a<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(i>=56320&&i<=57343)return e.lastIntValue=(a-55296)*1024+(i-56320)+65536,!0}e.pos=r,e.lastIntValue=a}return!0}if(s&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&pD(e.lastIntValue))return!0;s&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function pD(e){return e>=0&&e<=1114111}ne.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};ne.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var c3=0,Bn=1,_t=2;ne.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(hD(t))return e.lastIntValue=-1,e.advance(),Bn;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var s;if(e.eat(123)&&(s=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&s===_t&&e.raise("Invalid property name"),s;e.raise("Invalid property name")}return c3};function hD(e){return e===100||e===68||e===115||e===83||e===119||e===87}ne.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var s=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,s),Bn}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var a=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,a)}return c3};ne.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Hs(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};ne.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Bn;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return _t;e.raise("Invalid property name")};ne.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";l3(t=e.current());)e.lastStringValue+=Vn(t),e.advance();return e.lastStringValue!==""};function l3(e){return u3(e)||e===95}ne.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";dD(t=e.current());)e.lastStringValue+=Vn(t),e.advance();return e.lastStringValue!==""};function dD(e){return l3(e)||Er(e)}ne.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};ne.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===_t&&e.raise("Negated character class may contain strings"),!0}return!1};ne.regexp_classContents=function(e){return e.current()===93?Bn:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Bn)};ne.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};ne.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||d3(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var s=e.current();return s!==93?(e.lastIntValue=s,e.advance(),!0):!1};ne.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};ne.regexp_classSetExpression=function(e){var t=Bn,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===_t&&(t=_t);for(var s=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==_t&&(t=Bn);continue}e.raise("Invalid character in character class")}if(s!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(s!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===_t&&(t=_t)}};ne.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var s=e.lastIntValue;return n!==-1&&s!==-1&&n>s&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};ne.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Bn:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};ne.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),s=this.regexp_classContents(e);if(e.eat(93))return n&&s===_t&&e.raise("Negated character class may contain strings"),s;e.pos=t}if(e.eat(92)){var a=this.regexp_eatCharacterClassEscape(e);if(a)return a;e.pos=t}return null};ne.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};ne.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===_t&&(t=_t);return t};ne.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Bn:_t};ne.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&mD(n)||fD(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function mD(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function fD(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}ne.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return yD(t)?(e.lastIntValue=t,e.advance(),!0):!1};function yD(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}ne.regexp_eatClassControlLetter=function(e){var t=e.current();return Er(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};ne.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};ne.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Er(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Er(e){return e>=48&&e<=57}ne.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;p3(n=e.current());)e.lastIntValue=16*e.lastIntValue+h3(n),e.advance();return e.pos!==t};function p3(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function h3(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}ne.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};ne.regexp_eatOctalDigit=function(e){var t=e.current();return d3(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function d3(e){return e>=48&&e<=55}ne.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var s=0;s<t;++s){var a=e.current();if(!p3(a))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+h3(a),e.advance()}return!0};var fu=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new Sr(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Le=lt.prototype;Le.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new fu(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Le.getToken=function(){return this.next(),new fu(this)};typeof Symbol<"u"&&(Le[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===x.eof,value:t}}}});Le.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(x.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Le.readToken=function(e){return Rn(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Le.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Le.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var s=void 0,a=t;(s=V2(this.input,a,this.pos))>-1;)++this.curLine,a=this.lineStart=s;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Le.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),s=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Ys(s);)s=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Le.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&B2.test(String.fromCharCode(e)))++this.pos;else break e}}};Le.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Le.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(x.ellipsis)):(++this.pos,this.finishToken(x.dot))};Le.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(x.assign,2):this.finishOp(x.slash,1)};Le.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,s=e===42?x.star:x.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,s=x.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(x.assign,n+1):this.finishOp(s,n)};Le.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(x.assign,3)}return this.finishOp(e===124?x.logicalOR:x.logicalAND,2)}return t===61?this.finishOp(x.assign,2):this.finishOp(e===124?x.bitwiseOR:x.bitwiseAND,1)};Le.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(x.assign,2):this.finishOp(x.bitwiseXOR,1)};Le.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Jt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(x.incDec,2):t===61?this.finishOp(x.assign,2):this.finishOp(x.plusMin,1)};Le.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(x.assign,n+1):this.finishOp(x.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(x.relational,n))};Le.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(x.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(x.arrow)):this.finishOp(e===61?x.eq:x.prefix,1)};Le.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(x.questionDot,2)}if(t===63){if(e>=12){var s=this.input.charCodeAt(this.pos+2);if(s===61)return this.finishOp(x.assign,3)}return this.finishOp(x.coalesce,2)}}return this.finishOp(x.question,1)};Le.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Rn(t,!0)||t===92))return this.finishToken(x.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Vn(t)+"'")};Le.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(x.parenL);case 41:return++this.pos,this.finishToken(x.parenR);case 59:return++this.pos,this.finishToken(x.semi);case 44:return++this.pos,this.finishToken(x.comma);case 91:return++this.pos,this.finishToken(x.bracketL);case 93:return++this.pos,this.finishToken(x.bracketR);case 123:return++this.pos,this.finishToken(x.braceL);case 125:return++this.pos,this.finishToken(x.braceR);case 58:return++this.pos,this.finishToken(x.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(x.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(x.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Vn(e)+"'")};Le.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Le.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var s=this.input.charAt(this.pos);if(Jt.test(s)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(s==="[")t=!0;else if(s==="]"&&t)t=!1;else if(s==="/"&&!t)break;e=s==="\\"}++this.pos}var a=this.input.slice(n,this.pos);++this.pos;var r=this.pos,i=this.readWord1();this.containsEsc&&this.unexpected(r);var o=this.regexpState||(this.regexpState=new Xn(this));o.reset(n,a,i),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(a,i)}catch{}return this.finishToken(x.regexp,{pattern:a,flags:i,value:u})};Le.readInt=function(e,t,n){for(var s=this.options.ecmaVersion>=12&&t===void 0,a=n&&this.input.charCodeAt(this.pos)===48,r=this.pos,i=0,o=0,u=0,c=t??1/0;u<c;++u,++this.pos){var h=this.input.charCodeAt(this.pos),d=void 0;if(s&&h===95){a&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=h;continue}if(h>=97?d=h-97+10:h>=65?d=h-65+10:h>=48&&h<=57?d=h-48:d=1/0,d>=e)break;o=h,i=i*e+d}return s&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===r||t!=null&&this.pos-r!==t?null:i};function gD(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function m3(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Le.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=m3(this.input.slice(t,this.pos)),++this.pos):Rn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,n)};Le.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var s=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&s===110){var a=m3(this.input.slice(t,this.pos));return++this.pos,Rn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,a)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),s===46&&!n&&(++this.pos,this.readInt(10),s=this.input.charCodeAt(this.pos)),(s===69||s===101)&&!n&&(s=this.input.charCodeAt(++this.pos),(s===43||s===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Rn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=gD(this.input.slice(t,this.pos),n);return this.finishToken(x.num,r)};Le.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Le.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var s=this.input.charCodeAt(this.pos);if(s===e)break;s===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):s===8232||s===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ys(s)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(x.string,t)};var f3={};Le.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===f3)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Le.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw f3;this.raise(e,t)};Le.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===x.template||this.type===x.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(x.dollarBraceL)):(++this.pos,this.finishToken(x.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(x.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Ys(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Le.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(x.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Le.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Vn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var s=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],a=parseInt(s,8);return a>255&&(s=s.slice(0,-1),a=parseInt(s,8)),this.pos+=s.length-1,t=this.input.charCodeAt(this.pos),(s!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-s.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(a)}return Ys(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Le.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Le.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,s=this.options.ecmaVersion>=6;this.pos<this.input.length;){var a=this.fullCharCodeAtPos();if(Vs(a,s))this.pos+=a<=65535?1:2;else if(a===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var r=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var i=this.readCodePoint();(t?Rn:Vs)(i,s)||this.invalidStringToken(r,"Invalid Unicode escape"),e+=Vn(i),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Le.readWord=function(){var e=this.readWord1(),t=x.name;return this.keywords.test(e)&&(t=uu[e]),this.finishToken(t,e)};var bD="8.14.0";lt.acorn={Parser:lt,version:bD,defaultOptions:Oi,Position:va,SourceLocation:Sr,getLineInfo:W2,Node:Lr,TokenType:Ve,tokTypes:x,keywordTypes:uu,TokContext:tn,tokContexts:nt,isIdentifierChar:Vs,isIdentifierStart:Rn,Token:fu,isNewLine:Ys,lineBreak:Jt,lineBreakG:NS,nonASCIIwhitespace:B2};function MD(e,t){return lt.parse(e,t)}var xD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function CD(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),n}var kc={},Rc={},Vc;function GD(){return Vc||(Vc=1,(function(e){(function t(n){var s,a,r,i,o,u;function c(Z){var E={},D,V;for(D in Z)Z.hasOwnProperty(D)&&(V=Z[D],typeof V=="object"&&V!==null?E[D]=c(V):E[D]=V);return E}function h(Z,E){var D,V,T,K;for(V=Z.length,T=0;V;)D=V>>>1,K=T+D,E(Z[K])?V=D:(T=K+1,V-=D+1);return T}s={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},u={},a={Break:i,Skip:o,Remove:u};function d(Z,E){this.parent=Z,this.key=E}d.prototype.replace=function(Z){this.parent[this.key]=Z},d.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function m(Z,E,D,V){this.node=Z,this.path=E,this.wrap=D,this.ref=V}function g(){}g.prototype.path=function(){var Z,E,D,V,T,K;function J(Y,Q){if(Array.isArray(Q))for(D=0,V=Q.length;D<V;++D)Y.push(Q[D]);else Y.push(Q)}if(!this.__current.path)return null;for(T=[],Z=2,E=this.__leavelist.length;Z<E;++Z)K=this.__leavelist[Z],J(T,K.path);return J(T,this.__current.path),T},g.prototype.type=function(){var Z=this.current();return Z.type||this.__current.wrap},g.prototype.parents=function(){var Z,E,D;for(D=[],Z=1,E=this.__leavelist.length;Z<E;++Z)D.push(this.__leavelist[Z].node);return D},g.prototype.current=function(){return this.__current.node},g.prototype.__execute=function(Z,E){var D,V;return V=void 0,D=this.__current,this.__current=E,this.__state=null,Z&&(V=Z.call(this,E.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=D,V},g.prototype.notify=function(Z){this.__state=Z},g.prototype.skip=function(){this.notify(o)},g.prototype.break=function(){this.notify(i)},g.prototype.remove=function(){this.notify(u)},g.prototype.__initialize=function(Z,E){this.visitor=E,this.root=Z,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,E.fallback==="iteration"?this.__fallback=Object.keys:typeof E.fallback=="function"&&(this.__fallback=E.fallback),this.__keys=r,E.keys&&(this.__keys=Object.assign(Object.create(this.__keys),E.keys))};function y(Z){return Z==null?!1:typeof Z=="object"&&typeof Z.type=="string"}function C(Z,E){return(Z===s.ObjectExpression||Z===s.ObjectPattern)&&E==="properties"}function X(Z,E){for(var D=Z.length-1;D>=0;--D)if(Z[D].node===E)return!0;return!1}g.prototype.traverse=function(Z,E){var D,V,T,K,J,Y,Q,ee,ye,ae,ge,pe;for(this.__initialize(Z,E),pe={},D=this.__worklist,V=this.__leavelist,D.push(new m(Z,null,null,null)),V.push(new m(null,null,null,null));D.length;){if(T=D.pop(),T===pe){if(T=V.pop(),Y=this.__execute(E.leave,T),this.__state===i||Y===i)return;continue}if(T.node){if(Y=this.__execute(E.enter,T),this.__state===i||Y===i)return;if(D.push(pe),V.push(T),this.__state===o||Y===o)continue;if(K=T.node,J=K.type||T.wrap,ae=this.__keys[J],!ae)if(this.__fallback)ae=this.__fallback(K);else throw new Error("Unknown node type "+J+".");for(ee=ae.length;(ee-=1)>=0;)if(Q=ae[ee],ge=K[Q],!!ge){if(Array.isArray(ge)){for(ye=ge.length;(ye-=1)>=0;)if(ge[ye]&&!X(V,ge[ye])){if(C(J,ae[ee]))T=new m(ge[ye],[Q,ye],"Property",null);else if(y(ge[ye]))T=new m(ge[ye],[Q,ye],null,null);else continue;D.push(T)}}else if(y(ge)){if(X(V,ge))continue;D.push(new m(ge,Q,null,null))}}}}},g.prototype.replace=function(Z,E){var D,V,T,K,J,Y,Q,ee,ye,ae,ge,pe,He;function pt(ut){var B,xe,rt,Be;if(ut.ref.remove()){for(xe=ut.ref.key,Be=ut.ref.parent,B=D.length;B--;)if(rt=D[B],rt.ref&&rt.ref.parent===Be){if(rt.ref.key<xe)break;--rt.ref.key}}}for(this.__initialize(Z,E),ge={},D=this.__worklist,V=this.__leavelist,pe={root:Z},Y=new m(Z,null,null,new d(pe,"root")),D.push(Y),V.push(Y);D.length;){if(Y=D.pop(),Y===ge){if(Y=V.pop(),J=this.__execute(E.leave,Y),J!==void 0&&J!==i&&J!==o&&J!==u&&Y.ref.replace(J),(this.__state===u||J===u)&&pt(Y),this.__state===i||J===i)return pe.root;continue}if(J=this.__execute(E.enter,Y),J!==void 0&&J!==i&&J!==o&&J!==u&&(Y.ref.replace(J),Y.node=J),(this.__state===u||J===u)&&(pt(Y),Y.node=null),this.__state===i||J===i)return pe.root;if(T=Y.node,!!T&&(D.push(ge),V.push(Y),!(this.__state===o||J===o))){if(K=T.type||Y.wrap,ye=this.__keys[K],!ye)if(this.__fallback)ye=this.__fallback(T);else throw new Error("Unknown node type "+K+".");for(Q=ye.length;(Q-=1)>=0;)if(He=ye[Q],ae=T[He],!!ae)if(Array.isArray(ae)){for(ee=ae.length;(ee-=1)>=0;)if(ae[ee]){if(C(K,ye[Q]))Y=new m(ae[ee],[He,ee],"Property",new d(ae,ee));else if(y(ae[ee]))Y=new m(ae[ee],[He,ee],null,new d(ae,ee));else continue;D.push(Y)}}else y(ae)&&D.push(new m(ae,He,null,new d(T,He)))}}return pe.root};function S(Z,E){var D=new g;return D.traverse(Z,E)}function L(Z,E){var D=new g;return D.replace(Z,E)}function z(Z,E){var D;return D=h(E,function(V){return V.range[0]>Z.range[0]}),Z.extendedRange=[Z.range[0],Z.range[1]],D!==E.length&&(Z.extendedRange[1]=E[D].range[0]),D-=1,D>=0&&(Z.extendedRange[0]=E[D].range[1]),Z}function A(Z,E,D){var V=[],T,K,J,Y;if(!Z.range)throw new Error("attachComments needs range information");if(!D.length){if(E.length){for(J=0,K=E.length;J<K;J+=1)T=c(E[J]),T.extendedRange=[0,Z.range[0]],V.push(T);Z.leadingComments=V}return Z}for(J=0,K=E.length;J<K;J+=1)V.push(z(c(E[J]),D));return Y=0,S(Z,{enter:function(Q){for(var ee;Y<V.length&&(ee=V[Y],!(ee.extendedRange[1]>Q.range[0]));)ee.extendedRange[1]===Q.range[0]?(Q.leadingComments||(Q.leadingComments=[]),Q.leadingComments.push(ee),V.splice(Y,1)):Y+=1;if(Y===V.length)return a.Break;if(V[Y].extendedRange[0]>Q.range[1])return a.Skip}}),Y=0,S(Z,{leave:function(Q){for(var ee;Y<V.length&&(ee=V[Y],!(Q.range[1]<ee.extendedRange[0]));)Q.range[1]===ee.extendedRange[0]?(Q.trailingComments||(Q.trailingComments=[]),Q.trailingComments.push(ee),V.splice(Y,1)):Y+=1;if(Y===V.length)return a.Break;if(V[Y].extendedRange[0]>Q.range[1])return a.Skip}}),Z}return n.Syntax=s,n.traverse=S,n.replace=L,n.attachComments=A,n.VisitorKeys=r,n.VisitorOption=a,n.Controller=g,n.cloneEnvironment=function(){return t({})},n})(e)})(Rc)),Rc}var Ja={},Bc={exports:{}},zc;function PD(){return zc||(zc=1,(function(){function e(i){if(i==null)return!1;switch(i.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function t(i){if(i==null)return!1;switch(i.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function n(i){if(i==null)return!1;switch(i.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function s(i){return n(i)||i!=null&&i.type==="FunctionDeclaration"}function a(i){switch(i.type){case"IfStatement":return i.alternate!=null?i.alternate:i.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return i.body}return null}function r(i){var o;if(i.type!=="IfStatement"||i.alternate==null)return!1;o=i.consequent;do{if(o.type==="IfStatement"&&o.alternate==null)return!0;o=a(o)}while(o);return!1}Bc.exports={isExpression:e,isStatement:n,isIterationStatement:t,isSourceElement:s,isProblematicIfStatement:r,trailingStatement:a}})()),Bc.exports}var Wc={exports:{}},Nc;function g3(){return Nc||(Nc=1,(function(){var e,t,n,s,a,r;t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function i(X){return 48<=X&&X<=57}function o(X){return 48<=X&&X<=57||97<=X&&X<=102||65<=X&&X<=70}function u(X){return X>=48&&X<=55}n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(X){return X===32||X===9||X===11||X===12||X===160||X>=5760&&n.indexOf(X)>=0}function h(X){return X===10||X===13||X===8232||X===8233}function d(X){if(X<=65535)return String.fromCharCode(X);var S=String.fromCharCode(Math.floor((X-65536)/1024)+55296),L=String.fromCharCode((X-65536)%1024+56320);return S+L}for(s=new Array(128),r=0;r<128;++r)s[r]=r>=97&&r<=122||r>=65&&r<=90||r===36||r===95;for(a=new Array(128),r=0;r<128;++r)a[r]=r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===36||r===95;function m(X){return X<128?s[X]:t.NonAsciiIdentifierStart.test(d(X))}function g(X){return X<128?a[X]:t.NonAsciiIdentifierPart.test(d(X))}function y(X){return X<128?s[X]:e.NonAsciiIdentifierStart.test(d(X))}function C(X){return X<128?a[X]:e.NonAsciiIdentifierPart.test(d(X))}Wc.exports={isDecimalDigit:i,isHexDigit:o,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:h,isIdentifierStartES5:m,isIdentifierPartES5:g,isIdentifierStartES6:y,isIdentifierPartES6:C}})()),Wc.exports}var Tc={exports:{}},Ic;function vD(){return Ic||(Ic=1,(function(){var e=g3();function t(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function n(m,g){return!g&&m==="yield"?!1:s(m,g)}function s(m,g){if(g&&t(m))return!0;switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}}function a(m,g){return m==="null"||m==="true"||m==="false"||n(m,g)}function r(m,g){return m==="null"||m==="true"||m==="false"||s(m,g)}function i(m){return m==="eval"||m==="arguments"}function o(m){var g,y,C;if(m.length===0||(C=m.charCodeAt(0),!e.isIdentifierStartES5(C)))return!1;for(g=1,y=m.length;g<y;++g)if(C=m.charCodeAt(g),!e.isIdentifierPartES5(C))return!1;return!0}function u(m,g){return(m-55296)*1024+(g-56320)+65536}function c(m){var g,y,C,X,S;if(m.length===0)return!1;for(S=e.isIdentifierStartES6,g=0,y=m.length;g<y;++g){if(C=m.charCodeAt(g),55296<=C&&C<=56319){if(++g,g>=y||(X=m.charCodeAt(g),!(56320<=X&&X<=57343)))return!1;C=u(C,X)}if(!S(C))return!1;S=e.isIdentifierPartES6}return!0}function h(m,g){return o(m)&&!a(m,g)}function d(m,g){return c(m)&&!r(m,g)}Tc.exports={isKeywordES5:n,isKeywordES6:s,isReservedWordES5:a,isReservedWordES6:r,isRestrictedWord:i,isIdentifierNameES5:o,isIdentifierNameES6:c,isIdentifierES5:h,isIdentifierES6:d}})()),Tc.exports}var Yc;function XD(){return Yc||(Yc=1,(function(){Ja.ast=PD(),Ja.code=g3(),Ja.keyword=vD()})()),Ja}var Oa={},fi={},Qa={},qa={},Hc;function wD(){if(Hc)return qa;Hc=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return qa.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},qa.decode=function(t){var n=65,s=90,a=97,r=122,i=48,o=57,u=43,c=47,h=26,d=52;return n<=t&&t<=s?t-n:a<=t&&t<=r?t-a+h:i<=t&&t<=o?t-i+d:t==u?62:t==c?63:-1},qa}var Kc;function b3(){if(Kc)return Qa;Kc=1;var e=wD(),t=5,n=1<<t,s=n-1,a=n;function r(o){return o<0?(-o<<1)+1:(o<<1)+0}function i(o){var u=(o&1)===1,c=o>>1;return u?-c:c}return Qa.encode=function(o){var u="",c,h=r(o);do c=h&s,h>>>=t,h>0&&(c|=a),u+=e.encode(c);while(h>0);return u},Qa.decode=function(o,u,c){var h=o.length,d=0,m=0,g,y;do{if(u>=h)throw new Error("Expected more digits in base 64 VLQ value.");if(y=e.decode(o.charCodeAt(u++)),y===-1)throw new Error("Invalid base64 digit: "+o.charAt(u-1));g=!!(y&a),y&=s,d=d+(y<<m),m+=t}while(g);c.value=i(d),c.rest=u},Qa}var _c={},jc;function ka(){return jc||(jc=1,(function(e){function t(A,Z,E){if(Z in A)return A[Z];if(arguments.length===3)return E;throw new Error('"'+Z+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,s=/^data:.+\,.+$/;function a(A){var Z=A.match(n);return Z?{scheme:Z[1],auth:Z[2],host:Z[3],port:Z[4],path:Z[5]}:null}e.urlParse=a;function r(A){var Z="";return A.scheme&&(Z+=A.scheme+":"),Z+="//",A.auth&&(Z+=A.auth+"@"),A.host&&(Z+=A.host),A.port&&(Z+=":"+A.port),A.path&&(Z+=A.path),Z}e.urlGenerate=r;function i(A){var Z=A,E=a(A);if(E){if(!E.path)return A;Z=E.path}for(var D=e.isAbsolute(Z),V=Z.split(/\/+/),T,K=0,J=V.length-1;J>=0;J--)T=V[J],T==="."?V.splice(J,1):T===".."?K++:K>0&&(T===""?(V.splice(J+1,K),K=0):(V.splice(J,2),K--));return Z=V.join("/"),Z===""&&(Z=D?"/":"."),E?(E.path=Z,r(E)):Z}e.normalize=i;function o(A,Z){A===""&&(A="."),Z===""&&(Z=".");var E=a(Z),D=a(A);if(D&&(A=D.path||"/"),E&&!E.scheme)return D&&(E.scheme=D.scheme),r(E);if(E||Z.match(s))return Z;if(D&&!D.host&&!D.path)return D.host=Z,r(D);var V=Z.charAt(0)==="/"?Z:i(A.replace(/\/+$/,"")+"/"+Z);return D?(D.path=V,r(D)):V}e.join=o,e.isAbsolute=function(A){return A.charAt(0)==="/"||n.test(A)};function u(A,Z){A===""&&(A="."),A=A.replace(/\/$/,"");for(var E=0;Z.indexOf(A+"/")!==0;){var D=A.lastIndexOf("/");if(D<0||(A=A.slice(0,D),A.match(/^([^\/]+:\/)?\/*$/)))return Z;++E}return Array(E+1).join("../")+Z.substr(A.length+1)}e.relative=u;var c=(function(){var A=Object.create(null);return!("__proto__"in A)})();function h(A){return A}function d(A){return g(A)?"$"+A:A}e.toSetString=c?h:d;function m(A){return g(A)?A.slice(1):A}e.fromSetString=c?h:m;function g(A){if(!A)return!1;var Z=A.length;if(Z<9||A.charCodeAt(Z-1)!==95||A.charCodeAt(Z-2)!==95||A.charCodeAt(Z-3)!==111||A.charCodeAt(Z-4)!==116||A.charCodeAt(Z-5)!==111||A.charCodeAt(Z-6)!==114||A.charCodeAt(Z-7)!==112||A.charCodeAt(Z-8)!==95||A.charCodeAt(Z-9)!==95)return!1;for(var E=Z-10;E>=0;E--)if(A.charCodeAt(E)!==36)return!1;return!0}function y(A,Z,E){var D=X(A.source,Z.source);return D!==0||(D=A.originalLine-Z.originalLine,D!==0)||(D=A.originalColumn-Z.originalColumn,D!==0||E)||(D=A.generatedColumn-Z.generatedColumn,D!==0)||(D=A.generatedLine-Z.generatedLine,D!==0)?D:X(A.name,Z.name)}e.compareByOriginalPositions=y;function C(A,Z,E){var D=A.generatedLine-Z.generatedLine;return D!==0||(D=A.generatedColumn-Z.generatedColumn,D!==0||E)||(D=X(A.source,Z.source),D!==0)||(D=A.originalLine-Z.originalLine,D!==0)||(D=A.originalColumn-Z.originalColumn,D!==0)?D:X(A.name,Z.name)}e.compareByGeneratedPositionsDeflated=C;function X(A,Z){return A===Z?0:A===null?1:Z===null?-1:A>Z?1:-1}function S(A,Z){var E=A.generatedLine-Z.generatedLine;return E!==0||(E=A.generatedColumn-Z.generatedColumn,E!==0)||(E=X(A.source,Z.source),E!==0)||(E=A.originalLine-Z.originalLine,E!==0)||(E=A.originalColumn-Z.originalColumn,E!==0)?E:X(A.name,Z.name)}e.compareByGeneratedPositionsInflated=S;function L(A){return JSON.parse(A.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=L;function z(A,Z,E){if(Z=Z||"",A&&(A[A.length-1]!=="/"&&Z[0]!=="/"&&(A+="/"),Z=A+Z),E){var D=a(E);if(!D)throw new Error("sourceMapURL could not be parsed");if(D.path){var V=D.path.lastIndexOf("/");V>=0&&(D.path=D.path.substring(0,V+1))}Z=o(r(D),Z)}return i(Z)}e.computeSourceURL=z})(_c)),_c}var yi={},Uc;function M3(){if(Uc)return yi;Uc=1;var e=ka(),t=Object.prototype.hasOwnProperty,n=typeof Map<"u";function s(){this._array=[],this._set=n?new Map:Object.create(null)}return s.fromArray=function(a,r){for(var i=new s,o=0,u=a.length;o<u;o++)i.add(a[o],r);return i},s.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(a,r){var i=n?a:e.toSetString(a),o=n?this.has(a):t.call(this._set,i),u=this._array.length;(!o||r)&&this._array.push(a),o||(n?this._set.set(a,u):this._set[i]=u)},s.prototype.has=function(a){if(n)return this._set.has(a);var r=e.toSetString(a);return t.call(this._set,r)},s.prototype.indexOf=function(a){if(n){var r=this._set.get(a);if(r>=0)return r}else{var i=e.toSetString(a);if(t.call(this._set,i))return this._set[i]}throw new Error('"'+a+'" is not in the set.')},s.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},s.prototype.toArray=function(){return this._array.slice()},yi.ArraySet=s,yi}var gi={},Jc;function ZD(){if(Jc)return gi;Jc=1;var e=ka();function t(s,a){var r=s.generatedLine,i=a.generatedLine,o=s.generatedColumn,u=a.generatedColumn;return i>r||i==r&&u>=o||e.compareByGeneratedPositionsInflated(s,a)<=0}function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return n.prototype.unsortedForEach=function(s,a){this._array.forEach(s,a)},n.prototype.add=function(s){t(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},gi.MappingList=n,gi}var Oc;function x3(){if(Oc)return fi;Oc=1;var e=b3(),t=ka(),n=M3().ArraySet,s=ZD().MappingList;function a(r){r||(r={}),this._file=t.getArg(r,"file",null),this._sourceRoot=t.getArg(r,"sourceRoot",null),this._skipValidation=t.getArg(r,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new s,this._sourcesContents=null}return a.prototype._version=3,a.fromSourceMap=function(r){var i=r.sourceRoot,o=new a({file:r.file,sourceRoot:i});return r.eachMapping(function(u){var c={generated:{line:u.generatedLine,column:u.generatedColumn}};u.source!=null&&(c.source=u.source,i!=null&&(c.source=t.relative(i,c.source)),c.original={line:u.originalLine,column:u.originalColumn},u.name!=null&&(c.name=u.name)),o.addMapping(c)}),r.sources.forEach(function(u){var c=u;i!==null&&(c=t.relative(i,u)),o._sources.has(c)||o._sources.add(c);var h=r.sourceContentFor(u);h!=null&&o.setSourceContent(u,h)}),o},a.prototype.addMapping=function(r){var i=t.getArg(r,"generated"),o=t.getArg(r,"original",null),u=t.getArg(r,"source",null),c=t.getArg(r,"name",null);this._skipValidation||this._validateMapping(i,o,u,c),u!=null&&(u=String(u),this._sources.has(u)||this._sources.add(u)),c!=null&&(c=String(c),this._names.has(c)||this._names.add(c)),this._mappings.add({generatedLine:i.line,generatedColumn:i.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:u,name:c})},a.prototype.setSourceContent=function(r,i){var o=r;this._sourceRoot!=null&&(o=t.relative(this._sourceRoot,o)),i!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(o)]=i):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(r,i,o){var u=i;if(i==null){if(r.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);u=r.file}var c=this._sourceRoot;c!=null&&(u=t.relative(c,u));var h=new n,d=new n;this._mappings.unsortedForEach(function(m){if(m.source===u&&m.originalLine!=null){var g=r.originalPositionFor({line:m.originalLine,column:m.originalColumn});g.source!=null&&(m.source=g.source,o!=null&&(m.source=t.join(o,m.source)),c!=null&&(m.source=t.relative(c,m.source)),m.originalLine=g.line,m.originalColumn=g.column,g.name!=null&&(m.name=g.name))}var y=m.source;y!=null&&!h.has(y)&&h.add(y);var C=m.name;C!=null&&!d.has(C)&&d.add(C)},this),this._sources=h,this._names=d,r.sources.forEach(function(m){var g=r.sourceContentFor(m);g!=null&&(o!=null&&(m=t.join(o,m)),c!=null&&(m=t.relative(c,m)),this.setSourceContent(m,g))},this)},a.prototype._validateMapping=function(r,i,o,u){if(i&&typeof i.line!="number"&&typeof i.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(r&&"line"in r&&"column"in r&&r.line>0&&r.column>=0&&!i&&!o&&!u)){if(r&&"line"in r&&"column"in r&&i&&"line"in i&&"column"in i&&r.line>0&&r.column>=0&&i.line>0&&i.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:r,source:o,original:i,name:u}))}},a.prototype._serializeMappings=function(){for(var r=0,i=1,o=0,u=0,c=0,h=0,d="",m,g,y,C,X=this._mappings.toArray(),S=0,L=X.length;S<L;S++){if(g=X[S],m="",g.generatedLine!==i)for(r=0;g.generatedLine!==i;)m+=";",i++;else if(S>0){if(!t.compareByGeneratedPositionsInflated(g,X[S-1]))continue;m+=","}m+=e.encode(g.generatedColumn-r),r=g.generatedColumn,g.source!=null&&(C=this._sources.indexOf(g.source),m+=e.encode(C-h),h=C,m+=e.encode(g.originalLine-1-u),u=g.originalLine-1,m+=e.encode(g.originalColumn-o),o=g.originalColumn,g.name!=null&&(y=this._names.indexOf(g.name),m+=e.encode(y-c),c=y)),d+=m}return d},a.prototype._generateSourcesContent=function(r,i){return r.map(function(o){if(!this._sourcesContents)return null;i!=null&&(o=t.relative(i,o));var u=t.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)},a.prototype.toJSON=function(){var r={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(r.file=this._file),this._sourceRoot!=null&&(r.sourceRoot=this._sourceRoot),this._sourcesContents&&(r.sourcesContent=this._generateSourcesContent(r.sources,r.sourceRoot)),r},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},fi.SourceMapGenerator=a,fi}var aa={},Qc={},qc;function FD(){return qc||(qc=1,(function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(n,s,a,r,i,o){var u=Math.floor((s-n)/2)+n,c=i(a,r[u],!0);return c===0?u:c>0?s-u>1?t(u,s,a,r,i,o):o==e.LEAST_UPPER_BOUND?s<r.length?s:-1:u:u-n>1?t(n,u,a,r,i,o):o==e.LEAST_UPPER_BOUND?u:n<0?-1:n}e.search=function(n,s,a,r){if(s.length===0)return-1;var i=t(-1,s.length,n,s,a,r||e.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&a(s[i],s[i-1],!0)===0;)--i;return i}})(Qc)),Qc}var bi={},$c;function AD(){if($c)return bi;$c=1;function e(s,a,r){var i=s[a];s[a]=s[r],s[r]=i}function t(s,a){return Math.round(s+Math.random()*(a-s))}function n(s,a,r,i){if(r<i){var o=t(r,i),u=r-1;e(s,o,i);for(var c=s[i],h=r;h<i;h++)a(s[h],c)<=0&&(u+=1,e(s,u,h));e(s,u+1,h);var d=u+1;n(s,a,r,d-1),n(s,a,d+1,i)}}return bi.quickSort=function(s,a){n(s,a,0,s.length-1)},bi}var el;function SD(){if(el)return aa;el=1;var e=ka(),t=FD(),n=M3().ArraySet,s=b3(),a=AD().quickSort;function r(c,h){var d=c;return typeof c=="string"&&(d=e.parseSourceMapInput(c)),d.sections!=null?new u(d,h):new i(d,h)}r.fromSourceMap=function(c,h){return i.fromSourceMap(c,h)},r.prototype._version=3,r.prototype.__generatedMappings=null,Object.defineProperty(r.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),r.prototype.__originalMappings=null,Object.defineProperty(r.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),r.prototype._charIsMappingSeparator=function(c,h){var d=c.charAt(h);return d===";"||d===","},r.prototype._parseMappings=function(c,h){throw new Error("Subclasses must implement _parseMappings")},r.GENERATED_ORDER=1,r.ORIGINAL_ORDER=2,r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.prototype.eachMapping=function(c,h,d){var m=h||null,g=d||r.GENERATED_ORDER,y;switch(g){case r.GENERATED_ORDER:y=this._generatedMappings;break;case r.ORIGINAL_ORDER:y=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var C=this.sourceRoot;y.map(function(X){var S=X.source===null?null:this._sources.at(X.source);return S=e.computeSourceURL(C,S,this._sourceMapURL),{source:S,generatedLine:X.generatedLine,generatedColumn:X.generatedColumn,originalLine:X.originalLine,originalColumn:X.originalColumn,name:X.name===null?null:this._names.at(X.name)}},this).forEach(c,m)},r.prototype.allGeneratedPositionsFor=function(c){var h=e.getArg(c,"line"),d={source:e.getArg(c,"source"),originalLine:h,originalColumn:e.getArg(c,"column",0)};if(d.source=this._findSourceIndex(d.source),d.source<0)return[];var m=[],g=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(g>=0){var y=this._originalMappings[g];if(c.column===void 0)for(var C=y.originalLine;y&&y.originalLine===C;)m.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++g];else for(var X=y.originalColumn;y&&y.originalLine===h&&y.originalColumn==X;)m.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++g]}return m},aa.SourceMapConsumer=r;function i(c,h){var d=c;typeof c=="string"&&(d=e.parseSourceMapInput(c));var m=e.getArg(d,"version"),g=e.getArg(d,"sources"),y=e.getArg(d,"names",[]),C=e.getArg(d,"sourceRoot",null),X=e.getArg(d,"sourcesContent",null),S=e.getArg(d,"mappings"),L=e.getArg(d,"file",null);if(m!=this._version)throw new Error("Unsupported version: "+m);C&&(C=e.normalize(C)),g=g.map(String).map(e.normalize).map(function(z){return C&&e.isAbsolute(C)&&e.isAbsolute(z)?e.relative(C,z):z}),this._names=n.fromArray(y.map(String),!0),this._sources=n.fromArray(g,!0),this._absoluteSources=this._sources.toArray().map(function(z){return e.computeSourceURL(C,z,h)}),this.sourceRoot=C,this.sourcesContent=X,this._mappings=S,this._sourceMapURL=h,this.file=L}i.prototype=Object.create(r.prototype),i.prototype.consumer=r,i.prototype._findSourceIndex=function(c){var h=c;if(this.sourceRoot!=null&&(h=e.relative(this.sourceRoot,h)),this._sources.has(h))return this._sources.indexOf(h);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==c)return d;return-1},i.fromSourceMap=function(c,h){var d=Object.create(i.prototype),m=d._names=n.fromArray(c._names.toArray(),!0),g=d._sources=n.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot,d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot),d.file=c._file,d._sourceMapURL=h,d._absoluteSources=d._sources.toArray().map(function(Z){return e.computeSourceURL(d.sourceRoot,Z,h)});for(var y=c._mappings.toArray().slice(),C=d.__generatedMappings=[],X=d.__originalMappings=[],S=0,L=y.length;S<L;S++){var z=y[S],A=new o;A.generatedLine=z.generatedLine,A.generatedColumn=z.generatedColumn,z.source&&(A.source=g.indexOf(z.source),A.originalLine=z.originalLine,A.originalColumn=z.originalColumn,z.name&&(A.name=m.indexOf(z.name)),X.push(A)),C.push(A)}return a(d.__originalMappings,e.compareByOriginalPositions),d},i.prototype._version=3,Object.defineProperty(i.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}i.prototype._parseMappings=function(c,h){for(var d=1,m=0,g=0,y=0,C=0,X=0,S=c.length,L=0,z={},A={},Z=[],E=[],D,V,T,K,J;L<S;)if(c.charAt(L)===";")d++,L++,m=0;else if(c.charAt(L)===",")L++;else{for(D=new o,D.generatedLine=d,K=L;K<S&&!this._charIsMappingSeparator(c,K);K++);if(V=c.slice(L,K),T=z[V],T)L+=V.length;else{for(T=[];L<K;)s.decode(c,L,A),J=A.value,L=A.rest,T.push(J);if(T.length===2)throw new Error("Found a source, but no line and column");if(T.length===3)throw new Error("Found a source and line, but no column");z[V]=T}D.generatedColumn=m+T[0],m=D.generatedColumn,T.length>1&&(D.source=C+T[1],C+=T[1],D.originalLine=g+T[2],g=D.originalLine,D.originalLine+=1,D.originalColumn=y+T[3],y=D.originalColumn,T.length>4&&(D.name=X+T[4],X+=T[4])),E.push(D),typeof D.originalLine=="number"&&Z.push(D)}a(E,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=E,a(Z,e.compareByOriginalPositions),this.__originalMappings=Z},i.prototype._findMapping=function(c,h,d,m,g,y){if(c[d]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(c[m]<0)throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return t.search(c,h,g,y)},i.prototype.computeColumnSpans=function(){for(var c=0;c<this._generatedMappings.length;++c){var h=this._generatedMappings[c];if(c+1<this._generatedMappings.length){var d=this._generatedMappings[c+1];if(h.generatedLine===d.generatedLine){h.lastGeneratedColumn=d.generatedColumn-1;continue}}h.lastGeneratedColumn=1/0}},i.prototype.originalPositionFor=function(c){var h={generatedLine:e.getArg(c,"line"),generatedColumn:e.getArg(c,"column")},d=this._findMapping(h,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(c,"bias",r.GREATEST_LOWER_BOUND));if(d>=0){var m=this._generatedMappings[d];if(m.generatedLine===h.generatedLine){var g=e.getArg(m,"source",null);g!==null&&(g=this._sources.at(g),g=e.computeSourceURL(this.sourceRoot,g,this._sourceMapURL));var y=e.getArg(m,"name",null);return y!==null&&(y=this._names.at(y)),{source:g,line:e.getArg(m,"originalLine",null),column:e.getArg(m,"originalColumn",null),name:y}}}return{source:null,line:null,column:null,name:null}},i.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(c){return c==null}):!1},i.prototype.sourceContentFor=function(c,h){if(!this.sourcesContent)return null;var d=this._findSourceIndex(c);if(d>=0)return this.sourcesContent[d];var m=c;this.sourceRoot!=null&&(m=e.relative(this.sourceRoot,m));var g;if(this.sourceRoot!=null&&(g=e.urlParse(this.sourceRoot))){var y=m.replace(/^file:\/\//,"");if(g.scheme=="file"&&this._sources.has(y))return this.sourcesContent[this._sources.indexOf(y)];if((!g.path||g.path=="/")&&this._sources.has("/"+m))return this.sourcesContent[this._sources.indexOf("/"+m)]}if(h)return null;throw new Error('"'+m+'" is not in the SourceMap.')},i.prototype.generatedPositionFor=function(c){var h=e.getArg(c,"source");if(h=this._findSourceIndex(h),h<0)return{line:null,column:null,lastColumn:null};var d={source:h,originalLine:e.getArg(c,"line"),originalColumn:e.getArg(c,"column")},m=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(c,"bias",r.GREATEST_LOWER_BOUND));if(m>=0){var g=this._originalMappings[m];if(g.source===d.source)return{line:e.getArg(g,"generatedLine",null),column:e.getArg(g,"generatedColumn",null),lastColumn:e.getArg(g,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},aa.BasicSourceMapConsumer=i;function u(c,h){var d=c;typeof c=="string"&&(d=e.parseSourceMapInput(c));var m=e.getArg(d,"version"),g=e.getArg(d,"sections");if(m!=this._version)throw new Error("Unsupported version: "+m);this._sources=new n,this._names=new n;var y={line:-1,column:0};this._sections=g.map(function(C){if(C.url)throw new Error("Support for url field in sections not implemented.");var X=e.getArg(C,"offset"),S=e.getArg(X,"line"),L=e.getArg(X,"column");if(S<y.line||S===y.line&&L<y.column)throw new Error("Section offsets must be ordered and non-overlapping.");return y=X,{generatedOffset:{generatedLine:S+1,generatedColumn:L+1},consumer:new r(e.getArg(C,"map"),h)}})}return u.prototype=Object.create(r.prototype),u.prototype.constructor=r,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var c=[],h=0;h<this._sections.length;h++)for(var d=0;d<this._sections[h].consumer.sources.length;d++)c.push(this._sections[h].consumer.sources[d]);return c}}),u.prototype.originalPositionFor=function(c){var h={generatedLine:e.getArg(c,"line"),generatedColumn:e.getArg(c,"column")},d=t.search(h,this._sections,function(g,y){var C=g.generatedLine-y.generatedOffset.generatedLine;return C||g.generatedColumn-y.generatedOffset.generatedColumn}),m=this._sections[d];return m?m.consumer.originalPositionFor({line:h.generatedLine-(m.generatedOffset.generatedLine-1),column:h.generatedColumn-(m.generatedOffset.generatedLine===h.generatedLine?m.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(c,h){for(var d=0;d<this._sections.length;d++){var m=this._sections[d],g=m.consumer.sourceContentFor(c,!0);if(g)return g}if(h)return null;throw new Error('"'+c+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(c){for(var h=0;h<this._sections.length;h++){var d=this._sections[h];if(d.consumer._findSourceIndex(e.getArg(c,"source"))!==-1){var m=d.consumer.generatedPositionFor(c);if(m){var g={line:m.line+(d.generatedOffset.generatedLine-1),column:m.column+(d.generatedOffset.generatedLine===m.line?d.generatedOffset.generatedColumn-1:0)};return g}}}return{line:null,column:null}},u.prototype._parseMappings=function(c,h){this.__generatedMappings=[],this.__originalMappings=[];for(var d=0;d<this._sections.length;d++)for(var m=this._sections[d],g=m.consumer._generatedMappings,y=0;y<g.length;y++){var C=g[y],X=m.consumer._sources.at(C.source);X=e.computeSourceURL(m.consumer.sourceRoot,X,this._sourceMapURL),this._sources.add(X),X=this._sources.indexOf(X);var S=null;C.name&&(S=m.consumer._names.at(C.name),this._names.add(S),S=this._names.indexOf(S));var L={source:X,generatedLine:C.generatedLine+(m.generatedOffset.generatedLine-1),generatedColumn:C.generatedColumn+(m.generatedOffset.generatedLine===C.generatedLine?m.generatedOffset.generatedColumn-1:0),originalLine:C.originalLine,originalColumn:C.originalColumn,name:S};this.__generatedMappings.push(L),typeof L.originalLine=="number"&&this.__originalMappings.push(L)}a(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),a(this.__originalMappings,e.compareByOriginalPositions)},aa.IndexedSourceMapConsumer=u,aa}var Mi={},tl;function DD(){if(tl)return Mi;tl=1;var e=x3().SourceMapGenerator,t=ka(),n=/(\r?\n)/,s=10,a="$$$isSourceNode$$$";function r(i,o,u,c,h){this.children=[],this.sourceContents={},this.line=i??null,this.column=o??null,this.source=u??null,this.name=h??null,this[a]=!0,c!=null&&this.add(c)}return r.fromStringWithSourceMap=function(i,o,u){var c=new r,h=i.split(n),d=0,m=function(){var S=z(),L=z()||"";return S+L;function z(){return d<h.length?h[d++]:void 0}},g=1,y=0,C=null;return o.eachMapping(function(S){if(C!==null)if(g<S.generatedLine)X(C,m()),g++,y=0;else{var L=h[d]||"",z=L.substr(0,S.generatedColumn-y);h[d]=L.substr(S.generatedColumn-y),y=S.generatedColumn,X(C,z),C=S;return}for(;g<S.generatedLine;)c.add(m()),g++;if(y<S.generatedColumn){var L=h[d]||"";c.add(L.substr(0,S.generatedColumn)),h[d]=L.substr(S.generatedColumn),y=S.generatedColumn}C=S},this),d<h.length&&(C&&X(C,m()),c.add(h.splice(d).join(""))),o.sources.forEach(function(S){var L=o.sourceContentFor(S);L!=null&&(u!=null&&(S=t.join(u,S)),c.setSourceContent(S,L))}),c;function X(S,L){if(S===null||S.source===void 0)c.add(L);else{var z=u?t.join(u,S.source):S.source;c.add(new r(S.originalLine,S.originalColumn,z,L,S.name))}}},r.prototype.add=function(i){if(Array.isArray(i))i.forEach(function(o){this.add(o)},this);else if(i[a]||typeof i=="string")i&&this.children.push(i);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+i);return this},r.prototype.prepend=function(i){if(Array.isArray(i))for(var o=i.length-1;o>=0;o--)this.prepend(i[o]);else if(i[a]||typeof i=="string")this.children.unshift(i);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+i);return this},r.prototype.walk=function(i){for(var o,u=0,c=this.children.length;u<c;u++)o=this.children[u],o[a]?o.walk(i):o!==""&&i(o,{source:this.source,line:this.line,column:this.column,name:this.name})},r.prototype.join=function(i){var o,u,c=this.children.length;if(c>0){for(o=[],u=0;u<c-1;u++)o.push(this.children[u]),o.push(i);o.push(this.children[u]),this.children=o}return this},r.prototype.replaceRight=function(i,o){var u=this.children[this.children.length-1];return u[a]?u.replaceRight(i,o):typeof u=="string"?this.children[this.children.length-1]=u.replace(i,o):this.children.push("".replace(i,o)),this},r.prototype.setSourceContent=function(i,o){this.sourceContents[t.toSetString(i)]=o},r.prototype.walkSourceContents=function(i){for(var o=0,u=this.children.length;o<u;o++)this.children[o][a]&&this.children[o].walkSourceContents(i);for(var c=Object.keys(this.sourceContents),o=0,u=c.length;o<u;o++)i(t.fromSetString(c[o]),this.sourceContents[c[o]])},r.prototype.toString=function(){var i="";return this.walk(function(o){i+=o}),i},r.prototype.toStringWithSourceMap=function(i){var o={code:"",line:1,column:0},u=new e(i),c=!1,h=null,d=null,m=null,g=null;return this.walk(function(y,C){o.code+=y,C.source!==null&&C.line!==null&&C.column!==null?((h!==C.source||d!==C.line||m!==C.column||g!==C.name)&&u.addMapping({source:C.source,original:{line:C.line,column:C.column},generated:{line:o.line,column:o.column},name:C.name}),h=C.source,d=C.line,m=C.column,g=C.name,c=!0):c&&(u.addMapping({generated:{line:o.line,column:o.column}}),h=null,c=!1);for(var X=0,S=y.length;X<S;X++)y.charCodeAt(X)===s?(o.line++,o.column=0,X+1===S?(h=null,c=!1):c&&u.addMapping({source:C.source,original:{line:C.line,column:C.column},generated:{line:o.line,column:o.column},name:C.name})):o.column++}),this.walkSourceContents(function(y,C){u.setSourceContent(y,C)}),{code:o.code,map:u}},Mi.SourceNode=r,Mi}var nl;function LD(){return nl||(nl=1,Oa.SourceMapGenerator=x3().SourceMapGenerator,Oa.SourceMapConsumer=SD().SourceMapConsumer,Oa.SourceNode=DD().SourceNode),Oa}const ED="2.1.0",kD={version:ED};var sl;function RD(){return sl||(sl=1,(function(e){(function(){var t,n,s,a,r,i,o,u,c,h,d,m,g,y,C,X,S,L,z,A,Z,E,D,V,T,K;r=GD(),i=XD(),t=r.Syntax;function J(l){return we.Expression.hasOwnProperty(l.type)}function Y(l){return we.Statement.hasOwnProperty(l.type)}n={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},s={"??":n.Coalesce,"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,in:n.Relational,instanceof:n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative,"**":n.Exponentiation};var Q=1,ee=2,ye=4,ae=8,ge=16,pe=32,He=64,pt=ee|ye,ut=Q|ee,B=Q|ee|ye,xe=Q,rt=ye,Be=Q|ye,Ge=Q,ze=Q|pe,Se=0,Re=Q|ge,wt=Q|ae;function ce(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function We(l,b){var f="";for(b|=0;b>0;b>>>=1,l+=l)b&1&&(f+=l);return f}function Ct(l){return/[\r\n]/g.test(l)}function oe(l){var b=l.length;return b&&i.code.isLineTerminator(l.charCodeAt(b-1))}function O(l,b){var f;for(f in b)b.hasOwnProperty(f)&&(l[f]=b[f]);return l}function $e(l,b){var f,M;function P(R){return typeof R=="object"&&R instanceof Object&&!(R instanceof RegExp)}for(f in b)b.hasOwnProperty(f)&&(M=b[f],P(M)?P(l[f])?$e(l[f],M):l[f]=$e({},M):l[f]=M);return l}function he(l){var b,f,M,P,R;if(l!==l)throw new Error("Numeric literal whose value is NaN");if(l<0||l===0&&1/l<0)throw new Error("Numeric literal whose value is negative");if(l===1/0)return c?"null":h?"1e400":"1e+400";if(b=""+l,!h||b.length<3)return b;for(f=b.indexOf("."),!c&&b.charCodeAt(0)===48&&f===1&&(f=0,b=b.slice(1)),M=b,b=b.replace("e+","e"),P=0,(R=M.indexOf("e"))>0&&(P=+M.slice(R+1),M=M.slice(0,R)),f>=0&&(P-=M.length-f-1,M=+(M.slice(0,f)+M.slice(f+1))+""),R=0;M.charCodeAt(M.length+R-1)===48;)--R;return R!==0&&(P-=R,M=M.slice(0,R)),P!==0&&(M+="e"+P),(M.length<b.length||d&&l>1e12&&Math.floor(l)===l&&(M="0x"+l.toString(16)).length<b.length)&&+M===l&&(b=M),b}function Ne(l,b){return(l&-2)===8232?(b?"u":"\\u")+(l===8232?"2028":"2029"):l===10||l===13?(b?"":"\\")+(l===10?"n":"r"):String.fromCharCode(l)}function bt(l){var b,f,M,P,R,N,_,te;if(f=l.toString(),l.source){if(b=f.match(/\/([^/]*)$/),!b)return f;for(M=b[1],f="",_=!1,te=!1,P=0,R=l.source.length;P<R;++P)N=l.source.charCodeAt(P),te?(f+=Ne(N,te),te=!1):(_?N===93&&(_=!1):N===47?f+="\\":N===91&&(_=!0),f+=Ne(N,te),te=N===92);return"/"+f+"/"+M}return f}function pn(l,b){var f;return l===8?"\\b":l===12?"\\f":l===9?"\\t":(f=l.toString(16).toUpperCase(),c||l>255?"\\u"+"0000".slice(f.length)+f:l===0&&!i.code.isDecimalDigit(b)?"\\0":l===11?"\\x0B":"\\x"+"00".slice(f.length)+f)}function Wn(l){if(l===92)return"\\\\";if(l===10)return"\\n";if(l===13)return"\\r";if(l===8232)return"\\u2028";if(l===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function hn(l){var b,f,M,P;for(P=m==="double"?'"':"'",b=0,f=l.length;b<f;++b)if(M=l.charCodeAt(b),M===39){P='"';break}else if(M===34){P="'";break}else M===92&&++b;return P+l+P}function Zt(l){var b="",f,M,P,R=0,N=0,_,te;for(f=0,M=l.length;f<M;++f){if(P=l.charCodeAt(f),P===39)++R;else if(P===34)++N;else if(P===47&&c)b+="\\";else if(i.code.isLineTerminator(P)||P===92){b+=Wn(P);continue}else if(!i.code.isIdentifierPartES5(P)&&(c&&P<32||!c&&!g&&(P<32||P>126))){b+=pn(P,l.charCodeAt(f+1));continue}b+=String.fromCharCode(P)}if(_=!(m==="double"||m==="auto"&&N<R),te=_?"'":'"',!(_?R:N))return te+b+te;for(l=b,b=te,f=0,M=l.length;f<M;++f)P=l.charCodeAt(f),(P===39&&_||P===34&&!_)&&(b+="\\"),b+=String.fromCharCode(P);return b+te}function wn(l){var b,f,M,P="";for(b=0,f=l.length;b<f;++b)M=l[b],P+=Array.isArray(M)?wn(M):M;return P}function Ze(l,b){if(!E)return Array.isArray(l)?wn(l):l;if(b==null){if(l instanceof a)return l;b={}}return b.loc==null?new a(null,null,E,l,b.name||null):new a(b.loc.start.line,b.loc.start.column,E===!0?b.loc.source||null:E,l,b.name||null)}function je(){return C||" "}function de(l,b){var f,M,P,R;return f=Ze(l).toString(),f.length===0?[b]:(M=Ze(b).toString(),M.length===0?[l]:(P=f.charCodeAt(f.length-1),R=M.charCodeAt(0),(P===43||P===45)&&P===R||i.code.isIdentifierPartES5(P)&&i.code.isIdentifierPartES5(R)||P===47&&R===105?[l,je(),b]:i.code.isWhiteSpace(P)||i.code.isLineTerminator(P)||i.code.isWhiteSpace(R)||i.code.isLineTerminator(R)?[l,b]:[l,C,b]))}function Je(l){return[o,l]}function Oe(l){var b;b=o,o+=u,l(o),o=b}function ts(l){var b;for(b=l.length-1;b>=0&&!i.code.isLineTerminator(l.charCodeAt(b));--b);return l.length-1-b}function ns(l,b){var f,M,P,R,N,_,te,Fe;for(f=l.split(/\r\n|[\r\n]/),_=Number.MAX_VALUE,M=1,P=f.length;M<P;++M){for(R=f[M],N=0;N<R.length&&i.code.isWhiteSpace(R.charCodeAt(N));)++N;_>N&&(_=N)}for(typeof b<"u"?(te=o,f[1][_]==="*"&&(b+=" "),o=b):(_&1&&--_,te=o),M=1,P=f.length;M<P;++M)Fe=Ze(Je(f[M].slice(_))),f[M]=E?Fe.join(""):Fe;return o=te,f.join(`
`)}function ht(l,b){if(l.type==="Line"){if(oe(l.value))return"//"+l.value;var f="//"+l.value;return V||(f+=`
`),f}return A.format.indent.adjustMultilineComment&&/[\n\r]/.test(l.value)?ns("/*"+l.value+"*/",b):"/*"+l.value+"*/"}function Nn(l,b){var f,M,P,R,N,_,te,Fe,it,Zn,Tn,za,Wa,It;if(l.leadingComments&&l.leadingComments.length>0){if(R=b,V){for(P=l.leadingComments[0],b=[],Fe=P.extendedRange,it=P.range,Tn=D.substring(Fe[0],it[0]),It=(Tn.match(/\n/g)||[]).length,It>0?(b.push(We(`
`,It)),b.push(Je(ht(P)))):(b.push(Tn),b.push(ht(P))),Zn=it,f=1,M=l.leadingComments.length;f<M;f++)P=l.leadingComments[f],it=P.range,za=D.substring(Zn[1],it[0]),It=(za.match(/\n/g)||[]).length,b.push(We(`
`,It)),b.push(Je(ht(P))),Zn=it;Wa=D.substring(it[1],Fe[1]),It=(Wa.match(/\n/g)||[]).length,b.push(We(`
`,It))}else for(P=l.leadingComments[0],b=[],L&&l.type===t.Program&&l.body.length===0&&b.push(`
`),b.push(ht(P)),oe(Ze(b).toString())||b.push(`
`),f=1,M=l.leadingComments.length;f<M;++f)P=l.leadingComments[f],te=[ht(P)],oe(Ze(te).toString())||te.push(`
`),b.push(Je(te));b.push(Je(R))}if(l.trailingComments)if(V)P=l.trailingComments[0],Fe=P.extendedRange,it=P.range,Tn=D.substring(Fe[0],it[0]),It=(Tn.match(/\n/g)||[]).length,It>0?(b.push(We(`
`,It)),b.push(Je(ht(P)))):(b.push(Tn),b.push(ht(P)));else for(N=!oe(Ze(b).toString()),_=We(" ",ts(Ze([o,b,u]).toString())),f=0,M=l.trailingComments.length;f<M;++f)P=l.trailingComments[f],N?(f===0?b=[b,u]:b=[b,_],b.push(ht(P,_))):b=[b,Je(ht(P))],f!==M-1&&!oe(Ze(b).toString())&&(b=[b,`
`]);return b}function se(l,b,f){var M,P=0;for(M=l;M<b;M++)D[M]===`
`&&P++;for(M=1;M<P;M++)f.push(y)}function be(l,b,f){return b<f?["(",l,")"]:l}function Ye(l){var b,f,M;for(M=l.split(/\r\n|\n/),b=1,f=M.length;b<f;b++)M[b]=y+o+M[b];return M}function st(l,b){var f,M,P;return f=l[A.verbatim],typeof f=="string"?M=be(Ye(f),n.Sequence,b):(M=Ye(f.content),P=f.precedence!=null?f.precedence:n.Sequence,M=be(M,P,b)),Ze(M,l)}function we(){}we.prototype.maybeBlock=function(l,b){var f,M,P=this;return M=!A.comment||!l.leadingComments,l.type===t.BlockStatement&&M?[C,this.generateStatement(l,b)]:l.type===t.EmptyStatement&&M?";":(Oe(function(){f=[y,Je(P.generateStatement(l,b))]}),f)},we.prototype.maybeBlockSuffix=function(l,b){var f=oe(Ze(b).toString());return l.type===t.BlockStatement&&(!A.comment||!l.leadingComments)&&!f?[b,C]:f?[b,o]:[b,y,o]};function dt(l){return Ze(l.name,l)}function Rt(l,b){return l.async?"async"+(b?je():C):""}function Vt(l){var b=l.generator&&!A.moz.starlessGenerator;return b?"*"+C:""}function Ba(l){var b=l.value,f="";return b.async&&(f+=Rt(b,!l.computed)),b.generator&&(f+=Vt(b)?"*":""),f}we.prototype.generatePattern=function(l,b,f){return l.type===t.Identifier?dt(l):this.generateExpression(l,b,f)},we.prototype.generateFunctionParams=function(l){var b,f,M,P;if(P=!1,l.type===t.ArrowFunctionExpression&&!l.rest&&(!l.defaults||l.defaults.length===0)&&l.params.length===1&&l.params[0].type===t.Identifier)M=[Rt(l,!0),dt(l.params[0])];else{for(M=l.type===t.ArrowFunctionExpression?[Rt(l,!1)]:[],M.push("("),l.defaults&&(P=!0),b=0,f=l.params.length;b<f;++b)P&&l.defaults[b]?M.push(this.generateAssignment(l.params[b],l.defaults[b],"=",n.Assignment,B)):M.push(this.generatePattern(l.params[b],n.Assignment,B)),b+1<f&&M.push(","+C);l.rest&&(l.params.length&&M.push(","+C),M.push("..."),M.push(dt(l.rest))),M.push(")")}return M},we.prototype.generateFunctionBody=function(l){var b,f;return b=this.generateFunctionParams(l),l.type===t.ArrowFunctionExpression&&(b.push(C),b.push("=>")),l.expression?(b.push(C),f=this.generateExpression(l.body,n.Assignment,B),f.toString().charAt(0)==="{"&&(f=["(",f,")"]),b.push(f)):b.push(this.maybeBlock(l.body,wt)),b},we.prototype.generateIterationForStatement=function(l,b,f){var M=["for"+(b.await?je()+"await":"")+C+"("],P=this;return Oe(function(){b.left.type===t.VariableDeclaration?Oe(function(){M.push(b.left.kind+je()),M.push(P.generateStatement(b.left.declarations[0],Se))}):M.push(P.generateExpression(b.left,n.Call,B)),M=de(M,l),M=[de(M,P.generateExpression(b.right,n.Assignment,B)),")"]}),M.push(this.maybeBlock(b.body,f)),M},we.prototype.generatePropertyKey=function(l,b){var f=[];return b&&f.push("["),f.push(this.generateExpression(l,n.Assignment,B)),b&&f.push("]"),f},we.prototype.generateAssignment=function(l,b,f,M,P){return n.Assignment<M&&(P|=Q),be([this.generateExpression(l,n.Call,P),C+f+C,this.generateExpression(b,n.Assignment,P)],n.Assignment,M)},we.prototype.semicolon=function(l){return!S&&l&pe?"":";"},we.Statement={BlockStatement:function(l,b){var f,M,P=["{",y],R=this;return Oe(function(){l.body.length===0&&V&&(f=l.range,f[1]-f[0]>2&&(M=D.substring(f[0]+1,f[1]-1),M[0]===`
`&&(P=["{"]),P.push(M)));var N,_,te,Fe;for(Fe=Ge,b&ae&&(Fe|=ge),N=0,_=l.body.length;N<_;++N)V&&(N===0&&(l.body[0].leadingComments&&(f=l.body[0].leadingComments[0].extendedRange,M=D.substring(f[0],f[1]),M[0]===`
`&&(P=["{"])),l.body[0].leadingComments||se(l.range[0],l.body[0].range[0],P)),N>0&&!l.body[N-1].trailingComments&&!l.body[N].leadingComments&&se(l.body[N-1].range[1],l.body[N].range[0],P)),N===_-1&&(Fe|=pe),l.body[N].leadingComments&&V?te=R.generateStatement(l.body[N],Fe):te=Je(R.generateStatement(l.body[N],Fe)),P.push(te),oe(Ze(te).toString())||V&&N<_-1&&l.body[N+1].leadingComments||P.push(y),V&&N===_-1&&(l.body[N].trailingComments||se(l.body[N].range[1],l.range[1],P))}),P.push(Je("}")),P},BreakStatement:function(l,b){return l.label?"break "+l.label.name+this.semicolon(b):"break"+this.semicolon(b)},ContinueStatement:function(l,b){return l.label?"continue "+l.label.name+this.semicolon(b):"continue"+this.semicolon(b)},ClassBody:function(l,b){var f=["{",y],M=this;return Oe(function(P){var R,N;for(R=0,N=l.body.length;R<N;++R)f.push(P),f.push(M.generateExpression(l.body[R],n.Sequence,B)),R+1<N&&f.push(y)}),oe(Ze(f).toString())||f.push(y),f.push(o),f.push("}"),f},ClassDeclaration:function(l,b){var f,M;return f=["class"],l.id&&(f=de(f,this.generateExpression(l.id,n.Sequence,B))),l.superClass&&(M=de("extends",this.generateExpression(l.superClass,n.Unary,B)),f=de(f,M)),f.push(C),f.push(this.generateStatement(l.body,ze)),f},DirectiveStatement:function(l,b){return A.raw&&l.raw?l.raw+this.semicolon(b):hn(l.directive)+this.semicolon(b)},DoWhileStatement:function(l,b){var f=de("do",this.maybeBlock(l.body,Ge));return f=this.maybeBlockSuffix(l.body,f),de(f,["while"+C+"(",this.generateExpression(l.test,n.Sequence,B),")"+this.semicolon(b)])},CatchClause:function(l,b){var f,M=this;return Oe(function(){var P;l.param?(f=["catch"+C+"(",M.generateExpression(l.param,n.Sequence,B),")"],l.guard&&(P=M.generateExpression(l.guard,n.Sequence,B),f.splice(2,0," if ",P))):f=["catch"]}),f.push(this.maybeBlock(l.body,Ge)),f},DebuggerStatement:function(l,b){return"debugger"+this.semicolon(b)},EmptyStatement:function(l,b){return";"},ExportDefaultDeclaration:function(l,b){var f=["export"],M;return M=b&pe?ze:Ge,f=de(f,"default"),Y(l.declaration)?f=de(f,this.generateStatement(l.declaration,M)):f=de(f,this.generateExpression(l.declaration,n.Assignment,B)+this.semicolon(b)),f},ExportNamedDeclaration:function(l,b){var f=["export"],M,P=this;return M=b&pe?ze:Ge,l.declaration?de(f,this.generateStatement(l.declaration,M)):(l.specifiers&&(l.specifiers.length===0?f=de(f,"{"+C+"}"):l.specifiers[0].type===t.ExportBatchSpecifier?f=de(f,this.generateExpression(l.specifiers[0],n.Sequence,B)):(f=de(f,"{"),Oe(function(R){var N,_;for(f.push(y),N=0,_=l.specifiers.length;N<_;++N)f.push(R),f.push(P.generateExpression(l.specifiers[N],n.Sequence,B)),N+1<_&&f.push(","+y)}),oe(Ze(f).toString())||f.push(y),f.push(o+"}")),l.source?f=de(f,["from"+C,this.generateExpression(l.source,n.Sequence,B),this.semicolon(b)]):f.push(this.semicolon(b))),f)},ExportAllDeclaration:function(l,b){return["export"+C,"*"+C,"from"+C,this.generateExpression(l.source,n.Sequence,B),this.semicolon(b)]},ExpressionStatement:function(l,b){var f,M;function P(_){var te;return _.slice(0,5)!=="class"?!1:(te=_.charCodeAt(5),te===123||i.code.isWhiteSpace(te)||i.code.isLineTerminator(te))}function R(_){var te;return _.slice(0,8)!=="function"?!1:(te=_.charCodeAt(8),te===40||i.code.isWhiteSpace(te)||te===42||i.code.isLineTerminator(te))}function N(_){var te,Fe,it;if(_.slice(0,5)!=="async"||!i.code.isWhiteSpace(_.charCodeAt(5)))return!1;for(Fe=6,it=_.length;Fe<it&&i.code.isWhiteSpace(_.charCodeAt(Fe));++Fe);return Fe===it||_.slice(Fe,Fe+8)!=="function"?!1:(te=_.charCodeAt(Fe+8),te===40||i.code.isWhiteSpace(te)||te===42||i.code.isLineTerminator(te))}return f=[this.generateExpression(l.expression,n.Sequence,B)],M=Ze(f).toString(),M.charCodeAt(0)===123||P(M)||R(M)||N(M)||z&&b&ge&&l.expression.type===t.Literal&&typeof l.expression.value=="string"?f=["(",f,")"+this.semicolon(b)]:f.push(this.semicolon(b)),f},ImportDeclaration:function(l,b){var f,M,P=this;return l.specifiers.length===0?["import",C,this.generateExpression(l.source,n.Sequence,B),this.semicolon(b)]:(f=["import"],M=0,l.specifiers[M].type===t.ImportDefaultSpecifier&&(f=de(f,[this.generateExpression(l.specifiers[M],n.Sequence,B)]),++M),l.specifiers[M]&&(M!==0&&f.push(","),l.specifiers[M].type===t.ImportNamespaceSpecifier?f=de(f,[C,this.generateExpression(l.specifiers[M],n.Sequence,B)]):(f.push(C+"{"),l.specifiers.length-M===1?(f.push(C),f.push(this.generateExpression(l.specifiers[M],n.Sequence,B)),f.push(C+"}"+C)):(Oe(function(R){var N,_;for(f.push(y),N=M,_=l.specifiers.length;N<_;++N)f.push(R),f.push(P.generateExpression(l.specifiers[N],n.Sequence,B)),N+1<_&&f.push(","+y)}),oe(Ze(f).toString())||f.push(y),f.push(o+"}"+C)))),f=de(f,["from"+C,this.generateExpression(l.source,n.Sequence,B),this.semicolon(b)]),f)},VariableDeclarator:function(l,b){var f=b&Q?B:pt;return l.init?[this.generateExpression(l.id,n.Assignment,f),C,"=",C,this.generateExpression(l.init,n.Assignment,f)]:this.generatePattern(l.id,n.Assignment,f)},VariableDeclaration:function(l,b){var f,M,P,R,N,_=this;f=[l.kind],N=b&Q?Ge:Se;function te(){for(R=l.declarations[0],A.comment&&R.leadingComments?(f.push(`
`),f.push(Je(_.generateStatement(R,N)))):(f.push(je()),f.push(_.generateStatement(R,N))),M=1,P=l.declarations.length;M<P;++M)R=l.declarations[M],A.comment&&R.leadingComments?(f.push(","+y),f.push(Je(_.generateStatement(R,N)))):(f.push(","+C),f.push(_.generateStatement(R,N)))}return l.declarations.length>1?Oe(te):te(),f.push(this.semicolon(b)),f},ThrowStatement:function(l,b){return[de("throw",this.generateExpression(l.argument,n.Sequence,B)),this.semicolon(b)]},TryStatement:function(l,b){var f,M,P,R;if(f=["try",this.maybeBlock(l.block,Ge)],f=this.maybeBlockSuffix(l.block,f),l.handlers)for(M=0,P=l.handlers.length;M<P;++M)f=de(f,this.generateStatement(l.handlers[M],Ge)),(l.finalizer||M+1!==P)&&(f=this.maybeBlockSuffix(l.handlers[M].body,f));else{for(R=l.guardedHandlers||[],M=0,P=R.length;M<P;++M)f=de(f,this.generateStatement(R[M],Ge)),(l.finalizer||M+1!==P)&&(f=this.maybeBlockSuffix(R[M].body,f));if(l.handler)if(Array.isArray(l.handler))for(M=0,P=l.handler.length;M<P;++M)f=de(f,this.generateStatement(l.handler[M],Ge)),(l.finalizer||M+1!==P)&&(f=this.maybeBlockSuffix(l.handler[M].body,f));else f=de(f,this.generateStatement(l.handler,Ge)),l.finalizer&&(f=this.maybeBlockSuffix(l.handler.body,f))}return l.finalizer&&(f=de(f,["finally",this.maybeBlock(l.finalizer,Ge)])),f},SwitchStatement:function(l,b){var f,M,P,R,N,_=this;if(Oe(function(){f=["switch"+C+"(",_.generateExpression(l.discriminant,n.Sequence,B),")"+C+"{"+y]}),l.cases)for(N=Ge,P=0,R=l.cases.length;P<R;++P)P===R-1&&(N|=pe),M=Je(this.generateStatement(l.cases[P],N)),f.push(M),oe(Ze(M).toString())||f.push(y);return f.push(Je("}")),f},SwitchCase:function(l,b){var f,M,P,R,N,_=this;return Oe(function(){for(l.test?f=[de("case",_.generateExpression(l.test,n.Sequence,B)),":"]:f=["default:"],P=0,R=l.consequent.length,R&&l.consequent[0].type===t.BlockStatement&&(M=_.maybeBlock(l.consequent[0],Ge),f.push(M),P=1),P!==R&&!oe(Ze(f).toString())&&f.push(y),N=Ge;P<R;++P)P===R-1&&b&pe&&(N|=pe),M=Je(_.generateStatement(l.consequent[P],N)),f.push(M),P+1!==R&&!oe(Ze(M).toString())&&f.push(y)}),f},IfStatement:function(l,b){var f,M,P,R=this;return Oe(function(){f=["if"+C+"(",R.generateExpression(l.test,n.Sequence,B),")"]}),P=b&pe,M=Ge,P&&(M|=pe),l.alternate?(f.push(this.maybeBlock(l.consequent,Ge)),f=this.maybeBlockSuffix(l.consequent,f),l.alternate.type===t.IfStatement?f=de(f,["else ",this.generateStatement(l.alternate,M)]):f=de(f,de("else",this.maybeBlock(l.alternate,M)))):f.push(this.maybeBlock(l.consequent,M)),f},ForStatement:function(l,b){var f,M=this;return Oe(function(){f=["for"+C+"("],l.init?l.init.type===t.VariableDeclaration?f.push(M.generateStatement(l.init,Se)):(f.push(M.generateExpression(l.init,n.Sequence,pt)),f.push(";")):f.push(";"),l.test&&(f.push(C),f.push(M.generateExpression(l.test,n.Sequence,B))),f.push(";"),l.update&&(f.push(C),f.push(M.generateExpression(l.update,n.Sequence,B))),f.push(")")}),f.push(this.maybeBlock(l.body,b&pe?ze:Ge)),f},ForInStatement:function(l,b){return this.generateIterationForStatement("in",l,b&pe?ze:Ge)},ForOfStatement:function(l,b){return this.generateIterationForStatement("of",l,b&pe?ze:Ge)},LabeledStatement:function(l,b){return[l.label.name+":",this.maybeBlock(l.body,b&pe?ze:Ge)]},Program:function(l,b){var f,M,P,R,N;for(R=l.body.length,f=[L&&R>0?`
`:""],N=Re,P=0;P<R;++P)!L&&P===R-1&&(N|=pe),V&&(P===0&&(l.body[0].leadingComments||se(l.range[0],l.body[P].range[0],f)),P>0&&!l.body[P-1].trailingComments&&!l.body[P].leadingComments&&se(l.body[P-1].range[1],l.body[P].range[0],f)),M=Je(this.generateStatement(l.body[P],N)),f.push(M),P+1<R&&!oe(Ze(M).toString())&&(V&&l.body[P+1].leadingComments||f.push(y)),V&&P===R-1&&(l.body[P].trailingComments||se(l.body[P].range[1],l.range[1],f));return f},FunctionDeclaration:function(l,b){return[Rt(l,!0),"function",Vt(l)||je(),l.id?dt(l.id):"",this.generateFunctionBody(l)]},ReturnStatement:function(l,b){return l.argument?[de("return",this.generateExpression(l.argument,n.Sequence,B)),this.semicolon(b)]:["return"+this.semicolon(b)]},WhileStatement:function(l,b){var f,M=this;return Oe(function(){f=["while"+C+"(",M.generateExpression(l.test,n.Sequence,B),")"]}),f.push(this.maybeBlock(l.body,b&pe?ze:Ge)),f},WithStatement:function(l,b){var f,M=this;return Oe(function(){f=["with"+C+"(",M.generateExpression(l.object,n.Sequence,B),")"]}),f.push(this.maybeBlock(l.body,b&pe?ze:Ge)),f}},O(we.prototype,we.Statement),we.Expression={SequenceExpression:function(l,b,f){var M,P,R;for(n.Sequence<b&&(f|=Q),M=[],P=0,R=l.expressions.length;P<R;++P)M.push(this.generateExpression(l.expressions[P],n.Assignment,f)),P+1<R&&M.push(","+C);return be(M,n.Sequence,b)},AssignmentExpression:function(l,b,f){return this.generateAssignment(l.left,l.right,l.operator,b,f)},ArrowFunctionExpression:function(l,b,f){return be(this.generateFunctionBody(l),n.ArrowFunction,b)},ConditionalExpression:function(l,b,f){return n.Conditional<b&&(f|=Q),be([this.generateExpression(l.test,n.Coalesce,f),C+"?"+C,this.generateExpression(l.consequent,n.Assignment,f),C+":"+C,this.generateExpression(l.alternate,n.Assignment,f)],n.Conditional,b)},LogicalExpression:function(l,b,f){return l.operator==="??"&&(f|=He),this.BinaryExpression(l,b,f)},BinaryExpression:function(l,b,f){var M,P,R,N,_,te;return N=s[l.operator],P=l.operator==="**"?n.Postfix:N,R=l.operator==="**"?N:N+1,N<b&&(f|=Q),_=this.generateExpression(l.left,P,f),te=_.toString(),te.charCodeAt(te.length-1)===47&&i.code.isIdentifierPartES5(l.operator.charCodeAt(0))?M=[_,je(),l.operator]:M=de(_,l.operator),_=this.generateExpression(l.right,R,f),l.operator==="/"&&_.toString().charAt(0)==="/"||l.operator.slice(-1)==="<"&&_.toString().slice(0,3)==="!--"?(M.push(je()),M.push(_)):M=de(M,_),l.operator==="in"&&!(f&Q)?["(",M,")"]:(l.operator==="||"||l.operator==="&&")&&f&He?["(",M,")"]:be(M,N,b)},CallExpression:function(l,b,f){var M,P,R;for(M=[this.generateExpression(l.callee,n.Call,ut)],l.optional&&M.push("?."),M.push("("),P=0,R=l.arguments.length;P<R;++P)M.push(this.generateExpression(l.arguments[P],n.Assignment,B)),P+1<R&&M.push(","+C);return M.push(")"),f&ee?be(M,n.Call,b):["(",M,")"]},ChainExpression:function(l,b,f){n.OptionalChaining<b&&(f|=ee);var M=this.generateExpression(l.expression,n.OptionalChaining,f);return be(M,n.OptionalChaining,b)},NewExpression:function(l,b,f){var M,P,R,N,_;if(P=l.arguments.length,_=f&ye&&!X&&P===0?Be:xe,M=de("new",this.generateExpression(l.callee,n.New,_)),!(f&ye)||X||P>0){for(M.push("("),R=0,N=P;R<N;++R)M.push(this.generateExpression(l.arguments[R],n.Assignment,B)),R+1<N&&M.push(","+C);M.push(")")}return be(M,n.New,b)},MemberExpression:function(l,b,f){var M,P;return M=[this.generateExpression(l.object,n.Call,f&ee?ut:xe)],l.computed?(l.optional&&M.push("?."),M.push("["),M.push(this.generateExpression(l.property,n.Sequence,f&ee?B:Be)),M.push("]")):(!l.optional&&l.object.type===t.Literal&&typeof l.object.value=="number"&&(P=Ze(M).toString(),P.indexOf(".")<0&&!/[eExX]/.test(P)&&i.code.isDecimalDigit(P.charCodeAt(P.length-1))&&!(P.length>=2&&P.charCodeAt(0)===48)&&M.push(" ")),M.push(l.optional?"?.":"."),M.push(dt(l.property))),be(M,n.Member,b)},MetaProperty:function(l,b,f){var M;return M=[],M.push(typeof l.meta=="string"?l.meta:dt(l.meta)),M.push("."),M.push(typeof l.property=="string"?l.property:dt(l.property)),be(M,n.Member,b)},UnaryExpression:function(l,b,f){var M,P,R,N,_;return P=this.generateExpression(l.argument,n.Unary,B),C===""?M=de(l.operator,P):(M=[l.operator],l.operator.length>2?M=de(M,P):(N=Ze(M).toString(),_=N.charCodeAt(N.length-1),R=P.toString().charCodeAt(0),((_===43||_===45)&&_===R||i.code.isIdentifierPartES5(_)&&i.code.isIdentifierPartES5(R))&&M.push(je()),M.push(P))),be(M,n.Unary,b)},YieldExpression:function(l,b,f){var M;return l.delegate?M="yield*":M="yield",l.argument&&(M=de(M,this.generateExpression(l.argument,n.Yield,B))),be(M,n.Yield,b)},AwaitExpression:function(l,b,f){var M=de(l.all?"await*":"await",this.generateExpression(l.argument,n.Await,B));return be(M,n.Await,b)},UpdateExpression:function(l,b,f){return l.prefix?be([l.operator,this.generateExpression(l.argument,n.Unary,B)],n.Unary,b):be([this.generateExpression(l.argument,n.Postfix,B),l.operator],n.Postfix,b)},FunctionExpression:function(l,b,f){var M=[Rt(l,!0),"function"];return l.id?(M.push(Vt(l)||je()),M.push(dt(l.id))):M.push(Vt(l)||C),M.push(this.generateFunctionBody(l)),M},ArrayPattern:function(l,b,f){return this.ArrayExpression(l,b,f,!0)},ArrayExpression:function(l,b,f,M){var P,R,N=this;return l.elements.length?(R=M?!1:l.elements.length>1,P=["[",R?y:""],Oe(function(_){var te,Fe;for(te=0,Fe=l.elements.length;te<Fe;++te)l.elements[te]?(P.push(R?_:""),P.push(N.generateExpression(l.elements[te],n.Assignment,B))):(R&&P.push(_),te+1===Fe&&P.push(",")),te+1<Fe&&P.push(","+(R?y:C))}),R&&!oe(Ze(P).toString())&&P.push(y),P.push(R?o:""),P.push("]"),P):"[]"},RestElement:function(l,b,f){return"..."+this.generatePattern(l.argument)},ClassExpression:function(l,b,f){var M,P;return M=["class"],l.id&&(M=de(M,this.generateExpression(l.id,n.Sequence,B))),l.superClass&&(P=de("extends",this.generateExpression(l.superClass,n.Unary,B)),M=de(M,P)),M.push(C),M.push(this.generateStatement(l.body,ze)),M},MethodDefinition:function(l,b,f){var M,P;return l.static?M=["static"+C]:M=[],l.kind==="get"||l.kind==="set"?P=[de(l.kind,this.generatePropertyKey(l.key,l.computed)),this.generateFunctionBody(l.value)]:P=[Ba(l),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)],de(M,P)},Property:function(l,b,f){return l.kind==="get"||l.kind==="set"?[l.kind,je(),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)]:l.shorthand?l.value.type==="AssignmentPattern"?this.AssignmentPattern(l.value,n.Sequence,B):this.generatePropertyKey(l.key,l.computed):l.method?[Ba(l),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)]:[this.generatePropertyKey(l.key,l.computed),":"+C,this.generateExpression(l.value,n.Assignment,B)]},ObjectExpression:function(l,b,f){var M,P,R,N=this;return l.properties.length?(M=l.properties.length>1,Oe(function(){R=N.generateExpression(l.properties[0],n.Sequence,B)}),!M&&!Ct(Ze(R).toString())?["{",C,R,C,"}"]:(Oe(function(_){var te,Fe;if(P=["{",y,_,R],M)for(P.push(","+y),te=1,Fe=l.properties.length;te<Fe;++te)P.push(_),P.push(N.generateExpression(l.properties[te],n.Sequence,B)),te+1<Fe&&P.push(","+y)}),oe(Ze(P).toString())||P.push(y),P.push(o),P.push("}"),P)):"{}"},AssignmentPattern:function(l,b,f){return this.generateAssignment(l.left,l.right,"=",b,f)},ObjectPattern:function(l,b,f){var M,P,R,N,_,te=this;if(!l.properties.length)return"{}";if(N=!1,l.properties.length===1)_=l.properties[0],_.type===t.Property&&_.value.type!==t.Identifier&&(N=!0);else for(P=0,R=l.properties.length;P<R;++P)if(_=l.properties[P],_.type===t.Property&&!_.shorthand){N=!0;break}return M=["{",N?y:""],Oe(function(Fe){var it,Zn;for(it=0,Zn=l.properties.length;it<Zn;++it)M.push(N?Fe:""),M.push(te.generateExpression(l.properties[it],n.Sequence,B)),it+1<Zn&&M.push(","+(N?y:C))}),N&&!oe(Ze(M).toString())&&M.push(y),M.push(N?o:""),M.push("}"),M},ThisExpression:function(l,b,f){return"this"},Super:function(l,b,f){return"super"},Identifier:function(l,b,f){return dt(l)},ImportDefaultSpecifier:function(l,b,f){return dt(l.id||l.local)},ImportNamespaceSpecifier:function(l,b,f){var M=["*"],P=l.id||l.local;return P&&M.push(C+"as"+je()+dt(P)),M},ImportSpecifier:function(l,b,f){var M=l.imported,P=[M.name],R=l.local;return R&&R.name!==M.name&&P.push(je()+"as"+je()+dt(R)),P},ExportSpecifier:function(l,b,f){var M=l.local,P=[M.name],R=l.exported;return R&&R.name!==M.name&&P.push(je()+"as"+je()+dt(R)),P},Literal:function(l,b,f){var M;if(l.hasOwnProperty("raw")&&Z&&A.raw)try{if(M=Z(l.raw).body[0].expression,M.type===t.Literal&&M.value===l.value)return l.raw}catch{}return l.regex?"/"+l.regex.pattern+"/"+l.regex.flags:typeof l.value=="bigint"?l.value.toString()+"n":l.bigint?l.bigint+"n":l.value===null?"null":typeof l.value=="string"?Zt(l.value):typeof l.value=="number"?he(l.value):typeof l.value=="boolean"?l.value?"true":"false":bt(l.value)},GeneratorExpression:function(l,b,f){return this.ComprehensionExpression(l,b,f)},ComprehensionExpression:function(l,b,f){var M,P,R,N,_=this;return M=l.type===t.GeneratorExpression?["("]:["["],A.moz.comprehensionExpressionStartsWithAssignment&&(N=this.generateExpression(l.body,n.Assignment,B),M.push(N)),l.blocks&&Oe(function(){for(P=0,R=l.blocks.length;P<R;++P)N=_.generateExpression(l.blocks[P],n.Sequence,B),P>0||A.moz.comprehensionExpressionStartsWithAssignment?M=de(M,N):M.push(N)}),l.filter&&(M=de(M,"if"+C),N=this.generateExpression(l.filter,n.Sequence,B),M=de(M,["(",N,")"])),A.moz.comprehensionExpressionStartsWithAssignment||(N=this.generateExpression(l.body,n.Assignment,B),M=de(M,N)),M.push(l.type===t.GeneratorExpression?")":"]"),M},ComprehensionBlock:function(l,b,f){var M;return l.left.type===t.VariableDeclaration?M=[l.left.kind,je(),this.generateStatement(l.left.declarations[0],Se)]:M=this.generateExpression(l.left,n.Call,B),M=de(M,l.of?"of":"in"),M=de(M,this.generateExpression(l.right,n.Sequence,B)),["for"+C+"(",M,")"]},SpreadElement:function(l,b,f){return["...",this.generateExpression(l.argument,n.Assignment,B)]},TaggedTemplateExpression:function(l,b,f){var M=ut;f&ee||(M=xe);var P=[this.generateExpression(l.tag,n.Call,M),this.generateExpression(l.quasi,n.Primary,rt)];return be(P,n.TaggedTemplate,b)},TemplateElement:function(l,b,f){return l.value.raw},TemplateLiteral:function(l,b,f){var M,P,R;for(M=["`"],P=0,R=l.quasis.length;P<R;++P)M.push(this.generateExpression(l.quasis[P],n.Primary,B)),P+1<R&&(M.push("${"+C),M.push(this.generateExpression(l.expressions[P],n.Sequence,B)),M.push(C+"}"));return M.push("`"),M},ModuleSpecifier:function(l,b,f){return this.Literal(l,b,f)},ImportExpression:function(l,b,f){return be(["import(",this.generateExpression(l.source,n.Assignment,B),")"],n.Call,b)}},O(we.prototype,we.Expression),we.prototype.generateExpression=function(l,b,f){var M,P;return P=l.type||t.Property,A.verbatim&&l.hasOwnProperty(A.verbatim)?st(l,b):(M=this[P](l,b,f),A.comment&&(M=Nn(l,M)),Ze(M,l))},we.prototype.generateStatement=function(l,b){var f,M;return f=this[l.type](l,b),A.comment&&(f=Nn(l,f)),M=Ze(f).toString(),l.type===t.Program&&!L&&y===""&&M.charAt(M.length-1)===`
`&&(f=E?Ze(f).replaceRight(/\s+$/,""):M.replace(/\s+$/,"")),Ze(f,l)};function qr(l){var b;if(b=new we,Y(l))return b.generateStatement(l,Ge);if(J(l))return b.generateExpression(l,n.Sequence,B);throw new Error("Unknown node type: "+l.type)}function $r(l,b){var f=ce(),M,P;return b!=null?(typeof b.indent=="string"&&(f.format.indent.style=b.indent),typeof b.base=="number"&&(f.format.indent.base=b.base),b=$e(f,b),u=b.format.indent.style,typeof b.base=="string"?o=b.base:o=We(u,b.format.indent.base)):(b=f,u=b.format.indent.style,o=We(u,b.format.indent.base)),c=b.format.json,h=b.format.renumber,d=c?!1:b.format.hexadecimal,m=c?"double":b.format.quotes,g=b.format.escapeless,y=b.format.newline,C=b.format.space,b.format.compact&&(y=C=u=o=""),X=b.format.parentheses,S=b.format.semicolons,L=b.format.safeConcatenation,z=b.directive,Z=c?null:b.parse,E=b.sourceMap,D=b.sourceCode,V=b.format.preserveBlankLines&&D!==null,A=b,E&&(e.browser?a=xD.sourceMap.SourceNode:a=LD().SourceNode),M=qr(l),E?(P=M.toStringWithSourceMap({file:b.file,sourceRoot:b.sourceMapRoot}),b.sourceContent&&P.map.setSourceContent(b.sourceMap,b.sourceContent),b.sourceMapWithCode?P:P.map.toString()):(P={code:M.toString(),map:null},b.sourceMapWithCode?P:P.code)}T={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},K=ce().format,e.version=kD.version,e.generate=$r,e.attachComments=r.attachComments,e.Precedence=$e({},n),e.browser=!1,e.FORMAT_MINIFY=T,e.FORMAT_DEFAULTS=K})()})(kc)),kc}var VD=RD();const C3=y3(VD);class BD{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:t=>this.replacement=t}}replace(t,n,s,a){t&&n&&(s!=null?t[n][s]=a:t[n]=a)}remove(t,n,s){t&&n&&(s!=null?t[n].splice(s,1):delete t[n])}}class zD extends BD{constructor(t,n){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:s=>this.replacement=s},this.enter=t,this.leave=n}visit(t,n,s,a){if(t){if(this.enter){const i=this.should_skip,o=this.should_remove,u=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,t,n,s,a),this.replacement&&(t=this.replacement,this.replace(n,s,a,t)),this.should_remove&&this.remove(n,s,a);const c=this.should_skip,h=this.should_remove;if(this.should_skip=i,this.should_remove=o,this.replacement=u,c)return t;if(h)return null}let r;for(r in t){const i=t[r];if(i&&typeof i=="object")if(Array.isArray(i)){const o=i;for(let u=0;u<o.length;u+=1){const c=o[u];al(c)&&(this.visit(c,t,r,u)||u--)}}else al(i)&&this.visit(i,t,r,null)}if(this.leave){const i=this.replacement,o=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,t,n,s,a),this.replacement&&(t=this.replacement,this.replace(n,s,a,t)),this.should_remove&&this.remove(n,s,a);const u=this.should_remove;if(this.replacement=i,this.should_remove=o,u)return null}}return t}}function al(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}function G3(e,{enter:t,leave:n}){return new zD(t,n).visit(e,null)}let P3=[];function oV(e){P3.push(e)}let Bs=new Map;function uV(e,t){Bs.set(e,t)}function WD(e,t={}){const{wrapAsync:n=!1,addReturn:s=!0,emitMiniLocations:a=!0,emitWidgets:r=!0}=t,i=[];let o=MD(e,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0,onComment:i});const u=lL(i,e.length);let c=[];const h=(y,C)=>{const X=Bs.get("minilang");if(X){const S=`[${y}]`,L=X.getLocations(S,C.start);c=c.concat(L)}else{const S=iu(`"${y}"`,C.start,e);c=c.concat(S)}};let d=[];G3(o,{enter(y,C){if(rL(y)){const{name:X}=y.tag,S=Bs.get(X),L=y.quasi.quasis[0].value.raw,z=y.quasi.start+1;if(a){const A=S.getLocations(L,z);c=c.concat(A)}return this.skip(),this.replace(cL(X,L,z))}if(iL(y,"tidal")){const X=y.quasi.quasis[0].value.raw,S=y.quasi.start+1;if(a){const L=oL(X,S);c=c.concat(L)}return this.skip(),this.replace(uL(X,S))}if(JD(y,C)){if(cl(y.start,u))return;const{quasis:X}=y,{raw:S}=X[0].value;return this.skip(),a&&h(S,y),this.replace(ul(S,y))}if(UD(y)){if(cl(y.start,u))return;const{value:X}=y;return this.skip(),a&&h(X,y),this.replace(ul(X,y))}if(OD(y))return r&&d.push({from:y.arguments[0].start,to:y.arguments[0].end,value:y.arguments[0].raw,min:y.arguments[1]?.value??0,max:y.arguments[2]?.value??1,step:y.arguments[3]?.value,type:"slider"}),this.replace(qD(y));if(QD(y)){const X=y.callee.property.name,S=d.filter(z=>z.type===X).length,L={to:y.end,index:S,type:X,id:t.id};return r&&d.push(L),this.replace(eL(y,L))}if(tL(y,C))return this.replace(nL(y));if(sL(y))return this.replace(aL(y))},leave(y,C,X,S){if(!ND(y))return;let[L,...z]=y.arguments;if(!L)throw new Error("K(...) requires an expression");TD(L)&&(L={type:"CallExpression",callee:L,arguments:[],optional:!1});const{template:A,patternExprs:Z}=ID(L);if(Z.length){const V=[{type:"Literal",value:A},...Z,...z];let T=y.callee;return T.type==="ChainExpression"&&(T=T.expression),T.type==="MemberExpression"?this.replace({type:"CallExpression",callee:ol(T.object),arguments:V,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:V,optional:!1})}const E=[{type:"Literal",value:$i(L)},...z];let D=y.callee;return D.type==="ChainExpression"&&(D=D.expression),D.type==="MemberExpression"?this.replace({type:"CallExpression",callee:ol(D.object),arguments:E,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:E,optional:!1})}});let{body:m}=o;if(!m.length)console.warn("empty body -> fallback to silence"),m.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!m?.[m.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(s){const{expression:y}=m[m.length-1];m[m.length-1]={type:"ReturnStatement",argument:y}}let g=C3.generate(o);return n&&(g=`(async ()=>{${g}})()`),a?{output:g,miniLocations:c,widgets:d}:{output:g}}function ND(e){if(e.type!=="CallExpression")return!1;let t=e.callee;return t.type==="ChainExpression"&&(t=t.expression),t.type==="MemberExpression"?!t.computed&&t.property?.name==="K":t.type==="Identifier"&&t.name==="K"}function TD(e){return e.type!=="ArrowFunctionExpression"&&e.type!=="FunctionExpression"||e.params.length?!1:e.body?.type==="BlockStatement"}function $i(e){return C3.generate(e,{format:{semicolons:!1}})}function ID(e){const t=il(e),n=new Map,s=[];if(G3(t,{enter(i,o,u,c){n.set(i,{parent:o,prop:u,index:c});const h=YD(i);h&&(s.push({node:i,patternExpr:h}),this.skip())}}),!s.length)return{template:$i(t),patternExprs:[]};s.sort((i,o)=>rl(i.node)-rl(o.node));const a=s.map(({patternExpr:i})=>il(i));let r=t;return s.forEach(({node:i},o)=>{r=jD(i,_D(o),n,r)}),{template:$i(r),patternExprs:a}}function YD(e){if(HD(e)){const t=e.arguments?.[0];if(!t)throw new Error("S(...) requires an argument");return t}return v3(e)?e:null}function HD(e){if(e.type!=="CallExpression")return!1;const t=e.callee;return t.type==="Identifier"?t.name==="S":t.type==="MemberExpression"&&!t.computed?t.property?.name==="S":!1}function KD(){return Bs.get("minilang")?.name||"m"}function v3(e){if(e.type!=="CallExpression")return!1;const t=e.callee;if(t.type!=="Identifier"||t.name!==KD())return!1;const n=e.arguments?.[0];return n?.type==="Literal"&&typeof n.value=="string"}function rl(e){if(typeof e.start=="number")return e.start;if(v3(e)){const t=e.arguments?.[1];if(t?.type==="Literal"&&typeof t.value=="number")return t.value}return 0}function _D(e){return{type:"MemberExpression",object:{type:"Identifier",name:"pat"},property:{type:"Literal",value:e},computed:!0,optional:!1}}function jD(e,t,n,s){const a=n.get(e);if(!a||!a.parent)return t;const{parent:r,prop:i,index:o}=a;return Array.isArray(r[i])?r[i][o]=t:r[i]=t,n.set(t,{parent:r,prop:i,index:o}),s}function il(e){return JSON.parse(JSON.stringify(e))}function ol(e){return{type:"MemberExpression",object:e,property:{type:"Identifier",name:"worklet"},computed:!1,optional:!1}}function UD(e,t,n){return e.type!=="Literal"?!1:e.raw[0]==='"'}function JD(e,t){return e.type==="TemplateLiteral"&&t.type!=="TaggedTemplateExpression"}function ul(e,t){const{start:n}=t,s=Bs.get("minilang");let a="m";return s&&s.name&&(a=s.name),{type:"CallExpression",callee:{type:"Identifier",name:a},arguments:[{type:"Literal",value:e},{type:"Literal",value:n}],optional:!1}}function OD(e){return e.type==="CallExpression"&&e.callee.name==="slider"}function QD(e){return e.type==="CallExpression"&&P3.includes(e.callee.property?.name)}function qD(e){const t="slider_"+e.arguments[0].start;return e.arguments.unshift({type:"Literal",value:t,raw:t}),e.callee.name="sliderWithID",e}function $D(e){return`${e.id||""}_widget_${e.type}_${e.index}`}function eL(e,t){const n=$D(t);return e.arguments.unshift({type:"Literal",value:n,raw:n}),e}function tL(e,t){return e.type==="CallExpression"&&e.callee.name==="samples"&&t.type!=="AwaitExpression"}function nL(e){return{type:"AwaitExpression",argument:e}}function sL(e){return e.type==="LabeledStatement"}function aL(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:e.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:e.label.name,raw:`'${e.label.name}'`}]}}}function rL(e){return e.type==="TaggedTemplateExpression"&&Bs.has(e.tag.name)}function iL(e,t){return e.type==="TaggedTemplateExpression"&&e.tag.name===t}function oL(e,t){return e.split("").reduce((n,s,a)=>(s!=='"'||(!n.length||n[n.length-1].length>1?n.push([a+1]):n[n.length-1].push(a)),n),[]).map(([n,s])=>{const a=e.slice(n,s);return iu(`"${a}"`,t+n-1)}).flat()}function uL(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:e},{type:"Literal",value:t}],optional:!1}}function cL(e,t,n){return{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Literal",value:t},{type:"Literal",value:n}],optional:!1}}function lL(e,t){const n=[],s=[];for(const a of e){const r=a.value.trim();if(r.startsWith("mini-off"))s.push(a.start);else if(r.startsWith("mini-on")){const i=s.pop();n.push([i,a.end])}}for(;s.length;){const a=s.pop();n.push([a,t])}return n}function cl(e,t){for(const[n,s]of t)if(e>=n&&e<s)return!0;return!1}function yu(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function gu(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var X3=[0,2,4,-1,1,3,5],w3=X3.map(e=>Math.floor(e*7/12));function Z3(e){const{step:t,alt:n,oct:s,dir:a=1}=e,r=X3[t]+7*n;if(s===void 0)return[a*r];const i=s-w3[t]-4*n;return[a*r,a*i]}var pL=[3,0,4,1,5,2,6];function F3(e){const[t,n,s]=e,a=pL[hL(t)],r=Math.floor((t+1)/7);if(n===void 0)return{step:a,alt:r,dir:s};const i=n+4*r+w3[a];return{step:a,alt:r,oct:i,dir:s}}function hL(e){const t=(e+1)%7;return t<0?7+t:t}var ll=(e,t)=>Array(Math.abs(t)+1).join(e),eo=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),dL="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",mL="(AA|A|P|M|m|d|dd)([-+]?\\d+)",fL=new RegExp("^"+dL+"|"+mL+"$");function yL(e){const t=fL.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var pl={};function Mn(e){return typeof e=="string"?pl[e]||(pl[e]=gL(e)):gu(e)?Mn(ML(e)):yu(e)?Mn(e.name):eo}var hl=[0,2,4,5,7,9,11],A3="PMMPPMM";function gL(e){const t=yL(e);if(t[0]==="")return eo;const n=+t[0],s=t[1],a=(Math.abs(n)-1)%7,r=A3[a];if(r==="M"&&s==="P")return eo;const i=r==="M"?"majorable":"perfectable",o=""+n+s,u=n<0?-1:1,c=n===8||n===-8?n:u*(a+1),h=bL(i,s),d=Math.floor((Math.abs(n)-1)/7),m=u*(hl[a]+h+12*d),g=(u*(hl[a]+h)%12+12)%12,y=Z3({step:a,alt:h,oct:d,dir:u});return{empty:!1,name:o,num:n,q:s,step:a,alt:h,dir:u,type:i,simple:c,semitones:m,chroma:g,coord:y,oct:d}}function S3(e,t){const[n,s=0]=e,a=n*7+s*12<0,r=t||a?[-n,-s,-1]:[n,s,1];return Mn(F3(r))}function bL(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function ML(e){const{step:t,alt:n,oct:s=0,dir:a}=e;if(!a)return"";const r=t+1+7*s,i=r===0?t+1:r,o=a<0?"-":"",u=A3[t]==="M"?"majorable":"perfectable";return o+i+xL(u,n)}function xL(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?ll("A",t):ll("d",e==="perfectable"?t:t+1)}var dl=(e,t)=>Array(Math.abs(t)+1).join(e),D3=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),ml=new Map,CL=e=>"CDEFGAB".charAt(e),kr=e=>e<0?dl("b",-e):dl("#",e),bu=e=>e[0]==="b"?-e.length:e.length;function Te(e){const t=JSON.stringify(e),n=ml.get(t);if(n)return n;const s=typeof e=="string"?XL(e):gu(e)?Te(wL(e)):yu(e)?Te(e.name):D3;return ml.set(t,s),s}var GL=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Mu(e){const t=GL.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function PL(e){return Te(F3(e))}var vL=(e,t)=>(e%t+t)%t,xi=[0,2,4,5,7,9,11];function XL(e){const t=Mu(e);if(t[0]===""||t[3]!=="")return D3;const n=t[0],s=t[1],a=t[2],r=(n.charCodeAt(0)+3)%7,i=bu(s),o=a.length?+a:void 0,u=Z3({step:r,alt:i,oct:o}),c=n+s+a,h=n+s,d=(xi[r]+i+120)%12,m=o===void 0?vL(xi[r]+i,12)-1188:xi[r]+i+12*(o+1),g=m>=0&&m<=127?m:null,y=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:s,alt:i,chroma:d,coord:u,freq:y,height:m,letter:n,midi:g,name:c,oct:o,pc:h,step:r}}function wL(e){const{step:t,alt:n,oct:s}=e,a=CL(t);if(!a)return"";const r=a+kr(n);return s||s===0?r+s:r}function cn(e,t){const n=Te(e),s=Array.isArray(t)?t:Mn(t).coord;if(n.empty||!s||s.length<2)return"";const a=n.coord,r=a.length===1?[a[0]+s[0]]:[a[0]+s[0],a[1]+s[1]];return PL(r).name}function L3(e,t){const n=e.length;return s=>{if(!t)return"";const a=s<0?(n- -s%n)%n:s%n,r=Math.floor(s/n),i=cn(t,[0,r]);return cn(i,e[a])}}function Rr(e,t){const n=Te(e),s=Te(t);if(n.empty||s.empty)return"";const a=n.coord,r=s.coord,i=r[0]-a[0],o=a.length===2&&r.length===2?r[1]-a[1]:-Math.floor(i*7/12),u=s.height===n.height&&s.midi!==null&&n.oct===s.oct&&n.step>s.step;return S3([i,o],u).name}var fl=(e,t)=>Array(t+1).join(e),ZL=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function E3(e){const t=ZL.exec(e);return t?[t[1],t[2],t[3]]:["","",""]}function mr(e){const[t,n,s]=E3(e);if(n==="")return"";let a=4;for(let i=0;i<s.length;i++)a+=s.charAt(i)===","?-1:1;const r=t[0]==="_"?t.replace(/_/g,"b"):t[0]==="^"?t.replace(/\^/g,"#"):"";return n.charCodeAt(0)>96?n.toUpperCase()+r+(a+1):n+r+a}function k3(e){const t=Te(e);if(t.empty||!t.oct&&t.oct!==0)return"";const{letter:n,acc:s,oct:a}=t,r=s[0]==="b"?s.replace(/b/g,"_"):s.replace(/#/g,"^"),i=a>4?n.toLowerCase():n,o=a===5?"":a>4?fl("'",a-5):fl(",",4-a);return r+i+o}function FL(e,t){return k3(cn(mr(e),t))}function AL(e,t){return Rr(mr(e),mr(t))}var SL={abcToScientificNotation:mr,scientificToAbcNotation:k3,tokenize:E3,transpose:FL,distance:AL};function DL(e,t){const n=[];for(;t--;n[t]=t+e);return n}function LL(e,t){const n=[];for(;t--;n[t]=e-t);return n}function EL(e,t){return e<t?DL(e,t-e+1):LL(e,e-t+1)}function kL(e,t){const n=t.length,s=(e%n+n)%n;return t.slice(s,n).concat(t.slice(0,s))}function RL(e){return e.filter(t=>t===0||t)}function R3(e){return e.map(t=>Te(t)).filter(t=>!t.empty).sort((t,n)=>t.height-n.height).map(t=>t.name)}function VL(e){return R3(e).filter((t,n,s)=>n===0||t!==s[n-1])}function BL(e,t=Math.random){let n,s,a=e.length;for(;a;)n=Math.floor(t()*a--),s=e[a],e[a]=e[n],e[n]=s;return e}function V3(e){return e.length===0?[[]]:V3(e.slice(1)).reduce((t,n)=>t.concat(e.map((s,a)=>{const r=n.slice();return r.splice(a,0,e[0]),r})),[])}const zL=Object.freeze(Object.defineProperty({__proto__:null,compact:RL,permutations:V3,range:EL,rotate:kL,shuffle:BL,sortedNoteNames:R3,sortedUniqNoteNames:VL},Symbol.toStringTag,{value:"Module"}));function WL(e,t){const n=[];for(;t--;n[t]=t+e);return n}function NL(e,t){const n=[];for(;t--;n[t]=e-t);return n}function Vr(e,t){return e<t?WL(e,t-e+1):NL(e,e-t+1)}function js(e,t){const n=t.length,s=(e%n+n)%n;return t.slice(s,n).concat(t.slice(0,s))}function xu(e){return e.filter(t=>t===0||t)}function TL(e,t=Math.random){let n,s,a=e.length;for(;a;)n=Math.floor(t()*a--),s=e[a],e[a]=e[n],e[n]=s;return e}function B3(e){return e.length===0?[[]]:B3(e.slice(1)).reduce((t,n)=>t.concat(e.map((s,a)=>{const r=n.slice();return r.splice(a,0,e[0]),r})),[])}var IL={compact:xu,permutations:B3,range:Vr,rotate:js,shuffle:TL},Jn={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Cu=e=>Number(e).toString(2).padStart(12,"0"),yl=e=>parseInt(e,2),YL=/^[01]{12}$/;function Gu(e){return YL.test(e)}var HL=e=>typeof e=="number"&&e>=0&&e<=4095,KL=e=>e&&Gu(e.chroma),gl={[Jn.chroma]:Jn};function xt(e){const t=Gu(e)?e:HL(e)?Cu(e):Array.isArray(e)?s7(e):KL(e)?e.chroma:Jn.chroma;return gl[t]=gl[t]||n7(t)}var _L=xt,z3=e=>xt(e).chroma,jL=e=>xt(e).intervals,UL=e=>xt(e).setNum,JL=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function OL(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(JL[n]);return t}function QL(e){return xt(e).intervals.map(t=>cn("C",t))}function qL(){return Vr(2048,4095).map(Cu)}function Pu(e,t=!0){const n=xt(e).chroma.split("");return xu(n.map((s,a)=>{const r=js(a,n);return t&&r[0]==="0"?null:r.join("")}))}function $L(e,t){return xt(e).setNum===xt(t).setNum}function Br(e){const t=xt(e).setNum;return n=>{const s=xt(n).setNum;return t&&t!==s&&(s&t)===s}}function zr(e){const t=xt(e).setNum;return n=>{const s=xt(n).setNum;return t&&t!==s&&(s|t)===s}}function W3(e){const t=xt(e);return n=>{const s=Te(n);return t&&!s.empty&&t.chroma.charAt(s.chroma)==="1"}}function e7(e){const t=W3(e);return n=>n.filter(t)}var N3={get:xt,chroma:z3,num:UL,intervals:jL,chromas:qL,isSupersetOf:zr,isSubsetOf:Br,isNoteIncludedIn:W3,isEqual:$L,filter:e7,modes:Pu,notes:QL,pcset:_L};function t7(e){const t=e.split("");return t.map((n,s)=>js(s,t).join(""))}function n7(e){const t=yl(e),n=t7(e).map(yl).filter(r=>r>=2048).sort()[0],s=Cu(n),a=OL(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:s,intervals:a}}function s7(e){if(e.length===0)return Jn.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let s=0;s<e.length;s++)t=Te(e[s]),t.empty&&(t=Mn(e[s])),t.empty||(n[t.chroma]=1);return n.join("")}var a7=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],r7=a7;({...Jn});var vu=[],tr={};function T3(){return vu.slice()}function i7(e,t,n){const s=u7(e),a={...xt(e),name:n||"",quality:s,intervals:e,aliases:t};vu.push(a),a.name&&(tr[a.name]=a),tr[a.setNum]=a,tr[a.chroma]=a,a.aliases.forEach(r=>o7(a,r))}function o7(e,t){tr[t]=e}function u7(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}r7.forEach(([e,t,n])=>i7(e.split(" "),n.split(" "),t));vu.sort((e,t)=>e.setNum-t.setNum);var c7=e=>{const t=e.reduce((n,s)=>{const a=Te(s).chroma;return a!==void 0&&(n[a]=n[a]||Te(s).name),n},{});return n=>t[n]};function l7(e,t={}){const n=e.map(s=>Te(s).pc).filter(s=>s);return Te.length===0?[]:g7(n,1,t).filter(s=>s.weight).sort((s,a)=>a.weight-s.weight).map(s=>s.name)}var Wr={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Nr=e=>t=>!!(t&e),p7=Nr(Wr.anyThirds),h7=Nr(Wr.perfectFifth),d7=Nr(Wr.anySeventh),m7=Nr(Wr.nonPerfectFifths);function f7(e){const t=parseInt(e.chroma,2);return p7(t)&&h7(t)&&d7(t)}function y7(e){const t=parseInt(e,2);return m7(t)?e:(t|16).toString(2)}function g7(e,t,n){const s=e[0],a=Te(s).chroma,r=c7(e),i=Pu(e,!1),o=[];return i.forEach((u,c)=>{const h=n.assumePerfectFifth&&y7(u);T3().filter(d=>n.assumePerfectFifth&&f7(d)?d.chroma===h:d.chroma===u).forEach(d=>{const m=d.aliases[0],g=r(c);c!==a?o.push({weight:.5*t,name:`${g}${m}/${s}`}):o.push({weight:1*t,name:`${g}${m}`})})}),o}function Ra(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}var I3=[0,2,4,5,7,9,11],Y3=({step:e,alt:t})=>(I3[e]+t+120)%12,Xu=({step:e,alt:t,oct:n,dir:s=1})=>s*(I3[e]+t+12*(n===void 0?-100:n)),H3=e=>{const t=Xu(e);return e.oct!==void 0&&t>=-12&&t<=115?t+12:null};function Tr(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var K3=[0,2,4,-1,1,3,5],_3=K3.map(e=>Math.floor(e*7/12));function Ir(e){const{step:t,alt:n,oct:s,dir:a=1}=e,r=K3[t]+7*n;if(s===void 0)return[a*r];const i=s-_3[t]-4*n;return[a*r,a*i]}var b7=[3,0,4,1,5,2,6];function Yr(e){const[t,n,s]=e,a=b7[M7(t)],r=Math.floor((t+1)/7);if(n===void 0)return{step:a,alt:r,dir:s};const i=n+4*r+_3[a];return{step:a,alt:r,oct:i,dir:s}}function M7(e){const t=(e+1)%7;return t<0?7+t:t}var bl=(e,t)=>Array(Math.abs(t)+1).join(e),to={empty:!0,name:"",acc:""},x7="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",C7="(AA|A|P|M|m|d|dd)([-+]?\\d+)",G7=new RegExp("^"+x7+"|"+C7+"$");function wu(e){const t=G7.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Ml={};function vt(e){return typeof e=="string"?Ml[e]||(Ml[e]=P7(e)):Tr(e)?vt(X7(e)):Ra(e)?vt(e.name):to}var xl=[0,2,4,5,7,9,11],j3="PMMPPMM";function P7(e){const t=wu(e);if(t[0]==="")return to;const n=+t[0],s=t[1],a=(Math.abs(n)-1)%7,r=j3[a];if(r==="M"&&s==="P")return to;const i=r==="M"?"majorable":"perfectable",o=""+n+s,u=n<0?-1:1,c=n===8||n===-8?n:u*(a+1),h=v7(i,s),d=Math.floor((Math.abs(n)-1)/7),m=u*(xl[a]+h+12*d),g=(u*(xl[a]+h)%12+12)%12,y=Ir({step:a,alt:h,oct:d,dir:u});return{empty:!1,name:o,num:n,q:s,step:a,alt:h,dir:u,type:i,simple:c,semitones:m,chroma:g,coord:y,oct:d}}function Va(e,t){const[n,s=0]=e,a=n*7+s*12<0,r=t||a?[-n,-s,-1]:[n,s,1];return vt(Yr(r))}function v7(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function X7(e){const{step:t,alt:n,oct:s=0,dir:a}=e;if(!a)return"";const r=t+1+7*s,i=r===0?t+1:r,o=a<0?"-":"",u=j3[t]==="M"?"majorable":"perfectable";return o+i+w7(u,n)}function w7(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?bl("A",t):bl("d",e==="perfectable"?t:t+1)}var Cl=(e,t)=>Array(Math.abs(t)+1).join(e),U3={empty:!0,name:"",pc:"",acc:""},Gl=new Map,Zu=e=>"CDEFGAB".charAt(e),Fu=e=>e<0?Cl("b",-e):Cl("#",e),Au=e=>e[0]==="b"?-e.length:e.length;function xn(e){const t=JSON.stringify(e),n=Gl.get(t);if(n)return n;const s=typeof e=="string"?A7(e):Tr(e)?xn(S7(e)):Ra(e)?xn(e.name):U3;return Gl.set(t,s),s}var Z7=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Hr(e){const t=Z7.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function Su(e){return xn(Yr(e))}var F7=(e,t)=>(e%t+t)%t,Ci=[0,2,4,5,7,9,11];function A7(e){const t=Hr(e);if(t[0]===""||t[3]!=="")return U3;const n=t[0],s=t[1],a=t[2],r=(n.charCodeAt(0)+3)%7,i=Au(s),o=a.length?+a:void 0,u=Ir({step:r,alt:i,oct:o}),c=n+s+a,h=n+s,d=(Ci[r]+i+120)%12,m=o===void 0?F7(Ci[r]+i,12)-1188:Ci[r]+i+12*(o+1),g=m>=0&&m<=127?m:null,y=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:s,alt:i,chroma:d,coord:u,freq:y,height:m,letter:n,midi:g,name:c,oct:o,pc:h,step:r}}function S7(e){const{step:t,alt:n,oct:s}=e,a=Zu(t);if(!a)return"";const r=a+Fu(n);return s||s===0?r+s:r}function zs(e,t){const n=xn(e),s=Array.isArray(t)?t:vt(t).coord;if(n.empty||!s||s.length<2)return"";const a=n.coord,r=a.length===1?[a[0]+s[0]]:[a[0]+s[0],a[1]+s[1]];return Su(r).name}function Kr(e,t){const n=e.length;return s=>{if(!t)return"";const a=s<0?(n- -s%n)%n:s%n,r=Math.floor(s/n),i=zs(t,[0,r]);return zs(i,e[a])}}function Du(e,t){const n=xn(e),s=xn(t);if(n.empty||s.empty)return"";const a=n.coord,r=s.coord,i=r[0]-a[0],o=a.length===2&&r.length===2?r[1]-a[1]:-Math.floor(i*7/12),u=s.height===n.height&&s.midi!==null&&n.midi!==null&&n.step>s.step;return Va([i,o],u).name}var J3=(e,t)=>Array(Math.abs(t)+1).join(e);function Us(e,t,n){return function(...s){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,s)}}var O3=Us("isNamed","isNamedPitch",Ra);const Q3=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:Au,altToAcc:Fu,chroma:Y3,coordToInterval:Va,coordToNote:Su,coordinates:Ir,deprecate:Us,distance:Du,fillStr:J3,height:Xu,interval:vt,isNamed:O3,isNamedPitch:Ra,isPitch:Tr,midi:H3,note:xn,pitch:Yr,stepToLetter:Zu,tokenizeInterval:wu,tokenizeNote:Hr,tonicIntervalsTransposer:Kr,transpose:zs},Symbol.toStringTag,{value:"Module"}));var D7=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],L7=D7,E7={...Jn,name:"",quality:"Unknown",intervals:[],aliases:[]},Js=[],us={};function Lu(e){return us[e]||E7}var k7=Us("ChordType.chordType","ChordType.get",Lu);function R7(){return Js.map(e=>e.name).filter(e=>e)}function V7(){return Js.map(e=>e.aliases[0]).filter(e=>e)}function B7(){return Object.keys(us)}function _r(){return Js.slice()}var z7=Us("ChordType.entries","ChordType.all",_r);function W7(){Js=[],us={}}function q3(e,t,n){const s=T7(e),a={...xt(e),name:n||"",quality:s,intervals:e,aliases:t};Js.push(a),a.name&&(us[a.name]=a),us[a.setNum]=a,us[a.chroma]=a,a.aliases.forEach(r=>N7(a,r))}function N7(e,t){us[t]=e}function T7(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}L7.forEach(([e,t,n])=>q3(e.split(" "),n.split(" "),t));Js.sort((e,t)=>e.setNum-t.setNum);var $3={names:R7,symbols:V7,get:Lu,all:_r,add:q3,removeAll:W7,keys:B7,entries:z7,chordType:k7},I7=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Y7=I7,H7={...Jn,intervals:[],aliases:[]},jr=[],cs={};function ex(){return jr.map(e=>e.name)}function Ur(e){return cs[e]||H7}var K7=Ur;function Os(){return jr.slice()}var _7=Os;function j7(){return Object.keys(cs)}function U7(){jr=[],cs={}}function tx(e,t,n=[]){const s={...xt(e),name:t,intervals:e,aliases:n};return jr.push(s),cs[s.name]=s,cs[s.setNum]=s,cs[s.chroma]=s,s.aliases.forEach(a=>J7(s,a)),s}function J7(e,t){cs[t]=e}Y7.forEach(([e,t,...n])=>tx(e.split(" "),t,n));var nx={names:ex,get:Ur,all:Os,add:tx,removeAll:U7,keys:j7,entries:_7,scaleType:K7},no={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Eu(e){const[t,n,s,a]=Hr(e);return t===""?["",e]:t==="A"&&a==="ug"?["","aug"]:[t+n,s+a]}function gs(e){if(e==="")return no;if(Array.isArray(e)&&e.length===2)return nr(e[1],e[0]);{const[t,n]=Eu(e),s=nr(n,t);return s.empty?nr(e):s}}function nr(e,t,n){const s=Lu(e),a=xn(t||""),r=xn(n||"");if(s.empty||t&&a.empty||n&&r.empty)return no;const i=Du(a.pc,r.pc),o=s.intervals.indexOf(i)+1;if(!r.empty&&!o)return no;const u=Array.from(s.intervals);for(let m=1;m<o;m++){const g=u[0][0],y=u[0][1],C=parseInt(g,10)+7;u.push(`${C}${y}`),u.shift()}const c=a.empty?[]:u.map(m=>zs(a,m));e=s.aliases.indexOf(e)!==-1?e:s.aliases[0];const h=`${a.empty?"":a.pc}${e}${r.empty||o<=1?"":"/"+r.pc}`,d=`${t?a.pc+" ":""}${s.name}${o>1&&n?" over "+r.pc:""}`;return{...s,name:d,symbol:h,type:s.name,root:r.name,intervals:u,rootDegree:o,tonic:a.name,notes:c}}var O7=Us("Chord.chord","Chord.get",gs);function Q7(e,t){const[n,s]=Eu(e);return n?zs(n,t)+s:e}function q7(e){const t=gs(e),n=zr(t.chroma);return Os().filter(s=>n(s.chroma)).map(s=>s.name)}function $7(e){const t=gs(e),n=zr(t.chroma);return _r().filter(s=>n(s.chroma)).map(s=>t.tonic+s.aliases[0])}function eE(e){const t=gs(e),n=Br(t.chroma);return _r().filter(s=>n(s.chroma)).map(s=>t.tonic+s.aliases[0])}function tE(e){const{intervals:t,tonic:n}=gs(e),s=Kr(t,n);return a=>a?s(a>0?a-1:a):""}function nE(e){const{intervals:t,tonic:n}=gs(e);return Kr(t,n)}var sE={getChord:nr,get:gs,detect:l7,chordScales:q7,extended:$7,reduced:eE,tokenize:Eu,transpose:Q7,degrees:tE,steps:nE,chord:O7},aE=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],rE=aE,Jr=[];rE.forEach(([e,t,n])=>dE(e,t,n));var iE={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function oE(){return Jr.reduce((e,t)=>(t.names.forEach(n=>e.push(n)),e),[])}function uE(){return Jr.map(e=>e.shorthand)}var cE=/^([^.]+)(\.*)$/;function ku(e){const[t,n,s]=cE.exec(e)||[],a=Jr.find(o=>o.shorthand===n||o.names.includes(n));if(!a)return iE;const r=mE(a.fraction,s.length),i=r[0]/r[1];return{...a,name:e,dots:s,value:i,fraction:r}}var lE=e=>ku(e).value,pE=e=>ku(e).fraction,hE={names:oE,shorthands:uE,get:ku,value:lE,fraction:pE};function dE(e,t,n){Jr.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:n})}function mE(e,t){const n=Math.pow(2,t);let s=e[0]*n,a=e[1]*n;const r=s;for(let i=0;i<t;i++)s+=r/Math.pow(2,i+1);for(;s%2===0&&a%2===0;)s/=2,a/=2;return[s,a]}function fE(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var sx=vt,yE=e=>vt(e).name,gE=e=>vt(e).semitones,bE=e=>vt(e).q,ME=e=>vt(e).num;function xE(e){const t=vt(e);return t.empty?"":t.simple+t.q}function CE(e){const t=vt(e);if(t.empty)return"";const n=(7-t.step)%7,s=t.type==="perfectable"?-t.alt:-(t.alt+1);return vt({step:n,alt:s,oct:t.oct,dir:t.dir}).name}var GE=[1,2,2,3,3,4,5,5,6,6,7,7],PE="P m M m M P d P m M m M".split(" ");function vE(e){const t=e<0?-1:1,n=Math.abs(e),s=n%12,a=Math.floor(n/12);return t*(GE[s]+7*a)+PE[s]}var XE=Rr,ax=rx((e,t)=>[e[0]+t[0],e[1]+t[1]]),wE=e=>t=>ax(e,t),ZE=rx((e,t)=>[e[0]-t[0],e[1]-t[1]]);function FE(e,t){const n=sx(e);if(n.empty)return"";const[s,a,r]=n.coord;return Va([s+t,a,r]).name}var hs={names:fE,get:sx,name:yE,num:ME,semitones:gE,quality:bE,fromSemitones:vE,distance:XE,invert:CE,simplify:xE,add:ax,addTo:wE,substract:ZE,transposeFifths:FE};function rx(e){return(t,n)=>{const s=vt(t).coord,a=vt(n).coord;if(s&&a){const r=e(s,a);return Va(r).name}}}function ix(e){return+e>=0&&+e<=127}function ox(e){if(ix(e))return+e;const t=Te(e);return t.empty?null:t.midi}function AE(e,t=440){return Math.pow(2,(e-69)/12)*t}var SE=Math.log(2),DE=Math.log(440);function Ru(e){const t=12*(Math.log(e)-DE)/SE+69;return Math.round(t*100)/100}var LE="C C# D D# E F F# G G# A A# B".split(" "),EE="C Db D Eb E F Gb G Ab A Bb B".split(" ");function es(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const n=(t.sharps===!0?LE:EE)[e%12];if(t.pitchClass)return n;const s=Math.floor(e/12)-1;return n+s}function Vu(e){return e%12}function kE(e){return e.split("").reduce((t,n,s)=>(s<12&&n==="1"&&t.push(s),t),[])}function RE(e){return e.map(Vu).sort((t,n)=>t-n).filter((t,n,s)=>n===0||t!==s[n-1])}function Bu(e){return Array.isArray(e)?RE(e):kE(e)}function VE(e){const t=Bu(e);return n=>{const s=Vu(n);for(let a=0;a<12;a++){if(t.includes(s+a))return n+a;if(t.includes(s-a))return n-a}}}function ux(e,t){const n=Bu(e),s=n.length;return a=>{const r=a<0?(s- -a%s)%s:a%s,i=Math.floor(a/s);return n[r]+i*12+t}}function BE(e,t){const n=ux(e,t);return s=>{if(s!==0)return n(s>0?s-1:s)}}var zE={chroma:Vu,freqToMidi:Ru,isMidi:ix,midiToFreq:AE,midiToNoteName:es,pcsetNearest:VE,pcset:Bu,pcsetDegrees:BE,pcsetSteps:ux,toMidi:ox},WE=["C","D","E","F","G","A","B"],cx=e=>e.name,lx=e=>e.map(Te).filter(t=>!t.empty);function NE(e){return e===void 0?WE.slice():Array.isArray(e)?lx(e).map(cx):[]}var ln=Te,TE=e=>ln(e).name,IE=e=>ln(e).pc,YE=e=>ln(e).acc,HE=e=>ln(e).oct,KE=e=>ln(e).midi,_E=e=>ln(e).freq,jE=e=>ln(e).chroma;function px(e){return es(e)}function UE(e){return es(Ru(e))}function JE(e){return es(Ru(e),{sharps:!0})}function OE(e){return es(e,{sharps:!0})}var QE=Rr,rn=cn,qE=cn,hx=e=>t=>rn(t,e),$E=hx,dx=e=>t=>rn(e,t),ek=dx;function fr(e,t){return rn(e,[t,0])}var tk=fr;function nk(e,t){return rn(e,[0,t])}var zu=(e,t)=>e.height-t.height,sk=(e,t)=>t.height-e.height;function mx(e,t){return t=t||zu,lx(e).sort(t).map(cx)}function fx(e){return mx(e,zu).filter((t,n,s)=>n===0||t!==s[n-1])}var ak=e=>{const t=ln(e);return t.empty?"":es(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function yx(e,t){const n=ln(e);if(n.empty)return"";const s=ln(t||es(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(s.empty||s.chroma!==n.chroma)return"";if(n.oct===void 0)return s.pc;const a=n.chroma-n.alt,r=s.chroma-s.alt,i=a>11||r<0?-1:a<0||r>11?1:0,o=n.oct+i;return s.pc+o}var fn={names:NE,get:ln,name:TE,pitchClass:IE,accidentals:YE,octave:HE,midi:KE,ascending:zu,descending:sk,distance:QE,sortedNames:mx,sortedUniqNames:fx,fromMidi:px,fromMidiSharps:OE,freq:_E,fromFreq:UE,fromFreqSharps:JE,chroma:jE,transpose:rn,tr:qE,transposeBy:hx,trBy:$E,transposeFrom:dx,trFrom:ek,transposeFifths:fr,transposeOctaves:nk,trFifths:tk,simplify:ak,enharmonic:yx},gx={empty:!0,name:"",chordType:""},Pl={};function On(e){return typeof e=="string"?Pl[e]||(Pl[e]=pk(e)):typeof e=="number"?On(Or[e]||""):gu(e)?ok(e):yu(e)?On(e.name):gx}var rk=On;function ik(e=!0){return(e?Or:lk).slice()}function ok(e){return On(kr(e.alt)+Or[e.step])}var uk=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function ck(e){return uk.exec(e)||["","","",""]}var bx="I II III IV V VI VII",Or=bx.split(" "),lk=bx.toLowerCase().split(" ");function pk(e){const[t,n,s,a]=ck(e);if(!s)return gx;const r=s.toUpperCase(),i=Or.indexOf(r),o=bu(n),u=1;return{empty:!1,name:t,roman:s,interval:Mn({step:i,alt:o,dir:u}).name,acc:n,chordType:a,alt:o,step:i,major:s===r,oct:0,dir:u}}var hk={names:ik,get:On,romanNumeral:rk},Mt=Object.freeze([]),Mx={type:"major",tonic:"",alteration:0,keySignature:""},sr={tonic:"",grades:Mt,intervals:Mt,scale:Mt,triads:Mt,chords:Mt,chordsHarmonicFunction:Mt,chordScales:Mt,secondaryDominants:Mt,secondaryDominantSupertonics:Mt,substituteDominantsMinorRelative:Mt,substituteDominants:Mt,substituteDominantSupertonics:Mt,secondaryDominantsMinorRelative:Mt},dk={...Mx,...sr,type:"major",minorRelative:"",scale:Mt,substituteDominants:Mt,secondaryDominantSupertonics:Mt,substituteDominantsMinorRelative:Mt},mk={...Mx,type:"minor",relativeMajor:"",natural:sr,harmonic:sr,melodic:sr},Gi=(e,t,n="")=>t.map((s,a)=>`${e[a]}${n}${s}`);function Qr(e,t,n,s,a){return r=>{const i=e.map(g=>On(g).interval||""),o=i.map(g=>rn(r,g)),u=Gi(o,n),c=o.map(g=>rn(g,"5P")).map(g=>o.includes(g)&&!u.includes(g+"7")?g+"7":""),h=vl(c,t),d=c.map(g=>{if(!g)return"";const y=g.slice(0,-1);return rn(y,"5d")+"7"}),m=vl(d,t);return{tonic:r,grades:e,intervals:i,scale:o,triads:Gi(o,t),chords:u,chordsHarmonicFunction:s.slice(),chordScales:Gi(o,a," "),secondaryDominants:c,secondaryDominantSupertonics:h,substituteDominants:d,substituteDominantSupertonics:m,secondaryDominantsMinorRelative:h,substituteDominantsMinorRelative:m}}}var vl=(e,t)=>e.map((n,s)=>{if(!n)return"";const a=n.slice(0,-1),r=rn(a,"5P");return t[s].endsWith("m")?r+"m7":r+"m7b5"}),xx=(e,t)=>{const n=Te(e),s=Te(t);return n.empty||s.empty?0:s.coord[0]-n.coord[0]},fk=Qr("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),yk=Qr("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),gk=Qr("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),bk=Qr("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function Mk(e){const t=Te(e).pc;if(!t)return dk;const n=fk(t),s=xx("C",t);return{...n,type:"major",minorRelative:rn(t,"-3m"),alteration:s,keySignature:kr(s)}}function xk(e){const t=Te(e).pc;if(!t)return mk;const n=xx("C",t)-3;return{type:"minor",tonic:t,relativeMajor:rn(t,"3m"),alteration:n,keySignature:kr(n),natural:yk(t),harmonic:gk(t),melodic:bk(t)}}function Ck(e){return typeof e=="number"?fr("C",e):typeof e=="string"&&/^b+|#+$/.test(e)?fr("C",bu(e)):null}var Gk={majorKey:Mk,majorTonicFromKeySignature:Ck,minorKey:xk},Pk=Mn;function vk(e){const t=Mn(e);return t.empty?"":t.simple+t.q}function Xk(e,t){const n=Pk(e);if(n.empty)return"";const[s,a,r]=n.coord;return S3([s+t,a,r]).name}var Wu=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Xl={...Jn,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Nu=Wu.map(Ak),so={};Nu.forEach(e=>{so[e.name]=e,e.aliases.forEach(t=>{so[t]=e})});function ds(e){return typeof e=="string"?so[e.toLowerCase()]||Xl:e&&e.name?ds(e.name):Xl}var wk=ds;function Cx(){return Nu.slice()}var Zk=Cx;function Fk(){return Nu.map(e=>e.name)}function Ak(e){const[t,n,s,a,r,i,o]=e,u=o?[o]:[],c=Number(n).toString(2);return{empty:!1,intervals:Ur(a).intervals,modeNum:t,chroma:c,normalized:c,name:a,setNum:n,alt:s,triad:r,seventh:i,aliases:u}}function Sk(e,t){return ds(e).intervals.map(n=>cn(t,n))}function Gx(e){return(t,n)=>{const s=ds(t);if(s.empty)return[];const a=js(s.modeNum,e),r=s.intervals.map(i=>cn(n,i));return a.map((i,o)=>r[o]+i)}}var Dk=Gx(Wu.map(e=>e[4])),Lk=Gx(Wu.map(e=>e[5]));function Px(e,t){const n=ds(t),s=ds(e);return n.empty||s.empty?"":vk(Xk("1P",s.alt-n.alt))}function Ek(e,t,n){return cn(n,Px(e,t))}var kk={get:ds,names:Fk,all:Cx,distance:Px,relativeTonic:Ek,notes:Sk,triads:Dk,seventhChords:Lk,entries:Zk,mode:wk};function Rk(e){const[t,n,s,a]=Mu(e);return t===""?Pi("",e):t==="A"&&a==="ug"?Pi("","aug"):Pi(t+n,s+a)}function Pi(e,t){const n=t.split("/");if(n.length===1)return[e,n[0],""];const[s,a,r,i]=Mu(n[1]);return s!==""&&r===""&&i===""?[e,n[0],s+a]:[e,t,""]}function Vk(e,t){return t.map(On).map(n=>cn(e,Mn(n))+n.chordType)}function Bk(e,t){return t.map(n=>{const[s,a]=Rk(n),r=Rr(e,s);return On(Mn(r)).name+a})}var zk={fromRomanNumerals:Vk,toRomanNumerals:Bk};function vx(e){const t=xu(e.map(n=>typeof n=="number"?n:ox(n)));return!e.length||t.length!==e.length?[]:t.reduce((n,s)=>{const a=n[n.length-1];return n.concat(Vr(a,s).slice(1))},[t[0]])}function Wk(e,t){return vx(e).map(n=>es(n,t))}var Nk={numeric:vx,chromatic:Wk},Tk={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Xx(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),n=Te(e.substring(0,t));if(n.empty){const a=Te(e);return a.empty?["",e]:[a.name,""]}const s=e.substring(n.name.length+1).toLowerCase();return[n.name,s.length?s:""]}var Ik=ex;function Cn(e){const t=Array.isArray(e)?e:Xx(e),n=Te(t[0]).name,s=Ur(t[1]);if(s.empty)return Tk;const a=s.name,r=n?s.intervals.map(o=>cn(n,o)):[],i=n?n+" "+a:a;return{...s,name:i,type:a,tonic:n,notes:r}}var Yk=Cn;function Hk(e,t={}){const n=z3(e),s=Te(t.tonic??e[0]??""),a=s.chroma;if(a===void 0)return[];const r=n.split("");r[a]="1";const i=js(a,r).join(""),o=Os().find(c=>c.chroma===i),u=[];return o&&u.push(s.name+" "+o.name),t.match==="exact"||wx(i).forEach(c=>{u.push(s.name+" "+c)}),u}function Kk(e){const t=Cn(e),n=Br(t.chroma);return T3().filter(s=>n(s.chroma)).map(s=>s.aliases[0])}function wx(e){const t=Gu(e)?e:Cn(e).chroma,n=zr(t);return Os().filter(s=>n(s.chroma)).map(s=>s.name)}function _k(e){const t=Br(Cn(e).chroma);return Os().filter(n=>t(n.chroma)).map(n=>n.name)}function Zx(e){const t=e.map(a=>Te(a).pc).filter(a=>a),n=t[0],s=fx(t);return js(s.indexOf(n),s)}function jk(e){const t=Cn(e);if(t.empty)return[];const n=t.tonic?t.notes:t.intervals;return Pu(t.chroma).map((s,a)=>{const r=Cn(s).name;return r?[n[a],r]:["",""]}).filter(s=>s[0])}function Uk(e){const t=Array.isArray(e)?Zx(e):Cn(e).notes,n=t.map(s=>Te(s).chroma);return s=>{const a=Te(typeof s=="number"?px(s):s),r=a.height;if(r===void 0)return;const i=r%12,o=n.indexOf(i);if(o!==-1)return yx(a.name,t[o])}}function Jk(e){const t=Uk(e);return(n,s)=>{const a=Te(n).height,r=Te(s).height;return a===void 0||r===void 0?[]:Vr(a,r).map(t).filter(i=>i)}}function Ok(e){const{intervals:t,tonic:n}=Cn(e),s=L3(t,n);return a=>a?s(a>0?a-1:a):""}function Qk(e){const{intervals:t,tonic:n}=Cn(e);return L3(t,n)}var yr={degrees:Ok,detect:Hk,extended:wx,get:Cn,modeNames:jk,names:Ik,rangeOf:Jk,reduced:_k,scaleChords:Kk,scaleNotes:Zx,steps:Qk,tokenize:Xx,scale:Yk},qk={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},$k=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function eR(){return $k.slice()}var tR=/^(\d*\d(?:\+\d)*)\/(\d+)$/,wl=new Map;function nR(e){const t=JSON.stringify(e),n=wl.get(t);if(n)return n;const s=rR(Tu(e));return wl.set(t,s),s}function Tu(e){if(typeof e=="string"){const[r,i,o]=tR.exec(e)||[];return Tu([i,o])}const[t,n]=e,s=+n;if(typeof t=="number")return[t,s];const a=t.split("+").map(r=>+r);return a.length===1?[a[0],s]:[a,s]}var sR={names:eR,parse:Tu,get:nR},aR=e=>Math.log(e)/Math.log(2)%1===0;function rR([e,t]){const n=Array.isArray(e)?e.reduce((o,u)=>o+u,0):e,s=t;if(n===0||s===0)return qk;const a=Array.isArray(e)?`${e.join("+")}/${t}`:`${e}/${t}`,r=Array.isArray(e)?e:[],i=s===4||s===2?"simple":s===8&&n%3===0?"compound":aR(s)?"irregular":"irrational";return{empty:!1,name:a,type:i,upper:n,lower:s,additive:r}}var iR=Q3,oR=N3,uR=$3,cR=nx;const lR=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:SL,Array:zL,Chord:sE,ChordDictionary:uR,ChordType:$3,Collection:IL,Core:Q3,DurationValue:hE,Interval:hs,Key:Gk,Midi:zE,Mode:kk,Note:fn,PcSet:oR,Pcset:N3,Progression:zk,Range:Nk,RomanNumeral:hk,Scale:yr,ScaleDictionary:cR,ScaleType:nx,TimeSignature:sR,Tonal:iR,accToAlt:Au,altToAcc:Fu,chroma:Y3,coordToInterval:Va,coordToNote:Su,coordinates:Ir,deprecate:Us,distance:Du,fillStr:J3,height:Xu,interval:vt,isNamed:O3,isNamedPitch:Ra,isPitch:Tr,midi:H3,note:xn,pitch:Yr,stepToLetter:Zu,tokenizeInterval:wu,tokenizeNote:Hr,tonicIntervalsTransposer:Kr,transpose:zs},Symbol.toStringTag,{value:"Module"})),pR=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],hR=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],dR=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],mR={b:-1,"#":1},fR=e=>{const[t,...n]=e.split("");return hR.indexOf(t.toLowerCase())+n.reduce((s,a)=>s+mR[a],0)};function yR(e){const t=(e||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return t?t.slice(1):[]}const ao=e=>e%12,Fx=e=>{let t=Number(e);return isNaN(t)?hs.semitones(e):t},ro=(e,t)=>{if(typeof e=="number")return e;if(typeof e=="string")return yn(e,t)},gR=(e,t=!1)=>{const n=Math.floor(e/12)-1;return(t?dR:pR)[e%12]+n};function bR(e,t,n=1){e=e.map(a=>typeof a=="string"?yn(a):a);const s=Math.floor(t/e.length)*n*12;return t=jt(t,e.length),e[t]+s}function Ax(e,t,n){let s=0,a=1/0;return t.forEach((r,i)=>{const o=Math.abs(r-e);(!n&&o<a||n&&o<=a)&&(s=i,a=o)}),s}let vi={};function MR(e,t,n,s){const[a,r]=yr.tokenize(t),i=ro(a),o=ao(i);if(!vi[r]){const{intervals:d}=yr.get(`C ${r}`);vi[r]=d.map(Fx)}const u=vi[r];if(!u)return null;let c=i;if(n){n=ro(n,3);const d=ao(n),m=jt(d-o,12),g=Ax(m,u,s);e=e+g,c=n-m}const h=Math.floor(e/u.length)*12;return e=jt(e,u.length),u[e]+c+h}let Zl={below:e=>e.slice(-1)[0],duck:e=>e.slice(-1)[0],above:e=>e[0],root:e=>e[0]};function xR({chord:e,dictionary:t,offset:n=0,n:s,mode:a="below",anchor:r="c5",octaves:i=1}){const[o,u]=yR(e),c=fR(o);r=ro(r?.note||r,4);const h=ao(r),d=t[u].map(E=>(typeof E=="string"?E.split(" "):E).map(Fx));let m,g,y=d.map((E,D)=>{const V=Zl[a](E),T=jt(h-V-c,12);return(m===void 0||T<m)&&(m=T,g=D),T});a==="root"&&(g=0);const C=Math.ceil(n/d.length)*12,X=jt(g+n,d.length),S=d[X],L=Zl[a](S),z=r-y[X]+C,A=S.map(E=>z-L+E);let Z=A.map(E=>gR(E));return a==="duck"&&(Z=Z.filter((E,D)=>A[D]!==r)),s!==void 0?[bR(Z,s,i)]:Z}const CR=e=>(e<=0?-1:1)+e*7+"P";function Iu(e){e=e.replaceAll(":"," ");const t=yr.get(e),{tonic:n,empty:s}=t;if(s&&ms(e)||s&&!n)throw new Error(`Scale name ${e} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(s)throw new Error(`Invalid scale name "${e}"`);return t}function GR(e,t){e=Math.ceil(e);let{intervals:n,tonic:s}=Iu(t);s=s||"C";const{pc:a,oct:r=3}=fn.get(s),i=Math.floor(e/n.length),o=jt(e,n.length),u=hs.add(n[o],CR(i));return fn.transpose(a+r,u)}function Fl(e,t,n){let{notes:s}=Iu(e);if(s=s.map(d=>fn.get(d).pc),t=Number(t),isNaN(t))throw new Error(`scale offset "${t}" not a number`);const{pc:a,oct:r=3}=fn.get(n),i=s.indexOf(a);if(i===-1)throw new Error(`note "${n}" is not in scale "${e}"`);let o=i,u=r,c=a;const h=Math.sign(t);for(;Math.abs(o-i)<Math.abs(t);){o+=h;const d=jt(o,s.length);h<0&&c[0]==="C"&&(u+=h),c=s[d],h>0&&c[0]==="C"&&(u+=h)}return c+u}const{transpose:PR,trans:vR}=k(["transpose","trans"],function(e,t){return t.withHap(n=>{const s=n.value.note??n.value;if(typeof s=="number"){let i;typeof e=="number"?i=e:typeof e=="string"&&(i=hs.semitones(e)||0);const o=s+i;return typeof n.value=="object"?n.withValue(()=>({...n.value,note:o})):n.withValue(()=>o)}if(typeof s!="string"||!ms(s))return yt(`[tonal] transpose: not a note "${s}"`,"warning"),n;const a=isNaN(Number(e))?String(e):hs.fromSemitones(e),r=fn.transpose(s,a);return typeof n.value=="object"?n.withValue(()=>({...n.value,note:r})):n.withValue(()=>r)})}),{scaleTranspose:XR,scaleTrans:wR,strans:ZR}=k(["scaleTranspose","scaleTrans","strans"],function(e,t){return t.withHap(n=>{if(!n.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof n.value=="object")return n.withValue(()=>({...n.value,note:Fl(n.context.scale,Number(e),n.value.note)}));if(typeof n.value!="string")throw new Error("can only use scaleTranspose with notes");return n.withValue(()=>Fl(n.context.scale,Number(e),n.value))})});function FR(e){let t=Number(e),n=0;if(isNaN(t)){e=String(e);const s=/^(-?\d+)([#bsf]*)$/.exec(e);if(!s)throw new Error(`invalid scale step "${e}", expected number or integer with optional # b suffixes`);t=Number(s[1]);const a=s[2]||"";n=co(a)}return[t,n]}let Xi={};function AR(e,t,n=!0){let s=typeof t=="string"?yn(t):t;if(Xi[e]===void 0){const{intervals:d,tonic:m}=Iu(e),{pc:g}=fn.get(m),y=d.concat("8P").map(X=>fn.transpose(g+"0",X)),C=y.map(yn);Xi[e]=[C,y]}const[a,r]=Xi[e],i=a[0],o=Math.floor((s-i)/12),u=a.map(d=>d+12*o),c=Ax(s,u,n),h=r[c];return fn.transpose(h,hs.fromSemitones(12*o))}const SR=k("scale",function(e,t){return Array.isArray(e)&&(e=e.flat().join(" ")),t.withHaps(n=>(n=n.map(s=>{let a=s.value;const r=typeof a=="object";a=r?a:{n:a};const{note:i,n:o,value:u,...c}=a,h=i??o??u;if(h===void 0)return yt(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(a).join(", ")}]`,"error"),s;let d;if(ms(h))d=AR(e,h),s.value={...c,note:d};else try{const[m,g]=FR(h);c.anchor?d=MR(m,e,c.anchor):d=GR(m,e),g!=0&&(d=fn.transpose(d,hs.fromSemitones(g)))}catch(m){wa(m,"tonal");return}return s.value=r?{...c,note:d}:d,s.setContext({...s.context,scale:e})}),fs(n)))},!0,!0);var Al={},$a={},ra={},Sl;function Sx(){if(Sl)return ra;Sl=1,ra.__esModule=!0,ra.getBestVoicing=void 0;function e(t){var n=t.chord,s=t.range,a=t.finder,r=t.picker,i=t.lastVoicing,o=a(n,s);return o.length?r(o,i):[]}return ra.getBestVoicing=e,ra}var ia={};const Dx=CD(lR);var oa={},Dl;function Lx(){if(Dl)return oa;Dl=1,oa.__esModule=!0,oa.tokenizeChord=void 0;function e(t){var n=(t||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return n?n.slice(1):[]}return oa.tokenizeChord=e,oa}var Ll;function DR(){if(Ll)return ia;Ll=1,ia.__esModule=!0,ia.voicingsInRange=void 0;var e=Dx,t=Ex(),n=Lx();function s(a,r,i){r===void 0&&(r=t.lefthand),i===void 0&&(i=["D3","A4"]);var o=(0,n.tokenizeChord)(a),u=o[0],c=o[1];if(!r[c])return[];var h=r[c].map(function(m){return m.split(" ")}),d=e.Range.chromatic(i);return h.reduce(function(m,g){var y=g.map(function(L){return e.Interval.substract(L,g[0])}),C=e.Note.transpose(u,g[0]),X=d.filter(function(L){return e.Note.chroma(L)===e.Note.chroma(C)}).filter(function(L){return e.Note.midi(e.Note.transpose(L,y[y.length-1]))<=e.Note.midi(i[1])}).map(function(L){return e.Note.enharmonic(L,C)}),S=X.map(function(L){return y.map(function(z){return e.Note.transpose(L,z)})});return m.concat(S)},[])}return ia.voicingsInRange=s,ia}var El;function Ex(){return El||(El=1,(function(e){var t=$a.__assign||function(){return t=Object.assign||function(o){for(var u,c=1,h=arguments.length;c<h;c++){u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])}return o},t.apply(this,arguments)},n=$a.__rest||function(o,u){var c={};for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&u.indexOf(h)<0&&(c[h]=o[h]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,h=Object.getOwnPropertySymbols(o);d<h.length;d++)u.indexOf(h[d])<0&&Object.prototype.propertyIsEnumerable.call(o,h[d])&&(c[h[d]]=o[h[d]]);return c};e.__esModule=!0,e.dictionaryVoicing=e.dictionaryVoicingFinder=e.triads=e.guidetones=e.lefthand=void 0;var s=Sx(),a=DR();e.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},e.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},e.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var r=function(o){return function(u,c){return(0,a.voicingsInRange)(u,o,c)}};e.dictionaryVoicingFinder=r;var i=function(o){var u=o.dictionary,c=o.range,h=n(o,["dictionary","range"]);return(0,s.getBestVoicing)(t(t({},h),{range:c,finder:(0,e.dictionaryVoicingFinder)(u)}))};e.dictionaryVoicing=i})($a)),$a}var ua={},kl;function LR(){if(kl)return ua;kl=1,ua.__esModule=!0,ua.minTopNoteDiff=void 0;var e=Dx;function t(n,s){if(!s)return n[0];var a=function(r){return Math.abs(e.Note.midi(s[s.length-1])-e.Note.midi(r[r.length-1]))};return n.reduce(function(r,i){return a(i)<a(r)?i:r},n[0])}return ua.minTopNoteDiff=t,ua}var Rl;function ER(){return Rl||(Rl=1,(function(e){e.__esModule=!0;var t=Ex(),n=LR(),s=Sx(),a=Lx();e.default={tokenizeChord:a.tokenizeChord,getBestVoicing:s.getBestVoicing,dictionaryVoicing:t.dictionaryVoicing,dictionaryVoicingFinder:t.dictionaryVoicingFinder,lefthand:t.lefthand,guidetones:t.guidetones,triads:t.triads,minTopNoteDiff:n.minTopNoteDiff}})(Al)),Al}var kR=ER();const Vl=y3(kR),rs={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},Ss={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:RR,minTopNoteDiff:VR}=Vl.default||Vl,BR={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},zR={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},WR={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},NR={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},Qs={lefthand:{dictionary:BR,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:WR,mode:"below",anchor:"a4"},guidetones:{dictionary:zR,mode:"above",anchor:"a4"},legacy:{dictionary:NR,mode:"below",anchor:"a4"}};let kx="ireal";const Rx=e=>kx=e,TR=(e,t)=>Vx(e,Qs[e].dictionary,t),Vx=(e,t,n=["F3","A4"])=>{Object.assign(Qs,{[e]:{dictionary:t,range:n}})},Yu=(e,t,n={})=>{Object.assign(Qs,{[e]:{dictionary:t,...n}})},IR=(e,t,n)=>{const{dictionary:s,range:a}=Qs[t];return RR({chord:e,dictionary:s,range:a,picker:VR,lastVoicing:n})};let ar;const YR=k("voicings",function(e,t){return t.fmap(n=>(ar=IR(n,e,ar),qe(...ar))).outerJoin()}),HR=k("rootNotes",function(e,t){return t.fmap(n=>{const s=(n.chord||n).match(/^([a-gA-G][b#]?).*$/)[1]+e;return n.chord?{note:s}:s})}),KR=k("voicing",function(e){return e.fmap(t=>{t=typeof t=="string"?{chord:t}:t;let{dictionary:n=kx,chord:s,anchor:a,offset:r,mode:i,n:o,octaves:u,...c}=t;n=typeof n=="string"?Qs[n]:{dictionary:n,mode:"below",anchor:"c5"};try{let h=xR({...n,chord:s,anchor:a,offset:r,mode:i,n:o,octaves:u});return qe(...h).note().set(c)}catch{return yt(`[voicing]: unknown chord "${s}"`),Ie}}).outerJoin()});function da(e,t,n){n=Array.isArray(n)?n:[n],n.forEach(s=>{s[t]=s[e]})}da("^","",[rs,Ss]);Object.keys(rs).forEach(e=>{if(e.includes("-")){let t=e.replace("-","m");da(e,t,[Ss,rs])}if(e.includes("^")){let t=e.replace("^","M");da(e,t,[Ss,rs])}if(e.includes("+")){let t=e.replace("+","aug");da(e,t,[Ss,rs])}});Yu("ireal",rs);Yu("ireal-ext",Ss);function _R(){ar=void 0,Rx("ireal")}const jR="@strudel/tonal",UR=Object.freeze(Object.defineProperty({__proto__:null,addVoicings:Vx,complex:Ss,packageName:jR,registerVoicings:Yu,resetVoicings:_R,rootNotes:HR,scale:SR,scaleTrans:wR,scaleTranspose:XR,setDefaultVoicings:Rx,setVoicingRange:TR,simple:rs,strans:ZR,trans:vR,transpose:PR,voicing:KR,voicingAlias:da,voicingRegistry:Qs,voicings:YR},Symbol.toStringTag,{value:"Module"}));async function JR(){const e=rr(rr,Promise.resolve().then(()=>MM),Promise.resolve().then(()=>ES),Promise.resolve().then(()=>UR),Promise.resolve().then(()=>wS),{hush:QR,evaluate:qR});await Promise.all([e,m2()])}let io,ls;function OR(e={}){l2(),e.miniAllStrings!==!1&&E2();const{prebake:t,...n}=e;return ls=v2({...n,transpiler:WD}),io=(async()=>(await JR(),await t?.(),ls))(),ir(()=>ls.scheduler.now()),io}window.initStrudel=OR;H.prototype.play=function(){if(!ls)throw new Error(".play: no repl found. Have you called initStrudel?");return io.then(()=>{ls.setPattern(this,!0)}),this};function QR(){ls.stop()}async function qR(e,t=!0){return ls.evaluate(e,t)}export{Ol as ClockCollator,Fb as Cyclist,$o as DEFAULT_MAX_POLYPHONY,Pb as FXr,Gb as FXrel,Cb as FXrelease,U as Fraction,Qe as Hap,H as Pattern,FS as StartRules,Ls as State,ps as SyntaxError,ot as TimeSpan,Yi as Warpmode,To as __chooseWith,Wo as _brandBy,lp as _fitslice,No as _irand,Io as _keyDown,pp as _match,jt as _mod,Po as _morph,dp as _polymeterListSteps,Si as _retime,Di as _slices,bh as accelerate,Tf as activeLabel,jg as ad,MC as add,Vx as addVoicings,_g as adsr,WA as aliasBank,AF as almostAlways,FF as almostNever,DF as always,Ph as amp,Gt as analysers,os as analysersData,Bm as analyze,fy as anchor,zC as and,mG as apply,Pa as applyFM,dn as applyGainCurve,cp as applyN,Ti as applyParameterModulators,Jg as ar,q9 as arp,Q9 as arpWith,aC as arrange,fb as as,jP as asym,Xh as att,vh as attack,Wl as averageArray,WF as backgroundImage,XC as band,_m as bandf,Jm as bandq,Rm as bank,Ul as base64ToUnicode,M0 as bbexpr,C0 as bbst,TP as beat,Qm as begin,yF as berlin,ty as bgain,QZ as binary,qZ as binaryL,cM as binaryN,lM as binaryNL,lC as bind,bg as binshift,xG as bite,uv as bjork,Fo as bjorklund,FC as blshift,Mb as bmod,wC as bor,Um as bp,e1 as bpa,$0 as bpattack,i1 as bpd,R1 as bpdc,r1 as bpdecay,D1 as bpdepth,E1 as bpdepthfreq,L1 as bpdepthfrequency,U0 as bpe,j0 as bpenv,jm as bpf,Om as bpq,b1 as bpr,A1 as bprate,g1 as bprelease,h1 as bps,k1 as bpshape,V1 as bpskew,p1 as bpsustain,S1 as bpsync,SG as brak,rF as brand,aF as brandBy,AC as brshift,$f as bus,ey as busgain,ZC as bxor,oP as bypass,b0 as byteBeatExpression,x0 as byteBeatStartTime,U9 as calculateSteps,fa as cat,tb as ccn,nb as ccv,YC as ceil,P0 as ch,B0 as channel,G0 as channels,OP as chebyshev,mM as choose,fM as chooseCycles,oF as chooseIn,Xr as chooseInWith,uF as chooseOut,vr as chooseWith,DP as chop,hy as chord,Vm as chorus,OG as chunk,$G as chunkBack,iP as chunkBackInto,aP as chunkInto,eP as chunkback,rP as chunkbackinto,sP as chunkinto,br as clamp,BM as cleanupOnEnd,NF as cleanupUi,Sg as clip,r0 as coarse,N9 as code2hash,Hg as color,Kg as colour,fg as comb,Ss as complex,F9 as compose,OC as compress,QC as compressSpan,Wy as compressor,Iy as compressorAttack,Ny as compressorKnee,Ty as compressorRatio,Yy as compressorRelease,qC as compressspan,NM as connectBusModulator,WM as connectEnvelope,zM as connectLFO,p2 as connectToDestination,A9 as constant,Mp as contract,eb as control,av as controls,SZ as cosine,DZ as cosine2,fG as cpm,Ag as cps,Zb as createClock,DM as createFilter,Cr as createParam,wo as createParams,a0 as crush,N0 as ctf,sb as ctlNum,Kf as ctranspose,KP as cubic,Xe as curry,Rg as curve,z0 as cut,W0 as cutoff,Zi as cycleToSeconds,kF as cyclesPer,Nm as dec,Wm as decay,JR as defaultPrebake,MF as degrade,bF as degradeBy,gF as degradeByWith,Yf as degree,rf as delay,uf as delayfb,of as delayfeedback,lf as delayspeed,mf as delaysync,hf as delayt,pf as delaytime,Vg as deltaSlide,gf as det,yf as detune,cf as dfb,my as dict,dy as dictionary,_P as diode,Vy as dist,Ry as distort,jo as distortionAlgorithms,zy as distorttype,By as distortvol,GC as div,af as djf,nS as dough,x2 as doughTrigger,C2 as doughsamples,F2 as drawFrequencyScope,$l as drawLine,Z2 as drawTimeScope,d0 as drive,yp as drop,xf as dry,LM as drywet,Ug as ds,b2 as dspWorklet,df as dt,m0 as duck,g0 as duckattack,f0 as duckdepth,y0 as duckonset,Eg as dur,Lg as duration,yG as early,IG as echo,zG as echoWith,WG as echowith,Ga as effectSend,mv as eish,qm as end,mg as enhance,bb as env,kC as eq,RC as eqt,ov as euclid,pv as euclidLegato,hv as euclidLegatoRot,lv as euclidRot,dv as euclidish,cv as euclidrot,rr as evalScope,qR as evaluate,dG as every,bp as expand,Jy as expression,gp as extend,Pf as fadeInTime,Gf as fadeOutTime,Cf as fadeTime,x1 as fanchor,rG as fast,nP as fastChunk,$C as fastGap,Xt as fastcat,tP as fastchunk,eG as fastgap,zm as fft,hP as filter,dP as filterWhen,hG as firstOf,VP as fit,Ln as flatten,IC as floor,Hh as fm,Kh as fm1,_h as fm2,jh as fm3,Uh as fm4,Jh as fm5,Oh as fm6,Qh as fm7,qh as fm8,gd as fmatt,bd as fmatt1,Md as fmatt2,xd as fmatt3,Cd as fmatt4,Gd as fmatt5,Pd as fmatt6,vd as fmatt7,Xd as fmatt8,ud as fmattack,cd as fmattack1,ld as fmattack2,pd as fmattack3,hd as fmattack4,dd as fmattack5,md as fmattack6,fd as fmattack7,yd as fmattack8,Hd as fmdec,Kd as fmdec1,_d as fmdec2,jd as fmdec3,Ud as fmdec4,Jd as fmdec5,Od as fmdec6,Qd as fmdec7,qd as fmdec8,Rd as fmdecay,Vd as fmdecay1,Bd as fmdecay2,zd as fmdecay3,Wd as fmdecay4,Nd as fmdecay5,Td as fmdecay6,Id as fmdecay7,Yd as fmdecay8,$h as fmenv,ed as fmenv1,td as fmenv2,nd as fmenv3,sd as fmenv4,ad as fmenv5,rd as fmenv6,id as fmenv7,od as fmenv8,wh as fmh,Zh as fmh1,Fh as fmh2,Ah as fmh3,Sh as fmh4,Dh as fmh5,Lh as fmh6,Eh as fmh7,kh as fmh8,Rh as fmi,Vh as fmi1,Bh as fmi2,zh as fmi3,Wh as fmi4,Nh as fmi5,Th as fmi6,Ih as fmi7,Yh as fmi8,wm as fmrel,Zm as fmrel1,Fm as fmrel2,Am as fmrel3,Sm as fmrel4,Dm as fmrel5,Lm as fmrel6,Em as fmrel7,km as fmrel8,gm as fmrelease,bm as fmrelease1,Mm as fmrelease2,xm as fmrelease3,Cm as fmrelease4,Gm as fmrelease5,Pm as fmrelease6,vm as fmrelease7,Xm as fmrelease8,um as fmsus,cm as fmsus1,lm as fmsus2,pm as fmsus3,hm as fmsus4,dm as fmsus5,mm as fmsus6,fm as fmsus7,ym as fmsus8,$d as fmsustain,em as fmsustain1,tm as fmsustain2,nm as fmsustain3,sm as fmsustain4,am as fmsustain5,rm as fmsustain6,im as fmsustain7,om as fmsustain8,wd as fmwave,Zd as fmwave1,Fd as fmwave2,Ad as fmwave3,Sd as fmwave4,Dd as fmwave5,Ld as fmwave6,Ed as fmwave7,kd as fmwave8,tG as focus,nG as focusSpan,sG as focusspan,UP as fold,S9 as fractionalArgs,Cg as frameRate,Gg as frames,cg as freeze,vf as freq,lo as freqToMidi,KC as fromBipolar,Qy as fshift,qy as fshiftnote,$y as fshiftphase,M1 as ftype,NC as func,vb as fxr,Ch as gain,Ke as gainNode,Ws as gap,Bf as gat,Vf as gate,Wt as getADSRValues,co as getAccidentalsOffset,h2 as getAnalyserById,Fr as getAnalyzerData,Ce as getAudioContext,TF as getAudioContextCurrentTime,r2 as getAudioDevices,GA as getCachedBuffer,SM as getCompressor,ga as getControlName,Dv as getCps,ql as getCurrentKeyboardState,at as getDefaultValue,VM as getDistortion,lA as getDistortionAlgorithm,AM as getEnvelope,P9 as getEventOffsetMs,zl as getFreq,Tl as getFrequency,_n as getFrequencyFromValue,kv as getIsStarted,ru as getLeafLocation,iu as getLeafLocations,L2 as getLeaves,Ts as getLfo,vA as getLoadedBuffer,y2 as getOscillator,zt as getParamADSR,_o as getParamLfo,Lv as getPattern,I9 as getPerformanceTimeSeconds,ks as getPitchEnvelope,Z9 as getPlayableNoteValue,Un as getRandsAtTime,IM as getSampleBuffer,YM as getSampleBufferSource,TM as getSampleInfo,as as getSound,w9 as getSoundIndex,Zr as getSuperdoughAudioController,ki as getTime,sM as getTrigger,Ev as getTriggerFunc,Rs as getVibratoOscillator,$D as getWidgetID,Ft as getWorklet,g2 as getZZFX,yP as grow,DC as gt,EC as gte,DS as h,HP as hard,_f as harmonic,T9 as hash2code,Mg as hbrick,Q1 as hcutoff,Km as hold,Pg as hours,$1 as hp,q0 as hpa,Q0 as hpattack,a1 as hpd,Y1 as hpdc,s1 as hpdecay,W1 as hpdepth,T1 as hpdepthfreq,N1 as hpdepthfrequency,_0 as hpe,K0 as hpenv,q1 as hpf,tf as hpq,y1 as hpr,B1 as hprate,f1 as hprelease,l1 as hps,I1 as hpshape,H1 as hpskew,c1 as hpsustain,z1 as hpsync,ef as hresonance,pP as hsl,lP as hsla,iG as hurry,QR as hush,Zs as id,dg as imag,Xv as inhabit,Zv as inhabitmod,au as initAudio,l2 as initAudioOnFirstClick,OR as initStrudel,pC as innerBind,cG as inside,ZG as inv,wG as invert,wy as ir,iF as irand,Ay as irbegin,Zy as iresponse,Fy as irspeed,Zp as isControlName,ms as isNote,M9 as isNoteWithOctave,go as isPattern,Pr as isaw,Ro as isaw2,_G as iter,jG as iterBack,UG as iterback,RZ as itri,VZ as itri2,BG as jux,RG as juxBy,VG as juxby,ng as kcutoff,gC as keep,bC as keepif,Ql as keyAlias,EF as keyDown,tg as krush,If as label,pG as lastOf,op as late,xg as lbrick,Dg as legato,zf as leslie,gb as lfo,CG as linger,Za as listRange,cr as loadBuffer,c2 as loadWorklets,ff as lock,oo as logKey,$m as loop,kP as loopAt,BP as loopAtCps,e0 as loopBegin,n0 as loopEnd,RP as loopat,zP as loopatcps,t0 as loopb,s0 as loope,I0 as lp,O0 as lpa,J0 as lpattack,n1 as lpd,Z1 as lpdc,t1 as lpdecay,P1 as lpdepth,X1 as lpdepthfreq,v1 as lpdepthfrequency,H0 as lpe,Y0 as lpenv,T0 as lpf,sf as lpq,m1 as lpr,C1 as lprate,d1 as lprelease,u1 as lps,w1 as lpshape,F1 as lpskew,o1 as lpsustain,G1 as lpsync,Wf as lrate,Nf as lsize,SC as lt,LC as lte,SS as m,ho as mapArgs,iC as mask,eu as maxPolyphony,X9 as midi2note,Ds as midiToFreq,lb as midibend,Og as midichan,$g as midicmd,Qg as midimap,qg as midiport,pb as miditouch,ou as mini,Da as mini2ast,E2 as miniAllStrings,LS as minify,vg as minutes,PC as mod,by as mode,IP as morph,TZ as mouseX,WZ as mouseY,NZ as mousex,zZ as mousey,Hf as mtranspose,CC as mul,tu as multiChannelOrbits,yh as n,Nl as nanFallback,VC as ne,BC as net,SF as never,U1 as noise,Ko as noises,gh as note,yn as noteToMidi,on as nothing,ab as nrpnn,rb as nrpv,Jf as nudge,Bt as numeralArgs,Jl as objectMap,Qf as oct,Of as octave,Uf as octaveR,gy as octaves,sg as octer,ag as octersub,rg as octersubsub,AG as off,yy as offset,wF as often,OM as onTriggerSample,t2 as onTriggerSynth,bn as onceEnded,WC as or,qf as orbit,db as oschost,mb as oscport,hC as outerBind,lG as outside,ny as overgain,sy as overshape,hp as pace,jR as packageName,Kl as pairs,kG as palindrome,ay as pan,Rf as panchor,uy as panorient,ry as panspan,iy as pansplay,oy as panwidth,vo as parray,S2 as parse,Hl as parseFractional,po as parseNumeral,QP as partials,wf as patt,Xf as pattack,Is as patternifyAST,kf as pcurve,Ff as pdec,Zf as pdecay,Ef as penv,bM as per,RF as perCycle,fF as perlin,VF as perx,F0 as ph,V0 as phasdp,A0 as phaser,L0 as phasercenter,k0 as phaserdepth,Z0 as phaserrate,S0 as phasersweep,qP as phases,E0 as phc,R0 as phd,D0 as phs,Db as pick,gv as pickF,Mv as pickOut,Pv as pickReset,Cv as pickRestart,wv as pickSqueeze,Lb as pickmod,bv as pickmodF,xv as pickmodOut,vv as pickmodReset,Gv as pickmodRestart,Fv as pickmodSqueeze,Yl as pipe,Bg as pitchJump,zg as pitchJumpTime,aG as ply,KG as plyForEach,HG as plyWith,nC as pm,fC as polyBind,hb as polyTouch,Mr as polymeter,eC as polyrhythm,Gh as postgain,vC as pow,tC as pr,Lf as prel,Df as prelease,EG as press,LG as pressBy,jM as processSampleMap,ib as progNum,Sf as psus,Af as psustain,_e as pure,v0 as pw,X0 as pwrate,w0 as pwsweep,At as rand,sF as rand2,$Z as randL,cF as randcat,pM as randrun,_C as range,UC as range2,jC as rangex,ZF as rarely,JC as ratio,Py as rdim,hg as real,WP as ref,k as register,v as registerControl,uV as registerLanguage,Gn as registerMultiControl,QM as registerSampleSource,XA as registerSamplesPrefix,nn as registerSound,m2 as registerSynthSounds,Yu as registerVoicings,qo as registerWaveTable,oV as registerWidgetType,u2 as registerWorklet,tS as registerZZFXSounds,j as reify,Hm as rel,Ym as release,De as releaseAudioNode,fs as removeUndefineds,pS as renderPatternAudio,JG as repeatCycles,FZ as repl,fP as replicate,i2 as resetDefaultValues,YA as resetDefaults,d2 as resetGlobalEffects,_A as resetLoadedSounds,$M as resetSeenKeys,_R as resetVoicings,Ab as reset_state,Sb as reset_timelines,nf as resonance,up as rev,HM as reverseBuffer,DG as revv,Xy as rfade,cP as rib,uP as ribbon,ig as ring,ug as ringdf,og as ringf,Cy as rlp,My as room,Gy as roomdim,vy as roomfade,xy as roomlp,Sy as roomsize,HR as rootNotes,Il as rotate,TC as round,Ey as rsize,uM as run,Fp as s,PP as s_add,MP as s_alt,bP as s_cat,ZP as s_contract,XP as s_expand,wP as s_extend,xP as s_polymeter,vP as s_sub,CP as s_taper,GP as s_taperlist,FP as s_tour,AP as s_zip,JM as samples,Fa as saw,ko as saw2,SR as scale,wR as scaleTrans,XR as scaleTranspose,eA as scheduleAtTime,gg as scram,tF as scramble,yb as scrub,Xg as seconds,nF as seed,PG as seg,GG as segment,ly as semitone,ip as seq,rC as seqPLoop,un as sequence,np as sequenceP,yC as set,ur as setAudioContext,Bb as setCpsFunc,IA as setDefault,xM as setDefaultAudioContext,su as setDefaultValue,HA as setDefaultValues,Rx as setDefaultVoicings,BA as setGainCurve,Nb as setIsStarted,GM as setLogger,n2 as setMaxPolyphony,s2 as setMultiChannelOrbits,zb as setPattern,tp as setStringParser,ji as setSuperdoughAudioController,ir as setTime,Wb as setTriggerFunc,KA as setVersionDefaults,TR as setVoicingRange,ky as shape,Cp as shrink,xp as shrinklist,eF as shuffle,St as signal,Ie as silence,rs as simple,aM as sine,Vo as sine2,JP as sinefold,Dy as size,Xp as slice,cy as slide,oG as slow,qG as slowChunk,Qn as slowcat,Mo as slowcatPrime,QG as slowchunk,yg as smear,YP as soft,B9 as sol2note,XF as someCycles,vF as someCyclesBy,PF as sometimes,GF as sometimesBy,wg as songPtr,Ap as sound,NA as soundAlias,an as soundMap,mh as source,uG as sparsity,zF as speak,Xo as speed,EP as splice,mo as splitAt,Mf as spread,rM as square,LZ as square2,Av as squeeze,dC as squeezeBind,_y as squiz,fh as src,qe as stack,sC as stackBy,rp as stackCentre,sp as stackLeft,ap as stackRight,AZ as steady,mC as stepBind,mp as stepalt,kt as stepcat,SP as steps,jf as stepsPerOctave,ZR as strans,Hy as stretch,LP as striate,fo as stringifyValues,oC as struct,yo as strudelScope,YG as stut,NG as stutWith,TG as stutwith,xC as sub,Ar as superdough,OA as superdoughTrigger,uC as superimpose,Im as sus,Tm as sustain,Oy as sustainpedal,XG as swing,vG as swingBy,ob as sysex,cb as sysexdata,ub as sysexid,Ly as sz,VA as tables,fp as take,BZ as time,Go as timeCat,gP as timecat,fv as timeline,HC as toBipolar,Bl as tokenizeNote,Gp as tour,vR as trans,xb as transient,WD as transpiler,PR as transpose,o0 as trem,i0 as tremolo,c0 as tremolodepth,p0 as tremolophase,h0 as tremoloshape,l0 as tremoloskew,u0 as tremolosync,EZ as tri,kZ as tri2,eg as triode,pg as tsdelay,Zg as uid,CF as undegrade,xF as undegradeBy,jl as unicodeToBase64,z9 as uniq,W9 as uniqsort,_l as uniqsortr,bf as unison,Ky as unit,OZ as useRNG,j1 as v,Fg as val,G9 as valueToMidi,xh as vel,Mh as velocity,K1 as vib,J1 as vibmod,_1 as vibrato,O1 as vmod,py as voice,KR as voicing,da as voicingAlias,Qs as voicingRegistry,YR as voicings,jy as vowel,jp as warp,Op as warpatt,Jp as warpattack,ih as warpdc,qp as warpdec,Qp as warpdecay,ah as warpdepth,hh as warpenv,uh as warpmode,sh as warprate,nh as warprel,th as warprelease,rh as warpshape,oh as warpskew,eh as warpsus,$p as warpsustain,dh as warpsync,f2 as waveformN,Uy as waveloss,ph as wavetablePhaseRand,Dp as wavetablePosition,Up as wavetableWarp,ch as wavetableWarpMode,pF as wchoose,gM as wchooseCycles,mn as webAudioTimeout,P2 as webaudioOutput,v2 as webaudioRepl,FG as when,LF as whenKey,dM as withSeed,cC as withValue,mP as within,ev as worklet,hF as wrandcat,Sp as wt,kp as wtatt,Ep as wtattack,Kp as wtdc,Vp as wtdec,Rp as wtdecay,Yp as wtdepth,Lp as wtenv,lh as wtphaserand,Tp as wtrate,Np as wtrel,Wp as wtrelease,Hp as wtshape,_p as wtskew,zp as wtsus,Bp as wtsustain,Ip as wtsync,wp as xfade,lg as xsdelay,Tg as zcrush,Ig as zdelay,Pp as zip,gr as zipWith,Ng as zmod,Wg as znoise,gG as zoom,bG as zoomArc,MG as zoomarc,kg as zrand,Yg as zzfx};
